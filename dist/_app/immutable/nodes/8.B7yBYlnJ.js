import{s as Ee,e as F,a as N,c as T,b as V,f as g,g as J,p as D,i as w,h as q,k as me,Z as Et,n as Z,t as Q,d as X,j as Y,G as K,H as Xe,V as Ct,x as we,y as Ye,M as oe,_ as It,L as St,N as ie,K as Dt,E as ee,z as yt,l as pe,O as ke,R as xe}from"../chunks/scheduler.D1PieneV.js";import{S as Te,i as Ve,c as E,a as C,m as I,g as U,b as p,e as G,t as c,d as S,f as ue}from"../chunks/index.C3mFgbJp.js";import{b as Bt,s as Je,h as Ie,e as te}from"../chunks/helpers.KbyKTsoX.js";import{t as R,l as et,f as Ft,g as _e,a as $e}from"../chunks/page.C1MkfPZM.js";import{A as Tt,p as Se}from"../chunks/pocketbase.jMCA8Re0.js";import{A as tt}from"../chunks/AppBottomMenu.CGULRXmT.js";import{c as fe,z as Vt,F as ge,C as de,a as he,b as be}from"../chunks/zod.CDjjRtct.js";import{I as lt}from"../chunks/input.u56xhq2v.js";import{A as rt,C as Nt,a as Jt,F as jt,T as nt,b as st,c as ot}from"../chunks/textarea.m35pBuRb.js";import"../chunks/entry.CZGxI5J9.js";import{z as ne,s as qt}from"../chunks/memoize.w294uzKF.js";import{d as zt}from"../chunks/index.CZSe99br.js";import{B as Ne}from"../chunks/button.DHfMyFex.js";import{C as Ot}from"../chunks/CaretLeft.VvK38PIW.js";import{I as At}from"../chunks/icon-folder.CBGieXVr.js";import{I as Mt,a as Ht,b as Lt,c as je}from"../chunks/icon-steps.dGSELuxl.js";import{S as Pt}from"../chunks/Share.fR5STS9B.js";function Rt(o){let t,r;return t=new Ot({props:{class:"h-4 w-4 rounded-full"}}),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p:Z,i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ut(o){let t,r;return t=new Ne({props:{type:"submit",decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[Kt]},$$scope:{ctx:o}}}),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l&264&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Gt(o){let t,r;return t=new Ne({props:{decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[Wt]},$$scope:{ctx:o}}}),t.$on("click",o[5]),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l&264&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Kt(o){let t=o[3]("default.page.fights.form.general.next")+"",r,e,l,n;return l=new rt({props:{class:"h-3 w-3"}}),{c(){r=Q(t),e=N(),E(l.$$.fragment)},l(s){r=X(s,t),e=J(s),C(l.$$.fragment,s)},m(s,i){w(s,r,i),w(s,e,i),I(l,s,i),n=!0},p(s,i){(!n||i&8)&&t!==(t=s[3]("default.page.fights.form.general.next")+"")&&Y(r,t)},i(s){n||(c(l.$$.fragment,s),n=!0)},o(s){p(l.$$.fragment,s),n=!1},d(s){s&&(g(r),g(e)),S(l,s)}}}function Wt(o){let t=o[3]("default.page.fights.form.general.checkJudgement")+"",r,e,l,n;return l=new rt({props:{class:"h-3 w-3"}}),{c(){r=Q(t),e=N(),E(l.$$.fragment)},l(s){r=X(s,t),e=J(s),C(l.$$.fragment,s)},m(s,i){w(s,r,i),w(s,e,i),I(l,s,i),n=!0},p(s,i){(!n||i&8)&&t!==(t=s[3]("default.page.fights.form.general.checkJudgement")+"")&&Y(r,t)},i(s){n||(c(l.$$.fragment,s),n=!0)},o(s){p(l.$$.fragment,s),n=!1},d(s){s&&(g(r),g(e)),S(l,s)}}}function Zt(o){let t,r,e,l,n,s,i,f,a;e=new Ne({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[Rt]},$$scope:{ctx:o}}}),e.$on("click",o[4]);const u=[Gt,Ut],_=[];function d(m,b){return m[1]?0:1}return s=d(o),i=_[s]=u[s](o),{c(){t=F("div"),r=F("div"),E(e.$$.fragment),n=N(),i.c(),this.h()},l(m){t=T(m,"DIV",{class:!0});var b=V(t);r=T(b,"DIV",{class:!0});var $=V(r);C(e.$$.fragment,$),$.forEach(g),n=J(b),i.l(b),b.forEach(g),this.h()},h(){D(r,"class",l=(o[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"),D(t,"class",f="flex justify-between "+o[2])},m(m,b){w(m,t,b),q(t,r),I(e,r,null),q(t,n),_[s].m(t,null),a=!0},p(m,[b]){const $={};b&256&&($.$$scope={dirty:b,ctx:m}),e.$set($),(!a||b&1&&l!==(l=(m[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"))&&D(r,"class",l);let v=s;s=d(m),s===v?_[s].p(m,b):(U(),p(_[v],1,1,()=>{_[v]=null}),G(),i=_[s],i?i.p(m,b):(i=_[s]=u[s](m),i.c()),c(i,1),i.m(t,null)),(!a||b&4&&f!==(f="flex justify-between "+m[2]))&&D(t,"class",f)},i(m){a||(c(e.$$.fragment,m),c(i),a=!0)},o(m){p(e.$$.fragment,m),p(i),a=!1},d(m){m&&g(t),S(e),_[s].d()}}}function Qt(o,t,r){let e;me(o,R,_=>r(3,e=_));const l=Et();let{step:n}=t,{checkForJudgement:s}=t,{class:i=void 0}=t,{primaryButtonClass:f=void 0}=t;const a=()=>{console.log("toPrev"),l("toPrev")},u=()=>{l("validateObservation")};return o.$$set=_=>{"step"in _&&r(0,n=_.step),"checkForJudgement"in _&&r(1,s=_.checkForJudgement),"class"in _&&r(2,i=_.class),"primaryButtonClass"in _&&r(6,f=_.primaryButtonClass)},[n,s,i,e,a,u,f]}class Xt extends Te{constructor(t){super(),Ve(this,t,Qt,Zt,Ee,{step:0,checkForJudgement:1,class:2,primaryButtonClass:6})}}const De=ne.object({name:ne.string().min(3,{message:K(R)("default.page.fights.form.name.tooShortError")}),title:ne.string().min(3,{message:K(R)("default.page.fights.form.title.tooShortError")})}),ye=De.extend({observation:ne.string().min(10,{message:K(R)("default.page.fights.form.observation.tooShortError")})}),Be=ye.extend({feelings:ne.array(ne.string()).min(1,{message:K(R)("default.page.fights.form.feelings.tooFewError")})}),Fe=Be.extend({needs:ne.array(ne.string()).min(1,{message:K(R)("default.page.fights.form.needs.tooFewError")})}),ce=Fe.extend({request:ne.string().min(10,{message:K(R)("default.page.fights.form.request.tooFewError")})});function Yt(o){let t;return{c(){t=F("div"),this.h()},l(r){t=T(r,"DIV",{id:!0,class:!0}),V(t).forEach(g),this.h()},h(){D(t,"id","speechBubble"),D(t,"class","w-full")},m(r,e){w(r,t,e),o[11](t)},p:Z,d(r){r&&g(t),o[11](null)}}}function xt(o){let t,r="...";return{c(){t=F("div"),t.textContent=r,this.h()},l(e){t=T(e,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-534rav"&&(t.textContent=r),this.h()},h(){D(t,"id","speechBubble"),D(t,"class","w-full")},m(e,l){w(e,t,l)},p:Z,d(e){e&&g(t)}}}function qe(o){let t,r,e,l,n,s,i,f,a,u;return l=new Nt({props:{class:"size-2.5"}}),i=new Jt({props:{class:"size-2.5"}}),{c(){t=F("div"),r=F("div"),e=F("button"),E(l.$$.fragment),n=N(),s=F("button"),E(i.$$.fragment),this.h()},l(_){t=T(_,"DIV",{class:!0});var d=V(t);r=T(d,"DIV",{class:!0});var m=V(r);e=T(m,"BUTTON",{class:!0});var b=V(e);C(l.$$.fragment,b),b.forEach(g),n=J(m),s=T(m,"BUTTON",{class:!0});var $=V(s);C(i.$$.fragment,$),$.forEach(g),m.forEach(g),d.forEach(g),this.h()},h(){D(e,"class","chevron svelte-12yl6i5"),D(s,"class","chevron svelte-12yl6i5"),D(r,"class","-mr-1 flex flex-col items-center gap-0.5"),D(t,"class","flex justify-end text-2xs")},m(_,d){w(_,t,d),q(t,r),q(r,e),I(l,e,null),q(r,n),q(r,s),I(i,s,null),f=!0,a||(u=[we(e,"click",o[12]),we(s,"click",o[13])],a=!0)},p:Z,i(_){f||(c(l.$$.fragment,_),c(i.$$.fragment,_),f=!0)},o(_){p(l.$$.fragment,_),p(i.$$.fragment,_),f=!1},d(_){_&&g(t),S(l),S(i),a=!1,Ye(u)}}}function el(o){let t,r,e=`<div style="background-image: url(&#39;${Bt}&#39;); background-size: 300% 100%" class="animate-bg relative z-10 flex h-full w-[60px] items-center justify-center rounded-b rounded-t-[50px] shadow-lg transition duration-700"><div data-name="face" class="lookaround face-3 flex flex-col gap-1 svelte-12yl6i5"><div data-name="eyes" class="eyes flex items-center justify-center gap-2"><div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div> <div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div></div> <div data-name="mouth" class="mouth flex items-center justify-center svelte-12yl6i5"><div class="h-1.5 w-2.5 rounded-b-full bg-black"></div></div></div></div>`,l,n,s,i,f,a,u;function _($,v){return $[2]?xt:Yt}let d=_(o),m=d(o),b=o[1].length>1&&qe(o);return{c(){t=F("div"),r=F("div"),r.innerHTML=e,l=N(),n=F("div"),s=F("div"),i=N(),f=F("div"),m.c(),a=N(),b&&b.c(),this.h()},l($){t=T($,"DIV",{class:!0});var v=V(t);r=T(v,"DIV",{class:!0,"data-svelte-h":!0}),Xe(r)!=="svelte-ido9h0"&&(r.innerHTML=e),l=J(v),n=T(v,"DIV",{class:!0});var y=V(n);s=T(y,"DIV",{class:!0}),V(s).forEach(g),i=J(y),f=T(y,"DIV",{class:!0});var P=V(f);m.l(P),a=J(P),b&&b.l(P),P.forEach(g),y.forEach(g),v.forEach(g),this.h()},h(){D(r,"class","relative left-0 right-0 flex h-12 flex-shrink-0 justify-center gap-1"),D(s,"class","triangle size-3 flex-shrink-0 bg-white svelte-12yl6i5"),D(f,"class","rounded-tl-0 relative flex flex-grow rounded-b rounded-tr bg-white px-2 pb-2 pt-1 text-sm leading-tight gap-2"),D(n,"class","flex flex-grow"),D(t,"class","mt-4 flex items-start gap-2")},m($,v){w($,t,v),q(t,r),q(t,l),q(t,n),q(n,s),q(n,i),q(n,f),m.m(f,null),q(f,a),b&&b.m(f,null),u=!0},p($,[v]){d===(d=_($))&&m?m.p($,v):(m.d(1),m=d($),m&&(m.c(),m.m(f,a))),$[1].length>1?b?(b.p($,v),v&2&&c(b,1)):(b=qe($),b.c(),c(b,1),b.m(f,null)):b&&(U(),p(b,1,1,()=>{b=null}),G())},i($){u||(c(b),u=!0)},o($){p(b),u=!1},d($){$&&g(t),m.d(),b&&b.d()}}}function tl(o,t,r){let e,l;me(o,et,B=>r(15,l=B));let{step:n}=t,{stepName:s}=t,{formSuccess:i}=t,{speechBubbleContentArray:f}=t,a=0,u=!1,_,d;const m=(B,H,le)=>{try{let z=function(){re<H.length&&(B.innerHTML+=H.charAt(re),re++,d=setTimeout(z,le))};console.log("typeText");let re=0;B.innerHTML="";const k=document.createElement("div");k.style.visibility="hidden",k.style.position="absolute",k.style.width=`${B.clientWidth}px`,k.style.color="red",k.style.whiteSpace="pre-wrap",k.innerText=H,B.appendChild(k);const M=k.clientHeight;B.style.height=`${M}px`,B.removeChild(k),d&&clearTimeout(d),z()}catch(z){console.error("error typing text",z)}},b=(B="Hi")=>{r(1,e=[e[0],B]),r(10,a=1)},$=async B=>{r(2,u=!0);try{const le=await(await fetch("/api/ai/checkForJudgement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:B,lang:l})})).json();r(2,u=!1);const z=le.result;b(z)}catch(H){console.error("error in getting judgement",H)}},v=()=>{console.log("decreaseIndex"),a>0&&r(10,a--,a)},y=()=>{console.log("increaseIndex"),e.length>1&&a===0&&r(10,a++,a)};Ct(()=>{d&&clearTimeout(d)});function P(B){oe[B?"unshift":"push"](()=>{_=B,r(0,_)})}const O=()=>v(),ve=()=>y();return o.$$set=B=>{"step"in B&&r(5,n=B.step),"stepName"in B&&r(6,s=B.stepName),"formSuccess"in B&&r(7,i=B.formSuccess),"speechBubbleContentArray"in B&&r(8,f=B.speechBubbleContentArray)},o.$$.update=()=>{o.$$.dirty&416&&r(1,e=n===6&&!i?f.find(B=>B.step===6).errorContent:f.find(B=>B.step===n).content),o.$$.dirty&32&&r(10,a=0),o.$$.dirty&1027&&_&&(console.log("inside if speechBubbleElement"),m(_,e[a],30))},[_,e,u,v,y,n,s,i,f,$,a,P,O,ve]}class ll extends Te{constructor(t){super(),Ve(this,t,tl,el,Ee,{step:5,stepName:6,formSuccess:7,speechBubbleContentArray:8,checkJudgement:9})}get checkJudgement(){return this.$$.ctx[9]}}function ze(o,t,r){const e=o.slice();return e[50]=t[r],e}function Oe(o,t,r){const e=o.slice();return e[58]=t[r],e}function Ae(o,t,r){const e=o.slice();return e[47]=t[r],e}function Me(o,t,r){const e=o.slice();return e[50]=t[r],e}function He(o,t,r){const e=o.slice();return e[53]=t[r],e}function Le(o){let t,r;return t=new jt({props:{step:o[0],steps:o[8],stepBackground:o[8][o[0]-1].slug}}),t.$on("changeStep",o[19]),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l[0]&1&&(n.step=e[0]),l[0]&256&&(n.steps=e[8]),l[0]&257&&(n.stepBackground=e[8][e[0]-1].slug),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function rl(o){let t;return{c(){t=F("div")},l(r){t=T(r,"DIV",{}),V(t).forEach(g)},m(r,e){w(r,t,e)},p:Z,i:Z,o:Z,d(r){r&&g(t)}}}function nl(o){let t;return{c(){t=F("div")},l(r){t=T(r,"DIV",{}),V(t).forEach(g)},m(r,e){w(r,t,e)},p:Z,i:Z,o:Z,d(r){r&&g(t)}}}function sl(o){let t,r,e;return r=new ge({props:{form:o[15],name:"request",$$slots:{default:[ml]},$$scope:{ctx:o}}}),{c(){t=F("div"),E(r.$$.fragment),this.h()},l(l){t=T(l,"DIV",{class:!0});var n=V(t);C(r.$$.fragment,n),n.forEach(g),this.h()},h(){D(t,"class","form-content")},m(l,n){w(l,t,n),I(r,t,null),e=!0},p(l,n){const s={};n[0]&1536|n[1]&1073741824&&(s.$$scope={dirty:n,ctx:l}),r.$set(s)},i(l){e||(c(r.$$.fragment,l),e=!0)},o(l){p(r.$$.fragment,l),e=!1},d(l){l&&g(t),S(r)}}}function ol(o){let t,r,e;return r=new ge({props:{form:o[15],name:"needs",$$slots:{default:[dl]},$$scope:{ctx:o}}}),{c(){t=F("div"),E(r.$$.fragment),this.h()},l(l){t=T(l,"DIV",{class:!0});var n=V(t);C(r.$$.fragment,n),n.forEach(g),this.h()},h(){D(t,"class","form-content")},m(l,n){w(l,t,n),I(r,t,null),e=!0},p(l,n){const s={};n[0]&3588|n[1]&1073741824&&(s.$$scope={dirty:n,ctx:l}),r.$set(s)},i(l){e||(c(r.$$.fragment,l),e=!0)},o(l){p(r.$$.fragment,l),e=!1},d(l){l&&g(t),S(r)}}}function al(o){let t,r,e;return r=new ge({props:{form:o[15],name:"feelings",$$slots:{default:[kl]},$$scope:{ctx:o}}}),{c(){t=F("div"),E(r.$$.fragment),this.h()},l(l){t=T(l,"DIV",{class:!0});var n=V(t);C(r.$$.fragment,n),n.forEach(g),this.h()},h(){D(t,"class","form-content")},m(l,n){w(l,t,n),I(r,t,null),e=!0},p(l,n){const s={};n[0]&3843|n[1]&1073741824&&(s.$$scope={dirty:n,ctx:l}),r.$set(s)},i(l){e||(c(r.$$.fragment,l),e=!0)},o(l){p(r.$$.fragment,l),e=!1},d(l){l&&g(t),S(r)}}}function fl(o){let t,r,e;return r=new ge({props:{form:o[15],name:"observation",$$slots:{default:[Il]},$$scope:{ctx:o}}}),{c(){t=F("div"),E(r.$$.fragment),this.h()},l(l){t=T(l,"DIV",{class:!0});var n=V(t);C(r.$$.fragment,n),n.forEach(g),this.h()},h(){D(t,"class","form-content")},m(l,n){w(l,t,n),I(r,t,null),e=!0},p(l,n){const s={};n[0]&1600|n[1]&1073741824&&(s.$$scope={dirty:n,ctx:l}),r.$set(s)},i(l){e||(c(r.$$.fragment,l),e=!0)},o(l){p(r.$$.fragment,l),e=!1},d(l){l&&g(t),S(r)}}}function il(o){let t,r,e,l,n;return r=new ge({props:{form:o[15],name:"name",$$slots:{default:[yl]},$$scope:{ctx:o}}}),l=new ge({props:{form:o[15],name:"title",$$slots:{default:[Tl]},$$scope:{ctx:o}}}),{c(){t=F("div"),E(r.$$.fragment),e=N(),E(l.$$.fragment),this.h()},l(s){t=T(s,"DIV",{class:!0});var i=V(t);C(r.$$.fragment,i),e=J(i),C(l.$$.fragment,i),i.forEach(g),this.h()},h(){D(t,"class","form-content")},m(s,i){w(s,t,i),I(r,t,null),q(t,e),I(l,t,null),n=!0},p(s,i){const f={};i[0]&1536|i[1]&1073741824&&(f.$$scope={dirty:i,ctx:s}),r.$set(f);const a={};i[0]&1536|i[1]&1073741824&&(a.$$scope={dirty:i,ctx:s}),l.$set(a)},i(s){n||(c(r.$$.fragment,s),c(l.$$.fragment,s),n=!0)},o(s){p(r.$$.fragment,s),p(l.$$.fragment,s),n=!1},d(s){s&&g(t),S(r),S(l)}}}function ul(o){let t=o[10]("default.page.fights.form.request.label")+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&1024&&t!==(t=e[10]("default.page.fights.form.request.label")+"")&&Y(r,t)},d(e){e&&g(r)}}}function cl(o){let t,r,e,l,n;t=new be({props:{class:"form-label",$$slots:{default:[ul]},$$scope:{ctx:o}}});const s=[o[46],{class:"min-h-60"}];function i(a){o[31](a)}let f={};for(let a=0;a<s.length;a+=1)f=pe(f,s[a]);return o[9].request!==void 0&&(f.value=o[9].request),e=new nt({props:f}),oe.push(()=>ue(e,"value",i)),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(a){C(t.$$.fragment,a),r=J(a),C(e.$$.fragment,a)},m(a,u){I(t,a,u),w(a,r,u),I(e,a,u),n=!0},p(a,u){const _={};u[0]&1024|u[1]&1073741824&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const d=u[1]&32768?_e(s,[$e(a[46]),s[1]]):{};!l&&u[0]&512&&(l=!0,d.value=a[9].request,ie(()=>l=!1)),e.$set(d)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),n=!1},d(a){a&&g(r),S(t,a),S(e,a)}}}function ml(o){let t,r,e,l;return t=new de({props:{$$slots:{default:[cl,({attrs:n})=>({46:n}),({attrs:n})=>[0,n?32768:0]]},$$scope:{ctx:o}}}),e=new he({}),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(n){C(t.$$.fragment,n),r=J(n),C(e.$$.fragment,n)},m(n,s){I(t,n,s),w(n,r,s),I(e,n,s),l=!0},p(n,s){const i={};s[0]&1536|s[1]&1073774592&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){p(t.$$.fragment,n),p(e.$$.fragment,n),l=!1},d(n){n&&g(r),S(t,n),S(e,n)}}}function gl(o){let t=o[10]("default.page.fights.form.needs.label")+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&1024&&t!==(t=e[10]("default.page.fights.form.needs.label")+"")&&Y(r,t)},d(e){e&&g(r)}}}function Pe(o){let t,r,e=te(o[2]),l=[];for(let s=0;s<e.length;s+=1)l[s]=Ue(ze(o,e,s));const n=s=>p(l[s],1,1,()=>{l[s]=null});return{c(){t=F("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=T(s,"DIV",{class:!0});var i=V(t);for(let f=0;f<l.length;f+=1)l[f].l(i);i.forEach(g),this.h()},h(){D(t,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(s,i){w(s,t,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(t,null);r=!0},p(s,i){if(i[0]&5245444){e=te(s[2]);let f;for(f=0;f<e.length;f+=1){const a=ze(s,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Ue(a),l[f].c(),c(l[f],1),l[f].m(t,null))}for(U(),f=e.length;f<l.length;f+=1)n(f);G()}},i(s){if(!r){for(let i=0;i<e.length;i+=1)c(l[i]);r=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)p(l[i]);r=!1},d(s){s&&g(t),ke(l,s)}}}function pl(o){let t=(o[11]==="de"?o[58].nameDE:o[58].nameEN)+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&2052&&t!==(t=(e[11]==="de"?e[58].nameDE:e[58].nameEN)+"")&&Y(r,t)},d(e){e&&g(r)}}}function Re(o){let t,r,e,l,n,s,i;return r=new ot({props:{value:o[58].id,class:(o[58].nameEN===o[50].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[pl]},$$scope:{ctx:o}}}),{c(){t=F("button"),E(r.$$.fragment),e=N(),this.h()},l(f){t=T(f,"BUTTON",{type:!0,class:!0});var a=V(t);C(r.$$.fragment,a),e=J(a),a.forEach(g),this.h()},h(){D(t,"type","button"),D(t,"class",l=(o[22](o[58],o[50])||o[9].needs.includes(o[58].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(f,a){w(f,t,a),I(r,t,null),q(t,e),n=!0,s||(i=we(t,"click",function(){xe(o[20](o[58],o[50].category))&&o[20](o[58],o[50].category).apply(this,arguments)}),s=!0)},p(f,a){o=f;const u={};a[0]&4&&(u.value=o[58].id),a[0]&4&&(u.class=(o[58].nameEN===o[50].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),a[0]&2052|a[1]&1073741824&&(u.$$scope={dirty:a,ctx:o}),r.$set(u),(!n||a[0]&516&&l!==(l=(o[22](o[58],o[50])||o[9].needs.includes(o[58].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&D(t,"class",l)},i(f){n||(c(r.$$.fragment,f),n=!0)},o(f){p(r.$$.fragment,f),n=!1},d(f){f&&g(t),S(r),s=!1,i()}}}function Ue(o){let t,r,e=te(o[50].content),l=[];for(let s=0;s<e.length;s+=1)l[s]=Re(Oe(o,e,s));const n=s=>p(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=ee()},l(s){for(let i=0;i<l.length;i+=1)l[i].l(s);t=ee()},m(s,i){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(s,i);w(s,t,i),r=!0},p(s,i){if(i[0]&5245444){e=te(s[50].content);let f;for(f=0;f<e.length;f+=1){const a=Oe(s,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Re(a),l[f].c(),c(l[f],1),l[f].m(t.parentNode,t))}for(U(),f=e.length;f<l.length;f+=1)n(f);G()}},i(s){if(!r){for(let i=0;i<e.length;i+=1)c(l[i]);r=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)p(l[i]);r=!1},d(s){s&&g(t),ke(l,s)}}}function _l(o){let t,r,e=o[2].length>0&&Pe(o);return{c(){e&&e.c(),t=ee()},l(l){e&&e.l(l),t=ee()},m(l,n){e&&e.m(l,n),w(l,t,n),r=!0},p(l,n){l[2].length>0?e?(e.p(l,n),n[0]&4&&c(e,1)):(e=Pe(l),e.c(),c(e,1),e.m(t.parentNode,t)):e&&(U(),p(e,1,1,()=>{e=null}),G())},i(l){r||(c(e),r=!0)},o(l){p(e),r=!1},d(l){l&&g(t),e&&e.d(l)}}}function $l(o){let t,r,e,l,n;t=new be({props:{class:"form-label",$$slots:{default:[gl]},$$scope:{ctx:o}}});const s=[{type:"multiple"},o[46],{class:""}];function i(a){o[30](a)}let f={$$slots:{default:[_l]},$$scope:{ctx:o}};for(let a=0;a<s.length;a+=1)f=pe(f,s[a]);return o[9].needs!==void 0&&(f.value=o[9].needs),e=new st({props:f}),oe.push(()=>ue(e,"value",i)),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(a){C(t.$$.fragment,a),r=J(a),C(e.$$.fragment,a)},m(a,u){I(t,a,u),w(a,r,u),I(e,a,u),n=!0},p(a,u){const _={};u[0]&1024|u[1]&1073741824&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const d=u[1]&32768?_e(s,[s[0],$e(a[46]),s[2]]):{};u[0]&2564|u[1]&1073741824&&(d.$$scope={dirty:u,ctx:a}),!l&&u[0]&512&&(l=!0,d.value=a[9].needs,ie(()=>l=!1)),e.$set(d)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),n=!1},d(a){a&&g(r),S(t,a),S(e,a)}}}function dl(o){let t,r,e,l;return t=new de({props:{$$slots:{default:[$l,({attrs:n})=>({46:n}),({attrs:n})=>[0,n?32768:0]]},$$scope:{ctx:o}}}),e=new he({}),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(n){C(t.$$.fragment,n),r=J(n),C(e.$$.fragment,n)},m(n,s){I(t,n,s),w(n,r,s),I(e,n,s),l=!0},p(n,s){const i={};s[0]&3588|s[1]&1073774592&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){p(t.$$.fragment,n),p(e.$$.fragment,n),l=!1},d(n){n&&g(r),S(t,n),S(e,n)}}}function hl(o){let t=o[10]("default.page.fights.form.feelings.label")+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&1024&&t!==(t=e[10]("default.page.fights.form.feelings.label")+"")&&Y(r,t)},d(e){e&&g(r)}}}function Ge(o){let t,r,e=te(o[1]),l=[];for(let s=0;s<e.length;s+=1)l[s]=Ze(Ae(o,e,s));const n=s=>p(l[s],1,1,()=>{l[s]=null});return{c(){t=F("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=T(s,"DIV",{class:!0});var i=V(t);for(let f=0;f<l.length;f+=1)l[f].l(i);i.forEach(g),this.h()},h(){D(t,"class","")},m(s,i){w(s,t,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(t,null);r=!0},p(s,i){if(i[0]&6295299){e=te(s[1]);let f;for(f=0;f<e.length;f+=1){const a=Ae(s,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Ze(a),l[f].c(),c(l[f],1),l[f].m(t,null))}for(U(),f=e.length;f<l.length;f+=1)n(f);G()}},i(s){if(!r){for(let i=0;i<e.length;i+=1)c(l[i]);r=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)p(l[i]);r=!1},d(s){s&&g(t),ke(l,s)}}}function bl(o){let t=(o[11]==="de"?o[53].nameDE:o[53].nameEN)+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&2050&&t!==(t=(e[11]==="de"?e[53].nameDE:e[53].nameEN)+"")&&Y(r,t)},d(e){e&&g(r)}}}function Ke(o){let t,r,e,l,n,s;return r=new ot({props:{value:o[53].id,class:(o[53].nameEN===o[50].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[bl]},$$scope:{ctx:o}}}),{c(){t=F("button"),E(r.$$.fragment),this.h()},l(i){t=T(i,"BUTTON",{type:!0,class:!0});var f=V(t);C(r.$$.fragment,f),f.forEach(g),this.h()},h(){D(t,"type","button"),D(t,"class",e=(o[22](o[53],o[50])||o[9].feelings.includes(o[53].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(i,f){w(i,t,f),I(r,t,null),l=!0,n||(s=we(t,"click",function(){xe(o[21](o[53],o[50].category))&&o[21](o[53],o[50].category).apply(this,arguments)}),n=!0)},p(i,f){o=i;const a={};f[0]&2&&(a.value=o[53].id),f[0]&2&&(a.class=(o[53].nameEN===o[50].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),f[0]&2050|f[1]&1073741824&&(a.$$scope={dirty:f,ctx:o}),r.$set(a),(!l||f[0]&514&&e!==(e=(o[22](o[53],o[50])||o[9].feelings.includes(o[53].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&D(t,"class",e)},i(i){l||(c(r.$$.fragment,i),l=!0)},o(i){p(r.$$.fragment,i),l=!1},d(i){i&&g(t),S(r),n=!1,s()}}}function We(o){let t,r,e=te(o[50].content),l=[];for(let s=0;s<e.length;s+=1)l[s]=Ke(He(o,e,s));const n=s=>p(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=ee()},l(s){for(let i=0;i<l.length;i+=1)l[i].l(s);t=ee()},m(s,i){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(s,i);w(s,t,i),r=!0},p(s,i){if(i[0]&6294018){e=te(s[50].content);let f;for(f=0;f<e.length;f+=1){const a=He(s,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Ke(a),l[f].c(),c(l[f],1),l[f].m(t.parentNode,t))}for(U(),f=e.length;f<l.length;f+=1)n(f);G()}},i(s){if(!r){for(let i=0;i<e.length;i+=1)c(l[i]);r=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)p(l[i]);r=!1},d(s){s&&g(t),ke(l,s)}}}function Ze(o){let t,r=(o[47].category==="true"?o[10]("default.page.fights.form.general.goodFeelings"):o[10]("default.page.fights.form.general.badFeelings"))+"",e,l,n,s,i,f,a,u,_,d=te(o[47].content),m=[];for(let $=0;$<d.length;$+=1)m[$]=We(Me(o,d,$));const b=$=>p(m[$],1,1,()=>{m[$]=null});return{c(){t=F("div"),e=Q(r),l=N(),n=F("div"),f=N(),a=F("div");for(let $=0;$<m.length;$+=1)m[$].c();u=N(),this.h()},l($){t=T($,"DIV",{class:!0});var v=V(t);e=X(v,r),l=J(v),n=T(v,"DIV",{class:!0}),V(n).forEach(g),v.forEach(g),f=J($),a=T($,"DIV",{class:!0});var y=V(a);for(let P=0;P<m.length;P+=1)m[P].l(y);u=J(y),y.forEach(g),this.h()},h(){D(n,"class",s="border-b border-"+o[8][o[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20"),D(t,"class",i="text-"+o[8][o[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs"),D(a,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m($,v){w($,t,v),q(t,e),q(t,l),q(t,n),w($,f,v),w($,a,v);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(a,null);q(a,u),_=!0},p($,v){if((!_||v[0]&1026)&&r!==(r=($[47].category==="true"?$[10]("default.page.fights.form.general.goodFeelings"):$[10]("default.page.fights.form.general.badFeelings"))+"")&&Y(e,r),(!_||v[0]&257&&s!==(s="border-b border-"+$[8][$[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20"))&&D(n,"class",s),(!_||v[0]&257&&i!==(i="text-"+$[8][$[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs"))&&D(t,"class",i),v[0]&6294018){d=te($[47].content);let y;for(y=0;y<d.length;y+=1){const P=Me($,d,y);m[y]?(m[y].p(P,v),c(m[y],1)):(m[y]=We(P),m[y].c(),c(m[y],1),m[y].m(a,u))}for(U(),y=d.length;y<m.length;y+=1)b(y);G()}},i($){if(!_){for(let v=0;v<d.length;v+=1)c(m[v]);_=!0}},o($){m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)p(m[v]);_=!1},d($){$&&(g(t),g(f),g(a)),ke(m,$)}}}function vl(o){let t,r,e=o[1].length>0&&Ge(o);return{c(){e&&e.c(),t=ee()},l(l){e&&e.l(l),t=ee()},m(l,n){e&&e.m(l,n),w(l,t,n),r=!0},p(l,n){l[1].length>0?e?(e.p(l,n),n[0]&2&&c(e,1)):(e=Ge(l),e.c(),c(e,1),e.m(t.parentNode,t)):e&&(U(),p(e,1,1,()=>{e=null}),G())},i(l){r||(c(e),r=!0)},o(l){p(e),r=!1},d(l){l&&g(t),e&&e.d(l)}}}function wl(o){let t,r,e,l,n;t=new be({props:{class:"form-label",$$slots:{default:[hl]},$$scope:{ctx:o}}});const s=[{type:"multiple"},o[46],{class:"flex flex-col gap-4"}];function i(a){o[29](a)}let f={$$slots:{default:[vl]},$$scope:{ctx:o}};for(let a=0;a<s.length;a+=1)f=pe(f,s[a]);return o[9].feelings!==void 0&&(f.value=o[9].feelings),e=new st({props:f}),oe.push(()=>ue(e,"value",i)),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(a){C(t.$$.fragment,a),r=J(a),C(e.$$.fragment,a)},m(a,u){I(t,a,u),w(a,r,u),I(e,a,u),n=!0},p(a,u){const _={};u[0]&1024|u[1]&1073741824&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const d=u[1]&32768?_e(s,[s[0],$e(a[46]),s[2]]):{};u[0]&3843|u[1]&1073741824&&(d.$$scope={dirty:u,ctx:a}),!l&&u[0]&512&&(l=!0,d.value=a[9].feelings,ie(()=>l=!1)),e.$set(d)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),n=!1},d(a){a&&g(r),S(t,a),S(e,a)}}}function kl(o){let t,r,e,l;return t=new de({props:{$$slots:{default:[wl,({attrs:n})=>({46:n}),({attrs:n})=>[0,n?32768:0]]},$$scope:{ctx:o}}}),e=new he({}),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(n){C(t.$$.fragment,n),r=J(n),C(e.$$.fragment,n)},m(n,s){I(t,n,s),w(n,r,s),I(e,n,s),l=!0},p(n,s){const i={};s[0]&3843|s[1]&1073774592&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){p(t.$$.fragment,n),p(e.$$.fragment,n),l=!1},d(n){n&&g(r),S(t,n),S(e,n)}}}function El(o){let t=o[10]("default.page.fights.form.observation.label")+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&1024&&t!==(t=e[10]("default.page.fights.form.observation.label")+"")&&Y(r,t)},d(e){e&&g(r)}}}function Cl(o){let t,r,e,l,n;t=new be({props:{class:"form-label",$$slots:{default:[El]},$$scope:{ctx:o}}});const s=[o[46],{class:"min-h-60"}];function i(a){o[27](a)}let f={};for(let a=0;a<s.length;a+=1)f=pe(f,s[a]);return o[9].observation!==void 0&&(f.value=o[9].observation),e=new nt({props:f}),oe.push(()=>ue(e,"value",i)),e.$on("input",o[28]),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(a){C(t.$$.fragment,a),r=J(a),C(e.$$.fragment,a)},m(a,u){I(t,a,u),w(a,r,u),I(e,a,u),n=!0},p(a,u){const _={};u[0]&1024|u[1]&1073741824&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const d=u[1]&32768?_e(s,[$e(a[46]),s[1]]):{};!l&&u[0]&512&&(l=!0,d.value=a[9].observation,ie(()=>l=!1)),e.$set(d)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),n=!1},d(a){a&&g(r),S(t,a),S(e,a)}}}function Il(o){let t,r,e,l;return t=new de({props:{$$slots:{default:[Cl,({attrs:n})=>({46:n}),({attrs:n})=>[0,n?32768:0]]},$$scope:{ctx:o}}}),e=new he({}),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(n){C(t.$$.fragment,n),r=J(n),C(e.$$.fragment,n)},m(n,s){I(t,n,s),w(n,r,s),I(e,n,s),l=!0},p(n,s){const i={};s[0]&1600|s[1]&1073774592&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){p(t.$$.fragment,n),p(e.$$.fragment,n),l=!1},d(n){n&&g(r),S(t,n),S(e,n)}}}function Sl(o){let t=o[10]("default.page.fights.form.name.label")+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&1024&&t!==(t=e[10]("default.page.fights.form.name.label")+"")&&Y(r,t)},d(e){e&&g(r)}}}function Dl(o){let t,r,e,l,n;t=new be({props:{class:"form-label ",$$slots:{default:[Sl]},$$scope:{ctx:o}}});const s=[o[46]];function i(a){o[25](a)}let f={};for(let a=0;a<s.length;a+=1)f=pe(f,s[a]);return o[9].name!==void 0&&(f.value=o[9].name),e=new lt({props:f}),oe.push(()=>ue(e,"value",i)),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(a){C(t.$$.fragment,a),r=J(a),C(e.$$.fragment,a)},m(a,u){I(t,a,u),w(a,r,u),I(e,a,u),n=!0},p(a,u){const _={};u[0]&1024|u[1]&1073741824&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const d=u[1]&32768?_e(s,[$e(a[46])]):{};!l&&u[0]&512&&(l=!0,d.value=a[9].name,ie(()=>l=!1)),e.$set(d)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),n=!1},d(a){a&&g(r),S(t,a),S(e,a)}}}function yl(o){let t,r,e,l;return t=new de({props:{$$slots:{default:[Dl,({attrs:n})=>({46:n}),({attrs:n})=>[0,n?32768:0]]},$$scope:{ctx:o}}}),e=new he({}),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(n){C(t.$$.fragment,n),r=J(n),C(e.$$.fragment,n)},m(n,s){I(t,n,s),w(n,r,s),I(e,n,s),l=!0},p(n,s){const i={};s[0]&1536|s[1]&1073774592&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){p(t.$$.fragment,n),p(e.$$.fragment,n),l=!1},d(n){n&&g(r),S(t,n),S(e,n)}}}function Bl(o){let t=o[10]("default.page.fights.form.title.label")+"",r;return{c(){r=Q(t)},l(e){r=X(e,t)},m(e,l){w(e,r,l)},p(e,l){l[0]&1024&&t!==(t=e[10]("default.page.fights.form.title.label")+"")&&Y(r,t)},d(e){e&&g(r)}}}function Fl(o){let t,r,e,l,n;t=new be({props:{class:"form-label ",$$slots:{default:[Bl]},$$scope:{ctx:o}}});const s=[o[46]];function i(a){o[26](a)}let f={};for(let a=0;a<s.length;a+=1)f=pe(f,s[a]);return o[9].title!==void 0&&(f.value=o[9].title),e=new lt({props:f}),oe.push(()=>ue(e,"value",i)),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(a){C(t.$$.fragment,a),r=J(a),C(e.$$.fragment,a)},m(a,u){I(t,a,u),w(a,r,u),I(e,a,u),n=!0},p(a,u){const _={};u[0]&1024|u[1]&1073741824&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const d=u[1]&32768?_e(s,[$e(a[46])]):{};!l&&u[0]&512&&(l=!0,d.value=a[9].title,ie(()=>l=!1)),e.$set(d)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),n=!1},d(a){a&&g(r),S(t,a),S(e,a)}}}function Tl(o){let t,r,e,l;return t=new de({props:{$$slots:{default:[Fl,({attrs:n})=>({46:n}),({attrs:n})=>[0,n?32768:0]]},$$scope:{ctx:o}}}),e=new he({}),{c(){E(t.$$.fragment),r=N(),E(e.$$.fragment)},l(n){C(t.$$.fragment,n),r=J(n),C(e.$$.fragment,n)},m(n,s){I(t,n,s),w(n,r,s),I(e,n,s),l=!0},p(n,s){const i={};s[0]&1536|s[1]&1073774592&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){p(t.$$.fragment,n),p(e.$$.fragment,n),l=!1},d(n){n&&g(r),S(t,n),S(e,n)}}}function Qe(o){let t,r,e,l;const n=[il,fl,al,ol,sl,nl,rl],s=[];function i(f,a){return f[0]===1?0:f[0]===2?1:f[0]===3?2:f[0]===4?3:f[4]?f[5]?5:6:4}return t=i(o),r=s[t]=n[t](o),{c(){r.c(),e=ee()},l(f){r.l(f),e=ee()},m(f,a){s[t].m(f,a),w(f,e,a),l=!0},p(f,a){let u=t;t=i(f),t===u?s[t].p(f,a):(U(),p(s[u],1,1,()=>{s[u]=null}),G(),r=s[t],r?r.p(f,a):(r=s[t]=n[t](f),r.c()),c(r,1),r.m(e.parentNode,e))},i(f){l||(c(r),l=!0)},o(f){p(r),l=!1},d(f){f&&g(e),s[t].d(f)}}}function Vl(o){let t,r;return t=new tt({props:{$$slots:{default:[Jl]},$$scope:{ctx:o}}}),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l[0]&128|l[1]&1073741824&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Nl(o){let t,r;return t=new tt({props:{$$slots:{default:[jl]},$$scope:{ctx:o}}}),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l[0]&321|l[1]&1073741824&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Jl(o){let t,r;return t=new Pt({props:{id:o[7]}}),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l[0]&128&&(n.id=e[7]),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function jl(o){let t,r;return t=new Xt({props:{step:o[0],checkForJudgement:o[6],primaryButtonClass:`bg-${o[8][o[0]-1].slug}-background`,class:"flex-shrink-0"}}),t.$on("validateObservation",o[13]),t.$on("disableJudgementCheck",o[14]),t.$on("toPrev",o[18]),{c(){E(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const n={};l[0]&1&&(n.step=e[0]),l[0]&64&&(n.checkForJudgement=e[6]),l[0]&257&&(n.primaryButtonClass=`bg-${e[8][e[0]-1].slug}-background`),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function ql(o){let t,r,e,l,n,s,i,f,a,u,_=o[0],d,m,b,$,v,y,P;r=new Tt({});let O=!o[4]&&!o[5]&&Le(o);function ve(k){o[24](k)}let B={speechBubbleContentArray:o[12],step:o[0],stepName:o[8][o[0]-1].slug,formSuccess:o[5]};o[3]!==void 0&&(B.checkJudgement=o[3]),f=new ll({props:B}),oe.push(()=>ue(f,"checkJudgement",ve));let H=Qe(o);const le=[Nl,Vl],z=[];function re(k,M){return!k[4]&&!k[5]?0:1}return m=re(o),b=z[m]=le[m](o),{c(){t=F("div"),E(r.$$.fragment),e=N(),l=F("div"),n=F("form"),O&&O.c(),s=N(),i=F("div"),E(f.$$.fragment),u=N(),H.c(),d=N(),b.c(),this.h()},l(k){t=T(k,"DIV",{class:!0});var M=V(t);C(r.$$.fragment,M),e=J(M),l=T(M,"DIV",{class:!0});var x=V(l);n=T(x,"FORM",{class:!0});var W=V(n);O&&O.l(W),s=J(W),i=T(W,"DIV",{class:!0});var se=V(i);C(f.$$.fragment,se),u=J(se),H.l(se),d=J(se),b.l(se),se.forEach(g),W.forEach(g),x.forEach(g),M.forEach(g),this.h()},h(){D(i,"class","relative z-0"),D(n,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),D(l,"class","max-container relative flex flex-grow flex-col pb-40"),D(t,"class",$=`flex flex-grow flex-col justify-between transition duration-700 bg-${o[8][o[0]-1].slug}-background`)},m(k,M){w(k,t,M),I(r,t,null),q(t,e),q(t,l),q(l,n),O&&O.m(n,null),q(n,s),q(n,i),I(f,i,null),q(i,u),H.m(i,null),q(i,d),z[m].m(i,null),v=!0,y||(P=[we(n,"submit",It(o[23])),St(o[17].call(null,n))],y=!0)},p(k,M){!k[4]&&!k[5]?O?(O.p(k,M),M[0]&48&&c(O,1)):(O=Le(k),O.c(),c(O,1),O.m(n,s)):O&&(U(),p(O,1,1,()=>{O=null}),G());const x={};M[0]&1&&(x.step=k[0]),M[0]&257&&(x.stepName=k[8][k[0]-1].slug),M[0]&32&&(x.formSuccess=k[5]),!a&&M[0]&8&&(a=!0,x.checkJudgement=k[3],ie(()=>a=!1)),f.$set(x),M[0]&1&&Ee(_,_=k[0])?(U(),p(H,1,1,Z),G(),H=Qe(k),H.c(),c(H,1),H.m(i,d)):H.p(k,M);let W=m;m=re(k),m===W?z[m].p(k,M):(U(),p(z[W],1,1,()=>{z[W]=null}),G(),b=z[m],b?b.p(k,M):(b=z[m]=le[m](k),b.c()),c(b,1),b.m(i,null)),(!v||M[0]&257&&$!==($=`flex flex-grow flex-col justify-between transition duration-700 bg-${k[8][k[0]-1].slug}-background`))&&D(t,"class",$)},i(k){v||(c(r.$$.fragment,k),c(O),c(f.$$.fragment,k),c(H),c(b),v=!0)},o(k){p(r.$$.fragment,k),p(O),p(f.$$.fragment,k),p(H),p(b),v=!1},d(k){k&&g(t),S(r),O&&O.d(),S(f),H.d(k),z[m].d(),y=!1,Ye(P)}}}function zl(o,t,r){let e,l,n,s;me(o,Ft,h=>r(33,l=h)),me(o,R,h=>r(10,n=h)),me(o,et,h=>r(11,s=h));const i=zt(fe(ce));let f=[],a=[],u;const _=[fe(De),fe(ye),fe(Be),fe(Fe),fe(ce)];let d=1,m=!1,b=!1,$=!1,v;const y=[{step:1,content:[n("default.page.fight.create.info")]},{step:2,content:[n("default.page.fight.create.observation")]},{step:3,content:[n("default.page.fight.create.feelings")]},{step:4,content:[n("default.page.fight.create.needs")]},{step:5,content:[n("default.page.fight.create.request")]},{step:6,content:[n("default.page.fight.create.success")],errorContent:[n("default.page.fight.create.error")]}],P=async()=>{try{let h=e;h.owner=l.id,console.log("submit form",h);const A=await Se.collection("fights").create(h);r(7,v=A.id),r(5,b=!0),r(4,m=!0)}catch(h){console.log("error handling submit",h),r(5,b=!1),r(4,m=!0)}},O=async h=>{const j=Object.keys(fe([De,ye,Be,Fe,ce][h-1]).constraints);let L=!0;for(const ae of j)await x(ae,{update:!1})&&(L=!1);return!!L},ve=async()=>{const h=await W(ce);return h.valid?!0:(re.set(h.errors),!1)},B=async()=>{const h=await W(ce);return h.errors.observation?(re.set(h.errors),!1):(H(),!0)},H=()=>{u(e.observation),r(6,$=!1)},le=qt(i,{resetForm:!1,validators:Vt(ce),async onSubmit({validators:h,cancel:A}){console.log("onSubmit"),A(),await ve()&&(d==_.length&&P(),r(0,d++,d))},async onUpdated({form:h}){console.log("onUpdated"),h.valid&&r(0,d=1)}}),{form:z,errors:re,message:k,enhance:M,validate:x,validateForm:W,options:se,updateForm:Ol}=le;me(o,z,h=>r(9,e=h)),z.subscribe(h=>{console.log("form was updated",h)});let Ce=[{slug:"info",name:K(R)("default.page.fights.form.general.steps.info"),icon:At,invertedTextColor:!1,hidden:!1},{slug:"observation",name:K(R)("default.page.fights.form.general.steps.observation"),icon:Mt,invertedTextColor:!0,hidden:!1},{slug:"feelings",name:K(R)("default.page.fights.form.general.steps.feelings"),icon:Ht,invertedTextColor:!1,hidden:!1},{slug:"needs",name:K(R)("default.page.fights.form.general.steps.needs"),icon:Lt,invertedTextColor:!1,hidden:!1},{slug:"request",name:K(R)("default.page.fights.form.general.steps.request"),icon:je,invertedTextColor:!1,hidden:!1},{slug:"success",name:K(R)("default.page.fights.form.general.steps.success"),icon:je,invertedTextColor:!1,hidden:!0}];R.subscribe(h=>{const A=Ce.map(j=>{const L=h(`default.page.fights.form.general.steps.${j.slug}`);return j.name=L,j});r(8,Ce=[...A])});const at=()=>{console.log("decreaseStep"),d>1&&(console.log("step",d),r(0,d=d-1),console.log("step",d))},ft=async()=>{const h=await Se.collection("feelings").getFullList({sort:"category"}),A=Je(h);let j=Ie(A,"positive");j.map(L=>(L.content=Ie(L.content,"category"),L.content.map(ae=>ae.visible=!1),L)),console.log("res",j),r(1,f=j)},it=async()=>{const h=await Se.collection("needs").getFullList({sort:"category"}),A=Je(h);let j=Ie(A,"category");j.map(L=>L.visible=!1),console.log("res",j),r(2,a=j)},ut=async h=>{console.log("changeStep");const A=h.detail.step,j=await O(A);console.log("targetStepIsValid",j),j&&r(0,d=A)},ct=(h,A)=>{if(h.nameEN!==A)return;const j=a.find(L=>L.category===A);j&&(j.visible=!j.visible),r(2,a=[...a])},mt=(h,A)=>{if(h.nameEN!==A)return;const j=f[0].content.find(ae=>ae.category===A),L=f[1].content.find(ae=>ae.category===A);j&&(j.visible=!j.visible),L&&(L.visible=!L.visible),r(1,f=[...f])},gt=(h,A)=>{const j=h.nameEN,L=A.category;return!!(j===L||A.visible)};Dt(async()=>{await ft(),await it()});function pt(h){yt.call(this,o,h)}function _t(h){u=h,r(3,u)}function $t(h){o.$$.not_equal(e.name,h)&&(e.name=h,z.set(e))}function dt(h){o.$$.not_equal(e.title,h)&&(e.title=h,z.set(e))}function ht(h){o.$$.not_equal(e.observation,h)&&(e.observation=h,z.set(e))}const bt=()=>r(6,$=!0);function vt(h){o.$$.not_equal(e.feelings,h)&&(e.feelings=h,z.set(e))}function wt(h){o.$$.not_equal(e.needs,h)&&(e.needs=h,z.set(e))}function kt(h){o.$$.not_equal(e.request,h)&&(e.request=h,z.set(e))}return o.$$.update=()=>{o.$$.dirty[0]&1,o.$$.dirty[0]&1&&(se.validators=_[d-1])},[d,f,a,u,m,b,$,v,Ce,e,n,s,y,B,H,le,z,M,at,ut,ct,mt,gt,pt,_t,$t,dt,ht,bt,vt,wt,kt]}class rr extends Te{constructor(t){super(),Ve(this,t,zl,ql,Ee,{},null,[-1,-1])}}export{rr as component};
