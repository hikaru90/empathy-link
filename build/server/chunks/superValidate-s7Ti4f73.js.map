{"version":3,"file":"superValidate-s7Ti4f73.js","sources":["../../../.svelte-kit/adapter-node/chunks/superValidate.js"],"sourcesContent":["import \"./index.js\";\nimport { p as parseRequest, m as mergeDefaults, a as mapErrors, r as replaceInvalidDefaults } from \"./memoize.js\";\nasync function superValidate(data, adapter, options) {\n  if (data && \"superFormValidationLibrary\" in data) {\n    options = adapter;\n    adapter = data;\n    data = void 0;\n  }\n  const validator = adapter;\n  const defaults = options?.defaults ?? validator.defaults;\n  const jsonSchema = validator.jsonSchema;\n  const parsed = await parseRequest(data, jsonSchema, options);\n  const addErrors = options?.errors ?? (options?.strict ? true : !!parsed.data);\n  const parsedData = options?.strict ? parsed.data ?? {} : mergeDefaults(parsed.data, defaults);\n  let status;\n  if (!!parsed.data || addErrors) {\n    status = await /* @__PURE__ */ validator.validate(parsedData);\n  } else {\n    status = { success: false, issues: [] };\n  }\n  const valid = status.success;\n  const errors = valid || !addErrors ? {} : mapErrors(status.issues, validator.shape);\n  const dataWithDefaults = valid ? status.data : replaceInvalidDefaults(options?.strict ? mergeDefaults(parsedData, defaults) : parsedData, defaults, jsonSchema, status.issues, options?.preprocessed);\n  let outputData;\n  if (jsonSchema.additionalProperties === false) {\n    outputData = {};\n    for (const key of Object.keys(jsonSchema.properties ?? {})) {\n      if (key in dataWithDefaults)\n        outputData[key] = dataWithDefaults[key];\n    }\n  } else {\n    outputData = dataWithDefaults;\n  }\n  const output = {\n    id: parsed.id ?? options?.id ?? validator.id,\n    valid,\n    posted: parsed.posted,\n    errors,\n    data: outputData\n  };\n  if (!parsed.posted) {\n    output.constraints = validator.constraints;\n    if (Object.keys(validator.shape).length) {\n      output.shape = validator.shape;\n    }\n  }\n  return output;\n}\nexport {\n  superValidate as s\n};\n"],"names":[],"mappings":"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"}