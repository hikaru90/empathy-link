import{s as Z,l as P,m as W,o as G,b as y,f as h,p,q as K,i as I,h as w,n as $,r as X,u as ue,e as k,a as N,c as C,g as H,k as te,_ as fe,t as A,d as F,j as R,y as le,x as de,D as Y,E as me,L as ge}from"./scheduler.BmBrB_dT.js";import{g as he,t as pe,l as _e,f as be}from"./helpers.g8wrkI0H.js";import{S as U,i as q,b as j,d as z,m as S,g as re,t as E,c as se,a as x,e as J}from"./index.BQZQ5DB3.js";import{B as Q}from"./button.D_ITeu-i.js";import{C as ve}from"./CaretLeft.Cs-VcT_4.js";import{A as ne,C as we,c as ke}from"./textarea.BCQgmsBQ.js";function Ce(i){let e,t,l=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],s={};for(let a=0;a<l.length;a+=1)s=P(s,l[a]);return{c(){e=W("svg"),t=W("path"),this.h()},l(a){e=G(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var r=y(e);t=G(r,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),y(t).forEach(h),r.forEach(h),this.h()},h(){p(t,"fill-rule","evenodd"),p(t,"clip-rule","evenodd"),p(t,"d","M0.877075 7.49972C0.877075 3.84204 3.84222 0.876892 7.49991 0.876892C11.1576 0.876892 14.1227 3.84204 14.1227 7.49972C14.1227 11.1574 11.1576 14.1226 7.49991 14.1226C3.84222 14.1226 0.877075 11.1574 0.877075 7.49972ZM7.49991 1.82689C4.36689 1.82689 1.82708 4.36671 1.82708 7.49972C1.82708 10.6327 4.36689 13.1726 7.49991 13.1726C10.6329 13.1726 13.1727 10.6327 13.1727 7.49972C13.1727 4.36671 10.6329 1.82689 7.49991 1.82689ZM8.24993 10.5C8.24993 10.9142 7.91414 11.25 7.49993 11.25C7.08571 11.25 6.74993 10.9142 6.74993 10.5C6.74993 10.0858 7.08571 9.75 7.49993 9.75C7.91414 9.75 8.24993 10.0858 8.24993 10.5ZM6.05003 6.25C6.05003 5.57211 6.63511 4.925 7.50003 4.925C8.36496 4.925 8.95003 5.57211 8.95003 6.25C8.95003 6.74118 8.68002 6.99212 8.21447 7.27494C8.16251 7.30651 8.10258 7.34131 8.03847 7.37854L8.03841 7.37858C7.85521 7.48497 7.63788 7.61119 7.47449 7.73849C7.23214 7.92732 6.95003 8.23198 6.95003 8.7C6.95004 9.00376 7.19628 9.25 7.50004 9.25C7.8024 9.25 8.04778 9.00601 8.05002 8.70417L8.05056 8.7033C8.05924 8.6896 8.08493 8.65735 8.15058 8.6062C8.25207 8.52712 8.36508 8.46163 8.51567 8.37436L8.51571 8.37433C8.59422 8.32883 8.68296 8.27741 8.78559 8.21506C9.32004 7.89038 10.05 7.35382 10.05 6.25C10.05 4.92789 8.93511 3.825 7.50003 3.825C6.06496 3.825 4.95003 4.92789 4.95003 6.25C4.95003 6.55376 5.19628 6.8 5.50003 6.8C5.80379 6.8 6.05003 6.55376 6.05003 6.25Z"),p(t,"fill",i[0]),K(e,s)},m(a,r){I(a,e,r),w(e,t)},p(a,[r]){r&1&&p(t,"fill",a[0]),K(e,s=he(l,[r&2&&{width:a[1]},r&2&&{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},r&4&&a[2]]))},i:$,o:$,d(a){a&&h(e)}}}function ye(i,e,t){const l=["color","size"];let s=X(e,l),{color:a="currentColor"}=e,{size:r=15}=e;return i.$$set=n=>{e=P(P({},e),ue(n)),t(2,s=X(e,l)),"color"in n&&t(0,a=n.color),"size"in n&&t(1,r=n.size)},[a,r,s]}class Pe extends U{constructor(e){super(),q(this,e,ye,Ce,Z,{color:0,size:1})}}function xe(i){let e,t;return e=new ve({props:{class:"h-4 w-4 rounded-full"}}),{c(){j(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,s){S(e,l,s),t=!0},p:$,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Be(i){let e,t;return e=new Q({props:{type:"submit",decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[je]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,s){S(e,l,s),t=!0},p(l,s){const a={};s&265&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ee(i){let e,t;return e=new Q({props:{decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[ze]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){j(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,s){S(e,l,s),t=!0},p(l,s){const a={};s&264&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ie(i){let e=i[3]("default.page.fights.form.general.next")+"",t;return{c(){t=A(e)},l(l){t=F(l,e)},m(l,s){I(l,t,s)},p(l,s){s&8&&e!==(e=l[3]("default.page.fights.form.general.next")+"")&&R(t,e)},d(l){l&&h(t)}}}function Te(i){let e=i[3]("default.page.fights.form.general.knowledge")+"",t;return{c(){t=A(e)},l(l){t=F(l,e)},m(l,s){I(l,t,s)},p(l,s){s&8&&e!==(e=l[3]("default.page.fights.form.general.knowledge")+"")&&R(t,e)},d(l){l&&h(t)}}}function De(i){let e=i[3]("default.page.fights.form.general.yes")+"",t;return{c(){t=A(e)},l(l){t=F(l,e)},m(l,s){I(l,t,s)},p(l,s){s&8&&e!==(e=l[3]("default.page.fights.form.general.yes")+"")&&R(t,e)},d(l){l&&h(t)}}}function je(i){let e,t,l;function s(n,f){return n[0]===1?De:n[0]===2?Te:Ie}let a=s(i),r=a(i);return t=new ne({props:{class:"h-3 w-3"}}),{c(){r.c(),e=N(),j(t.$$.fragment)},l(n){r.l(n),e=H(n),z(t.$$.fragment,n)},m(n,f){r.m(n,f),I(n,e,f),S(t,n,f),l=!0},p(n,f){a===(a=s(n))&&r?r.p(n,f):(r.d(1),r=a(n),r&&(r.c(),r.m(e.parentNode,e)))},i(n){l||(x(t.$$.fragment,n),l=!0)},o(n){E(t.$$.fragment,n),l=!1},d(n){n&&h(e),r.d(n),J(t,n)}}}function ze(i){let e=i[3]("default.page.fights.form.general.checkJudgement")+"",t,l,s,a;return s=new ne({props:{class:"h-3 w-3"}}),{c(){t=A(e),l=N(),j(s.$$.fragment)},l(r){t=F(r,e),l=H(r),z(s.$$.fragment,r)},m(r,n){I(r,t,n),I(r,l,n),S(s,r,n),a=!0},p(r,n){(!a||n&8)&&e!==(e=r[3]("default.page.fights.form.general.checkJudgement")+"")&&R(t,e)},i(r){a||(x(s.$$.fragment,r),a=!0)},o(r){E(s.$$.fragment,r),a=!1},d(r){r&&(h(t),h(l)),J(s,r)}}}function Se(i){let e,t,l,s,a,r,n,f,d;l=new Q({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[xe]},$$scope:{ctx:i}}}),l.$on("click",i[4]);const v=[Ee,Be],u=[];function _(o,c){return o[1]?0:1}return r=_(i),n=u[r]=v[r](i),{c(){e=k("div"),t=k("div"),j(l.$$.fragment),a=N(),n.c(),this.h()},l(o){e=C(o,"DIV",{class:!0});var c=y(e);t=C(c,"DIV",{class:!0});var m=y(t);z(l.$$.fragment,m),m.forEach(h),a=H(c),n.l(c),c.forEach(h),this.h()},h(){p(t,"class",s=(i[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"),p(e,"class",f="flex justify-between "+i[2])},m(o,c){I(o,e,c),w(e,t),S(l,t,null),w(e,a),u[r].m(e,null),d=!0},p(o,[c]){const m={};c&256&&(m.$$scope={dirty:c,ctx:o}),l.$set(m),(!d||c&1&&s!==(s=(o[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"))&&p(t,"class",s);let b=r;r=_(o),r===b?u[r].p(o,c):(re(),E(u[b],1,1,()=>{u[b]=null}),se(),n=u[r],n?n.p(o,c):(n=u[r]=v[r](o),n.c()),x(n,1),n.m(e,null)),(!d||c&4&&f!==(f="flex justify-between "+o[2]))&&p(e,"class",f)},i(o){d||(x(l.$$.fragment,o),x(n),d=!0)},o(o){E(l.$$.fragment,o),E(n),d=!1},d(o){o&&h(e),J(l),u[r].d()}}}function Je(i,e,t){let l;te(i,pe,u=>t(3,l=u));const s=fe();let{step:a}=e,{checkForJudgement:r}=e,{class:n=void 0}=e,{primaryButtonClass:f=void 0}=e;const d=()=>{console.log("toPrev"),s("toPrev")},v=()=>{s("validateObservation")};return i.$$set=u=>{"step"in u&&t(0,a=u.step),"checkForJudgement"in u&&t(1,r=u.checkForJudgement),"class"in u&&t(2,n=u.class),"primaryButtonClass"in u&&t(6,f=u.primaryButtonClass)},[a,r,n,l,d,v,f]}class Ze extends U{constructor(e){super(),q(this,e,Je,Se,Z,{step:0,checkForJudgement:1,class:2,primaryButtonClass:6})}}function Ve(i){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{id:!0,class:!0}),y(e).forEach(h),this.h()},h(){p(e,"id","speechBubble"),p(e,"class","w-full")},m(t,l){I(t,e,l),i[11](e)},p:$,d(t){t&&h(e),i[11](null)}}}function Me(i){let e,t="...";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),le(e)!=="svelte-534rav"&&(e.textContent=t),this.h()},h(){p(e,"id","speechBubble"),p(e,"class","w-full")},m(l,s){I(l,e,s)},p:$,d(l){l&&h(e)}}}function ee(i){let e,t,l,s,a,r,n,f,d,v;return s=new we({props:{class:"size-2.5"}}),n=new ke({props:{class:"size-2.5"}}),{c(){e=k("div"),t=k("div"),l=k("button"),j(s.$$.fragment),a=N(),r=k("button"),j(n.$$.fragment),this.h()},l(u){e=C(u,"DIV",{class:!0});var _=y(e);t=C(_,"DIV",{class:!0});var o=y(t);l=C(o,"BUTTON",{class:!0});var c=y(l);z(s.$$.fragment,c),c.forEach(h),a=H(o),r=C(o,"BUTTON",{class:!0});var m=y(r);z(n.$$.fragment,m),m.forEach(h),o.forEach(h),_.forEach(h),this.h()},h(){p(l,"class","chevron svelte-12yl6i5"),p(r,"class","chevron svelte-12yl6i5"),p(t,"class","-mr-1 flex flex-col items-center gap-0.5"),p(e,"class","flex justify-end text-2xs")},m(u,_){I(u,e,_),w(e,t),w(t,l),S(s,l,null),w(t,a),w(t,r),S(n,r,null),f=!0,d||(v=[Y(l,"click",i[12]),Y(r,"click",i[13])],d=!0)},p:$,i(u){f||(x(s.$$.fragment,u),x(n.$$.fragment,u),f=!0)},o(u){E(s.$$.fragment,u),E(n.$$.fragment,u),f=!1},d(u){u&&h(e),J(s),J(n),d=!1,me(v)}}}function Le(i){let e,t,l=`<div style="background-image: url(&#39;${be}&#39;); background-size: 300% 100%" class="animate-bg relative z-10 flex h-full w-[60px] items-center justify-center rounded-b rounded-t-[50px] shadow-lg transition duration-700"><div data-name="face" class="lookaround face-3 flex flex-col gap-1 svelte-12yl6i5"><div data-name="eyes" class="eyes flex items-center justify-center gap-2"><div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div> <div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div></div> <div data-name="mouth" class="mouth flex items-center justify-center svelte-12yl6i5"><div class="h-1.5 w-2.5 rounded-b-full bg-black"></div></div></div></div>`,s,a,r,n,f,d,v;function u(m,b){return m[2]?Me:Ve}let _=u(i),o=_(i),c=i[1].length>1&&ee(i);return{c(){e=k("div"),t=k("div"),t.innerHTML=l,s=N(),a=k("div"),r=k("div"),n=N(),f=k("div"),o.c(),d=N(),c&&c.c(),this.h()},l(m){e=C(m,"DIV",{class:!0});var b=y(e);t=C(b,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-ido9h0"&&(t.innerHTML=l),s=H(b),a=C(b,"DIV",{class:!0});var V=y(a);r=C(V,"DIV",{class:!0}),y(r).forEach(h),n=H(V),f=C(V,"DIV",{class:!0});var M=y(f);o.l(M),d=H(M),c&&c.l(M),M.forEach(h),V.forEach(h),b.forEach(h),this.h()},h(){p(t,"class","relative left-0 right-0 flex h-12 flex-shrink-0 justify-center gap-1"),p(r,"class","triangle size-3 flex-shrink-0 bg-muted svelte-12yl6i5"),p(f,"class","rounded-tl-0 relative flex flex-grow rounded-b rounded-tr bg-muted px-2 pb-2 pt-1 text-sm leading-tight gap-2"),p(a,"class","flex flex-grow"),p(e,"class","mt-4 flex items-start gap-2")},m(m,b){I(m,e,b),w(e,t),w(e,s),w(e,a),w(a,r),w(a,n),w(a,f),o.m(f,null),w(f,d),c&&c.m(f,null),v=!0},p(m,[b]){_===(_=u(m))&&o?o.p(m,b):(o.d(1),o=_(m),o&&(o.c(),o.m(f,d))),m[1].length>1?c?(c.p(m,b),b&2&&x(c,1)):(c=ee(m),c.c(),x(c,1),c.m(f,null)):c&&(re(),E(c,1,1,()=>{c=null}),se())},i(m){v||(x(c),v=!0)},o(m){E(c),v=!1},d(m){m&&h(e),o.d(),c&&c.d()}}}function Ne(i,e,t){let l,s;te(i,_e,g=>t(15,s=g));let{step:a}=e,{stepName:r}=e,{formSuccess:n}=e,{speechBubbleContentArray:f}=e,d=0,v=!1;const u=(g,T,L)=>{try{return console.log("speechBubbleContentArray",L),T===13&&!g?L.find(B=>B.step===13).errorContent:L.find(B=>B.step===T).content}catch(B){return console.error("error in getSpeechBubbleContent",B),[]}};let _,o;const c=(g,T,L)=>{try{let B=function(){O<T.length&&(g.innerHTML+=T.charAt(O),O++,o=setTimeout(B,L))};console.log("typeText");let O=0;g.innerHTML="";const D=document.createElement("div");D.style.visibility="hidden",D.style.position="absolute",D.style.width=`${g.clientWidth}px`,D.style.color="red",D.style.whiteSpace="pre-wrap",D.innerText=T,g.appendChild(D);const ce=D.clientHeight;g.style.height=`${ce}px`,g.removeChild(D),o&&clearTimeout(o),B()}catch(B){console.error("error typing text",B)}},m=(g="Hi")=>{t(1,l=[l[0],g]),t(10,d=1)},b=async g=>{t(2,v=!0);try{const L=await(await fetch("/api/ai/checkForJudgement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:g,lang:s})})).json();t(2,v=!1);const B=L.result;m(B)}catch(T){console.error("error in getting judgement",T)}},V=()=>{console.log("decreaseIndex"),d>0&&t(10,d--,d)},M=()=>{console.log("increaseIndex"),l.length>1&&d===0&&t(10,d++,d)};de(()=>{o&&clearTimeout(o)});function ae(g){ge[g?"unshift":"push"](()=>{_=g,t(0,_)})}const ie=()=>V(),oe=()=>M();return i.$$set=g=>{"step"in g&&t(5,a=g.step),"stepName"in g&&t(6,r=g.stepName),"formSuccess"in g&&t(7,n=g.formSuccess),"speechBubbleContentArray"in g&&t(8,f=g.speechBubbleContentArray)},i.$$.update=()=>{i.$$.dirty&416&&t(1,l=u(n,a,f)),i.$$.dirty&32&&t(10,d=0),i.$$.dirty&1027&&_&&(console.log("inside if speechBubbleElement"),c(_,l[d],30))},[_,l,v,V,M,a,r,n,f,b,d,ae,ie,oe]}class Ue extends U{constructor(e){super(),q(this,e,Ne,Le,Z,{step:5,stepName:6,formSuccess:7,speechBubbleContentArray:8,checkJudgement:9})}get checkJudgement(){return this.$$.ctx[9]}}export{Pe as Q,Ue as R,Ze as a};
