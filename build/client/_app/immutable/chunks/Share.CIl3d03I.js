import{s as W,l as T,m as U,o as J,b as D,f as c,p as d,q as G,i as C,h as H,n as F,r as P,u as re,G as Ee,e as I,c as Z,B as _e,H as ke,I as ze,J as Le,L as ae,a as B,g as j,M as ce,k as oe,A as De,w as Ve,x as Me,t as N,d as A,j as K,F as He,K as ve,D as me,U as Be,E as we,T as je}from"./scheduler.BmBrB_dT.js";import{S as X,i as Y,a as g,t as _,f as ge,b as h,d as v,m as w,g as Te,c as Ie,e as b}from"./index.BQZQ5DB3.js";import{g as y,c as de,t as $e,l as Ze,a as Se}from"./helpers.g8wrkI0H.js";import"./switch.fB03Cpk5.js";import"./entry.DnNy0IhO.js";import{I as Fe}from"./input.QcM6aL-y.js";import{c as Pe,z as Re,F as Oe,C as xe,a as Ne,b as Ae}from"./zod.B5pDC7Hl.js";import{p as qe}from"./stores.BdCL2gQQ.js";import{z as pe,s as Ue}from"./memoize.BzJ9-avW.js";import{D as Je,d as Ge,a as Ke,b as Qe,c as We,C as Xe,e as Ye}from"./index.SsLB4xxl.js";import{p as he}from"./pocketbase.Ce4YzWbP.js";import{R as ye,D as et,a as tt,b as lt,c as rt}from"./index.CRAHlQQo.js";import{t as ue}from"./Toaster.svelte_svelte_type_style_lang.CqHcWxsp.js";import{B as le}from"./button.D_ITeu-i.js";import{C as st}from"./CaretLeft.Cs-VcT_4.js";import{C as nt}from"./Check.CFBCV6Q5.js";import{P as ot}from"./PaperPlane.CDcRMlbn.js";function at(o){let e,l,r=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],n={};for(let t=0;t<r.length;t+=1)n=T(n,r[t]);return{c(){e=U("svg"),l=U("path"),this.h()},l(t){e=J(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=D(e);l=J(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),D(l).forEach(c),s.forEach(c),this.h()},h(){d(l,"fill-rule","evenodd"),d(l,"clip-rule","evenodd"),d(l,"d","M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z"),d(l,"fill",o[0]),G(e,n)},m(t,s){C(t,e,s),H(e,l)},p(t,[s]){s&1&&d(l,"fill",t[0]),G(e,n=y(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:F,o:F,d(t){t&&c(e)}}}function ft(o,e,l){const r=["color","size"];let n=P(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return o.$$set=a=>{e=T(T({},e),re(a)),l(2,n=P(e,r)),"color"in a&&l(0,t=a.color),"size"in a&&l(1,s=a.size)},[t,s,n]}class it extends X{constructor(e){super(),Y(this,e,ft,at,W,{color:0,size:1})}}function ut(o){let e,l,r=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],n={};for(let t=0;t<r.length;t+=1)n=T(n,r[t]);return{c(){e=U("svg"),l=U("path"),this.h()},l(t){e=J(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=D(e);l=J(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),D(l).forEach(c),s.forEach(c),this.h()},h(){d(l,"fill-rule","evenodd"),d(l,"clip-rule","evenodd"),d(l,"d","M1 2C0.447715 2 0 2.44772 0 3V12C0 12.5523 0.447715 13 1 13H14C14.5523 13 15 12.5523 15 12V3C15 2.44772 14.5523 2 14 2H1ZM1 3L14 3V3.92494C13.9174 3.92486 13.8338 3.94751 13.7589 3.99505L7.5 7.96703L1.24112 3.99505C1.16621 3.94751 1.0826 3.92486 1 3.92494V3ZM1 4.90797V12H14V4.90797L7.74112 8.87995C7.59394 8.97335 7.40606 8.97335 7.25888 8.87995L1 4.90797Z"),d(l,"fill",o[0]),G(e,n)},m(t,s){C(t,e,s),H(e,l)},p(t,[s]){s&1&&d(l,"fill",t[0]),G(e,n=y(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:F,o:F,d(t){t&&c(e)}}}function ct(o,e,l){const r=["color","size"];let n=P(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return o.$$set=a=>{e=T(T({},e),re(a)),l(2,n=P(e,r)),"color"in a&&l(0,t=a.color),"size"in a&&l(1,s=a.size)},[t,s,n]}class mt extends X{constructor(e){super(),Y(this,e,ct,ut,W,{color:0,size:1})}}function gt(o){let e,l,r=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],n={};for(let t=0;t<r.length;t+=1)n=T(n,r[t]);return{c(){e=U("svg"),l=U("path"),this.h()},l(t){e=J(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=D(e);l=J(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),D(l).forEach(c),s.forEach(c),this.h()},h(){d(l,"fill-rule","evenodd"),d(l,"clip-rule","evenodd"),d(l,"d","M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z"),d(l,"fill",o[0]),G(e,n)},m(t,s){C(t,e,s),H(e,l)},p(t,[s]){s&1&&d(l,"fill",t[0]),G(e,n=y(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:F,o:F,d(t){t&&c(e)}}}function _t(o,e,l){const r=["color","size"];let n=P(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return o.$$set=a=>{e=T(T({},e),re(a)),l(2,n=P(e,r)),"color"in a&&l(0,t=a.color),"size"in a&&l(1,s=a.size)},[t,s,n]}class dt extends X{constructor(e){super(),Y(this,e,_t,gt,W,{color:0,size:1})}}function $t(o){let e,l,r=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],n={};for(let t=0;t<r.length;t+=1)n=T(n,r[t]);return{c(){e=U("svg"),l=U("path"),this.h()},l(t){e=J(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=D(e);l=J(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),D(l).forEach(c),s.forEach(c),this.h()},h(){d(l,"fill-rule","evenodd"),d(l,"clip-rule","evenodd"),d(l,"d","M5 7.50003C5 8.32845 4.32843 9.00003 3.5 9.00003C2.67157 9.00003 2 8.32845 2 7.50003C2 6.6716 2.67157 6.00003 3.5 6.00003C4.32843 6.00003 5 6.6716 5 7.50003ZM5.71313 8.66388C5.29445 9.45838 4.46048 10 3.5 10C2.11929 10 1 8.88074 1 7.50003C1 6.11931 2.11929 5.00003 3.5 5.00003C4.46048 5.00003 5.29445 5.54167 5.71313 6.33616L9.10424 4.21671C9.03643 3.98968 9 3.74911 9 3.50003C9 2.11932 10.1193 1.00003 11.5 1.00003C12.8807 1.00003 14 2.11932 14 3.50003C14 4.88074 12.8807 6.00003 11.5 6.00003C10.6915 6.00003 9.97264 5.61624 9.51566 5.0209L5.9853 7.22738C5.99502 7.31692 6 7.40789 6 7.50003C6 7.59216 5.99502 7.68312 5.9853 7.77267L9.51567 9.97915C9.97265 9.38382 10.6915 9.00003 11.5 9.00003C12.8807 9.00003 14 10.1193 14 11.5C14 12.8807 12.8807 14 11.5 14C10.1193 14 9 12.8807 9 11.5C9 11.2509 9.03643 11.0104 9.10425 10.7833L5.71313 8.66388ZM11.5 5.00003C12.3284 5.00003 13 4.32846 13 3.50003C13 2.6716 12.3284 2.00003 11.5 2.00003C10.6716 2.00003 10 2.6716 10 3.50003C10 4.32846 10.6716 5.00003 11.5 5.00003ZM13 11.5C13 12.3285 12.3284 13 11.5 13C10.6716 13 10 12.3285 10 11.5C10 10.6716 10.6716 10 11.5 10C12.3284 10 13 10.6716 13 11.5Z"),d(l,"fill",o[0]),G(e,n)},m(t,s){C(t,e,s),H(e,l)},p(t,[s]){s&1&&d(l,"fill",t[0]),G(e,n=y(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:F,o:F,d(t){t&&c(e)}}}function pt(o,e,l){const r=["color","size"];let n=P(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return o.$$set=a=>{e=T(T({},e),re(a)),l(2,n=P(e,r)),"color"in a&&l(0,t=a.color),"size"in a&&l(1,s=a.size)},[t,s,n]}class ht extends X{constructor(e){super(),Y(this,e,pt,$t,W,{color:0,size:1})}}function vt(o){let e,l,r;const n=o[4].default,t=Ee(n,o,o[3],null);let s=[{class:l=de("mt-auto flex flex-col gap-2 p-4",o[1])},o[2]],a={};for(let u=0;u<s.length;u+=1)a=T(a,s[u]);return{c(){e=I("div"),t&&t.c(),this.h()},l(u){e=Z(u,"DIV",{class:!0});var f=D(e);t&&t.l(f),f.forEach(c),this.h()},h(){_e(e,a)},m(u,f){C(u,e,f),t&&t.m(e,null),o[5](e),r=!0},p(u,[f]){t&&t.p&&(!r||f&8)&&ke(t,n,u,u[3],r?Le(n,u[3],f,null):ze(u[3]),null),_e(e,a=y(s,[(!r||f&2&&l!==(l=de("mt-auto flex flex-col gap-2 p-4",u[1])))&&{class:l},f&4&&u[2]]))},i(u){r||(g(t,u),r=!0)},o(u){_(t,u),r=!1},d(u){u&&c(e),t&&t.d(u),o[5](null)}}}function wt(o,e,l){const r=["el","class"];let n=P(e,r),{$$slots:t={},$$scope:s}=e,{el:a=void 0}=e,{class:u=void 0}=e;function f(i){ae[i?"unshift":"push"](()=>{a=i,l(0,a)})}return o.$$set=i=>{e=T(T({},e),re(i)),l(2,n=P(e,r)),"el"in i&&l(0,a=i.el),"class"in i&&l(1,u=i.class),"$$scope"in i&&l(3,s=i.$$scope)},[a,u,n,s,t,f]}class bt extends X{constructor(e){super(),Y(this,e,wt,vt,W,{el:0,class:1})}}async function Ct(o){if("clipboard"in navigator)await navigator.clipboard.writeText(o);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=o,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}const Et=(o,e)=>{async function l(){if(n)try{await Ct(n),o.dispatchEvent(new CustomEvent("svelte-copy",{detail:n}))}catch(t){o.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:t}))}}let r=typeof e=="string"?["click"]:[e.events].flat(1),n=typeof e=="string"?e:e.text;return r.forEach(t=>{o.addEventListener(t,l,!0)}),{update:t=>{const s=typeof t=="string"?["click"]:[t.events].flat(1),a=typeof t=="string"?t:t.text,u=s.filter(i=>!r.includes(i)),f=r.filter(i=>!s.includes(i));u.forEach(i=>{o.addEventListener(i,l,!0)}),f.forEach(i=>{o.removeEventListener(i,l,!0)}),r=s,n=a},destroy:()=>{r.forEach(t=>{o.removeEventListener(t,l,!0)})}}};function kt(o){let e,l;return e=new st({props:{class:"h-4 w-4 rounded-full"}}),{c(){h(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,n){w(e,r,n),l=!0},p:F,i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){b(e,r)}}}function zt(o){let e,l;return e=new le({props:{decoration:"dark-op1",class:"flex items-center gap-2 border-neutral-900 bg-red-700 text-sm text-zinc-200 hover:bg-red-800",$$slots:{default:[Dt]},$$scope:{ctx:o}}}),e.$on("click",o[10]),{c(){h(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,n){w(e,r,n),l=!0},p(r,n){const t={};n[0]&16|n[1]&16&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){b(e,r)}}}function Lt(o){let e,l;return e=new le({props:{decoration:"dark-op1",class:"flex items-center gap-2 border-neutral-900 bg-green-700 text-sm text-zinc-200 hover:bg-green-800",$$slots:{default:[Vt]},$$scope:{ctx:o}}}),e.$on("click",o[10]),{c(){h(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,n){w(e,r,n),l=!0},p(r,n){const t={};n[0]&16|n[1]&16&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){b(e,r)}}}function Dt(o){let e=o[4]("default.page.fight.unresolve")+"",l,r,n,t;return n=new dt({props:{class:"-mr-2"}}),{c(){l=N(e),r=B(),h(n.$$.fragment)},l(s){l=A(s,e),r=j(s),v(n.$$.fragment,s)},m(s,a){C(s,l,a),C(s,r,a),w(n,s,a),t=!0},p(s,a){(!t||a[0]&16)&&e!==(e=s[4]("default.page.fight.unresolve")+"")&&K(l,e)},i(s){t||(g(n.$$.fragment,s),t=!0)},o(s){_(n.$$.fragment,s),t=!1},d(s){s&&(c(l),c(r)),b(n,s)}}}function Vt(o){let e=o[4]("default.page.fight.resolve")+"",l,r,n,t;return n=new nt({props:{class:"-mr-2"}}),{c(){l=N(e),r=B(),h(n.$$.fragment)},l(s){l=A(s,e),r=j(s),v(n.$$.fragment,s)},m(s,a){C(s,l,a),C(s,r,a),w(n,s,a),t=!0},p(s,a){(!t||a[0]&16)&&e!==(e=s[4]("default.page.fight.resolve")+"")&&K(l,e)},i(s){t||(g(n.$$.fragment,s),t=!0)},o(s){_(n.$$.fragment,s),t=!1},d(s){s&&(c(l),c(r)),b(n,s)}}}function Mt(o){let e=o[4]("default.menu.share.cta")+"",l,r,n,t;return n=new ht({props:{class:"-mr-1"}}),{c(){l=N(e),r=B(),h(n.$$.fragment)},l(s){l=A(s,e),r=j(s),v(n.$$.fragment,s)},m(s,a){C(s,l,a),C(s,r,a),w(n,s,a),t=!0},p(s,a){(!t||a[0]&16)&&e!==(e=s[4]("default.menu.share.cta")+"")&&K(l,e)},i(s){t||(g(n.$$.fragment,s),t=!0)},o(s){_(n.$$.fragment,s),t=!1},d(s){s&&(c(l),c(r)),b(n,s)}}}function Ht(o){let e=o[4]("default.menu.share.cta")+"",l;return{c(){l=N(e)},l(r){l=A(r,e)},m(r,n){C(r,l,n)},p(r,n){n[0]&16&&e!==(e=r[4]("default.menu.share.cta")+"")&&K(l,e)},d(r){r&&c(l)}}}function Bt(o){let e,l,r,n;return r=new Ye({props:{class:"text-red-600"}}),{c(){e=I("div"),l=I("div"),h(r.$$.fragment),this.h()},l(t){e=Z(t,"DIV",{class:!0});var s=D(e);l=Z(s,"DIV",{class:!0});var a=D(l);v(r.$$.fragment,a),a.forEach(c),s.forEach(c),this.h()},h(){d(l,"class","icon fill-feelings-foreground svelte-ljnb6t"),d(e,"class","label bg-feelings-background svelte-ljnb6t")},m(t,s){C(t,e,s),H(e,l),w(r,l,null),n=!0},p:F,i(t){n||(g(r.$$.fragment,t),n=!0)},o(t){_(r.$$.fragment,t),n=!1},d(t){t&&c(e),b(r)}}}function jt(o){let e,l,r,n,t;return l=new We({props:{$$slots:{default:[Ht]},$$scope:{ctx:o}}}),n=new Xe({props:{$$slots:{default:[Bt]},$$scope:{ctx:o}}}),{c(){e=I("div"),h(l.$$.fragment),r=B(),h(n.$$.fragment),this.h()},l(s){e=Z(s,"DIV",{class:!0});var a=D(e);v(l.$$.fragment,a),r=j(a),v(n.$$.fragment,a),a.forEach(c),this.h()},h(){d(e,"class","flex items-center justify-between")},m(s,a){C(s,e,a),w(l,e,null),H(e,r),w(n,e,null),t=!0},p(s,a){const u={};a[0]&16|a[1]&16&&(u.$$scope={dirty:a,ctx:s}),l.$set(u);const f={};a[1]&16&&(f.$$scope={dirty:a,ctx:s}),n.$set(f)},i(s){t||(g(l.$$.fragment,s),g(n.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),t=!1},d(s){s&&c(e),b(l),b(n)}}}function Tt(o){let e,l,r=o[4]("default.menu.share.copyLink")+"",n,t,s,a,u,f,i=o[4]("default.menu.share.mailLink")+"",E,V,M,L,R,O;return s=new it({}),M=new mt({}),{c(){e=I("div"),l=I("button"),n=N(r),t=B(),h(s.$$.fragment),u=B(),f=I("button"),E=N(i),V=B(),h(M.$$.fragment),this.h()},l(z){e=Z(z,"DIV",{class:!0});var k=D(e);l=Z(k,"BUTTON",{class:!0});var x=D(l);n=A(x,r),t=j(x),v(s.$$.fragment,x),x.forEach(c),u=j(k),f=Z(k,"BUTTON",{class:!0});var q=D(f);E=A(q,i),V=j(q),v(M.$$.fragment,q),q.forEach(c),k.forEach(c),this.h()},h(){d(l,"class","skeumorphic-button flex w-full items-center justify-between rounded-full px-4 py-1.5 text-sm svelte-ljnb6t"),d(f,"class","skeumorphic-button flex w-full items-center justify-between rounded-full px-4 py-1.5 text-sm svelte-ljnb6t"),d(e,"class","max-container flex flex-col gap-4")},m(z,k){C(z,e,k),H(e,l),H(l,n),H(l,t),w(s,l,null),H(e,u),H(e,f),H(f,E),H(f,V),w(M,f,null),L=!0,R||(O=[ve(a=Et.call(null,l,o[3])),me(l,"svelte-copy",o[16]),me(f,"click",o[17])],R=!0)},p(z,k){(!L||k[0]&16)&&r!==(r=z[4]("default.menu.share.copyLink")+"")&&K(n,r),a&&Be(a.update)&&k[0]&8&&a.update.call(null,z[3]),(!L||k[0]&16)&&i!==(i=z[4]("default.menu.share.mailLink")+"")&&K(E,i)},i(z){L||(g(s.$$.fragment,z),g(M.$$.fragment,z),L=!0)},o(z){_(s.$$.fragment,z),_(M.$$.fragment,z),L=!1},d(z){z&&c(e),b(s),b(M),R=!1,we(O)}}}function It(o){let e,l,r,n;return e=new Qe({props:{class:"w-full border-b border-black/10",$$slots:{default:[jt]},$$scope:{ctx:o}}}),r=new bt({props:{class:"pb-10",$$slots:{default:[Tt]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=B(),h(r.$$.fragment)},l(t){v(e.$$.fragment,t),l=j(t),v(r.$$.fragment,t)},m(t,s){w(e,t,s),C(t,l,s),w(r,t,s),n=!0},p(t,s){const a={};s[0]&16|s[1]&16&&(a.$$scope={dirty:s,ctx:t}),e.$set(a);const u={};s[0]&30|s[1]&16&&(u.$$scope={dirty:s,ctx:t}),r.$set(u)},i(t){n||(g(e.$$.fragment,t),g(r.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),n=!1},d(t){t&&c(l),b(e,t),b(r,t)}}}function Zt(o){let e,l;return e=new Ke({props:{class:"",$$slots:{default:[It]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,n){w(e,r,n),l=!0},p(r,n){const t={};n[0]&30|n[1]&16&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){b(e,r)}}}function St(o){let e=o[4]("default.menu.share.mailDialogText")+"",l;return{c(){l=N(e)},l(r){l=A(r,e)},m(r,n){C(r,l,n)},p(r,n){n[0]&16&&e!==(e=r[4]("default.menu.share.mailDialogText")+"")&&K(l,e)},d(r){r&&c(l)}}}function Ft(o){let e;return{c(){e=N("E-Mail")},l(l){e=A(l,"E-Mail")},m(l,r){C(l,e,r)},d(l){l&&c(e)}}}function Pt(o){let e,l,r,n,t;e=new Ae({props:{class:"form-label",$$slots:{default:[Ft]},$$scope:{ctx:o}}});const s=[o[34],{type:"text"},{placeholder:o[6]==="en"?"E-Mail":"E-Mail Adresse"},{class:"mb-4"}];function a(f){o[19](f)}let u={};for(let f=0;f<s.length;f+=1)u=T(u,s[f]);return o[5].email!==void 0&&(u.value=o[5].email),r=new Fe({props:u}),ae.push(()=>ge(r,"value",a)),{c(){h(e.$$.fragment),l=B(),h(r.$$.fragment)},l(f){v(e.$$.fragment,f),l=j(f),v(r.$$.fragment,f)},m(f,i){w(e,f,i),C(f,l,i),w(r,f,i),t=!0},p(f,i){const E={};i[1]&16&&(E.$$scope={dirty:i,ctx:f}),e.$set(E);const V=i[0]&64|i[1]&8?y(s,[i[1]&8&&Se(f[34]),s[1],i[0]&64&&{placeholder:f[6]==="en"?"E-Mail":"E-Mail Adresse"},s[3]]):{};!n&&i[0]&32&&(n=!0,V.value=f[5].email,ce(()=>n=!1)),r.$set(V)},i(f){t||(g(e.$$.fragment,f),g(r.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),_(r.$$.fragment,f),t=!1},d(f){f&&c(l),b(e,f),b(r,f)}}}function Rt(o){let e,l,r,n;return e=new xe({props:{$$slots:{default:[Pt,({attrs:t})=>({34:t}),({attrs:t})=>[0,t?8:0]]},$$scope:{ctx:o}}}),r=new Ne({}),{c(){h(e.$$.fragment),l=B(),h(r.$$.fragment)},l(t){v(e.$$.fragment,t),l=j(t),v(r.$$.fragment,t)},m(t,s){w(e,t,s),C(t,l,s),w(r,t,s),n=!0},p(t,s){const a={};s[0]&96|s[1]&24&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||(g(e.$$.fragment,t),g(r.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),n=!1},d(t){t&&c(l),b(e,t),b(r,t)}}}function Ot(o){let e=o[4]("default.menu.share.cta")+"",l,r,n,t;return n=new ot({}),{c(){l=N(e),r=B(),h(n.$$.fragment)},l(s){l=A(s,e),r=j(s),v(n.$$.fragment,s)},m(s,a){C(s,l,a),C(s,r,a),w(n,s,a),t=!0},p(s,a){(!t||a[0]&16)&&e!==(e=s[4]("default.menu.share.cta")+"")&&K(l,e)},i(s){t||(g(n.$$.fragment,s),t=!0)},o(s){_(n.$$.fragment,s),t=!1},d(s){s&&(c(l),c(r)),b(n,s)}}}function xt(o){let e,l,r,n,t,s,a,u;return l=new Oe({props:{form:o[7],name:"email",class:"w-full",$$slots:{default:[Rt]},$$scope:{ctx:o}}}),t=new le({props:{type:"submit",class:"flex items-center gap-3",$$slots:{default:[Ot]},$$scope:{ctx:o}}}),{c(){e=I("form"),h(l.$$.fragment),r=B(),n=I("div"),h(t.$$.fragment),this.h()},l(f){e=Z(f,"FORM",{class:!0});var i=D(e);v(l.$$.fragment,i),r=j(i),n=Z(i,"DIV",{class:!0});var E=D(n);v(t.$$.fragment,E),E.forEach(c),i.forEach(c),this.h()},h(){d(n,"class","flex w-full justify-end"),d(e,"class","-mt-1 flex h-full flex-grow flex-col items-start")},m(f,i){C(f,e,i),w(l,e,null),H(e,r),H(e,n),w(t,n,null),s=!0,a||(u=[me(e,"submit",je(o[14])),ve(o[9].call(null,e))],a=!0)},p(f,i){const E={};i[0]&96|i[1]&16&&(E.$$scope={dirty:i,ctx:f}),l.$set(E);const V={};i[0]&16|i[1]&16&&(V.$$scope={dirty:i,ctx:f}),t.$set(V)},i(f){s||(g(l.$$.fragment,f),g(t.$$.fragment,f),s=!0)},o(f){_(l.$$.fragment,f),_(t.$$.fragment,f),s=!1},d(f){f&&c(e),b(l),b(t),a=!1,we(u)}}}function Nt(o){let e,l,r,n;return e=new lt({props:{class:"mb-10 max-w-[9em] leading-tight",$$slots:{default:[St]},$$scope:{ctx:o}}}),r=new rt({props:{$$slots:{default:[xt]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=B(),h(r.$$.fragment)},l(t){v(e.$$.fragment,t),l=j(t),v(r.$$.fragment,t)},m(t,s){w(e,t,s),C(t,l,s),w(r,t,s),n=!0},p(t,s){const a={};s[0]&16|s[1]&16&&(a.$$scope={dirty:s,ctx:t}),e.$set(a);const u={};s[0]&112|s[1]&16&&(u.$$scope={dirty:s,ctx:t}),r.$set(u)},i(t){n||(g(e.$$.fragment,t),g(r.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),n=!1},d(t){t&&c(l),b(e,t),b(r,t)}}}function At(o){let e,l;return e=new tt({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,n){w(e,r,n),l=!0},p(r,n){const t={};n[0]&112|n[1]&16&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){b(e,r)}}}function qt(o){let e,l;return e=new et({props:{$$slots:{default:[At]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,n){w(e,r,n),l=!0},p(r,n){const t={};n[0]&112|n[1]&16&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){b(e,r)}}}function Ut(o){let e,l,r,n,t,s,a,u,f,i,E,V,M,L,R,O;r=new le({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[kt]},$$scope:{ctx:o}}});const z=[Lt,zt],k=[];function x(m,p){return m[0].resolved?1:0}s=x(o),a=k[s]=z[s](o),f=new le({props:{decoration:"dark-op1",class:"flex items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[Mt]},$$scope:{ctx:o}}}),f.$on("click",o[15]);function q(m){o[18](m)}let fe={$$slots:{default:[Zt]},$$scope:{ctx:o}};o[2]!==void 0&&(fe.open=o[2]),E=new Je({props:fe}),ae.push(()=>ge(E,"open",q));function ie(m){o[20](m)}let se={preventScroll:!1,$$slots:{default:[qt]},$$scope:{ctx:o}};return o[1]!==void 0&&(se.open=o[1]),L=new ye({props:se}),ae.push(()=>ge(L,"open",ie)),{c(){e=I("div"),l=I("a"),h(r.$$.fragment),n=B(),t=I("div"),a.c(),u=B(),h(f.$$.fragment),i=B(),h(E.$$.fragment),M=B(),h(L.$$.fragment),this.h()},l(m){e=Z(m,"DIV",{class:!0});var p=D(e);l=Z(p,"A",{href:!0,class:!0});var Q=D(l);v(r.$$.fragment,Q),Q.forEach(c),n=j(p),t=Z(p,"DIV",{class:!0});var S=D(t);a.l(S),u=j(S),v(f.$$.fragment,S),S.forEach(c),p.forEach(c),i=j(m),v(E.$$.fragment,m),M=j(m),v(L.$$.fragment,m),this.h()},h(){d(l,"href","/app/dashboard"),d(l,"class","block"),d(t,"class","flex items-center"),d(e,"class","relative flex h-auto w-full items-center justify-between")},m(m,p){C(m,e,p),H(e,l),w(r,l,null),H(e,n),H(e,t),k[s].m(t,null),H(t,u),w(f,t,null),C(m,i,p),w(E,m,p),C(m,M,p),w(L,m,p),O=!0},p(m,p){const Q={};p[1]&16&&(Q.$$scope={dirty:p,ctx:m}),r.$set(Q);let S=s;s=x(m),s===S?k[s].p(m,p):(Te(),_(k[S],1,1,()=>{k[S]=null}),Ie(),a=k[s],a?a.p(m,p):(a=k[s]=z[s](m),a.c()),g(a,1),a.m(t,u));const ne={};p[0]&16|p[1]&16&&(ne.$$scope={dirty:p,ctx:m}),f.$set(ne);const ee={};p[0]&30|p[1]&16&&(ee.$$scope={dirty:p,ctx:m}),!V&&p[0]&4&&(V=!0,ee.open=m[2],ce(()=>V=!1)),E.$set(ee);const te={};p[0]&112|p[1]&16&&(te.$$scope={dirty:p,ctx:m}),!R&&p[0]&2&&(R=!0,te.open=m[1],ce(()=>R=!1)),L.$set(te)},i(m){O||(g(r.$$.fragment,m),g(a),g(f.$$.fragment,m),g(E.$$.fragment,m),g(L.$$.fragment,m),O=!0)},o(m){_(r.$$.fragment,m),_(a),_(f.$$.fragment,m),_(E.$$.fragment,m),_(L.$$.fragment,m),O=!1},d(m){m&&(c(e),c(i),c(M)),b(r),k[s].d(),b(f),b(E,m),b(L,m)}}}function Jt(o,e,l){let r,n,t,s,a;oe(o,$e,$=>l(4,n=$)),oe(o,Ze,$=>l(6,s=$)),oe(o,qe,$=>l(13,a=$));let{id:u}=e,{record:f}=e,i=!1,E=[],V=!1,M=!1;const L=pe.object({email:pe.string().email({message:De($e)("default.page.login.form.email.validEmailError")})}),R=Ge(Pe(L)),O=async()=>{const $=await ie(t,L);return $.valid?!0:(x.set($.errors),!1)},z=Ue(R,{resetForm:!1,validators:Re(L),async onSubmit({validators:$,cancel:Ce}){console.log("onSubmit"),Ce(),await O()&&se()}}),{form:k,errors:x,enhance:q,validate:fe,validateForm:ie}=z;oe(o,k,$=>l(5,t=$));const se=()=>{try{console.log("send link record",f);const $=fetch("/api/mails/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:"sendLink",locale:s,to:t.email,owner:f.expand.owner.firstName,recipientName:f.name,link:r})});console.log("sendMailRes",$),l(1,V=!1),ue.success(n("default.menu.share.mailLinkConfirmation"))}catch($){console.log("error sending link per mail",$),ue.error(n("default.menu.share.mailLinkError"))}},m=async()=>{try{await he.collection("fights").update(u,{resolved:!f.resolved})}catch($){console.error("error resolving fight",$)}};Ve(async()=>{l(12,i=!0),console.log("record",f),console.log("responses",E)}),Me(()=>{he.collection("responses").unsubscribe("*")});function p($){He.call(this,o,$)}const Q=()=>l(2,M=!0),S=()=>{l(2,M=!1),ue.success(n("default.menu.share.copyLinkConfirmation"))},ne=()=>(l(2,M=!1),l(1,V=!0));function ee($){M=$,l(2,M)}function te($){o.$$.not_equal(t.email,$)&&(t.email=$,k.set(t))}function be($){V=$,l(1,V)}return o.$$set=$=>{"id"in $&&l(11,u=$.id),"record"in $&&l(0,f=$.record)},o.$$.update=()=>{o.$$.dirty[0]&10240&&l(3,r=`${a.url.origin}/app/fights/${u}/respond`),o.$$.dirty[0]&4097},[f,V,M,r,n,t,s,z,k,q,m,u,i,a,p,Q,S,ne,ee,te,be]}class ul extends X{constructor(e){super(),Y(this,e,Jt,Ut,W,{id:11,record:0},null,[-1,-1])}}export{ul as S};
