import{F as P,s as Me,e as j,a as C,c as M,b as O,g as T,f as p,y as I,i as v,h as R,C as he,R as rt,G as ot,D as nt,k as ue,N as st,L as H,n as Z,p as at,t as G,d as Q,l as x,H as ee,I as te,j as W,J as le,Q as Oe}from"../chunks/scheduler.CKu2orG_.js";import{S as ft,i as it,c as k,a as E,m as S,t as c,b as _,f as U,d as F,g as L,e as re}from"../chunks/index.DXc6nQ0s.js";import{t as z,u as ut,l as ct,g as oe,a as ne,e as J}from"../chunks/page.CjYSaJLb.js";import{M as mt,s as be,g as me}from"../chunks/Menu.DmxiePjz.js";import{c as Y,z as gt,F as se,C as ae,a as fe,b as ie}from"../chunks/zod.CoJ9B_D1.js";import{I as _t}from"../chunks/input.w0ZSS3XE.js";import{F as pt,M as $t,a as dt,T as ze,b as Ue,c as Le}from"../chunks/Mascot.DdMQgkTt.js";import"../chunks/entry.DV9I5Wjp.js";import{z as K,s as ht}from"../chunks/memoize.CGCrhbMP.js";import{d as bt}from"../chunks/defaults.CEskAMGU.js";import{I as vt}from"../chunks/icon-folder.CBGieXVr.js";import{I as wt,a as kt,b as Et,c as St}from"../chunks/icon-steps.dGSELuxl.js";import{p as ge}from"../chunks/pocketbase.Ce4YzWbP.js";const _e=K.object({name:K.string().min(3,{message:P(z)("default.page.fights.form.name.tooShortError")})}),pe=_e.extend({observation:K.string().min(10,{message:P(z)("default.page.fights.form.observation.tooShortError")})}),$e=pe.extend({feelings:K.array(K.string()).min(1,{message:P(z)("default.page.fights.form.feelings.tooFewError")})}),de=$e.extend({needs:K.array(K.string()).min(1,{message:P(z)("default.page.fights.form.needs.tooFewError")})}),y=de.extend({request:K.string().min(10,{message:P(z)("default.page.fights.form.request.tooFewError")})});function ve(s,t,o){const e=s.slice();return e[41]=t[o],e}function we(s,t,o){const e=s.slice();return e[49]=t[o],e}function ke(s,t,o){const e=s.slice();return e[38]=t[o],e}function Ee(s,t,o){const e=s.slice();return e[41]=t[o],e}function Se(s,t,o){const e=s.slice();return e[44]=t[o],e}function Fe(s){let t,o,e,l;return t=new pt({props:{step:s[0],steps:s[5],stepBackground:s[5][s[0]-1].slug}}),t.$on("changeStep",s[13]),e=new $t({props:{step:s[0],stepName:s[5][s[0]-1].slug}}),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(r){E(t.$$.fragment,r),o=T(r),E(e.$$.fragment,r)},m(r,n){S(t,r,n),v(r,o,n),S(e,r,n),l=!0},p(r,n){const i={};n[0]&1&&(i.step=r[0]),n[0]&32&&(i.steps=r[5]),n[0]&33&&(i.stepBackground=r[5][r[0]-1].slug),t.$set(i);const f={};n[0]&1&&(f.step=r[0]),n[0]&33&&(f.stepName=r[5][r[0]-1].slug),e.$set(f)},i(r){l||(c(t.$$.fragment,r),c(e.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),l=!1},d(r){r&&p(o),F(t,r),F(e,r)}}}function Ft(s){let t;return{c(){t=G("Error in Submit")},l(o){t=Q(o,"Error in Submit")},m(o,e){v(o,t,e)},p:Z,i:Z,o:Z,d(o){o&&p(t)}}}function It(s){let t;return{c(){t=G("Success")},l(o){t=Q(o,"Success")},m(o,e){v(o,t,e)},p:Z,i:Z,o:Z,d(o){o&&p(t)}}}function Nt(s){let t,o,e;return o=new se({props:{form:s[9],name:"request",$$slots:{default:[jt]},$$scope:{ctx:s}}}),{c(){t=j("div"),k(o.$$.fragment),this.h()},l(l){t=M(l,"DIV",{"data-simplebar":!0,class:!0});var r=O(t);E(o.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"data-simplebar",""),I(t,"class","form-content")},m(l,r){v(l,t,r),S(o,t,null),e=!0},p(l,r){const n={};r[0]&192|r[1]&2097152&&(n.$$scope={dirty:r,ctx:l}),o.$set(n)},i(l){e||(c(o.$$.fragment,l),e=!0)},o(l){_(o.$$.fragment,l),e=!1},d(l){l&&p(t),F(o)}}}function Dt(s){let t,o,e;return o=new se({props:{form:s[9],name:"needs",$$slots:{default:[Lt]},$$scope:{ctx:s}}}),{c(){t=j("div"),k(o.$$.fragment),this.h()},l(l){t=M(l,"DIV",{"data-simplebar":!0,class:!0});var r=O(t);E(o.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"data-simplebar",""),I(t,"class","form-content")},m(l,r){v(l,t,r),S(o,t,null),e=!0},p(l,r){const n={};r[0]&452|r[1]&2097152&&(n.$$scope={dirty:r,ctx:l}),o.$set(n)},i(l){e||(c(o.$$.fragment,l),e=!0)},o(l){_(o.$$.fragment,l),e=!1},d(l){l&&p(t),F(o)}}}function qt(s){let t,o,e;return o=new se({props:{form:s[9],name:"feelings",$$slots:{default:[Gt]},$$scope:{ctx:s}}}),{c(){t=j("div"),k(o.$$.fragment),this.h()},l(l){t=M(l,"DIV",{"data-simplebar":!0,class:!0});var r=O(t);E(o.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"data-simplebar",""),I(t,"class","form-content")},m(l,r){v(l,t,r),S(o,t,null),e=!0},p(l,r){const n={};r[0]&483|r[1]&2097152&&(n.$$scope={dirty:r,ctx:l}),o.$set(n)},i(l){e||(c(o.$$.fragment,l),e=!0)},o(l){_(o.$$.fragment,l),e=!1},d(l){l&&p(t),F(o)}}}function Vt(s){let t,o,e;return o=new se({props:{form:s[9],name:"observation",$$slots:{default:[Kt]},$$scope:{ctx:s}}}),{c(){t=j("div"),k(o.$$.fragment),this.h()},l(l){t=M(l,"DIV",{"data-simplebar":!0,class:!0});var r=O(t);E(o.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"data-simplebar",""),I(t,"class","form-content")},m(l,r){v(l,t,r),S(o,t,null),e=!0},p(l,r){const n={};r[0]&192|r[1]&2097152&&(n.$$scope={dirty:r,ctx:l}),o.$set(n)},i(l){e||(c(o.$$.fragment,l),e=!0)},o(l){_(o.$$.fragment,l),e=!1},d(l){l&&p(t),F(o)}}}function Ct(s){let t,o,e;return o=new se({props:{form:s[9],name:"name",$$slots:{default:[Yt]},$$scope:{ctx:s}}}),{c(){t=j("div"),k(o.$$.fragment),this.h()},l(l){t=M(l,"DIV",{"data-simplebar":!0,class:!0});var r=O(t);E(o.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"data-simplebar",""),I(t,"class","form-content")},m(l,r){v(l,t,r),S(o,t,null),e=!0},p(l,r){const n={};r[0]&192|r[1]&2097152&&(n.$$scope={dirty:r,ctx:l}),o.$set(n)},i(l){e||(c(o.$$.fragment,l),e=!0)},o(l){_(o.$$.fragment,l),e=!1},d(l){l&&p(t),F(o)}}}function Tt(s){let t=s[7]("default.page.fights.form.request.label")+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&128&&t!==(t=e[7]("default.page.fights.form.request.label")+"")&&W(o,t)},d(e){e&&p(o)}}}function Bt(s){let t,o,e,l,r;t=new ie({props:{class:"form-label",$$slots:{default:[Tt]},$$scope:{ctx:s}}});const n=[s[37],{class:"min-h-60"}];function i(a){s[22](a)}let f={};for(let a=0;a<n.length;a+=1)f=x(f,n[a]);return s[6].request!==void 0&&(f.value=s[6].request),e=new ze({props:f}),ee.push(()=>re(e,"value",i)),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(a){E(t.$$.fragment,a),o=T(a),E(e.$$.fragment,a)},m(a,u){S(t,a,u),v(a,o,u),S(e,a,u),r=!0},p(a,u){const h={};u[0]&128|u[1]&2097152&&(h.$$scope={dirty:u,ctx:a}),t.$set(h);const w=u[1]&64?oe(n,[ne(a[37]),n[1]]):{};!l&&u[0]&64&&(l=!0,w.value=a[6].request,te(()=>l=!1)),e.$set(w)},i(a){r||(c(t.$$.fragment,a),c(e.$$.fragment,a),r=!0)},o(a){_(t.$$.fragment,a),_(e.$$.fragment,a),r=!1},d(a){a&&p(o),F(t,a),F(e,a)}}}function jt(s){let t,o,e,l;return t=new ae({props:{$$slots:{default:[Bt,({attrs:r})=>({37:r}),({attrs:r})=>[0,r?64:0]]},$$scope:{ctx:s}}}),e=new fe({}),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(r){E(t.$$.fragment,r),o=T(r),E(e.$$.fragment,r)},m(r,n){S(t,r,n),v(r,o,n),S(e,r,n),l=!0},p(r,n){const i={};n[0]&192|n[1]&2097216&&(i.$$scope={dirty:n,ctx:r}),t.$set(i)},i(r){l||(c(t.$$.fragment,r),c(e.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),l=!1},d(r){r&&p(o),F(t,r),F(e,r)}}}function Mt(s){let t=s[7]("default.page.fights.form.needs.label")+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&128&&t!==(t=e[7]("default.page.fights.form.needs.label")+"")&&W(o,t)},d(e){e&&p(o)}}}function Ie(s){let t,o,e=J(s[2]),l=[];for(let n=0;n<e.length;n+=1)l[n]=De(ve(s,e,n));const r=n=>_(l[n],1,1,()=>{l[n]=null});return{c(){t=j("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=M(n,"DIV",{class:!0});var i=O(t);for(let f=0;f<l.length;f+=1)l[f].l(i);i.forEach(p),this.h()},h(){I(t,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(n,i){v(n,t,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(t,null);o=!0},p(n,i){if(i[0]&82244){e=J(n[2]);let f;for(f=0;f<e.length;f+=1){const a=ve(n,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=De(a),l[f].c(),c(l[f],1),l[f].m(t,null))}for(L(),f=e.length;f<l.length;f+=1)r(f);U()}},i(n){if(!o){for(let i=0;i<e.length;i+=1)c(l[i]);o=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)_(l[i]);o=!1},d(n){n&&p(t),le(l,n)}}}function Ot(s){let t=(s[8]==="de"?s[49].nameDE:s[49].nameEN)+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&260&&t!==(t=(e[8]==="de"?e[49].nameDE:e[49].nameEN)+"")&&W(o,t)},d(e){e&&p(o)}}}function Ne(s){let t,o,e,l,r,n,i;return o=new Le({props:{value:s[49].id,class:(s[49].nameEN===s[41].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[Ot]},$$scope:{ctx:s}}}),{c(){t=j("button"),k(o.$$.fragment),e=C(),this.h()},l(f){t=M(f,"BUTTON",{type:!0,class:!0});var a=O(t);E(o.$$.fragment,a),e=T(a),a.forEach(p),this.h()},h(){I(t,"type","button"),I(t,"class",l=(s[16](s[49],s[41])||s[6].needs.includes(s[49].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(f,a){v(f,t,a),S(o,t,null),R(t,e),r=!0,n||(i=he(t,"click",function(){Oe(s[14](s[49],s[41].category))&&s[14](s[49],s[41].category).apply(this,arguments)}),n=!0)},p(f,a){s=f;const u={};a[0]&4&&(u.value=s[49].id),a[0]&4&&(u.class=(s[49].nameEN===s[41].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),a[0]&260|a[1]&2097152&&(u.$$scope={dirty:a,ctx:s}),o.$set(u),(!r||a[0]&68&&l!==(l=(s[16](s[49],s[41])||s[6].needs.includes(s[49].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&I(t,"class",l)},i(f){r||(c(o.$$.fragment,f),r=!0)},o(f){_(o.$$.fragment,f),r=!1},d(f){f&&p(t),F(o),n=!1,i()}}}function De(s){let t,o,e=J(s[41].content),l=[];for(let n=0;n<e.length;n+=1)l[n]=Ne(we(s,e,n));const r=n=>_(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();t=H()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);t=H()},m(n,i){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(n,i);v(n,t,i),o=!0},p(n,i){if(i[0]&82244){e=J(n[41].content);let f;for(f=0;f<e.length;f+=1){const a=we(n,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Ne(a),l[f].c(),c(l[f],1),l[f].m(t.parentNode,t))}for(L(),f=e.length;f<l.length;f+=1)r(f);U()}},i(n){if(!o){for(let i=0;i<e.length;i+=1)c(l[i]);o=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)_(l[i]);o=!1},d(n){n&&p(t),le(l,n)}}}function zt(s){let t,o,e=s[2].length>0&&Ie(s);return{c(){e&&e.c(),t=H()},l(l){e&&e.l(l),t=H()},m(l,r){e&&e.m(l,r),v(l,t,r),o=!0},p(l,r){l[2].length>0?e?(e.p(l,r),r[0]&4&&c(e,1)):(e=Ie(l),e.c(),c(e,1),e.m(t.parentNode,t)):e&&(L(),_(e,1,1,()=>{e=null}),U())},i(l){o||(c(e),o=!0)},o(l){_(e),o=!1},d(l){l&&p(t),e&&e.d(l)}}}function Ut(s){let t,o,e,l,r;t=new ie({props:{class:"form-label",$$slots:{default:[Mt]},$$scope:{ctx:s}}});const n=[{type:"multiple"},s[37],{class:""}];function i(a){s[21](a)}let f={$$slots:{default:[zt]},$$scope:{ctx:s}};for(let a=0;a<n.length;a+=1)f=x(f,n[a]);return s[6].needs!==void 0&&(f.value=s[6].needs),e=new Ue({props:f}),ee.push(()=>re(e,"value",i)),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(a){E(t.$$.fragment,a),o=T(a),E(e.$$.fragment,a)},m(a,u){S(t,a,u),v(a,o,u),S(e,a,u),r=!0},p(a,u){const h={};u[0]&128|u[1]&2097152&&(h.$$scope={dirty:u,ctx:a}),t.$set(h);const w=u[1]&64?oe(n,[n[0],ne(a[37]),n[2]]):{};u[0]&324|u[1]&2097152&&(w.$$scope={dirty:u,ctx:a}),!l&&u[0]&64&&(l=!0,w.value=a[6].needs,te(()=>l=!1)),e.$set(w)},i(a){r||(c(t.$$.fragment,a),c(e.$$.fragment,a),r=!0)},o(a){_(t.$$.fragment,a),_(e.$$.fragment,a),r=!1},d(a){a&&p(o),F(t,a),F(e,a)}}}function Lt(s){let t,o,e,l;return t=new ae({props:{$$slots:{default:[Ut,({attrs:r})=>({37:r}),({attrs:r})=>[0,r?64:0]]},$$scope:{ctx:s}}}),e=new fe({}),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(r){E(t.$$.fragment,r),o=T(r),E(e.$$.fragment,r)},m(r,n){S(t,r,n),v(r,o,n),S(e,r,n),l=!0},p(r,n){const i={};n[0]&452|n[1]&2097216&&(i.$$scope={dirty:n,ctx:r}),t.$set(i)},i(r){l||(c(t.$$.fragment,r),c(e.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),l=!1},d(r){r&&p(o),F(t,r),F(e,r)}}}function Pt(s){let t=s[7]("default.page.fights.form.feelings.label")+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&128&&t!==(t=e[7]("default.page.fights.form.feelings.label")+"")&&W(o,t)},d(e){e&&p(o)}}}function qe(s){let t,o,e=J(s[1]),l=[];for(let n=0;n<e.length;n+=1)l[n]=Te(ke(s,e,n));const r=n=>_(l[n],1,1,()=>{l[n]=null});return{c(){t=j("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=M(n,"DIV",{class:!0});var i=O(t);for(let f=0;f<l.length;f+=1)l[f].l(i);i.forEach(p),this.h()},h(){I(t,"class","")},m(n,i){v(n,t,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(t,null);o=!0},p(n,i){if(i[0]&98787){e=J(n[1]);let f;for(f=0;f<e.length;f+=1){const a=ke(n,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Te(a),l[f].c(),c(l[f],1),l[f].m(t,null))}for(L(),f=e.length;f<l.length;f+=1)r(f);U()}},i(n){if(!o){for(let i=0;i<e.length;i+=1)c(l[i]);o=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)_(l[i]);o=!1},d(n){n&&p(t),le(l,n)}}}function Rt(s){let t=(s[8]==="de"?s[44].nameDE:s[44].nameEN)+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&258&&t!==(t=(e[8]==="de"?e[44].nameDE:e[44].nameEN)+"")&&W(o,t)},d(e){e&&p(o)}}}function Ve(s){let t,o,e,l,r,n;return o=new Le({props:{value:s[44].id,class:(s[44].nameEN===s[41].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[Rt]},$$scope:{ctx:s}}}),{c(){t=j("button"),k(o.$$.fragment),this.h()},l(i){t=M(i,"BUTTON",{type:!0,class:!0});var f=O(t);E(o.$$.fragment,f),f.forEach(p),this.h()},h(){I(t,"type","button"),I(t,"class",e=(s[16](s[44],s[41])||s[6].feelings.includes(s[44].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(i,f){v(i,t,f),S(o,t,null),l=!0,r||(n=he(t,"click",function(){Oe(s[15](s[44],s[41].category))&&s[15](s[44],s[41].category).apply(this,arguments)}),r=!0)},p(i,f){s=i;const a={};f[0]&2&&(a.value=s[44].id),f[0]&2&&(a.class=(s[44].nameEN===s[41].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),f[0]&258|f[1]&2097152&&(a.$$scope={dirty:f,ctx:s}),o.$set(a),(!l||f[0]&66&&e!==(e=(s[16](s[44],s[41])||s[6].feelings.includes(s[44].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&I(t,"class",e)},i(i){l||(c(o.$$.fragment,i),l=!0)},o(i){_(o.$$.fragment,i),l=!1},d(i){i&&p(t),F(o),r=!1,n()}}}function Ce(s){let t,o,e=J(s[41].content),l=[];for(let n=0;n<e.length;n+=1)l[n]=Ve(Se(s,e,n));const r=n=>_(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();t=H()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);t=H()},m(n,i){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(n,i);v(n,t,i),o=!0},p(n,i){if(i[0]&98626){e=J(n[41].content);let f;for(f=0;f<e.length;f+=1){const a=Se(n,e,f);l[f]?(l[f].p(a,i),c(l[f],1)):(l[f]=Ve(a),l[f].c(),c(l[f],1),l[f].m(t.parentNode,t))}for(L(),f=e.length;f<l.length;f+=1)r(f);U()}},i(n){if(!o){for(let i=0;i<e.length;i+=1)c(l[i]);o=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)_(l[i]);o=!1},d(n){n&&p(t),le(l,n)}}}function Te(s){let t,o=(s[38].category==="true"?s[7]("default.page.fights.form.general.goodFeelings"):s[7]("default.page.fights.form.general.badFeelings"))+"",e,l,r,n,i,f,a,u,h,w=J(s[38].content),$=[];for(let m=0;m<w.length;m+=1)$[m]=Ce(Ee(s,w,m));const B=m=>_($[m],1,1,()=>{$[m]=null});return{c(){t=j("div"),e=G(o),l=C(),r=j("div"),f=C(),a=j("div");for(let m=0;m<$.length;m+=1)$[m].c();u=C(),this.h()},l(m){t=M(m,"DIV",{class:!0});var d=O(t);e=Q(d,o),l=T(d),r=M(d,"DIV",{class:!0}),O(r).forEach(p),d.forEach(p),f=T(m),a=M(m,"DIV",{class:!0});var b=O(a);for(let q=0;q<$.length;q+=1)$[q].l(b);u=T(b),b.forEach(p),this.h()},h(){I(r,"class",n="border-b border-"+s[5][s[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20"),I(t,"class",i="text-"+s[5][s[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs"),I(a,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(m,d){v(m,t,d),R(t,e),R(t,l),R(t,r),v(m,f,d),v(m,a,d);for(let b=0;b<$.length;b+=1)$[b]&&$[b].m(a,null);R(a,u),h=!0},p(m,d){if((!h||d[0]&130)&&o!==(o=(m[38].category==="true"?m[7]("default.page.fights.form.general.goodFeelings"):m[7]("default.page.fights.form.general.badFeelings"))+"")&&W(e,o),(!h||d[0]&33&&n!==(n="border-b border-"+m[5][m[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20"))&&I(r,"class",n),(!h||d[0]&33&&i!==(i="text-"+m[5][m[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs"))&&I(t,"class",i),d[0]&98626){w=J(m[38].content);let b;for(b=0;b<w.length;b+=1){const q=Ee(m,w,b);$[b]?($[b].p(q,d),c($[b],1)):($[b]=Ce(q),$[b].c(),c($[b],1),$[b].m(a,u))}for(L(),b=w.length;b<$.length;b+=1)B(b);U()}},i(m){if(!h){for(let d=0;d<w.length;d+=1)c($[d]);h=!0}},o(m){$=$.filter(Boolean);for(let d=0;d<$.length;d+=1)_($[d]);h=!1},d(m){m&&(p(t),p(f),p(a)),le($,m)}}}function Ht(s){let t,o,e=s[1].length>0&&qe(s);return{c(){e&&e.c(),t=H()},l(l){e&&e.l(l),t=H()},m(l,r){e&&e.m(l,r),v(l,t,r),o=!0},p(l,r){l[1].length>0?e?(e.p(l,r),r[0]&2&&c(e,1)):(e=qe(l),e.c(),c(e,1),e.m(t.parentNode,t)):e&&(L(),_(e,1,1,()=>{e=null}),U())},i(l){o||(c(e),o=!0)},o(l){_(e),o=!1},d(l){l&&p(t),e&&e.d(l)}}}function Jt(s){let t,o,e,l,r;t=new ie({props:{class:"form-label",$$slots:{default:[Pt]},$$scope:{ctx:s}}});const n=[{type:"multiple"},s[37],{class:"flex flex-col gap-4"}];function i(a){s[20](a)}let f={$$slots:{default:[Ht]},$$scope:{ctx:s}};for(let a=0;a<n.length;a+=1)f=x(f,n[a]);return s[6].feelings!==void 0&&(f.value=s[6].feelings),e=new Ue({props:f}),ee.push(()=>re(e,"value",i)),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(a){E(t.$$.fragment,a),o=T(a),E(e.$$.fragment,a)},m(a,u){S(t,a,u),v(a,o,u),S(e,a,u),r=!0},p(a,u){const h={};u[0]&128|u[1]&2097152&&(h.$$scope={dirty:u,ctx:a}),t.$set(h);const w=u[1]&64?oe(n,[n[0],ne(a[37]),n[2]]):{};u[0]&483|u[1]&2097152&&(w.$$scope={dirty:u,ctx:a}),!l&&u[0]&64&&(l=!0,w.value=a[6].feelings,te(()=>l=!1)),e.$set(w)},i(a){r||(c(t.$$.fragment,a),c(e.$$.fragment,a),r=!0)},o(a){_(t.$$.fragment,a),_(e.$$.fragment,a),r=!1},d(a){a&&p(o),F(t,a),F(e,a)}}}function Gt(s){let t,o,e,l;return t=new ae({props:{$$slots:{default:[Jt,({attrs:r})=>({37:r}),({attrs:r})=>[0,r?64:0]]},$$scope:{ctx:s}}}),e=new fe({}),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(r){E(t.$$.fragment,r),o=T(r),E(e.$$.fragment,r)},m(r,n){S(t,r,n),v(r,o,n),S(e,r,n),l=!0},p(r,n){const i={};n[0]&483|n[1]&2097216&&(i.$$scope={dirty:n,ctx:r}),t.$set(i)},i(r){l||(c(t.$$.fragment,r),c(e.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),l=!1},d(r){r&&p(o),F(t,r),F(e,r)}}}function Qt(s){let t=s[7]("default.page.fights.form.observation.label")+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&128&&t!==(t=e[7]("default.page.fights.form.observation.label")+"")&&W(o,t)},d(e){e&&p(o)}}}function At(s){let t,o,e,l,r;t=new ie({props:{class:"form-label",$$slots:{default:[Qt]},$$scope:{ctx:s}}});const n=[s[37],{class:"min-h-60"}];function i(a){s[19](a)}let f={};for(let a=0;a<n.length;a+=1)f=x(f,n[a]);return s[6].observation!==void 0&&(f.value=s[6].observation),e=new ze({props:f}),ee.push(()=>re(e,"value",i)),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(a){E(t.$$.fragment,a),o=T(a),E(e.$$.fragment,a)},m(a,u){S(t,a,u),v(a,o,u),S(e,a,u),r=!0},p(a,u){const h={};u[0]&128|u[1]&2097152&&(h.$$scope={dirty:u,ctx:a}),t.$set(h);const w=u[1]&64?oe(n,[ne(a[37]),n[1]]):{};!l&&u[0]&64&&(l=!0,w.value=a[6].observation,te(()=>l=!1)),e.$set(w)},i(a){r||(c(t.$$.fragment,a),c(e.$$.fragment,a),r=!0)},o(a){_(t.$$.fragment,a),_(e.$$.fragment,a),r=!1},d(a){a&&p(o),F(t,a),F(e,a)}}}function Kt(s){let t,o,e,l;return t=new ae({props:{$$slots:{default:[At,({attrs:r})=>({37:r}),({attrs:r})=>[0,r?64:0]]},$$scope:{ctx:s}}}),e=new fe({}),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(r){E(t.$$.fragment,r),o=T(r),E(e.$$.fragment,r)},m(r,n){S(t,r,n),v(r,o,n),S(e,r,n),l=!0},p(r,n){const i={};n[0]&192|n[1]&2097216&&(i.$$scope={dirty:n,ctx:r}),t.$set(i)},i(r){l||(c(t.$$.fragment,r),c(e.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),l=!1},d(r){r&&p(o),F(t,r),F(e,r)}}}function Wt(s){let t=s[7]("default.page.fights.form.name.label")+"",o;return{c(){o=G(t)},l(e){o=Q(e,t)},m(e,l){v(e,o,l)},p(e,l){l[0]&128&&t!==(t=e[7]("default.page.fights.form.name.label")+"")&&W(o,t)},d(e){e&&p(o)}}}function Xt(s){let t,o,e,l,r;t=new ie({props:{class:"form-label ",$$slots:{default:[Wt]},$$scope:{ctx:s}}});const n=[s[37]];function i(a){s[18](a)}let f={};for(let a=0;a<n.length;a+=1)f=x(f,n[a]);return s[6].name!==void 0&&(f.value=s[6].name),e=new _t({props:f}),ee.push(()=>re(e,"value",i)),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(a){E(t.$$.fragment,a),o=T(a),E(e.$$.fragment,a)},m(a,u){S(t,a,u),v(a,o,u),S(e,a,u),r=!0},p(a,u){const h={};u[0]&128|u[1]&2097152&&(h.$$scope={dirty:u,ctx:a}),t.$set(h);const w=u[1]&64?oe(n,[ne(a[37])]):{};!l&&u[0]&64&&(l=!0,w.value=a[6].name,te(()=>l=!1)),e.$set(w)},i(a){r||(c(t.$$.fragment,a),c(e.$$.fragment,a),r=!0)},o(a){_(t.$$.fragment,a),_(e.$$.fragment,a),r=!1},d(a){a&&p(o),F(t,a),F(e,a)}}}function Yt(s){let t,o,e,l;return t=new ae({props:{$$slots:{default:[Xt,({attrs:r})=>({37:r}),({attrs:r})=>[0,r?64:0]]},$$scope:{ctx:s}}}),e=new fe({}),{c(){k(t.$$.fragment),o=C(),k(e.$$.fragment)},l(r){E(t.$$.fragment,r),o=T(r),E(e.$$.fragment,r)},m(r,n){S(t,r,n),v(r,o,n),S(e,r,n),l=!0},p(r,n){const i={};n[0]&192|n[1]&2097216&&(i.$$scope={dirty:n,ctx:r}),t.$set(i)},i(r){l||(c(t.$$.fragment,r),c(e.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),l=!1},d(r){r&&p(o),F(t,r),F(e,r)}}}function Be(s){let t,o,e,l;const r=[Ct,Vt,qt,Dt,Nt,It,Ft],n=[];function i(f,a){return f[0]===1?0:f[0]===2?1:f[0]===3?2:f[0]===4?3:f[3]?f[4]?5:6:4}return t=i(s),o=n[t]=r[t](s),{c(){o.c(),e=H()},l(f){o.l(f),e=H()},m(f,a){n[t].m(f,a),v(f,e,a),l=!0},p(f,a){let u=t;t=i(f),t===u?n[t].p(f,a):(L(),_(n[u],1,1,()=>{n[u]=null}),U(),o=n[t],o?o.p(f,a):(o=n[t]=r[t](f),o.c()),c(o,1),o.m(e.parentNode,e))},i(f){l||(c(o),l=!0)},o(f){_(o),l=!1},d(f){f&&p(e),n[t].d(f)}}}function je(s){let t,o;return t=new dt({props:{step:s[0],primaryButtonClass:`bg-${s[5][s[0]-1].slug}-background`,class:"flex-shrink-0"}}),t.$on("toPrev",s[12]),{c(){k(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){S(t,e,l),o=!0},p(e,l){const r={};l[0]&1&&(r.step=e[0]),l[0]&33&&(r.primaryButtonClass=`bg-${e[5][e[0]-1].slug}-background`),t.$set(r)},i(e){o||(c(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){F(t,e)}}}function Zt(s){let t,o,e,l,r,n,i=s[0],f,a,u,h,w;e=new mt({});let $=!s[3]&&!s[4]&&Fe(s),B=Be(s),m=!s[3]&&!s[4]&&je(s);return{c(){t=j("div"),o=j("div"),k(e.$$.fragment),l=C(),r=j("form"),$&&$.c(),n=C(),B.c(),f=C(),m&&m.c(),this.h()},l(d){t=M(d,"DIV",{class:!0});var b=O(t);o=M(b,"DIV",{class:!0});var q=O(o);E(e.$$.fragment,q),l=T(q),r=M(q,"FORM",{class:!0});var A=O(r);$&&$.l(A),n=T(A),B.l(A),f=T(A),m&&m.l(A),A.forEach(p),q.forEach(p),b.forEach(p),this.h()},h(){I(r,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),I(o,"class","max-container relative flex h-dvh flex-grow flex-col"),I(t,"class",a=`flex flex-grow flex-col justify-between transition duration-700 bg-${s[5][s[0]-1].slug}-background`)},m(d,b){v(d,t,b),R(t,o),S(e,o,null),R(o,l),R(o,r),$&&$.m(r,null),R(r,n),B.m(r,null),R(r,f),m&&m.m(r,null),u=!0,h||(w=[he(r,"submit",rt(s[17])),ot(s[11].call(null,r))],h=!0)},p(d,b){!d[3]&&!d[4]?$?($.p(d,b),b[0]&24&&c($,1)):($=Fe(d),$.c(),c($,1),$.m(r,n)):$&&(L(),_($,1,1,()=>{$=null}),U()),b[0]&1&&Me(i,i=d[0])?(L(),_(B,1,1,Z),U(),B=Be(d),B.c(),c(B,1),B.m(r,f)):B.p(d,b),!d[3]&&!d[4]?m?(m.p(d,b),b[0]&24&&c(m,1)):(m=je(d),m.c(),c(m,1),m.m(r,null)):m&&(L(),_(m,1,1,()=>{m=null}),U()),(!u||b[0]&33&&a!==(a=`flex flex-grow flex-col justify-between transition duration-700 bg-${d[5][d[0]-1].slug}-background`))&&I(t,"class",a)},i(d){u||(c(e.$$.fragment,d),c($),c(B),c(m),u=!0)},o(d){_(e.$$.fragment,d),_($),_(B),_(m),u=!1},d(d){d&&p(t),F(e),$&&$.d(),B.d(d),m&&m.d(),h=!1,nt(w)}}}function yt(s,t,o){let e,l,r,n;ue(s,ut,g=>o(24,l=g)),ue(s,z,g=>o(7,r=g)),ue(s,ct,g=>o(8,n=g));const i=bt(Y(y));let f=[],a=[];const u=[Y(_e),Y(pe),Y($e),Y(de),Y(y)];let h=1,w=!1,$=!1;const B=async()=>{try{let g=e;g.owner=l.id,console.log("submit form",g);const D=await ge.collection("fights").create(g);o(4,$=!0),o(3,w=!0)}catch(g){console.log("error handling submit",g),o(4,$=!1),o(3,w=!0)}},m=async g=>{const N=Object.keys(Y([_e,pe,$e,de,y][g-1]).constraints);let V=!0;for(const X of N)await Re(X,{update:!1})&&(V=!1);return!!V},d=async()=>{const g=await He(e,y);return g.valid?!0:(A.set(g.errors),!1)},b=ht(i,{resetForm:!1,validators:gt(y),async onSubmit({validators:g,cancel:D}){console.log("onSubmit"),D(),await d()&&(h==u.length?B():o(0,h++,h))},async onUpdated({form:g}){console.log("onUpdated"),g.valid&&o(0,h=1)}}),{form:q,errors:A,message:xt,enhance:Pe,validate:Re,validateForm:He,options:Je,updateForm:el}=b;ue(s,q,g=>o(6,e=g)),q.subscribe(g=>{console.log("form was updated",g)});let ce=[{slug:"info",name:P(z)("default.page.fights.form.general.steps.info"),icon:vt,invertedTextColor:!1},{slug:"observation",name:P(z)("default.page.fights.form.general.steps.observation"),icon:wt,invertedTextColor:!0},{slug:"feelings",name:P(z)("default.page.fights.form.general.steps.feelings"),icon:kt,invertedTextColor:!1},{slug:"needs",name:P(z)("default.page.fights.form.general.steps.needs"),icon:Et,invertedTextColor:!1},{slug:"request",name:P(z)("default.page.fights.form.general.steps.request"),icon:St,invertedTextColor:!1}];z.subscribe(g=>{const D=ce.map(N=>{const V=g(`default.page.fights.form.general.steps.${N.slug}`);return N.name=V,N});o(5,ce=[...D])});const Ge=()=>{console.log("decreaseStep"),h>1&&(console.log("step",h),o(0,h=h-1),console.log("step",h))},Qe=async()=>{const g=await ge.collection("feelings").getFullList({sort:"category"}),D=be(g);let N=me(D,"positive");N.map(V=>(V.content=me(V.content,"category"),V.content.map(X=>X.visible=!1),V)),console.log("res",N),o(1,f=N)},Ae=async()=>{const g=await ge.collection("needs").getFullList({sort:"category"}),D=be(g);let N=me(D,"category");N.map(V=>V.visible=!1),console.log("res",N),o(2,a=N)},Ke=async g=>{console.log("changeStep");const D=g.detail.step,N=await m(D);console.log("targetStepIsValid",N),N&&o(0,h=D)},We=(g,D)=>{if(g.nameEN!==D)return;const N=a.find(V=>V.category===D);N&&(N.visible=!N.visible),o(2,a=[...a])},Xe=(g,D)=>{if(g.nameEN!==D)return;const N=f[0].content.find(X=>X.category===D),V=f[1].content.find(X=>X.category===D);N&&(N.visible=!N.visible),V&&(V.visible=!V.visible),o(1,f=[...f])},Ye=(g,D)=>{const N=g.nameEN,V=D.category;return!!(N===V||D.visible)};st(async()=>{await Qe(),await Ae()}),h=1;function Ze(g){at.call(this,s,g)}function ye(g){s.$$.not_equal(e.name,g)&&(e.name=g,q.set(e))}function xe(g){s.$$.not_equal(e.observation,g)&&(e.observation=g,q.set(e))}function et(g){s.$$.not_equal(e.feelings,g)&&(e.feelings=g,q.set(e))}function tt(g){s.$$.not_equal(e.needs,g)&&(e.needs=g,q.set(e))}function lt(g){s.$$.not_equal(e.request,g)&&(e.request=g,q.set(e))}return s.$$.update=()=>{s.$$.dirty[0]&1&&(Je.validators=u[h-1])},[h,f,a,w,$,ce,e,r,n,b,q,Pe,Ge,Ke,We,Xe,Ye,Ze,ye,xe,et,tt,lt]}class pl extends ft{constructor(t){super(),it(this,t,yt,Zt,Me,{},null,[-1,-1])}}export{pl as component};
