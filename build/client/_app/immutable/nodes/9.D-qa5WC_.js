import{s as xe,l as Ie,m as Te,o as Le,b as k,f as d,p,q as Be,i as q,h as u,n as pe,r as Ne,u as et,e as $,t as T,a as C,c as w,d as L,g as H,j as X,M as je,k as ue,W as tt,X as lt,O as Fe,G as rt,Y as nt,H as Ye}from"../chunks/scheduler.BGpOBVyA.js";import{S as Ce,i as He,t as j,g as _e,b as z,e as ve,c as F,a as P,m as Z,d as O}from"../chunks/index.wJhSdTM5.js";import{e as ae,d as st}from"../chunks/helpers.C2F2lmQ3.js";import{A as at}from"../chunks/AppTopMenu.bu7JEGYI.js";import{A as ot}from"../chunks/AppBottomMenu.BG1J1hbK.js";import{g as it,u as ct,l as Je,t as ft,f as ut}from"../chunks/page.BxjNqAN0.js";import{p as se}from"../chunks/pocketbase.Ce4YzWbP.js";import{S as dt}from"../chunks/Share.D1BOOZdv.js";import{I as ht,a as mt,b as gt,c as pt}from"../chunks/icon-steps.dGSELuxl.js";import"../chunks/memoize.DZzCiDwd.js";import{C as Ve}from"../chunks/Check.G5YLyjQw.js";import{p as _t}from"../chunks/stores.C46p-EcX.js";import{S as vt}from"../chunks/skeleton.CSIKbO0v.js";import{g as bt}from"../chunks/entry.B5Mv6Uxa.js";import{a as Ke}from"../chunks/button.A7J3RAYz.js";function $t(a){let e,l,t=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return{c(){e=Te("svg"),l=Te("path"),this.h()},l(s){e=Le(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=k(e);l=Le(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),k(l).forEach(d),n.forEach(d),this.h()},h(){p(l,"fill-rule","evenodd"),p(l,"clip-rule","evenodd"),p(l,"d","M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z"),p(l,"fill",a[0]),Be(e,r)},m(s,n){q(s,e,n),u(e,l)},p(s,[n]){n&1&&p(l,"fill",s[0]),Be(e,r=it(t,[n&2&&{width:s[1]},n&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n&4&&s[2]]))},i:pe,o:pe,d(s){s&&d(e)}}}function wt(a,e,l){const t=["color","size"];let r=Ne(e,t),{color:s="currentColor"}=e,{size:n=15}=e;return a.$$set=c=>{e=Ie(Ie({},e),et(c)),l(2,r=Ne(e,t)),"color"in c&&l(0,s=c.color),"size"in c&&l(1,n=c.size)},[s,n,r]}class kt extends Ce{constructor(e){super(),He(this,e,wt,$t,xe,{color:0,size:1})}}function Pe(a,e,l){const t=a.slice();return t[6]=e[l],t}function Ze(a,e,l){const t=a.slice();return t[9]=e[l],t}function Oe(a){let e,l,t,r,s;return l=new Ve({}),r=new Ve({props:{class:"-ml-2"}}),{c(){e=$("div"),F(l.$$.fragment),t=C(),F(r.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var c=k(e);P(l.$$.fragment,c),t=H(c),P(r.$$.fragment,c),c.forEach(d),this.h()},h(){p(e,"class","flex items-center rounded-full bg-green-600 px-1 py-[2px] text-2xs text-green-300")},m(n,c){q(n,e,c),Z(l,e,null),u(e,t),Z(r,e,null),s=!0},i(n){s||(j(l.$$.fragment,n),j(r.$$.fragment,n),s=!0)},o(n){z(l.$$.fragment,n),z(r.$$.fragment,n),s=!1},d(n){n&&d(e),O(l),O(r)}}}function Dt(a){let e,l,t=a[6].overlap+"",r,s,n=a[2]==="en"?"overlap":"Überschneidung",c;return{c(){e=$("div"),l=$("div"),r=T(t),s=T(`%\r
						`),c=T(n),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=k(e);l=w(i,"DIV",{class:!0});var m=k(l);r=L(m,t),s=L(m,`%\r
						`),c=L(m,n),m.forEach(d),i.forEach(d),this.h()},h(){p(l,"class","border border-"+a[6].color+"-background rounded-full px-2 py-0.5 mb-2 text-xs svelte-qjj3hn"),p(e,"class","flex items-center")},m(o,i){q(o,e,i),u(e,l),u(l,r),u(l,s),u(l,c)},p(o,i){i&4&&n!==(n=o[2]==="en"?"overlap":"Überschneidung")&&X(c,n)},d(o){o&&d(e)}}}function Et(a){let e,l=ae(a[6].content),t=[];for(let r=0;r<l.length;r+=1)t[r]=Re(Ze(a,l,r));return{c(){e=$("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=w(r,"DIV",{class:!0});var s=k(e);for(let n=0;n<t.length;n+=1)t[n].l(s);s.forEach(d),this.h()},h(){p(e,"class","flex flex-wrap gap-2")},m(r,s){q(r,e,s);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(r,s){if(s&12){l=ae(r[6].content);let n;for(n=0;n<l.length;n+=1){const c=Ze(r,l,n);t[n]?t[n].p(c,s):(t[n]=Re(c),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(r){r&&d(e),je(t,r)}}}function yt(a){let e=a[6].content+"",l;return{c(){l=T(e)},l(t){l=L(t,e)},m(t,r){q(t,l,r)},p:pe,d(t){t&&d(l)}}}function Re(a){let e,l=(a[2]==="en"?a[9].nameEN:a[9].nameDE)+"",t,r;return{c(){e=$("div"),t=T(l),r=C(),this.h()},l(s){e=w(s,"DIV",{class:!0});var n=k(e);t=L(n,l),r=H(n),n.forEach(d),this.h()},h(){p(e,"class","bg-"+a[6].color+"-background rounded-full px-2 py-0.5 svelte-qjj3hn")},m(s,n){q(s,e,n),u(e,t),u(e,r)},p(s,n){n&4&&l!==(l=(s[2]==="en"?s[9].nameEN:s[9].nameDE)+"")&&X(t,l)},d(s){s&&d(e)}}}function Ge(a){let e,l,t,r,s,n,c,o=a[6].icon+"",i,m,I,M,E=a[6].overlap&&Dt(a);function _(f,g){return f[6].type==="text"?yt:Et}let b=_(a)(a);return{c(){e=$("div"),l=$("div"),t=$("div"),r=$("div"),s=C(),n=$("div"),c=new tt(!1),i=C(),m=$("div"),E&&E.c(),I=C(),b.c(),M=C(),this.h()},l(f){e=w(f,"DIV",{class:!0});var g=k(e);l=w(g,"DIV",{class:!0});var v=k(l);t=w(v,"DIV",{class:!0});var A=k(t);r=w(A,"DIV",{class:!0}),k(r).forEach(d),s=H(A),n=w(A,"DIV",{class:!0});var R=k(n);c=lt(R,!1),R.forEach(d),A.forEach(d),v.forEach(d),i=H(g),m=w(g,"DIV",{class:!0});var J=k(m);E&&E.l(J),I=H(J),b.l(J),J.forEach(d),M=H(g),g.forEach(d),this.h()},h(){p(r,"class","label-shadow svelte-qjj3hn"),c.a=null,p(n,"class","icon fill-"+a[6].color+"-foreground svelte-qjj3hn"),p(t,"class","label bg-"+a[6].color+"-background dark:bg-muted/40 svelte-qjj3hn"),p(l,"class","flex flex-shrink-0 items-center justify-center border-r border-black/5 px-3 pb-3 pt-3 group-first:pt-6 group-last:pb-6"),p(m,"class","flex-grow break-all px-3 pb-3 pt-3 group-first:pt-6 group-last:pb-6"),p(e,"class","group flex items-stretch border-b border-black/5 bg-almostwhite text-xs shadow-md last:border-b-0 dark:bg-muted")},m(f,g){q(f,e,g),u(e,l),u(l,t),u(t,r),u(t,s),u(t,n),c.m(o,n),u(e,i),u(e,m),E&&E.m(m,null),u(m,I),b.m(m,null),u(e,M)},p(f,g){f[6].overlap&&E.p(f,g),b.p(f,g)},d(f){f&&d(e),E&&E.d(),b.d()}}}function It(a){let e,l,t=(a[1].id===a[0].owner?a[1].firstName:a[0].expand.fight.name)+"",r,s,n=new Date(a[0].created).toLocaleDateString("de-DE")+"",c,o,i,m,I,M,E,_=a[1].id===a[0].owner&&a[0].opened&&Oe(),y=ae(a[3]),b=[];for(let f=0;f<y.length;f+=1)b[f]=Ge(Pe(a,y,f));return{c(){e=$("div"),l=$("div"),r=T(t),s=T(" — "),c=T(n),o=C(),_&&_.c(),m=C(),I=$("div");for(let f=0;f<b.length;f+=1)b[f].c();this.h()},l(f){e=w(f,"DIV",{class:!0});var g=k(e);l=w(g,"DIV",{class:!0});var v=k(l);r=L(v,t),s=L(v," — "),c=L(v,n),v.forEach(d),o=H(g),_&&_.l(g),g.forEach(d),m=H(f),I=w(f,"DIV",{class:!0});var A=k(I);for(let R=0;R<b.length;R+=1)b[R].l(A);A.forEach(d),this.h()},h(){p(l,"class","rounded-full bg-neutral-400 bg-opacity-50 px-3 py-1 text-xs text-black"),p(e,"class",i=(a[1].id===a[0].owner?"justify-start":"justify-end")+" mb-3 flex items-center gap-2"),p(I,"class",M=(a[1].id===a[0].owner?"mr-10":"ml-10")+" relative mb-10 flex flex-col overflow-hidden rounded-xl shadow-xl")},m(f,g){q(f,e,g),u(e,l),u(l,r),u(l,s),u(l,c),u(e,o),_&&_.m(e,null),q(f,m,g),q(f,I,g);for(let v=0;v<b.length;v+=1)b[v]&&b[v].m(I,null);E=!0},p(f,[g]){if((!E||g&3)&&t!==(t=(f[1].id===f[0].owner?f[1].firstName:f[0].expand.fight.name)+"")&&X(r,t),(!E||g&1)&&n!==(n=new Date(f[0].created).toLocaleDateString("de-DE")+"")&&X(c,n),f[1].id===f[0].owner&&f[0].opened?_?g&3&&j(_,1):(_=Oe(),_.c(),j(_,1),_.m(e,null)):_&&(_e(),z(_,1,1,()=>{_=null}),ve()),(!E||g&3&&i!==(i=(f[1].id===f[0].owner?"justify-start":"justify-end")+" mb-3 flex items-center gap-2"))&&p(e,"class",i),g&12){y=ae(f[3]);let v;for(v=0;v<y.length;v+=1){const A=Pe(f,y,v);b[v]?b[v].p(A,g):(b[v]=Ge(A),b[v].c(),b[v].m(I,null))}for(;v<b.length;v+=1)b[v].d(1);b.length=y.length}(!E||g&3&&M!==(M=(f[1].id===f[0].owner?"mr-10":"ml-10")+" relative mb-10 flex flex-col overflow-hidden rounded-xl shadow-xl"))&&p(I,"class",M)},i(f){E||(j(_),E=!0)},o(f){z(_),E=!1},d(f){f&&(d(e),d(m),d(I)),_&&_.d(),je(b,f)}}}function Vt(a,e,l){let t,r;ue(a,ct,i=>l(1,t=i)),ue(a,Je,i=>l(2,r=i));let{record:s}=e,{fight:n=void 0}=e;console.log("record",s);const c=(i="feelings")=>{if(!n)return;const m=n[i],I=s[i];let M=0;const E=m.length;return I.forEach(_=>{m.includes(_)&&M++}),Math.round(M*100/E)},o=[{icon:ht,color:"observation",type:"text",content:s.observation},{icon:mt,color:"feelings",type:"array",overlap:c("feelings"),content:s.expand.feelings},{icon:gt,color:"needs",type:"array",overlap:c("needs"),content:s.expand.needs},{icon:pt,color:"request",type:"text",content:s.request}];return a.$$set=i=>{"record"in i&&l(0,s=i.record),"fight"in i&&l(4,n=i.fight)},[s,t,r,o,n]}class Qe extends Ce{constructor(e){super(),He(this,e,Vt,It,xe,{record:0,fight:4})}}function We(a,e,l){const t=a.slice();return t[13]=e[l],t}function xt(a){let e,l,t,r,s,n,c,o=a[6]("default.page.fight.heading")+"",i,m,I=a[7]==="en"?"with":"mit",M,E,_,y=a[1].name+"",b,f,g,v,A=a[5](a[1].created)+"",R,J,K,oe=a[7]==="en"?"on the":"am",de,be,ie=new Intl.DateTimeFormat("de-DE").format(new Date(a[1].created))+"",he,$e,B,N,we,G,te,ze='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-0 top-20 z-0 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform opacity-10"></div>',ke,re,Q,De,Ee,U,W;t=new at({});const Me=[Ht,Ct],ee=[];function Se(h,D){return h[3]?1:0}B=Se(a),N=ee[B]=Me[B](a),Q=new Qe({props:{record:a[1]}});let le=ae(a[2]),V=[];for(let h=0;h<le.length;h+=1)V[h]=Xe(We(a,le,h));const Ue=h=>z(V[h],1,1,()=>{V[h]=null});return U=new ot({props:{$$slots:{default:[St]},$$scope:{ctx:a}}}),{c(){e=$("div"),l=$("div"),F(t.$$.fragment),r=C(),s=$("div"),n=$("div"),c=$("h1"),i=T(o),m=C(),M=T(I),E=C(),_=$("span"),b=T(y),f=C(),g=$("div"),v=$("div"),R=T(A),J=C(),K=$("div"),de=T(oe),be=C(),he=T(ie),$e=C(),N.c(),we=C(),G=$("div"),te=$("div"),te.innerHTML=ze,ke=C(),re=$("div"),F(Q.$$.fragment),De=C();for(let h=0;h<V.length;h+=1)V[h].c();Ee=C(),F(U.$$.fragment),this.h()},l(h){e=w(h,"DIV",{class:!0});var D=k(e);l=w(D,"DIV",{class:!0});var S=k(l);P(t.$$.fragment,S),r=H(S),s=w(S,"DIV",{class:!0});var ce=k(s);n=w(ce,"DIV",{class:!0});var Y=k(n);c=w(Y,"H1",{class:!0});var x=k(c);i=L(x,o),m=H(x),M=L(x,I),E=H(x),_=w(x,"SPAN",{class:!0});var fe=k(_);b=L(fe,y),fe.forEach(d),x.forEach(d),f=H(Y),g=w(Y,"DIV",{class:!0});var me=k(g);v=w(me,"DIV",{class:!0});var Ae=k(v);R=L(Ae,A),Ae.forEach(d),J=H(me),K=w(me,"DIV",{class:!0});var ge=k(K);de=L(ge,oe),be=H(ge),he=L(ge,ie),ge.forEach(d),me.forEach(d),$e=H(Y),N.l(Y),Y.forEach(d),ce.forEach(d),we=H(S),G=w(S,"DIV",{class:!0});var ne=k(G);te=w(ne,"DIV",{class:!0,"data-svelte-h":!0}),Ye(te)!=="svelte-gzvl13"&&(te.innerHTML=ze),ke=H(ne),re=w(ne,"DIV",{class:!0});var qe=k(re);P(Q.$$.fragment,qe),qe.forEach(d),De=H(ne);for(let ye=0;ye<V.length;ye+=1)V[ye].l(ne);ne.forEach(d),Ee=H(S),P(U.$$.fragment,S),S.forEach(d),D.forEach(d),this.h()},h(){p(_,"class","capitalize"),p(c,"class","font-heading flex-grow text-lg font-semibold"),p(v,"class","mb-0.5 rounded-full bg-neutral-600 py-0.5 text-center text-2xs text-neutral-300"),p(K,"class","text-xs"),p(g,"class","flex flex-shrink-0 flex-col"),p(n,"class","relative z-10 -mx-5 flex flex-row items-center justify-between gap-3 px-5 py-4 md:items-center md:bg-transparent md:pb-6"),p(s,"class","max-container"),p(te,"class","relative z-0"),p(re,"class","relative z-10"),p(G,"class","max-container relative pb-60 pt-10 md:bg-transparent"),p(l,"class",""),p(e,"class","overflow-hidden")},m(h,D){q(h,e,D),u(e,l),Z(t,l,null),u(l,r),u(l,s),u(s,n),u(n,c),u(c,i),u(c,m),u(c,M),u(c,E),u(c,_),u(_,b),u(n,f),u(n,g),u(g,v),u(v,R),u(g,J),u(g,K),u(K,de),u(K,be),u(K,he),u(n,$e),ee[B].m(n,null),u(l,we),u(l,G),u(G,te),u(G,ke),u(G,re),Z(Q,re,null),u(G,De);for(let S=0;S<V.length;S+=1)V[S]&&V[S].m(G,null);u(l,Ee),Z(U,l,null),W=!0},p(h,D){(!W||D&64)&&o!==(o=h[6]("default.page.fight.heading")+"")&&X(i,o),(!W||D&128)&&I!==(I=h[7]==="en"?"with":"mit")&&X(M,I),(!W||D&2)&&y!==(y=h[1].name+"")&&X(b,y),(!W||D&34)&&A!==(A=h[5](h[1].created)+"")&&X(R,A),(!W||D&128)&&oe!==(oe=h[7]==="en"?"on the":"am")&&X(de,oe),(!W||D&2)&&ie!==(ie=new Intl.DateTimeFormat("de-DE").format(new Date(h[1].created))+"")&&X(he,ie);let S=B;B=Se(h),B===S?ee[B].p(h,D):(_e(),z(ee[S],1,1,()=>{ee[S]=null}),ve(),N=ee[B],N?N.p(h,D):(N=ee[B]=Me[B](h),N.c()),j(N,1),N.m(n,null));const ce={};if(D&2&&(ce.record=h[1]),Q.$set(ce),D&6){le=ae(h[2]);let x;for(x=0;x<le.length;x+=1){const fe=We(h,le,x);V[x]?(V[x].p(fe,D),j(V[x],1)):(V[x]=Xe(fe),V[x].c(),j(V[x],1),V[x].m(G,null))}for(_e(),x=le.length;x<V.length;x+=1)Ue(x);ve()}const Y={};D&65554&&(Y.$$scope={dirty:D,ctx:h}),U.$set(Y)},i(h){if(!W){j(t.$$.fragment,h),j(N),j(Q.$$.fragment,h);for(let D=0;D<le.length;D+=1)j(V[D]);j(U.$$.fragment,h),W=!0}},o(h){z(t.$$.fragment,h),z(N),z(Q.$$.fragment,h),V=V.filter(Boolean);for(let D=0;D<V.length;D+=1)z(V[D]);z(U.$$.fragment,h),W=!1},d(h){h&&d(e),O(t),ee[B].d(),O(Q),je(V,h),O(U)}}}function jt(a){let e,l,t;return l=new vt({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){e=$("div"),F(l.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var s=k(e);P(l.$$.fragment,s),s.forEach(d),this.h()},h(){p(e,"class","flex h-full items-center justify-center")},m(r,s){q(r,e,s),Z(l,e,null),t=!0},p:pe,i(r){t||(j(l.$$.fragment,r),t=!0)},o(r){z(l.$$.fragment,r),t=!1},d(r){r&&d(e),O(l)}}}function Ct(a){let e,l;return e=new Ke({props:{decoration:"floating-op1",class:"-mr-2 -mt-2 flex items-center justify-center border-red-400 bg-red-600 px-1.5 text-sm text-white transition hover:bg-offwhite",$$slots:{default:[zt]},$$scope:{ctx:a}}}),e.$on("click",a[8]),{c(){F(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},p(t,r){const s={};r&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Ht(a){let e,l;return e=new Ke({props:{decoration:"floating-op1",class:"-mr-2 -mt-2 flex items-center justify-center border-red-400 bg-red-600 px-1.5 text-sm text-white transition hover:bg-offwhite",$$slots:{default:[Mt]},$$scope:{ctx:a}}}),e.$on("click",a[10]),{c(){F(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},p(t,r){const s={};r&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function zt(a){let e,l;return e=new Ve({}),{c(){F(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Mt(a){let e,l;return e=new kt({}),{c(){F(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Xe(a){let e,l='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-96 top-20 z-0 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform opacity-10"></div>',t,r,s,n,c;return s=new Qe({props:{fight:a[1],record:a[13],adversary:a[1].name}}),{c(){e=$("div"),e.innerHTML=l,t=C(),r=$("div"),F(s.$$.fragment),n=C(),this.h()},l(o){e=w(o,"DIV",{class:!0,"data-svelte-h":!0}),Ye(e)!=="svelte-1lvm6nt"&&(e.innerHTML=l),t=H(o),r=w(o,"DIV",{class:!0});var i=k(r);P(s.$$.fragment,i),n=H(i),i.forEach(d),this.h()},h(){p(e,"class","relative z-0"),p(r,"class","relative z-10 mt-8")},m(o,i){q(o,e,i),q(o,t,i),q(o,r,i),Z(s,r,null),u(r,n),c=!0},p(o,i){const m={};i&2&&(m.fight=o[1]),i&4&&(m.record=o[13]),i&2&&(m.adversary=o[1].name),s.$set(m)},i(o){c||(j(s.$$.fragment,o),c=!0)},o(o){z(s.$$.fragment,o),c=!1},d(o){o&&(d(e),d(t),d(r)),O(s)}}}function St(a){let e,l;return e=new dt({props:{id:a[4],record:a[1]}}),{c(){F(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},p(t,r){const s={};r&16&&(s.id=t[4]),r&2&&(s.record=t[1]),e.$set(s)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function At(a){let e,l,t,r;const s=[jt,xt],n=[];function c(o,i){return o[0]?1:0}return e=c(a),l=n[e]=s[e](a),{c(){l.c(),t=Fe()},l(o){l.l(o),t=Fe()},m(o,i){n[e].m(o,i),q(o,t,i),r=!0},p(o,[i]){let m=e;e=c(o),e===m?n[e].p(o,i):(_e(),z(n[m],1,1,()=>{n[m]=null}),ve(),l=n[e],l?l.p(o,i):(l=n[e]=s[e](o),l.c()),j(l,1),l.m(t.parentNode,t))},i(o){r||(j(l),r=!0)},o(o){z(l),r=!1},d(o){o&&d(t),n[e].d(o)}}}function qt(a,e,l){let t,r,s,n,c;ue(a,_t,y=>l(9,s=y)),ue(a,ft,y=>l(6,n=y)),ue(a,Je,y=>l(7,c=y));let o=!1,i,m=[],I=!1;const M=async()=>{se.collection("fights").subscribe(t,function(y){l(1,i=y.record)},{expand:"feelings, needs, owner"}),l(1,i=await se.collection("fights").getOne(t,{expand:"feelings, needs, owner"})),se.collection("responses").subscribe("*",function(y){if(y.action==="create"&&y.record.fight===i.id){const b=y.record;l(2,m=[...m,b])}},{expand:"fight, feelings, needs"}),l(2,m=await se.collection("responses").getFullList({filter:`fight = '${i.id}'`,expand:"fight, feelings, needs"}))},E=async()=>{try{await se.collection("fights").delete(t),l(3,I=!1),bt("/app/auth/login")}catch{console.error("error deleting fight")}};rt(async()=>{await M(),l(0,o=!0),ut.set("bg-background"),console.log("record",i),console.log("responses",m)}),nt(()=>{se.collection("responses").unsubscribe("*")});const _=()=>l(3,I=!0);return a.$$.update=()=>{a.$$.dirty&512&&l(4,t=s.params.id),a.$$.dirty&3&&l(5,r=()=>o?st(i.created):"...")},[o,i,m,I,t,r,n,c,E,s,_]}class Qt extends Ce{constructor(e){super(),He(this,e,qt,At,xe,{})}}export{Qt as component};
