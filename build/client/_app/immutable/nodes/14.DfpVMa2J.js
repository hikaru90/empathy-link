import{A as H,s as tt,L as ne,e as I,a as j,c as N,b as S,g as B,f as p,p as D,i as k,h as w,D as Ne,T as Ct,K as Ft,M as oe,E as Tt,k as fe,w as qt,v as Z,n as L,F as jt,t as R,d as A,j as M,y as Bt,z as le,l as ce,U as lt}from"../chunks/scheduler.BmBrB_dT.js";import{S as Jt,i as Ot,f as ae,b as C,d as F,m as T,a as _,t as b,c as W,e as q,g as X}from"../chunks/index.BQZQ5DB3.js";import{t as U,u as Rt,l as At,b as Mt,m as zt,n as Lt,j as $e,k as ve,e as K,g as pe,a as ge}from"../chunks/helpers.g8wrkI0H.js";import{A as Pt,a as Ut}from"../chunks/AppBottomMenu.CkXkkK6h.js";import{p as Ht}from"../chunks/stores.BdCL2gQQ.js";import"../chunks/switch.fB03Cpk5.js";import{D as Qt,d as Kt,a as Gt,b as Wt,c as Xt,C as Yt,e as Zt}from"../chunks/index.SsLB4xxl.js";import"../chunks/entry.DnNy0IhO.js";import{c as Q,z as yt,F as de,C as me,a as _e,b as he}from"../chunks/zod.B5pDC7Hl.js";import{F as xt,T as rt,a as st,b as nt}from"../chunks/textarea.BCQgmsBQ.js";import{z as G,s as el}from"../chunks/memoize.BzJ9-avW.js";import{R as tl,a as ll,Q as rl}from"../chunks/ResponseMascot.CKzs_CLF.js";import{I as be}from"../chunks/icon-folder.CBGieXVr.js";import{I as we,a as Te,b as qe,c as je}from"../chunks/icon-steps.dGSELuxl.js";import{p as ue}from"../chunks/pocketbase.Ce4YzWbP.js";import{B as sl}from"../chunks/button.BlP37tcM.js";const ke=G.object({}),Ee=G.object({}),De=G.object({}),Ie=G.object({}),nl=G.object({}),ol=G.object({}),al=G.object({}),fl=G.object({}),il=ke.extend({observation:G.string().min(10,{message:H(U)("default.page.fights.form.observation.tooShortError")})}),ul=Ee.extend({feelings:G.array(G.string()).min(1,{message:H(U)("default.page.fights.form.feelings.tooFewError")})}),cl=De.extend({needs:G.array(G.string()).min(1,{message:H(U)("default.page.fights.form.needs.tooFewError")})}),se=Ie.extend({request:G.string().optional()});function Be(o,e,r){const t=o.slice();return t[62]=e[r],t}function Je(o,e,r){const t=o.slice();return t[55]=e[r],t}function Oe(o,e,r){const t=o.slice();return t[59]=e[r],t}function Re(o,e,r){const t=o.slice();return t[62]=e[r],t}function Ae(o,e,r){const t=o.slice();return t[52]=e[r],t}function Me(o,e,r){const t=o.slice();return t[55]=e[r],t}function ze(o,e,r){const t=o.slice();return t[52]=e[r],t}function Le(o){let e,r,t,l,s=o[0]>8&&Pe(o);function n(a){o[26](a)}let i={speechBubbleContentArray:o[5],step:o[0],stepName:o[10][o[0]-1].slug,formSuccess:o[7]};return o[4]!==void 0&&(i.checkJudgement=o[4]),r=new tl({props:i}),ne.push(()=>ae(r,"checkJudgement",n)),{c(){s&&s.c(),e=j(),C(r.$$.fragment)},l(a){s&&s.l(a),e=B(a),F(r.$$.fragment,a)},m(a,f){s&&s.m(a,f),k(a,e,f),T(r,a,f),l=!0},p(a,f){a[0]>8?s?(s.p(a,f),f[0]&1&&_(s,1)):(s=Pe(a),s.c(),_(s,1),s.m(e.parentNode,e)):s&&(X(),b(s,1,1,()=>{s=null}),W());const u={};f[0]&32&&(u.speechBubbleContentArray=a[5]),f[0]&1&&(u.step=a[0]),f[0]&1025&&(u.stepName=a[10][a[0]-1].slug),f[0]&128&&(u.formSuccess=a[7]),!t&&f[0]&16&&(t=!0,u.checkJudgement=a[4],oe(()=>t=!1)),r.$set(u)},i(a){l||(_(s),_(r.$$.fragment,a),l=!0)},o(a){b(s),b(r.$$.fragment,a),l=!1},d(a){a&&p(e),s&&s.d(a),q(r,a)}}}function Pe(o){let e,r;return e=new xt({props:{step:o[0],steps:o[10],stepBackground:o[10][o[0]-1].slug}}),e.$on("changeStep",o[21]),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){T(e,t,l),r=!0},p(t,l){const s={};l[0]&1&&(s.step=t[0]),l[0]&1024&&(s.steps=t[10]),l[0]&1025&&(s.stepBackground=t[10][t[0]-1].slug),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Ue(o){let e=o[0],r,t,l=xe(o);return{c(){l.c(),r=Z()},l(s){l.l(s),r=Z()},m(s,n){l.m(s,n),k(s,r,n),t=!0},p(s,n){n[0]&1&&tt(e,e=s[0])?(X(),b(l,1,1,L),W(),l=xe(s),l.c(),_(l,1),l.m(r.parentNode,r)):l.p(s,n)},i(s){t||(_(l),t=!0)},o(s){b(l),t=!1},d(s){s&&p(r),l.d(s)}}}function pl(o){let e=o[12]("default.page.respond.steps.error.heading")+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&4096&&e!==(e=t[12]("default.page.respond.steps.error.heading")+"")&&M(r,e)},i:L,o:L,d(t){t&&p(r)}}}function gl(o){let e,r,t=o[12]("default.page.respond.steps.success.heading")+"",l;return{c(){e=I("div"),r=I("div"),l=R(t),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=S(e);r=N(n,"DIV",{class:!0});var i=S(r);l=A(i,t),i.forEach(p),n.forEach(p),this.h()},h(){D(r,"class","my-6"),D(e,"class","form-content")},m(s,n){k(s,e,n),w(e,r),w(r,l)},p(s,n){n[0]&4096&&t!==(t=s[12]("default.page.respond.steps.success.heading")+"")&&M(l,t)},i:L,o:L,d(s){s&&p(e)}}}function dl(o){let e,r,t;return r=new de({props:{form:o[17],name:"request",$$slots:{default:[Vl]},$$scope:{ctx:o}}}),{c(){e=I("div"),C(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{class:!0});var s=S(e);F(r.$$.fragment,s),s.forEach(p),this.h()},h(){D(e,"class","form-content")},m(l,s){k(l,e,s),T(r,e,null),t=!0},p(l,s){const n={};s[0]&12288|s[2]&512&&(n.$$scope={dirty:s,ctx:l}),r.$set(n)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),q(r)}}}function ml(o){let e,r,t;return r=new de({props:{form:o[17],name:"needs",$$slots:{default:[jl]},$$scope:{ctx:o}}}),{c(){e=I("div"),C(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{class:!0});var s=S(e);F(r.$$.fragment,s),s.forEach(p),this.h()},h(){D(e,"class","form-content")},m(l,s){k(l,e,s),T(r,e,null),t=!0},p(l,s){const n={};s[0]&28676|s[2]&512&&(n.$$scope={dirty:s,ctx:l}),r.$set(n)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),q(r)}}}function _l(o){let e,r,t;return r=new de({props:{form:o[17],name:"feelings",$$slots:{default:[Al]},$$scope:{ctx:o}}}),{c(){e=I("div"),C(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{class:!0});var s=S(e);F(r.$$.fragment,s),s.forEach(p),this.h()},h(){D(e,"class","form-content")},m(l,s){k(l,e,s),T(r,e,null),t=!0},p(l,s){const n={};s[0]&29699|s[2]&512&&(n.$$scope={dirty:s,ctx:l}),r.$set(n)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),q(r)}}}function hl(o){let e,r,t;return r=new de({props:{form:o[17],name:"observation",$$slots:{default:[Ll]},$$scope:{ctx:o}}}),{c(){e=I("div"),C(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{class:!0});var s=S(e);F(r.$$.fragment,s),s.forEach(p),this.h()},h(){D(e,"class","form-content")},m(l,s){k(l,e,s),T(r,e,null),t=!0},p(l,s){const n={};s[0]&12544|s[2]&512&&(n.$$scope={dirty:s,ctx:l}),r.$set(n)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),q(r)}}}function $l(o){let e,r='<div class="flex max-w-[18em] flex-col gap-4 pb-6 text-center"></div>';return{c(){e=I("div"),e.innerHTML=r,this.h()},l(t){e=N(t,"DIV",{class:!0,"data-svelte-h":!0}),Bt(e)!=="svelte-ey3syw"&&(e.innerHTML=r),this.h()},h(){D(e,"class","form-content flex items-center justify-center")},m(t,l){k(t,e,l)},p:L,i:L,o:L,d(t){t&&p(e)}}}function vl(o){let e,r,t=o[3].expand.owner.firstName+"",l,s,n=o[12]("default.page.respond.steps.ownerRequest.heading")+"",i,a,f,u=o[3].request+"",g;return{c(){e=I("div"),r=I("div"),l=R(t),s=j(),i=R(n),a=j(),f=I("div"),g=R(u),this.h()},l(c){e=N(c,"DIV",{class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var v=S(r);l=A(v,t),s=B(v),i=A(v,n),v.forEach(p),a=B(d),f=N(d,"DIV",{class:!0});var m=S(f);g=A(m,u),m.forEach(p),d.forEach(p),this.h()},h(){D(r,"class","form-label pt-10"),D(f,"class","rounded bg-white/10 px-4 py-3 pb-6 shadow-xl"),D(e,"class","form-content")},m(c,d){k(c,e,d),w(e,r),w(r,l),w(r,s),w(r,i),w(e,a),w(e,f),w(f,g)},p(c,d){d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerRequest.heading")+"")&&M(i,n),d[0]&8&&u!==(u=c[3].request+"")&&M(g,u)},i:L,o:L,d(c){c&&p(e)}}}function bl(o){let e,r,t=o[3].expand.owner.firstName+"",l,s,n=o[12]("default.page.respond.steps.ownerNeeds.heading")+"",i,a,f,u=K(o[3].expand.needs),g=[];for(let c=0;c<u.length;c+=1)g[c]=Ze(Me(o,u,c));return{c(){e=I("div"),r=I("div"),l=R(t),s=j(),i=R(n),a=j(),f=I("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=N(c,"DIV",{class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var v=S(r);l=A(v,t),s=B(v),i=A(v,n),v.forEach(p),a=B(d),f=N(d,"DIV",{class:!0});var m=S(f);for(let $=0;$<g.length;$+=1)g[$].l(m);m.forEach(p),d.forEach(p),this.h()},h(){D(r,"class","form-label pt-10"),D(f,"class","flex flex-wrap items-center gap-2 pb-6"),D(e,"class","form-content")},m(c,d){k(c,e,d),w(e,r),w(r,l),w(r,s),w(r,i),w(e,a),w(e,f);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(f,null)},p(c,d){if(d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerNeeds.heading")+"")&&M(i,n),d[0]&16392){u=K(c[3].expand.needs);let v;for(v=0;v<u.length;v+=1){const m=Me(c,u,v);g[v]?g[v].p(m,d):(g[v]=Ze(m),g[v].c(),g[v].m(f,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=u.length}},i:L,o:L,d(c){c&&p(e),le(g,c)}}}function wl(o){let e,r,t=o[3].expand.owner.firstName+"",l,s,n=o[12]("default.page.respond.steps.ownerFeelings.heading")+"",i,a,f,u=K(o[3].expand.feelings),g=[];for(let c=0;c<u.length;c+=1)g[c]=ye(ze(o,u,c));return{c(){e=I("div"),r=I("div"),l=R(t),s=j(),i=R(n),a=j(),f=I("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=N(c,"DIV",{class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var v=S(r);l=A(v,t),s=B(v),i=A(v,n),v.forEach(p),a=B(d),f=N(d,"DIV",{class:!0});var m=S(f);for(let $=0;$<g.length;$+=1)g[$].l(m);m.forEach(p),d.forEach(p),this.h()},h(){D(r,"class","form-label pt-10"),D(f,"class","flex flex-wrap items-center gap-2 pb-6"),D(e,"class","form-content")},m(c,d){k(c,e,d),w(e,r),w(r,l),w(r,s),w(r,i),w(e,a),w(e,f);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(f,null)},p(c,d){if(d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerFeelings.heading")+"")&&M(i,n),d[0]&16392){u=K(c[3].expand.feelings);let v;for(v=0;v<u.length;v+=1){const m=ze(c,u,v);g[v]?g[v].p(m,d):(g[v]=ye(m),g[v].c(),g[v].m(f,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=u.length}},i:L,o:L,d(c){c&&p(e),le(g,c)}}}function kl(o){let e,r,t=o[3].expand.owner.firstName+"",l,s,n=o[12]("default.page.respond.steps.ownerObservation.heading")+"",i,a,f,u=o[3].observation+"",g;return{c(){e=I("div"),r=I("div"),l=R(t),s=j(),i=R(n),a=j(),f=I("div"),g=R(u),this.h()},l(c){e=N(c,"DIV",{class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var v=S(r);l=A(v,t),s=B(v),i=A(v,n),v.forEach(p),a=B(d),f=N(d,"DIV",{class:!0});var m=S(f);g=A(m,u),m.forEach(p),d.forEach(p),this.h()},h(){D(r,"class","form-label pt-10"),D(f,"class","rounded bg-white/10 px-4 py-3 shadow-xl"),D(e,"class","form-content")},m(c,d){k(c,e,d),w(e,r),w(r,l),w(r,s),w(r,i),w(e,a),w(e,f),w(f,g)},p(c,d){d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerObservation.heading")+"")&&M(i,n),d[0]&8&&u!==(u=c[3].observation+"")&&M(g,u)},i:L,o:L,d(c){c&&p(e)}}}function El(o){let e,r,t,l=o[12]("default.page.respond.steps.breathe.heading")+"",s,n,i,a,f;return{c(){e=I("div"),r=I("div"),t=I("span"),s=R(l),n=j(),i=I("div"),a=j(),f=I("div"),this.h()},l(u){e=N(u,"DIV",{class:!0});var g=S(e);r=N(g,"DIV",{class:!0});var c=S(r);t=N(c,"SPAN",{class:!0});var d=S(t);s=A(d,l),d.forEach(p),n=B(c),i=N(c,"DIV",{class:!0}),S(i).forEach(p),a=B(c),f=N(c,"DIV",{class:!0}),S(f).forEach(p),c.forEach(p),g.forEach(p),this.h()},h(){D(t,"class","relative z-10 -mb-2"),D(i,"class","breathe svelte-18kg1ym"),D(f,"class","breathe2 svelte-18kg1ym"),D(r,"class","relative my-40 flex flex-col text-center"),D(e,"class","form-content flex items-center justify-center")},m(u,g){k(u,e,g),w(e,r),w(r,t),w(t,s),w(r,n),w(r,i),w(r,a),w(r,f)},p(u,g){g[0]&4096&&l!==(l=u[12]("default.page.respond.steps.breathe.heading")+"")&&M(s,l)},i:L,o:L,d(u){u&&p(e)}}}function Dl(o){let e;return{c(){e=I("div"),this.h()},l(r){e=N(r,"DIV",{class:!0}),S(e).forEach(p),this.h()},h(){D(e,"class","form-content flex flex-col items-center justify-center text-center")},m(r,t){k(r,e,t)},p:L,i:L,o:L,d(r){r&&p(e)}}}function Il(o){let e,r,t,l,s;return l=new sl({props:{variant:"ghost",class:"mb-6 flex w-full items-center justify-start gap-2",$$slots:{default:[Pl]},$$scope:{ctx:o}}}),l.$on("click",o[27]),{c(){e=I("div"),r=I("div"),t=j(),C(l.$$.fragment),this.h()},l(n){e=N(n,"DIV",{class:!0});var i=S(e);r=N(i,"DIV",{}),S(r).forEach(p),t=B(i),F(l.$$.fragment,i),i.forEach(p),this.h()},h(){D(e,"class","form-content flex flex-col items-center justify-between pb-1 pt-10 text-center")},m(n,i){k(n,e,i),w(e,r),w(e,t),T(l,e,null),s=!0},p(n,i){const a={};i[0]&4096|i[2]&512&&(a.$$scope={dirty:i,ctx:n}),l.$set(a)},i(n){s||(_(l.$$.fragment,n),s=!0)},o(n){b(l.$$.fragment,n),s=!1},d(n){n&&p(e),q(l)}}}function Nl(o){let e=o[12]("default.page.fights.form.request.label")+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&4096&&e!==(e=t[12]("default.page.fights.form.request.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function Sl(o){let e,r,t,l,s;e=new he({props:{class:"form-label",$$slots:{default:[Nl]},$$scope:{ctx:o}}});const n=[o[58],{class:"min-h-60"}];function i(f){o[32](f)}let a={};for(let f=0;f<n.length;f+=1)a=ce(a,n[f]);return o[13].request!==void 0&&(a.value=o[13].request),t=new rt({props:a}),ne.push(()=>ae(t,"value",i)),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(f){F(e.$$.fragment,f),r=B(f),F(t.$$.fragment,f)},m(f,u){T(e,f,u),k(f,r,u),T(t,f,u),s=!0},p(f,u){const g={};u[0]&4096|u[2]&512&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&134217728?pe(n,[ge(f[58]),n[1]]):{};!l&&u[0]&8192&&(l=!0,c.value=f[13].request,oe(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),q(e,f),q(t,f)}}}function Vl(o){let e,r,t,l;return e=new me({props:{$$slots:{default:[Sl,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new _e({}),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(s){F(e.$$.fragment,s),r=B(s),F(t.$$.fragment,s)},m(s,n){T(e,s,n),k(s,r,n),T(t,s,n),l=!0},p(s,n){const i={};n[0]&12288|n[1]&134217728|n[2]&512&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),q(e,s),q(t,s)}}}function Cl(o){let e=o[12]("default.page.fights.form.needs.label")+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&4096&&e!==(e=t[12]("default.page.fights.form.needs.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function He(o){let e,r,t=K(o[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ke(Be(o,t,n));const s=n=>b(l[n],1,1,()=>{l[n]=null});return{c(){e=I("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=N(n,"DIV",{class:!0});var i=S(e);for(let a=0;a<l.length;a+=1)l[a].l(i);i.forEach(p),this.h()},h(){D(e,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(n,i){k(n,e,i);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);r=!0},p(n,i){if(i[0]&20996100){t=K(n[2]);let a;for(a=0;a<t.length;a+=1){const f=Be(n,t,a);l[a]?(l[a].p(f,i),_(l[a],1)):(l[a]=Ke(f),l[a].c(),_(l[a],1),l[a].m(e,null))}for(X(),a=t.length;a<l.length;a+=1)s(a);W()}},i(n){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(n){n&&p(e),le(l,n)}}}function Fl(o){let e=(o[14]==="de"?o[55].nameDE:o[55].nameEN)+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&16388&&e!==(e=(t[14]==="de"?t[55].nameDE:t[55].nameEN)+"")&&M(r,e)},d(t){t&&p(r)}}}function Qe(o){let e,r,t,l,s,n,i;return r=new nt({props:{value:o[55].id,class:(o[55].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-needs-foreground",$$slots:{default:[Fl]},$$scope:{ctx:o}}}),{c(){e=I("button"),C(r.$$.fragment),t=j(),this.h()},l(a){e=N(a,"BUTTON",{type:!0,class:!0});var f=S(e);F(r.$$.fragment,f),t=B(f),f.forEach(p),this.h()},h(){var a;D(e,"type","button"),D(e,"class",l=(o[24](o[55],o[62])||(a=o[13].needs)!=null&&a.includes(o[55].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(a,f){k(a,e,f),T(r,e,null),w(e,t),s=!0,n||(i=Ne(e,"click",function(){lt(o[22](o[55],o[62].category))&&o[22](o[55],o[62].category).apply(this,arguments)}),n=!0)},p(a,f){var g;o=a;const u={};f[0]&4&&(u.value=o[55].id),f[0]&4&&(u.class=(o[55].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-needs-foreground"),f[0]&16388|f[2]&512&&(u.$$scope={dirty:f,ctx:o}),r.$set(u),(!s||f[0]&8196&&l!==(l=(o[24](o[55],o[62])||(g=o[13].needs)!=null&&g.includes(o[55].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&D(e,"class",l)},i(a){s||(_(r.$$.fragment,a),s=!0)},o(a){b(r.$$.fragment,a),s=!1},d(a){a&&p(e),q(r),n=!1,i()}}}function Ke(o){let e,r,t=K(o[62].content),l=[];for(let n=0;n<t.length;n+=1)l[n]=Qe(Je(o,t,n));const s=n=>b(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Z()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=Z()},m(n,i){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,i);k(n,e,i),r=!0},p(n,i){if(i[0]&20996100){t=K(n[62].content);let a;for(a=0;a<t.length;a+=1){const f=Je(n,t,a);l[a]?(l[a].p(f,i),_(l[a],1)):(l[a]=Qe(f),l[a].c(),_(l[a],1),l[a].m(e.parentNode,e))}for(X(),a=t.length;a<l.length;a+=1)s(a);W()}},i(n){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(n){n&&p(e),le(l,n)}}}function Tl(o){let e,r,t=o[2].length>0&&He(o);return{c(){t&&t.c(),e=Z()},l(l){t&&t.l(l),e=Z()},m(l,s){t&&t.m(l,s),k(l,e,s),r=!0},p(l,s){l[2].length>0?t?(t.p(l,s),s[0]&4&&_(t,1)):(t=He(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(X(),b(t,1,1,()=>{t=null}),W())},i(l){r||(_(t),r=!0)},o(l){b(t),r=!1},d(l){l&&p(e),t&&t.d(l)}}}function ql(o){let e,r,t,l,s;e=new he({props:{class:"form-label",$$slots:{default:[Cl]},$$scope:{ctx:o}}});const n=[{type:"multiple"},o[58],{class:""}];function i(f){o[31](f)}let a={$$slots:{default:[Tl]},$$scope:{ctx:o}};for(let f=0;f<n.length;f+=1)a=ce(a,n[f]);return o[13].needs!==void 0&&(a.value=o[13].needs),t=new st({props:a}),ne.push(()=>ae(t,"value",i)),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(f){F(e.$$.fragment,f),r=B(f),F(t.$$.fragment,f)},m(f,u){T(e,f,u),k(f,r,u),T(t,f,u),s=!0},p(f,u){const g={};u[0]&4096|u[2]&512&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&134217728?pe(n,[n[0],ge(f[58]),n[2]]):{};u[0]&24580|u[2]&512&&(c.$$scope={dirty:u,ctx:f}),!l&&u[0]&8192&&(l=!0,c.value=f[13].needs,oe(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),q(e,f),q(t,f)}}}function jl(o){let e,r,t,l;return e=new me({props:{$$slots:{default:[ql,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new _e({}),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(s){F(e.$$.fragment,s),r=B(s),F(t.$$.fragment,s)},m(s,n){T(e,s,n),k(s,r,n),T(t,s,n),l=!0},p(s,n){const i={};n[0]&28676|n[1]&134217728|n[2]&512&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),q(e,s),q(t,s)}}}function Bl(o){let e=o[12]("default.page.fights.form.feelings.label")+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&4096&&e!==(e=t[12]("default.page.fights.form.feelings.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function Ge(o){let e,r,t=K(o[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ye(Oe(o,t,n));const s=n=>b(l[n],1,1,()=>{l[n]=null});return{c(){e=I("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=N(n,"DIV",{class:!0});var i=S(e);for(let a=0;a<l.length;a+=1)l[a].l(i);i.forEach(p),this.h()},h(){D(e,"class","")},m(n,i){k(n,e,i);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);r=!0},p(n,i){if(i[0]&25195523){t=K(n[1]);let a;for(a=0;a<t.length;a+=1){const f=Oe(n,t,a);l[a]?(l[a].p(f,i),_(l[a],1)):(l[a]=Ye(f),l[a].c(),_(l[a],1),l[a].m(e,null))}for(X(),a=t.length;a<l.length;a+=1)s(a);W()}},i(n){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(n){n&&p(e),le(l,n)}}}function Jl(o){let e=(o[14]==="de"?o[52].nameDE:o[52].nameEN)+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&16386&&e!==(e=(t[14]==="de"?t[52].nameDE:t[52].nameEN)+"")&&M(r,e)},d(t){t&&p(r)}}}function We(o){let e,r,t,l,s,n;return r=new nt({props:{value:o[52].id,class:(o[52].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-feelings-foreground",$$slots:{default:[Jl]},$$scope:{ctx:o}}}),{c(){e=I("button"),C(r.$$.fragment),this.h()},l(i){e=N(i,"BUTTON",{type:!0,class:!0});var a=S(e);F(r.$$.fragment,a),a.forEach(p),this.h()},h(){var i;D(e,"type","button"),D(e,"class",t=(o[24](o[52],o[62])||(i=o[13].feelings)!=null&&i.includes(o[52].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(i,a){k(i,e,a),T(r,e,null),l=!0,s||(n=Ne(e,"click",function(){lt(o[23](o[52],o[62].category))&&o[23](o[52],o[62].category).apply(this,arguments)}),s=!0)},p(i,a){var u;o=i;const f={};a[0]&2&&(f.value=o[52].id),a[0]&2&&(f.class=(o[52].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-feelings-foreground"),a[0]&16386|a[2]&512&&(f.$$scope={dirty:a,ctx:o}),r.$set(f),(!l||a[0]&8194&&t!==(t=(o[24](o[52],o[62])||(u=o[13].feelings)!=null&&u.includes(o[52].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&D(e,"class",t)},i(i){l||(_(r.$$.fragment,i),l=!0)},o(i){b(r.$$.fragment,i),l=!1},d(i){i&&p(e),q(r),s=!1,n()}}}function Xe(o){let e,r,t=K(o[62].content),l=[];for(let n=0;n<t.length;n+=1)l[n]=We(Ae(o,t,n));const s=n=>b(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Z()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=Z()},m(n,i){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,i);k(n,e,i),r=!0},p(n,i){if(i[0]&25190402){t=K(n[62].content);let a;for(a=0;a<t.length;a+=1){const f=Ae(n,t,a);l[a]?(l[a].p(f,i),_(l[a],1)):(l[a]=We(f),l[a].c(),_(l[a],1),l[a].m(e.parentNode,e))}for(X(),a=t.length;a<l.length;a+=1)s(a);W()}},i(n){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(n){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(n){n&&p(e),le(l,n)}}}function Ye(o){let e,r=(o[59].category==="true"?o[12]("default.page.fights.form.general.goodFeelings"):o[12]("default.page.fights.form.general.badFeelings"))+"",t,l,s,n,i,a,f,u,g,c=K(o[59].content),d=[];for(let m=0;m<c.length;m+=1)d[m]=Xe(Re(o,c,m));const v=m=>b(d[m],1,1,()=>{d[m]=null});return{c(){e=I("div"),t=R(r),l=j(),s=I("div"),a=j(),f=I("div");for(let m=0;m<d.length;m+=1)d[m].c();u=j(),this.h()},l(m){e=N(m,"DIV",{class:!0});var $=S(e);t=A($,r),l=B($),s=N($,"DIV",{class:!0}),S(s).forEach(p),$.forEach(p),a=B(m),f=N(m,"DIV",{class:!0});var E=S(f);for(let Y=0;Y<d.length;Y+=1)d[Y].l(E);u=B(E),E.forEach(p),this.h()},h(){D(s,"class",n="border-b border-"+o[10][o[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-18kg1ym"),D(e,"class",i="text-"+o[10][o[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-18kg1ym"),D(f,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(m,$){k(m,e,$),w(e,t),w(e,l),w(e,s),k(m,a,$),k(m,f,$);for(let E=0;E<d.length;E+=1)d[E]&&d[E].m(f,null);w(f,u),g=!0},p(m,$){if((!g||$[0]&4098)&&r!==(r=(m[59].category==="true"?m[12]("default.page.fights.form.general.goodFeelings"):m[12]("default.page.fights.form.general.badFeelings"))+"")&&M(t,r),(!g||$[0]&1025&&n!==(n="border-b border-"+m[10][m[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-18kg1ym"))&&D(s,"class",n),(!g||$[0]&1025&&i!==(i="text-"+m[10][m[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-18kg1ym"))&&D(e,"class",i),$[0]&25190402){c=K(m[59].content);let E;for(E=0;E<c.length;E+=1){const Y=Re(m,c,E);d[E]?(d[E].p(Y,$),_(d[E],1)):(d[E]=Xe(Y),d[E].c(),_(d[E],1),d[E].m(f,u))}for(X(),E=c.length;E<d.length;E+=1)v(E);W()}},i(m){if(!g){for(let $=0;$<c.length;$+=1)_(d[$]);g=!0}},o(m){d=d.filter(Boolean);for(let $=0;$<d.length;$+=1)b(d[$]);g=!1},d(m){m&&(p(e),p(a),p(f)),le(d,m)}}}function Ol(o){let e,r,t=o[1].length>0&&Ge(o);return{c(){t&&t.c(),e=Z()},l(l){t&&t.l(l),e=Z()},m(l,s){t&&t.m(l,s),k(l,e,s),r=!0},p(l,s){l[1].length>0?t?(t.p(l,s),s[0]&2&&_(t,1)):(t=Ge(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(X(),b(t,1,1,()=>{t=null}),W())},i(l){r||(_(t),r=!0)},o(l){b(t),r=!1},d(l){l&&p(e),t&&t.d(l)}}}function Rl(o){let e,r,t,l,s;e=new he({props:{class:"form-label",$$slots:{default:[Bl]},$$scope:{ctx:o}}});const n=[{type:"multiple"},o[58],{class:"flex flex-col gap-4"}];function i(f){o[30](f)}let a={$$slots:{default:[Ol]},$$scope:{ctx:o}};for(let f=0;f<n.length;f+=1)a=ce(a,n[f]);return o[13].feelings!==void 0&&(a.value=o[13].feelings),t=new st({props:a}),ne.push(()=>ae(t,"value",i)),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(f){F(e.$$.fragment,f),r=B(f),F(t.$$.fragment,f)},m(f,u){T(e,f,u),k(f,r,u),T(t,f,u),s=!0},p(f,u){const g={};u[0]&4096|u[2]&512&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&134217728?pe(n,[n[0],ge(f[58]),n[2]]):{};u[0]&29699|u[2]&512&&(c.$$scope={dirty:u,ctx:f}),!l&&u[0]&8192&&(l=!0,c.value=f[13].feelings,oe(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),q(e,f),q(t,f)}}}function Al(o){let e,r,t,l;return e=new me({props:{$$slots:{default:[Rl,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new _e({}),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(s){F(e.$$.fragment,s),r=B(s),F(t.$$.fragment,s)},m(s,n){T(e,s,n),k(s,r,n),T(t,s,n),l=!0},p(s,n){const i={};n[0]&29699|n[1]&134217728|n[2]&512&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),q(e,s),q(t,s)}}}function Ml(o){let e=o[12]("default.page.fights.form.observation.label")+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&4096&&e!==(e=t[12]("default.page.fights.form.observation.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function zl(o){let e,r,t,l,s;e=new he({props:{class:"form-label",$$slots:{default:[Ml]},$$scope:{ctx:o}}});const n=[o[58],{class:"min-h-60"}];function i(f){o[28](f)}let a={};for(let f=0;f<n.length;f+=1)a=ce(a,n[f]);return o[13].observation!==void 0&&(a.value=o[13].observation),t=new rt({props:a}),ne.push(()=>ae(t,"value",i)),t.$on("input",o[29]),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(f){F(e.$$.fragment,f),r=B(f),F(t.$$.fragment,f)},m(f,u){T(e,f,u),k(f,r,u),T(t,f,u),s=!0},p(f,u){const g={};u[0]&4096|u[2]&512&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&134217728?pe(n,[ge(f[58]),n[1]]):{};!l&&u[0]&8192&&(l=!0,c.value=f[13].observation,oe(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),q(e,f),q(t,f)}}}function Ll(o){let e,r,t,l;return e=new me({props:{$$slots:{default:[zl,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new _e({}),{c(){C(e.$$.fragment),r=j(),C(t.$$.fragment)},l(s){F(e.$$.fragment,s),r=B(s),F(t.$$.fragment,s)},m(s,n){T(e,s,n),k(s,r,n),T(t,s,n),l=!0},p(s,n){const i={};n[0]&12544|n[1]&134217728|n[2]&512&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),q(e,s),q(t,s)}}}function Ze(o){let e,r=(o[14]==="de"?o[55].nameDE:o[55].nameEN)+"",t,l;return{c(){e=I("div"),t=R(r),l=j(),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=S(e);t=A(n,r),l=B(n),n.forEach(p),this.h()},h(){D(e,"class","rounded-md bg-white/10 px-4 py-2 shadow-lg")},m(s,n){k(s,e,n),w(e,t),w(e,l)},p(s,n){n[0]&16392&&r!==(r=(s[14]==="de"?s[55].nameDE:s[55].nameEN)+"")&&M(t,r)},d(s){s&&p(e)}}}function ye(o){let e,r=(o[14]==="de"?o[52].nameDE:o[52].nameEN)+"",t,l;return{c(){e=I("div"),t=R(r),l=j(),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=S(e);t=A(n,r),l=B(n),n.forEach(p),this.h()},h(){D(e,"class","rounded-md bg-white/20 px-4 py-2 shadow-lg")},m(s,n){k(s,e,n),w(e,t),w(e,l)},p(s,n){n[0]&16392&&r!==(r=(s[14]==="de"?s[52].nameDE:s[52].nameEN)+"")&&M(t,r)},d(s){s&&p(e)}}}function Pl(o){let e,r,t=o[12]("default.page.respond.steps.greeting.explanationCta")+"",l,s;return e=new rl({}),{c(){C(e.$$.fragment),r=j(),l=R(t)},l(n){F(e.$$.fragment,n),r=B(n),l=A(n,t)},m(n,i){T(e,n,i),k(n,r,i),k(n,l,i),s=!0},p(n,i){(!s||i[0]&4096)&&t!==(t=n[12]("default.page.respond.steps.greeting.explanationCta")+"")&&M(l,t)},i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){b(e.$$.fragment,n),s=!1},d(n){n&&(p(r),p(l)),q(e,n)}}}function xe(o){let e,r,t,l;const s=[Il,Dl,El,kl,wl,bl,vl,$l,hl,_l,ml,dl,gl,pl],n=[];function i(a,f){return a[0]===1?0:a[0]===2?1:a[0]===3?2:a[0]===4?3:a[0]===5?4:a[0]===6?5:a[0]===7?6:a[0]===8?7:a[0]===9?8:a[0]===10?9:a[0]===11?10:a[6]?a[7]?12:13:11}return e=i(o),r=n[e]=s[e](o),{c(){r.c(),t=Z()},l(a){r.l(a),t=Z()},m(a,f){n[e].m(a,f),k(a,t,f),l=!0},p(a,f){let u=e;e=i(a),e===u?n[e].p(a,f):(X(),b(n[u],1,1,()=>{n[u]=null}),W(),r=n[e],r?r.p(a,f):(r=n[e]=s[e](a),r.c()),_(r,1),r.m(t.parentNode,t))},i(a){l||(_(r),l=!0)},o(a){b(r),l=!1},d(a){a&&p(t),n[e].d(a)}}}function et(o){let e,r;return e=new Ut({props:{$$slots:{default:[Ul]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){T(e,t,l),r=!0},p(t,l){const s={};l[0]&1281|l[2]&512&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Ul(o){let e,r;return e=new ll({props:{step:o[0],checkForJudgement:o[8],primaryButtonClass:`bg-${o[10][o[0]-1].slug}-background`,class:"flex-shrink-0"}}),e.$on("validateObservation",o[15]),e.$on("disableJudgementCheck",o[16]),e.$on("toPrev",o[20]),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){T(e,t,l),r=!0},p(t,l){const s={};l[0]&1&&(s.step=t[0]),l[0]&256&&(s.checkForJudgement=t[8]),l[0]&1025&&(s.primaryButtonClass=`bg-${t[10][t[0]-1].slug}-background`),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Hl(o){let e=o[12]("default.page.respond.explanationTitle")+"",r;return{c(){r=R(e)},l(t){r=A(t,e)},m(t,l){k(t,r,l)},p(t,l){l[0]&4096&&e!==(e=t[12]("default.page.respond.explanationTitle")+"")&&M(r,e)},d(t){t&&p(r)}}}function Ql(o){let e,r;return e=new Zt({props:{class:"text-red-600"}}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){T(e,t,l),r=!0},p:L,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Kl(o){let e,r,t,l,s;return r=new Xt({props:{$$slots:{default:[Hl]},$$scope:{ctx:o}}}),l=new Yt({props:{$$slots:{default:[Ql]},$$scope:{ctx:o}}}),{c(){e=I("div"),C(r.$$.fragment),t=j(),C(l.$$.fragment),this.h()},l(n){e=N(n,"DIV",{class:!0});var i=S(e);F(r.$$.fragment,i),t=B(i),F(l.$$.fragment,i),i.forEach(p),this.h()},h(){D(e,"class","flex items-center justify-between")},m(n,i){k(n,e,i),T(r,e,null),w(e,t),T(l,e,null),s=!0},p(n,i){const a={};i[0]&4096|i[2]&512&&(a.$$scope={dirty:i,ctx:n}),r.$set(a);const f={};i[2]&512&&(f.$$scope={dirty:i,ctx:n}),l.$set(f)},i(n){s||(_(r.$$.fragment,n),_(l.$$.fragment,n),s=!0)},o(n){b(r.$$.fragment,n),b(l.$$.fragment,n),s=!1},d(n){n&&p(e),q(r),q(l)}}}function Gl(o){let e,r,t,l=o[12]("default.page.respond.explanation")+"",s,n;return e=new Wt({props:{$$slots:{default:[Kl]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment),r=j(),t=I("p"),s=R(l),this.h()},l(i){F(e.$$.fragment,i),r=B(i),t=N(i,"P",{class:!0});var a=S(t);s=A(a,l),a.forEach(p),this.h()},h(){D(t,"class","mb-20 p-4")},m(i,a){T(e,i,a),k(i,r,a),k(i,t,a),w(t,s),n=!0},p(i,a){const f={};a[0]&4096|a[2]&512&&(f.$$scope={dirty:a,ctx:i}),e.$set(f),(!n||a[0]&4096)&&l!==(l=i[12]("default.page.respond.explanation")+"")&&M(s,l)},i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){i&&(p(r),p(t)),q(e,i)}}}function Wl(o){let e,r;return e=new Gt({props:{class:"p-4",$$slots:{default:[Gl]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){T(e,t,l),r=!0},p(t,l){const s={};l[0]&4096|l[2]&512&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Xl(o){let e,r,t,l,s,n,i,a,f,u,g,c,d,v;r=new Pt({});let m=!o[6]&&!o[7]&&Le(o),$=o[3]&&Ue(o),E=!o[6]&&!o[7]&&et(o);function Y(V){o[33](V)}let re={$$slots:{default:[Wl]},$$scope:{ctx:o}};return o[9]!==void 0&&(re.open=o[9]),u=new Qt({props:re}),ne.push(()=>ae(u,"open",Y)),{c(){e=I("div"),C(r.$$.fragment),t=j(),l=I("div"),s=I("form"),m&&m.c(),n=j(),$&&$.c(),i=j(),E&&E.c(),f=j(),C(u.$$.fragment),this.h()},l(V){e=N(V,"DIV",{class:!0});var z=S(e);F(r.$$.fragment,z),t=B(z),l=N(z,"DIV",{class:!0});var y=S(l);s=N(y,"FORM",{class:!0});var x=S(s);m&&m.l(x),n=B(x),$&&$.l(x),i=B(x),E&&E.l(x),x.forEach(p),y.forEach(p),z.forEach(p),f=B(V),F(u.$$.fragment,V),this.h()},h(){D(s,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),D(l,"class","max-container relative flex flex-grow flex-col pb-40"),D(e,"class",a="flex flex-grow flex-col justify-between transition duration-500 "+o[11]+" min-h-svh overflow-hidden dark:bg-background svelte-18kg1ym")},m(V,z){k(V,e,z),T(r,e,null),w(e,t),w(e,l),w(l,s),m&&m.m(s,null),w(s,n),$&&$.m(s,null),w(s,i),E&&E.m(s,null),k(V,f,z),T(u,V,z),c=!0,d||(v=[Ne(s,"submit",Ct(o[25])),Ft(o[19].call(null,s))],d=!0)},p(V,z){!V[6]&&!V[7]?m?(m.p(V,z),z[0]&192&&_(m,1)):(m=Le(V),m.c(),_(m,1),m.m(s,n)):m&&(X(),b(m,1,1,()=>{m=null}),W()),V[3]?$?($.p(V,z),z[0]&8&&_($,1)):($=Ue(V),$.c(),_($,1),$.m(s,i)):$&&(X(),b($,1,1,()=>{$=null}),W()),!V[6]&&!V[7]?E?(E.p(V,z),z[0]&192&&_(E,1)):(E=et(V),E.c(),_(E,1),E.m(s,null)):E&&(X(),b(E,1,1,()=>{E=null}),W()),(!c||z[0]&2048&&a!==(a="flex flex-grow flex-col justify-between transition duration-500 "+V[11]+" min-h-svh overflow-hidden dark:bg-background svelte-18kg1ym"))&&D(e,"class",a);const y={};z[0]&4096|z[2]&512&&(y.$$scope={dirty:z,ctx:V}),!g&&z[0]&512&&(g=!0,y.open=V[9],oe(()=>g=!1)),u.$set(y)},i(V){c||(_(r.$$.fragment,V),_(m),_($),_(E),_(u.$$.fragment,V),c=!0)},o(V){b(r.$$.fragment,V),b(m),b($),b(E),b(u.$$.fragment,V),c=!1},d(V){V&&(p(e),p(f)),q(r),m&&m.d(),$&&$.d(),E&&E.d(),q(u,V),d=!1,Tt(v)}}}function Yl(o,e,r){let t,l,s,n,i,a;fe(o,Ht,h=>r(35,l=h)),fe(o,Rt,h=>r(36,s=h)),fe(o,U,h=>r(12,n=h)),fe(o,At,h=>r(14,a=h));const f=Kt(Q(se));let u=[],g=[],c,d,v=[{step:1,content:[""]}];const m=[Q(ke),Q(Ee),Q(De),Q(Ie),Q(nl),Q(ol),Q(al),Q(fl),Q(il),Q(ul),Q(cl),Q(se)];let $=1,E=!1,Y=!1,re=!1,V=!1;const z=h=>{const J=`bg-${ie[h-1].slug}-background`;return Mt.set(J),J},y=async()=>{try{let h=i;h.fight=c.id,console.log("submit form",h);const J=await ue.collection("responses").create(h);r(7,Y=!0),r(6,E=!0)}catch(h){console.log("error handling submit",h),r(7,Y=!1),r(6,E=!0)}},x=async h=>{const O=Object.keys(Q([ke,Ee,De,Ie,se][h-1]).constraints);let P=!0;for(const te of O)await it(te,{update:!1})&&(P=!1);return!!P},ot=async()=>{const h=await Fe(i,se);return h.valid?!0:(Ce.set(h.errors),!1)},at=async()=>{const h=await Fe(se);return h.errors.observation?(Ce.set(h.errors),!1):(Se(),!0)},Se=()=>{d(i.observation),r(8,re=!1)},Ve=el(f,{resetForm:!1,validators:yt(se),async onSubmit({validators:h,cancel:J}){console.log("onSubmit"),J(),await ot()&&($==m.length?y():r(0,$++,$))},async onUpdated({form:h}){console.log("onUpdated"),h.valid&&r(0,$=1)}}),{form:ee,errors:Ce,message:Zl,enhance:ft,validate:it,validateForm:Fe,options:ut,updateForm:yl}=Ve;fe(o,ee,h=>r(13,i=h)),ee.subscribe(h=>{console.log("form was updated",h)});let ie=[{slug:"greeting",name:H(U)("default.page.fights.form.general.steps.info"),icon:be,invertedTextColor:!1,hidden:!0},{slug:"disclaimer",name:H(U)("default.page.fights.form.general.steps.info"),icon:be,invertedTextColor:!1,hidden:!0},{slug:"breathe",name:H(U)("default.page.fights.form.general.steps.info"),icon:be,invertedTextColor:!1,hidden:!0},{slug:"observation",name:H(U)("default.page.fights.form.general.steps.observation"),icon:we,invertedTextColor:!0,hidden:!0},{slug:"feelings",name:H(U)("default.page.fights.form.general.steps.feelings"),icon:Te,invertedTextColor:!1,hidden:!0},{slug:"needs",name:H(U)("default.page.fights.form.general.steps.needs"),icon:qe,invertedTextColor:!1,hidden:!0},{slug:"request",name:H(U)("default.page.fights.form.general.steps.request"),icon:je,invertedTextColor:!1,hidden:!0},{slug:"pause",name:H(U)("default.page.fights.form.general.steps.observation"),icon:we,invertedTextColor:!0,hidden:!0},{slug:"observation",name:H(U)("default.page.fights.form.general.steps.observation"),icon:we,invertedTextColor:!0},{slug:"feelings",name:H(U)("default.page.fights.form.general.steps.feelings"),icon:Te,invertedTextColor:!1},{slug:"needs",name:H(U)("default.page.fights.form.general.steps.needs"),icon:qe,invertedTextColor:!1},{slug:"request",name:H(U)("default.page.fights.form.general.steps.request"),icon:je,invertedTextColor:!1}];U.subscribe(h=>{const J=ie.map(O=>{const P=h(`default.page.fights.form.general.steps.${O.slug}`);return O.name=P,O});r(10,ie=[...J])});const ct=()=>{console.log("decreaseStep"),$>1&&(console.log("step",$),r(0,$=$-1),console.log("step",$))},pt=async()=>{const h=await ue.collection("feelings").getFullList({sort:"category"}),J=$e(h);let O=ve(J,"positive");O.map(P=>(P.content=ve(P.content,"category"),P.content.map(te=>te.visible=!1),P)),console.log("res",O),r(1,u=O)},gt=async()=>{const h=await ue.collection("needs").getFullList({sort:"category"}),J=$e(h);let O=ve(J,"category");O.map(P=>P.visible=!1),console.log("res",O),r(2,g=O)},dt=async()=>{const h=await ue.collection("fights").getOne(l.params.id,{expand:"owner, feelings, needs"});r(3,c=$e(h)),console.log("fight",c)},mt=async h=>{console.log("changeStep");const J=h.detail.step,O=await x(J);console.log("targetStepIsValid",O),O&&r(0,$=J)},_t=(h,J)=>{if(h.nameEN!==J)return;const O=g.find(P=>P.category===J);O&&(O.visible=!O.visible),r(2,g=[...g])},ht=(h,J)=>{if(h.nameEN!==J)return;const O=u[0].content.find(te=>te.category===J),P=u[1].content.find(te=>te.category===J);O&&(O.visible=!O.visible),P&&(P.visible=!P.visible),r(1,u=[...u])},$t=(h,J)=>{const O=h.nameEN,P=J.category;return!!(O===P||J.visible)},vt=()=>{r(5,v=[{step:1,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.greeting.heading")}. ${n("default.page.respond.steps.greeting.question")}`]},{step:2,content:[`${n("default.page.respond.steps.disclaimer.heading")}: ${n("default.page.respond.steps.disclaimer.description")}`]},{step:3,content:[`${n("default.page.respond.steps.breathe.heading")}`]},{step:4,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerObservation.heading")}`]},{step:5,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerFeelings.heading")}`]},{step:6,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerNeeds.heading")}`]},{step:7,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerRequest.heading")}`]},{step:8,content:[n("default.page.respond.steps.pause.heading")]},{step:9,content:[n("default.page.fight.create.observation")]},{step:10,content:[n("default.page.fight.create.feelings")]},{step:11,content:[n("default.page.fight.create.needs")]},{step:12,content:[n("default.page.fight.create.request")]},{step:13,content:[n("default.page.respond.steps.success")],errorContent:[n("default.page.respond.steps.error")]}])};qt(async()=>{if(await pt(),await gt(),await dt(),vt(),l.url){const h=l.params.id;if(h){const J=JSON.parse(localStorage.getItem("openedFights")||"[]");J.includes(h)||(J.push(h),localStorage.setItem("openedFights",JSON.stringify(J)))}s?(console.log("deleting cookie loginRedirectTarget"),Lt("loginRedirectTarget")):(console.log("setting cookie loginRedirectTarget"),zt("loginRedirectTarget",l.url.pathname+l.url.search,.1))}});function bt(h){jt.call(this,o,h)}function wt(h){d=h,r(4,d)}const kt=()=>r(9,V=!0);function Et(h){o.$$.not_equal(i.observation,h)&&(i.observation=h,ee.set(i))}const Dt=()=>r(8,re=!0);function It(h){o.$$.not_equal(i.feelings,h)&&(i.feelings=h,ee.set(i))}function Nt(h){o.$$.not_equal(i.needs,h)&&(i.needs=h,ee.set(i))}function St(h){o.$$.not_equal(i.request,h)&&(i.request=h,ee.set(i))}function Vt(h){V=h,r(9,V)}return o.$$.update=()=>{o.$$.dirty[0]&1,o.$$.dirty[0]&1&&(ut.validators=m[$-1]),o.$$.dirty[0]&1&&r(11,t=z($))},[$,u,g,c,d,v,E,Y,re,V,ie,t,n,i,a,at,Se,Ve,ee,ft,ct,mt,_t,ht,$t,bt,wt,kt,Et,Dt,It,Nt,St,Vt]}class _r extends Jt{constructor(e){super(),Ot(this,e,Yl,Xl,tt,{},null,[-1,-1,-1])}}export{_r as component};
