import{I as K,s as Ze,K as se,e as V,a as F,c as S,b as N,g as C,f as p,y as k,i as I,h,C as Ve,S as vt,J as bt,L as ae,D as wt,k as fe,G as kt,O as x,n as L,p as Et,t as O,d as M,j as z,M as le,l as ue,T as ye}from"../chunks/scheduler.gWKEXFbz.js";import{S as Dt,i as It,f as ne,c as q,a as T,m as j,t as _,b,e as Z,d as B,g as y}from"../chunks/index.CG0cexN_.js";import{e as X}from"../chunks/index.DX7FOcvC.js";import{t as H,l as Vt,g as ce,a as pe}from"../chunks/page.DM_0WmRN.js";import{p as St}from"../chunks/stores.CyrLmYVR.js";import"../chunks/Avatar.svelte_svelte_type_style_lang.DPRrV1hT.js";import{D as Nt,a as Ft,b as Ct,c as qt,C as Tt,d as jt}from"../chunks/index.BI8SSx0X.js";import{M as Bt}from"../chunks/Menu.DckRfB8c.js";import{c as W,z as Ot,F as ge,C as me,a as de,b as _e}from"../chunks/zod.D0XA1AUd.js";import{M as Mt,F as zt,a as Pt,T as xe,b as et,c as tt}from"../chunks/Mascot.BnZIKRVA.js";import{z as Y,s as Rt}from"../chunks/memoize.BCGTZPkc.js";import{d as Ut}from"../chunks/defaults.CEskAMGU.js";import{I as $e}from"../chunks/icon-folder.CBGieXVr.js";import{I as ve,a as Se,b as Ne,c as Fe}from"../chunks/icon-steps.dGSELuxl.js";import{p as ie}from"../chunks/pocketbase.Ce4YzWbP.js";import{s as be,g as we}from"../chunks/Avatar.h3nvYJtf.js";import{B as Lt}from"../chunks/button.DdYiIxki.js";const ke=Y.object({}),Ee=Y.object({}),De=Y.object({}),Ie=Y.object({}),Jt=Y.object({}),At=Y.object({}),Gt=Y.object({}),Ht=Y.object({}),Kt=ke.extend({observation:Y.string().min(10,{message:K(H)("default.page.fights.form.observation.tooShortError")})}),Qt=Ee.extend({feelings:Y.array(Y.string()).min(1,{message:K(H)("default.page.fights.form.feelings.tooFewError")})}),Wt=De.extend({needs:Y.array(Y.string()).min(1,{message:K(H)("default.page.fights.form.needs.tooFewError")})}),re=Ie.extend({request:Y.string().min(10,{message:K(H)("default.page.fights.form.request.tooFewError")})});function Ce(n,e,r){const t=n.slice();return t[51]=e[r],t}function qe(n,e,r){const t=n.slice();return t[44]=e[r],t}function Te(n,e,r){const t=n.slice();return t[48]=e[r],t}function je(n,e,r){const t=n.slice();return t[51]=e[r],t}function Be(n,e,r){const t=n.slice();return t[41]=e[r],t}function Oe(n,e,r){const t=n.slice();return t[44]=e[r],t}function Me(n,e,r){const t=n.slice();return t[41]=e[r],t}function ze(n){let e,r,t,l=n[0]>8&&Pe(n);return r=new Mt({props:{step:n[0],stepName:n[7][n[0]-1].slug}}),{c(){l&&l.c(),e=F(),q(r.$$.fragment)},l(s){l&&l.l(s),e=C(s),T(r.$$.fragment,s)},m(s,a){l&&l.m(s,a),I(s,e,a),j(r,s,a),t=!0},p(s,a){s[0]>8?l?(l.p(s,a),a[0]&1&&_(l,1)):(l=Pe(s),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(y(),b(l,1,1,()=>{l=null}),Z());const i={};a[0]&1&&(i.step=s[0]),a[0]&129&&(i.stepName=s[7][s[0]-1].slug),r.$set(i)},i(s){t||(_(l),_(r.$$.fragment,s),t=!0)},o(s){b(l),b(r.$$.fragment,s),t=!1},d(s){s&&p(e),l&&l.d(s),B(r,s)}}}function Pe(n){let e,r;return e=new zt({props:{step:n[0],steps:n[7],stepBackground:n[7][n[0]-1].slug}}),e.$on("changeStep",n[15]),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l[0]&1&&(s.step=t[0]),l[0]&128&&(s.steps=t[7]),l[0]&129&&(s.stepBackground=t[7][t[0]-1].slug),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Re(n){let e=n[0],r,t,l=Xe(n);return{c(){l.c(),r=x()},l(s){l.l(s),r=x()},m(s,a){l.m(s,a),I(s,r,a),t=!0},p(s,a){a[0]&1&&Ze(e,e=s[0])?(y(),b(l,1,1,L),Z(),l=Xe(s),l.c(),_(l,1),l.m(r.parentNode,r)):l.p(s,a)},i(s){t||(_(l),t=!0)},o(s){b(l),t=!1},d(s){s&&p(r),l.d(s)}}}function Xt(n){let e;return{c(){e=O("Error in Submit")},l(r){e=M(r,"Error in Submit")},m(r,t){I(r,e,t)},p:L,i:L,o:L,d(r){r&&p(e)}}}function Yt(n){let e;return{c(){e=O("Success")},l(r){e=M(r,"Success")},m(r,t){I(r,e,t)},p:L,i:L,o:L,d(r){r&&p(e)}}}function Zt(n){let e,r,t;return r=new ge({props:{form:n[11],name:"request",$$slots:{default:[cl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=S(l,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&768|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function yt(n){let e,r,t;return r=new ge({props:{form:n[11],name:"needs",$$slots:{default:[_l]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=S(l,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&1796|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function xt(n){let e,r,t;return r=new ge({props:{form:n[11],name:"feelings",$$slots:{default:[wl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=S(l,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&1923|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function el(n){let e,r,t;return r=new ge({props:{form:n[11],name:"observation",$$slots:{default:[Dl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=S(l,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&768|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function tl(n){let e,r,t=n[9]("default.page.respond.steps.pause.heading")+"",l;return{c(){e=V("div"),r=V("div"),l=O(t),this.h()},l(s){e=S(s,"DIV",{class:!0});var a=N(e);r=S(a,"DIV",{class:!0});var i=N(r);l=M(i,t),i.forEach(p),a.forEach(p),this.h()},h(){k(r,"class","flex flex-col gap-4 text-center max-w-[18em]"),k(e,"class","form-content flex items-center justify-center")},m(s,a){I(s,e,a),h(e,r),h(r,l)},p(s,a){a[0]&512&&t!==(t=s[9]("default.page.respond.steps.pause.heading")+"")&&z(l,t)},i:L,o:L,d(s){s&&p(e)}}}function ll(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerRequest.heading")+"",i,o,f,u=n[3].request+"",g;return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div"),g=O(u),this.h()},l(c){e=S(c,"DIV",{"data-simplebar":!0,class:!0});var m=N(e);r=S(m,"DIV",{class:!0});var $=N(r);l=M($,t),s=C($),i=M($,a),$.forEach(p),o=C(m),f=S(m,"DIV",{class:!0});var d=N(f);g=M(d,u),d.forEach(p),m.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","bg-white/10 px-4 py-3 rounded shadow-xl"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,m){I(c,e,m),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f),h(f,g)},p(c,m){m[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&z(l,t),m[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerRequest.heading")+"")&&z(i,a),m[0]&8&&u!==(u=c[3].request+"")&&z(g,u)},i:L,o:L,d(c){c&&p(e)}}}function rl(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerNeeds.heading")+"",i,o,f,u=X(n[3].expand.needs),g=[];for(let c=0;c<u.length;c+=1)g[c]=Qe(Oe(n,u,c));return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=S(c,"DIV",{"data-simplebar":!0,class:!0});var m=N(e);r=S(m,"DIV",{class:!0});var $=N(r);l=M($,t),s=C($),i=M($,a),$.forEach(p),o=C(m),f=S(m,"DIV",{class:!0});var d=N(f);for(let v=0;v<g.length;v+=1)g[v].l(d);d.forEach(p),m.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","flex items-center flex-wrap gap-2"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,m){I(c,e,m),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(f,null)},p(c,m){if(m[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&z(l,t),m[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerNeeds.heading")+"")&&z(i,a),m[0]&1032){u=X(c[3].expand.needs);let $;for($=0;$<u.length;$+=1){const d=Oe(c,u,$);g[$]?g[$].p(d,m):(g[$]=Qe(d),g[$].c(),g[$].m(f,null))}for(;$<g.length;$+=1)g[$].d(1);g.length=u.length}},i:L,o:L,d(c){c&&p(e),le(g,c)}}}function sl(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerFeelings.heading")+"",i,o,f,u=X(n[3].expand.feelings),g=[];for(let c=0;c<u.length;c+=1)g[c]=We(Me(n,u,c));return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=S(c,"DIV",{"data-simplebar":!0,class:!0});var m=N(e);r=S(m,"DIV",{class:!0});var $=N(r);l=M($,t),s=C($),i=M($,a),$.forEach(p),o=C(m),f=S(m,"DIV",{class:!0});var d=N(f);for(let v=0;v<g.length;v+=1)g[v].l(d);d.forEach(p),m.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","flex items-center flex-wrap gap-2"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,m){I(c,e,m),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(f,null)},p(c,m){if(m[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&z(l,t),m[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerFeelings.heading")+"")&&z(i,a),m[0]&1032){u=X(c[3].expand.feelings);let $;for($=0;$<u.length;$+=1){const d=Me(c,u,$);g[$]?g[$].p(d,m):(g[$]=We(d),g[$].c(),g[$].m(f,null))}for(;$<g.length;$+=1)g[$].d(1);g.length=u.length}},i:L,o:L,d(c){c&&p(e),le(g,c)}}}function al(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerObservation.heading")+"",i,o,f,u=n[3].observation+"",g;return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div"),g=O(u),this.h()},l(c){e=S(c,"DIV",{"data-simplebar":!0,class:!0});var m=N(e);r=S(m,"DIV",{class:!0});var $=N(r);l=M($,t),s=C($),i=M($,a),$.forEach(p),o=C(m),f=S(m,"DIV",{class:!0});var d=N(f);g=M(d,u),d.forEach(p),m.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","bg-white/10 px-4 py-3 rounded shadow-xl"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,m){I(c,e,m),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f),h(f,g)},p(c,m){m[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&z(l,t),m[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerObservation.heading")+"")&&z(i,a),m[0]&8&&u!==(u=c[3].observation+"")&&z(g,u)},i:L,o:L,d(c){c&&p(e)}}}function nl(n){let e,r,t,l=n[9]("default.page.respond.steps.breathe.heading")+"",s,a,i,o,f;return{c(){e=V("div"),r=V("div"),t=V("span"),s=O(l),a=F(),i=V("div"),o=F(),f=V("div"),this.h()},l(u){e=S(u,"DIV",{class:!0});var g=N(e);r=S(g,"DIV",{class:!0});var c=N(r);t=S(c,"SPAN",{class:!0});var m=N(t);s=M(m,l),m.forEach(p),a=C(c),i=S(c,"DIV",{class:!0}),N(i).forEach(p),o=C(c),f=S(c,"DIV",{class:!0}),N(f).forEach(p),c.forEach(p),g.forEach(p),this.h()},h(){k(t,"class","relative z-10 -mb-2"),k(i,"class","breathe svelte-1p6uaeu"),k(f,"class","breathe2 svelte-1p6uaeu"),k(r,"class","flex flex-col text-center relative"),k(e,"class","form-content flex items-center justify-center")},m(u,g){I(u,e,g),h(e,r),h(r,t),h(t,s),h(r,a),h(r,i),h(r,o),h(r,f)},p(u,g){g[0]&512&&l!==(l=u[9]("default.page.respond.steps.breathe.heading")+"")&&z(s,l)},i:L,o:L,d(u){u&&p(e)}}}function ol(n){let e,r,t=n[9]("default.page.respond.steps.disclaimer.heading")+"",l,s,a,i,o=n[9]("default.page.respond.steps.disclaimer.description")+"",f;return{c(){e=V("div"),r=V("div"),l=O(t),s=O(" —"),a=V("br"),i=F(),f=O(o),this.h()},l(u){e=S(u,"DIV",{class:!0});var g=N(e);r=S(g,"DIV",{class:!0});var c=N(r);l=M(c,t),s=M(c," —"),a=S(c,"BR",{}),i=C(c),f=M(c,o),c.forEach(p),g.forEach(p),this.h()},h(){k(r,"class","flex flex-col gap-4 text-center max-w-[18em]"),k(e,"class","form-content flex flex-col justify-center items-center text-center")},m(u,g){I(u,e,g),h(e,r),h(r,l),h(r,s),h(r,a),h(r,i),h(r,f)},p(u,g){g[0]&512&&t!==(t=u[9]("default.page.respond.steps.disclaimer.heading")+"")&&z(l,t),g[0]&512&&o!==(o=u[9]("default.page.respond.steps.disclaimer.description")+"")&&z(f,o)},i:L,o:L,d(u){u&&p(e)}}}function fl(n){let e,r,t,l,s,a=n[3].expand.owner.firstName+"",i,o,f=n[9]("default.page.respond.steps.greeting.heading")+"",u,g,c,m,$,d,v=n[9]("default.page.respond.steps.greeting.question")+"",D,G;return m=new Lt({props:{class:"bg-white/40 text-black",$$slots:{default:[Il]},$$scope:{ctx:n}}}),m.$on("click",n[20]),{c(){e=V("div"),r=V("div"),t=F(),l=V("div"),s=V("div"),i=O(a),o=F(),u=O(f),g=F(),c=V("div"),q(m.$$.fragment),$=F(),d=V("div"),D=O(v),this.h()},l(J){e=S(J,"DIV",{class:!0});var w=N(e);r=S(w,"DIV",{}),N(r).forEach(p),t=C(w),l=S(w,"DIV",{class:!0});var P=N(l);s=S(P,"DIV",{});var Q=N(s);i=M(Q,a),o=C(Q),u=M(Q,f),Q.forEach(p),g=C(P),c=S(P,"DIV",{class:!0});var ee=N(c);T(m.$$.fragment,ee),ee.forEach(p),P.forEach(p),$=C(w),d=S(w,"DIV",{class:!0});var oe=N(d);D=M(oe,v),oe.forEach(p),w.forEach(p),this.h()},h(){k(c,"class","flex justify-center"),k(l,"class","flex flex-col gap-4 max-w-[18em]"),k(d,"class","max-w-[18em]"),k(e,"class","form-content flex flex-col justify-between items-center pt-10 pb-1 text-center")},m(J,w){I(J,e,w),h(e,r),h(e,t),h(e,l),h(l,s),h(s,i),h(s,o),h(s,u),h(l,g),h(l,c),j(m,c,null),h(e,$),h(e,d),h(d,D),G=!0},p(J,w){(!G||w[0]&8)&&a!==(a=J[3].expand.owner.firstName+"")&&z(i,a),(!G||w[0]&512)&&f!==(f=J[9]("default.page.respond.steps.greeting.heading")+"")&&z(u,f);const P={};w[0]&512|w[1]&536870912&&(P.$$scope={dirty:w,ctx:J}),m.$set(P),(!G||w[0]&512)&&v!==(v=J[9]("default.page.respond.steps.greeting.question")+"")&&z(D,v)},i(J){G||(_(m.$$.fragment,J),G=!0)},o(J){b(m.$$.fragment,J),G=!1},d(J){J&&p(e),B(m)}}}function il(n){let e=n[9]("default.page.fights.form.request.label")+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.request.label")+"")&&z(r,e)},d(t){t&&p(r)}}}function ul(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[il]},$$scope:{ctx:n}}});const a=[n[47],{class:"min-h-60"}];function i(f){n[24](f)}let o={};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].request!==void 0&&(o.value=n[8].request),t=new xe({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[pe(f[47]),a[1]]):{};!l&&u[0]&256&&(l=!0,c.value=f[8].request,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function cl(n){let e,r,t,l;return e=new me({props:{$$slots:{default:[ul,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new de({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&768|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function pl(n){let e=n[9]("default.page.fights.form.needs.label")+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.needs.label")+"")&&z(r,e)},d(t){t&&p(r)}}}function Ue(n){let e,r,t=X(n[2]),l=[];for(let a=0;a<t.length;a+=1)l[a]=Je(Ce(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){e=V("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"DIV",{class:!0});var i=N(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(p),this.h()},h(){k(e,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(a,i){I(a,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);r=!0},p(a,i){if(i[0]&328964){t=X(a[2]);let o;for(o=0;o<t.length;o+=1){const f=Ce(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Je(f),l[o].c(),_(l[o],1),l[o].m(e,null))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function gl(n){let e=(n[10]==="de"?n[44].nameDE:n[44].nameEN)+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&1028&&e!==(e=(t[10]==="de"?t[44].nameDE:t[44].nameEN)+"")&&z(r,e)},d(t){t&&p(r)}}}function Le(n){let e,r,t,l,s,a,i;return r=new tt({props:{value:n[44].id,class:(n[44].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[gl]},$$scope:{ctx:n}}}),{c(){e=V("button"),q(r.$$.fragment),t=F(),this.h()},l(o){e=S(o,"BUTTON",{type:!0,class:!0});var f=N(e);T(r.$$.fragment,f),t=C(f),f.forEach(p),this.h()},h(){var o;k(e,"type","button"),k(e,"class",l=(n[18](n[44],n[51])||(o=n[8].needs)!=null&&o.includes(n[44].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(o,f){I(o,e,f),j(r,e,null),h(e,t),s=!0,a||(i=Ve(e,"click",function(){ye(n[16](n[44],n[51].category))&&n[16](n[44],n[51].category).apply(this,arguments)}),a=!0)},p(o,f){var g;n=o;const u={};f[0]&4&&(u.value=n[44].id),f[0]&4&&(u.class=(n[44].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),f[0]&1028|f[1]&536870912&&(u.$$scope={dirty:f,ctx:n}),r.$set(u),(!s||f[0]&260&&l!==(l=(n[18](n[44],n[51])||(g=n[8].needs)!=null&&g.includes(n[44].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&k(e,"class",l)},i(o){s||(_(r.$$.fragment,o),s=!0)},o(o){b(r.$$.fragment,o),s=!1},d(o){o&&p(e),B(r),a=!1,i()}}}function Je(n){let e,r,t=X(n[51].content),l=[];for(let a=0;a<t.length;a+=1)l[a]=Le(qe(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=x()},l(a){for(let i=0;i<l.length;i+=1)l[i].l(a);e=x()},m(a,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(a,i);I(a,e,i),r=!0},p(a,i){if(i[0]&328964){t=X(a[51].content);let o;for(o=0;o<t.length;o+=1){const f=qe(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Le(f),l[o].c(),_(l[o],1),l[o].m(e.parentNode,e))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function ml(n){let e,r,t=n[2].length>0&&Ue(n);return{c(){t&&t.c(),e=x()},l(l){t&&t.l(l),e=x()},m(l,s){t&&t.m(l,s),I(l,e,s),r=!0},p(l,s){l[2].length>0?t?(t.p(l,s),s[0]&4&&_(t,1)):(t=Ue(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(y(),b(t,1,1,()=>{t=null}),Z())},i(l){r||(_(t),r=!0)},o(l){b(t),r=!1},d(l){l&&p(e),t&&t.d(l)}}}function dl(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[pl]},$$scope:{ctx:n}}});const a=[{type:"multiple"},n[47],{class:""}];function i(f){n[23](f)}let o={$$slots:{default:[ml]},$$scope:{ctx:n}};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].needs!==void 0&&(o.value=n[8].needs),t=new et({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[a[0],pe(f[47]),a[2]]):{};u[0]&1284|u[1]&536870912&&(c.$$scope={dirty:u,ctx:f}),!l&&u[0]&256&&(l=!0,c.value=f[8].needs,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function _l(n){let e,r,t,l;return e=new me({props:{$$slots:{default:[dl,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new de({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&1796|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function hl(n){let e=n[9]("default.page.fights.form.feelings.label")+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.feelings.label")+"")&&z(r,e)},d(t){t&&p(r)}}}function Ae(n){let e,r,t=X(n[1]),l=[];for(let a=0;a<t.length;a+=1)l[a]=Ke(Te(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){e=V("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"DIV",{class:!0});var i=N(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(p),this.h()},h(){k(e,"class","")},m(a,i){I(a,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);r=!0},p(a,i){if(i[0]&395139){t=X(a[1]);let o;for(o=0;o<t.length;o+=1){const f=Te(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Ke(f),l[o].c(),_(l[o],1),l[o].m(e,null))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function $l(n){let e=(n[10]==="de"?n[41].nameDE:n[41].nameEN)+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&1026&&e!==(e=(t[10]==="de"?t[41].nameDE:t[41].nameEN)+"")&&z(r,e)},d(t){t&&p(r)}}}function Ge(n){let e,r,t,l,s,a;return r=new tt({props:{value:n[41].id,class:(n[41].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[$l]},$$scope:{ctx:n}}}),{c(){e=V("button"),q(r.$$.fragment),this.h()},l(i){e=S(i,"BUTTON",{type:!0,class:!0});var o=N(e);T(r.$$.fragment,o),o.forEach(p),this.h()},h(){var i;k(e,"type","button"),k(e,"class",t=(n[18](n[41],n[51])||(i=n[8].feelings)!=null&&i.includes(n[41].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(i,o){I(i,e,o),j(r,e,null),l=!0,s||(a=Ve(e,"click",function(){ye(n[17](n[41],n[51].category))&&n[17](n[41],n[51].category).apply(this,arguments)}),s=!0)},p(i,o){var u;n=i;const f={};o[0]&2&&(f.value=n[41].id),o[0]&2&&(f.class=(n[41].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),o[0]&1026|o[1]&536870912&&(f.$$scope={dirty:o,ctx:n}),r.$set(f),(!l||o[0]&258&&t!==(t=(n[18](n[41],n[51])||(u=n[8].feelings)!=null&&u.includes(n[41].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&k(e,"class",t)},i(i){l||(_(r.$$.fragment,i),l=!0)},o(i){b(r.$$.fragment,i),l=!1},d(i){i&&p(e),B(r),s=!1,a()}}}function He(n){let e,r,t=X(n[51].content),l=[];for(let a=0;a<t.length;a+=1)l[a]=Ge(Be(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=x()},l(a){for(let i=0;i<l.length;i+=1)l[i].l(a);e=x()},m(a,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(a,i);I(a,e,i),r=!0},p(a,i){if(i[0]&394498){t=X(a[51].content);let o;for(o=0;o<t.length;o+=1){const f=Be(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Ge(f),l[o].c(),_(l[o],1),l[o].m(e.parentNode,e))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function Ke(n){let e,r=(n[48].category==="true"?n[9]("default.page.fights.form.general.goodFeelings"):n[9]("default.page.fights.form.general.badFeelings"))+"",t,l,s,a,i,o,f,u,g,c=X(n[48].content),m=[];for(let d=0;d<c.length;d+=1)m[d]=He(je(n,c,d));const $=d=>b(m[d],1,1,()=>{m[d]=null});return{c(){e=V("div"),t=O(r),l=F(),s=V("div"),o=F(),f=V("div");for(let d=0;d<m.length;d+=1)m[d].c();u=F(),this.h()},l(d){e=S(d,"DIV",{class:!0});var v=N(e);t=M(v,r),l=C(v),s=S(v,"DIV",{class:!0}),N(s).forEach(p),v.forEach(p),o=C(d),f=S(d,"DIV",{class:!0});var D=N(f);for(let G=0;G<m.length;G+=1)m[G].l(D);u=C(D),D.forEach(p),this.h()},h(){k(s,"class",a="border-b border-"+n[7][n[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-1p6uaeu"),k(e,"class",i="text-"+n[7][n[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-1p6uaeu"),k(f,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(d,v){I(d,e,v),h(e,t),h(e,l),h(e,s),I(d,o,v),I(d,f,v);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(f,null);h(f,u),g=!0},p(d,v){if((!g||v[0]&514)&&r!==(r=(d[48].category==="true"?d[9]("default.page.fights.form.general.goodFeelings"):d[9]("default.page.fights.form.general.badFeelings"))+"")&&z(t,r),(!g||v[0]&129&&a!==(a="border-b border-"+d[7][d[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-1p6uaeu"))&&k(s,"class",a),(!g||v[0]&129&&i!==(i="text-"+d[7][d[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-1p6uaeu"))&&k(e,"class",i),v[0]&394498){c=X(d[48].content);let D;for(D=0;D<c.length;D+=1){const G=je(d,c,D);m[D]?(m[D].p(G,v),_(m[D],1)):(m[D]=He(G),m[D].c(),_(m[D],1),m[D].m(f,u))}for(y(),D=c.length;D<m.length;D+=1)$(D);Z()}},i(d){if(!g){for(let v=0;v<c.length;v+=1)_(m[v]);g=!0}},o(d){m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)b(m[v]);g=!1},d(d){d&&(p(e),p(o),p(f)),le(m,d)}}}function vl(n){let e,r,t=n[1].length>0&&Ae(n);return{c(){t&&t.c(),e=x()},l(l){t&&t.l(l),e=x()},m(l,s){t&&t.m(l,s),I(l,e,s),r=!0},p(l,s){l[1].length>0?t?(t.p(l,s),s[0]&2&&_(t,1)):(t=Ae(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(y(),b(t,1,1,()=>{t=null}),Z())},i(l){r||(_(t),r=!0)},o(l){b(t),r=!1},d(l){l&&p(e),t&&t.d(l)}}}function bl(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[hl]},$$scope:{ctx:n}}});const a=[{type:"multiple"},n[47],{class:"flex flex-col gap-4"}];function i(f){n[22](f)}let o={$$slots:{default:[vl]},$$scope:{ctx:n}};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].feelings!==void 0&&(o.value=n[8].feelings),t=new et({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[a[0],pe(f[47]),a[2]]):{};u[0]&1923|u[1]&536870912&&(c.$$scope={dirty:u,ctx:f}),!l&&u[0]&256&&(l=!0,c.value=f[8].feelings,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function wl(n){let e,r,t,l;return e=new me({props:{$$slots:{default:[bl,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new de({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&1923|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function kl(n){let e=n[9]("default.page.fights.form.observation.label")+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.observation.label")+"")&&z(r,e)},d(t){t&&p(r)}}}function El(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[kl]},$$scope:{ctx:n}}});const a=[n[47],{class:"min-h-60"}];function i(f){n[21](f)}let o={};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].observation!==void 0&&(o.value=n[8].observation),t=new xe({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[pe(f[47]),a[1]]):{};!l&&u[0]&256&&(l=!0,c.value=f[8].observation,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function Dl(n){let e,r,t,l;return e=new me({props:{$$slots:{default:[El,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new de({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&768|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function Qe(n){let e,r=(n[10]==="de"?n[44].nameDE:n[44].nameEN)+"",t,l;return{c(){e=V("div"),t=O(r),l=F(),this.h()},l(s){e=S(s,"DIV",{class:!0});var a=N(e);t=M(a,r),l=C(a),a.forEach(p),this.h()},h(){k(e,"class","bg-white/10 shadow-lg px-4 py-2 rounded-md")},m(s,a){I(s,e,a),h(e,t),h(e,l)},p(s,a){a[0]&1032&&r!==(r=(s[10]==="de"?s[44].nameDE:s[44].nameEN)+"")&&z(t,r)},d(s){s&&p(e)}}}function We(n){let e,r=(n[10]==="de"?n[41].nameDE:n[41].nameEN)+"",t,l;return{c(){e=V("div"),t=O(r),l=F(),this.h()},l(s){e=S(s,"DIV",{class:!0});var a=N(e);t=M(a,r),l=C(a),a.forEach(p),this.h()},h(){k(e,"class","bg-white/20 shadow-lg px-4 py-2 rounded-md")},m(s,a){I(s,e,a),h(e,t),h(e,l)},p(s,a){a[0]&1032&&r!==(r=(s[10]==="de"?s[41].nameDE:s[41].nameEN)+"")&&z(t,r)},d(s){s&&p(e)}}}function Il(n){let e=n[9]("default.page.respond.steps.greeting.explanationCta")+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.respond.steps.greeting.explanationCta")+"")&&z(r,e)},d(t){t&&p(r)}}}function Xe(n){let e,r,t,l;const s=[fl,ol,nl,al,sl,rl,ll,tl,el,xt,yt,Zt,Yt,Xt],a=[];function i(o,f){return o[0]===1?0:o[0]===2?1:o[0]===3?2:o[0]===4?3:o[0]===5?4:o[0]===6?5:o[0]===7?6:o[0]===8?7:o[0]===9?8:o[0]===10?9:o[0]===11?10:o[4]?o[5]?12:13:11}return e=i(n),r=a[e]=s[e](n),{c(){r.c(),t=x()},l(o){r.l(o),t=x()},m(o,f){a[e].m(o,f),I(o,t,f),l=!0},p(o,f){let u=e;e=i(o),e===u?a[e].p(o,f):(y(),b(a[u],1,1,()=>{a[u]=null}),Z(),r=a[e],r?r.p(o,f):(r=a[e]=s[e](o),r.c()),_(r,1),r.m(t.parentNode,t))},i(o){l||(_(r),l=!0)},o(o){b(r),l=!1},d(o){o&&p(t),a[e].d(o)}}}function Ye(n){let e,r;return e=new Pt({props:{step:n[0],primaryButtonClass:`bg-${n[7][n[0]-1].slug}-background`,class:"flex-shrink-0"}}),e.$on("toPrev",n[14]),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l[0]&1&&(s.step=t[0]),l[0]&129&&(s.primaryButtonClass=`bg-${t[7][t[0]-1].slug}-background`),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Vl(n){let e=n[9]("default.page.respond.explanationTitle")+"",r;return{c(){r=O(e)},l(t){r=M(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.respond.explanationTitle")+"")&&z(r,e)},d(t){t&&p(r)}}}function Sl(n){let e,r;return e=new jt({props:{class:"text-red-600"}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p:L,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Nl(n){let e,r,t,l,s;return r=new qt({props:{$$slots:{default:[Vl]},$$scope:{ctx:n}}}),l=new Tt({props:{$$slots:{default:[Sl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),t=F(),q(l.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var i=N(e);T(r.$$.fragment,i),t=C(i),T(l.$$.fragment,i),i.forEach(p),this.h()},h(){k(e,"class","flex items-center justify-between")},m(a,i){I(a,e,i),j(r,e,null),h(e,t),j(l,e,null),s=!0},p(a,i){const o={};i[0]&512|i[1]&536870912&&(o.$$scope={dirty:i,ctx:a}),r.$set(o);const f={};i[1]&536870912&&(f.$$scope={dirty:i,ctx:a}),l.$set(f)},i(a){s||(_(r.$$.fragment,a),_(l.$$.fragment,a),s=!0)},o(a){b(r.$$.fragment,a),b(l.$$.fragment,a),s=!1},d(a){a&&p(e),B(r),B(l)}}}function Fl(n){let e,r,t,l=n[9]("default.page.respond.explanation")+"",s,a;return e=new Ct({props:{$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment),r=F(),t=V("p"),s=O(l),this.h()},l(i){T(e.$$.fragment,i),r=C(i),t=S(i,"P",{class:!0});var o=N(t);s=M(o,l),o.forEach(p),this.h()},h(){k(t,"class","mb-20 p-4")},m(i,o){j(e,i,o),I(i,r,o),I(i,t,o),h(t,s),a=!0},p(i,o){const f={};o[0]&512|o[1]&536870912&&(f.$$scope={dirty:o,ctx:i}),e.$set(f),(!a||o[0]&512)&&l!==(l=i[9]("default.page.respond.explanation")+"")&&z(s,l)},i(i){a||(_(e.$$.fragment,i),a=!0)},o(i){b(e.$$.fragment,i),a=!1},d(i){i&&(p(r),p(t)),B(e,i)}}}function Cl(n){let e,r;return e=new Ft({props:{class:"p-4",$$slots:{default:[Fl]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l[0]&512|l[1]&536870912&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function ql(n){let e,r,t,l,s,a,i,o,f,u,g,c,m,$;t=new Bt({});let d=!n[4]&&!n[5]&&ze(n),v=n[3]&&Re(n),D=!n[4]&&!n[5]&&Ye(n);function G(w){n[25](w)}let J={$$slots:{default:[Cl]},$$scope:{ctx:n}};return n[6]!==void 0&&(J.open=n[6]),u=new Nt({props:J}),se.push(()=>ne(u,"open",G)),{c(){e=V("div"),r=V("div"),q(t.$$.fragment),l=F(),s=V("form"),d&&d.c(),a=F(),v&&v.c(),i=F(),D&&D.c(),f=F(),q(u.$$.fragment),this.h()},l(w){e=S(w,"DIV",{class:!0});var P=N(e);r=S(P,"DIV",{class:!0});var Q=N(r);T(t.$$.fragment,Q),l=C(Q),s=S(Q,"FORM",{class:!0});var ee=N(s);d&&d.l(ee),a=C(ee),v&&v.l(ee),i=C(ee),D&&D.l(ee),ee.forEach(p),Q.forEach(p),P.forEach(p),f=C(w),T(u.$$.fragment,w),this.h()},h(){k(s,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),k(r,"class","max-container relative flex h-dvh flex-grow flex-col"),k(e,"class",o=`flex flex-grow flex-col justify-between transition duration-700 bg-${n[7][n[0]-1].slug}-background svelte-1p6uaeu`)},m(w,P){I(w,e,P),h(e,r),j(t,r,null),h(r,l),h(r,s),d&&d.m(s,null),h(s,a),v&&v.m(s,null),h(s,i),D&&D.m(s,null),I(w,f,P),j(u,w,P),c=!0,m||($=[Ve(s,"submit",vt(n[19])),bt(n[13].call(null,s))],m=!0)},p(w,P){!w[4]&&!w[5]?d?(d.p(w,P),P[0]&48&&_(d,1)):(d=ze(w),d.c(),_(d,1),d.m(s,a)):d&&(y(),b(d,1,1,()=>{d=null}),Z()),w[3]?v?(v.p(w,P),P[0]&8&&_(v,1)):(v=Re(w),v.c(),_(v,1),v.m(s,i)):v&&(y(),b(v,1,1,()=>{v=null}),Z()),!w[4]&&!w[5]?D?(D.p(w,P),P[0]&48&&_(D,1)):(D=Ye(w),D.c(),_(D,1),D.m(s,null)):D&&(y(),b(D,1,1,()=>{D=null}),Z()),(!c||P[0]&129&&o!==(o=`flex flex-grow flex-col justify-between transition duration-700 bg-${w[7][w[0]-1].slug}-background svelte-1p6uaeu`))&&k(e,"class",o);const Q={};P[0]&512|P[1]&536870912&&(Q.$$scope={dirty:P,ctx:w}),!g&&P[0]&64&&(g=!0,Q.open=w[6],ae(()=>g=!1)),u.$set(Q)},i(w){c||(_(t.$$.fragment,w),_(d),_(v),_(D),_(u.$$.fragment,w),c=!0)},o(w){b(t.$$.fragment,w),b(d),b(v),b(D),b(u.$$.fragment,w),c=!1},d(w){w&&(p(e),p(f)),B(t),d&&d.d(),v&&v.d(),D&&D.d(),B(u,w),m=!1,wt($)}}}function Tl(n,e,r){let t,l,s,a;fe(n,St,E=>r(27,t=E)),fe(n,H,E=>r(9,s=E)),fe(n,Vt,E=>r(10,a=E));const i=Ut(W(re));let o=[],f=[],u;const g=[W(ke),W(Ee),W(De),W(Ie),W(Jt),W(At),W(Gt),W(Ht),W(Kt),W(Qt),W(Wt),W(re)];let c=1,m=!1,$=!1,d=!1;const v=async()=>{try{let E=l;E.fight=u.id,console.log("submit form",E);const U=await ie.collection("responses").create(E);r(5,$=!0),r(4,m=!0)}catch(E){console.log("error handling submit",E),r(5,$=!1),r(4,m=!0)}},D=async E=>{const R=Object.keys(W([ke,Ee,De,Ie,re][E-1]).constraints);let A=!0;for(const te of R)await oe(te,{update:!1})&&(A=!1);return!!A},G=async()=>{const E=await lt(l,re);return E.valid?!0:(P.set(E.errors),!1)},J=Rt(i,{resetForm:!1,validators:Ot(re),async onSubmit({validators:E,cancel:U}){console.log("onSubmit"),U(),await G()&&(c==g.length?v():r(0,c++,c))},async onUpdated({form:E}){console.log("onUpdated"),E.valid&&r(0,c=1)}}),{form:w,errors:P,message:Q,enhance:ee,validate:oe,validateForm:lt,options:rt,updateForm:jl}=J;fe(n,w,E=>r(8,l=E)),w.subscribe(E=>{console.log("form was updated",E)});let he=[{slug:"greeting",name:K(H)("default.page.fights.form.general.steps.info"),icon:$e,invertedTextColor:!1,hidden:!0},{slug:"disclaimer",name:K(H)("default.page.fights.form.general.steps.info"),icon:$e,invertedTextColor:!1,hidden:!0},{slug:"breathe",name:K(H)("default.page.fights.form.general.steps.info"),icon:$e,invertedTextColor:!1,hidden:!0},{slug:"observation",name:K(H)("default.page.fights.form.general.steps.observation"),icon:ve,invertedTextColor:!0,hidden:!0},{slug:"feelings",name:K(H)("default.page.fights.form.general.steps.feelings"),icon:Se,invertedTextColor:!1,hidden:!0},{slug:"needs",name:K(H)("default.page.fights.form.general.steps.needs"),icon:Ne,invertedTextColor:!1,hidden:!0},{slug:"request",name:K(H)("default.page.fights.form.general.steps.request"),icon:Fe,invertedTextColor:!1,hidden:!0},{slug:"pause",name:K(H)("default.page.fights.form.general.steps.observation"),icon:ve,invertedTextColor:!0,hidden:!0},{slug:"observation",name:K(H)("default.page.fights.form.general.steps.observation"),icon:ve,invertedTextColor:!0},{slug:"feelings",name:K(H)("default.page.fights.form.general.steps.feelings"),icon:Se,invertedTextColor:!1},{slug:"needs",name:K(H)("default.page.fights.form.general.steps.needs"),icon:Ne,invertedTextColor:!1},{slug:"request",name:K(H)("default.page.fights.form.general.steps.request"),icon:Fe,invertedTextColor:!1}];H.subscribe(E=>{const U=he.map(R=>{const A=E(`default.page.fights.form.general.steps.${R.slug}`);return R.name=A,R});r(7,he=[...U])});const st=()=>{console.log("decreaseStep"),c>1&&(console.log("step",c),r(0,c=c-1),console.log("step",c))},at=async()=>{const E=await ie.collection("feelings").getFullList({sort:"category"}),U=be(E);let R=we(U,"positive");R.map(A=>(A.content=we(A.content,"category"),A.content.map(te=>te.visible=!1),A)),console.log("res",R),r(1,o=R)},nt=async()=>{const E=await ie.collection("needs").getFullList({sort:"category"}),U=be(E);let R=we(U,"category");R.map(A=>A.visible=!1),console.log("res",R),r(2,f=R)},ot=async()=>{const E=await ie.collection("fights").getOne(t.params.id,{expand:"owner, feelings, needs"});r(3,u=be(E)),console.log("fight",u)},ft=async E=>{console.log("changeStep");const U=E.detail.step,R=await D(U);console.log("targetStepIsValid",R),R&&r(0,c=U)},it=(E,U)=>{if(E.nameEN!==U)return;const R=f.find(A=>A.category===U);R&&(R.visible=!R.visible),r(2,f=[...f])},ut=(E,U)=>{if(E.nameEN!==U)return;const R=o[0].content.find(te=>te.category===U),A=o[1].content.find(te=>te.category===U);R&&(R.visible=!R.visible),A&&(A.visible=!A.visible),r(1,o=[...o])},ct=(E,U)=>{const R=E.nameEN,A=U.category;return!!(R===A||U.visible)};kt(async()=>{await at(),await nt(),await ot()}),c=4;function pt(E){Et.call(this,n,E)}const gt=()=>r(6,d=!0);function mt(E){n.$$.not_equal(l.observation,E)&&(l.observation=E,w.set(l))}function dt(E){n.$$.not_equal(l.feelings,E)&&(l.feelings=E,w.set(l))}function _t(E){n.$$.not_equal(l.needs,E)&&(l.needs=E,w.set(l))}function ht(E){n.$$.not_equal(l.request,E)&&(l.request=E,w.set(l))}function $t(E){d=E,r(6,d)}return n.$$.update=()=>{n.$$.dirty[0]&1&&(rt.validators=g[c-1])},[c,o,f,u,m,$,d,he,l,s,a,J,w,ee,st,ft,it,ut,ct,pt,gt,mt,dt,_t,ht,$t]}class yl extends Dt{constructor(e){super(),It(this,e,Tl,ql,Ze,{},null,[-1,-1])}}export{yl as component};
