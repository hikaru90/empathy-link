import{s as me,l as ae,m as Oe,o as Me,b as N,f as p,p as b,q as Ae,i as C,h as w,n as M,r as Re,u as Rt,e as D,a as F,c as I,g as j,k as oe,_ as Lt,t as J,d as z,j as O,I as G,H as je,Y as Ht,x as pe,y as dt,K as ie,$ as Pt,J as Ut,L as ge,G as Zt,O as te,z as Gt,M as fe,T as pt}from"../chunks/scheduler.BGpOBVyA.js";import{S as ve,i as be,c as V,a as S,m as T,g as K,b as v,e as Q,t as h,d as y,f as de}from"../chunks/index.wJhSdTM5.js";import{b as Kt,s as Qt,l as Wt,h as Ie,i as Ne,e as X}from"../chunks/helpers.C2F2lmQ3.js";import{g as _e,t as Z,l as mt,u as Yt,f as Xt,a as we}from"../chunks/page.BxjNqAN0.js";import{A as xt}from"../chunks/AppTopMenu.bu7JEGYI.js";import{A as el}from"../chunks/AppBottomMenu.BG1J1hbK.js";import{p as tl}from"../chunks/stores.C46p-EcX.js";import"../chunks/index.DfSKg4Ih.js";import{D as ll,d as rl,a as nl,b as sl,c as ol,C as al,e as il}from"../chunks/index.BEk7VaRI.js";import"../chunks/entry.B5Mv6Uxa.js";import{e as Y,z as fl,F as ke,C as Ce,a as Ee,b as De}from"../chunks/zod.DVU-mH4r.js";import{A as _t,C as ul,a as cl,F as gl,T as ht,b as $t,c as vt}from"../chunks/textarea.BWl5-9Zr.js";import{z as x,s as dl}from"../chunks/memoize.DZzCiDwd.js";import{a as qe}from"../chunks/button.A7J3RAYz.js";import{C as pl}from"../chunks/CaretLeft.BzQWyqnQ.js";import{I as Ve}from"../chunks/icon-folder.CBGieXVr.js";import{I as Se,a as Le,b as He,c as Pe}from"../chunks/icon-steps.dGSELuxl.js";import{p as $e}from"../chunks/pocketbase.Ce4YzWbP.js";import{B as ml}from"../chunks/button.C095cpuc.js";function _l(o){let e,l,t=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],r={};for(let s=0;s<t.length;s+=1)r=ae(r,t[s]);return{c(){e=Oe("svg"),l=Oe("path"),this.h()},l(s){e=Me(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=N(e);l=Me(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),N(l).forEach(p),n.forEach(p),this.h()},h(){b(l,"fill-rule","evenodd"),b(l,"clip-rule","evenodd"),b(l,"d","M0.877075 7.49972C0.877075 3.84204 3.84222 0.876892 7.49991 0.876892C11.1576 0.876892 14.1227 3.84204 14.1227 7.49972C14.1227 11.1574 11.1576 14.1226 7.49991 14.1226C3.84222 14.1226 0.877075 11.1574 0.877075 7.49972ZM7.49991 1.82689C4.36689 1.82689 1.82708 4.36671 1.82708 7.49972C1.82708 10.6327 4.36689 13.1726 7.49991 13.1726C10.6329 13.1726 13.1727 10.6327 13.1727 7.49972C13.1727 4.36671 10.6329 1.82689 7.49991 1.82689ZM8.24993 10.5C8.24993 10.9142 7.91414 11.25 7.49993 11.25C7.08571 11.25 6.74993 10.9142 6.74993 10.5C6.74993 10.0858 7.08571 9.75 7.49993 9.75C7.91414 9.75 8.24993 10.0858 8.24993 10.5ZM6.05003 6.25C6.05003 5.57211 6.63511 4.925 7.50003 4.925C8.36496 4.925 8.95003 5.57211 8.95003 6.25C8.95003 6.74118 8.68002 6.99212 8.21447 7.27494C8.16251 7.30651 8.10258 7.34131 8.03847 7.37854L8.03841 7.37858C7.85521 7.48497 7.63788 7.61119 7.47449 7.73849C7.23214 7.92732 6.95003 8.23198 6.95003 8.7C6.95004 9.00376 7.19628 9.25 7.50004 9.25C7.8024 9.25 8.04778 9.00601 8.05002 8.70417L8.05056 8.7033C8.05924 8.6896 8.08493 8.65735 8.15058 8.6062C8.25207 8.52712 8.36508 8.46163 8.51567 8.37436L8.51571 8.37433C8.59422 8.32883 8.68296 8.27741 8.78559 8.21506C9.32004 7.89038 10.05 7.35382 10.05 6.25C10.05 4.92789 8.93511 3.825 7.50003 3.825C6.06496 3.825 4.95003 4.92789 4.95003 6.25C4.95003 6.55376 5.19628 6.8 5.50003 6.8C5.80379 6.8 6.05003 6.55376 6.05003 6.25Z"),b(l,"fill",o[0]),Ae(e,r)},m(s,n){C(s,e,n),w(e,l)},p(s,[n]){n&1&&b(l,"fill",s[0]),Ae(e,r=_e(t,[n&2&&{width:s[1]},n&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n&4&&s[2]]))},i:M,o:M,d(s){s&&p(e)}}}function hl(o,e,l){const t=["color","size"];let r=Re(e,t),{color:s="currentColor"}=e,{size:n=15}=e;return o.$$set=a=>{e=ae(ae({},e),Rt(a)),l(2,r=Re(e,t)),"color"in a&&l(0,s=a.color),"size"in a&&l(1,n=a.size)},[s,n,r]}class $l extends ve{constructor(e){super(),be(this,e,hl,_l,me,{color:0,size:1})}}function vl(o){let e,l;return e=new pl({props:{class:"h-4 w-4 rounded-full"}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function bl(o){let e,l;return e=new qe({props:{type:"submit",decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[Dl]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const s={};r&265&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function wl(o){let e,l;return e=new qe({props:{decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[Il]},$$scope:{ctx:o}}}),e.$on("click",o[5]),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const s={};r&264&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function kl(o){let e=o[3]("default.page.fights.form.general.next")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.next")+"")&&O(l,e)},d(t){t&&p(l)}}}function Cl(o){let e=o[3]("default.page.fights.form.general.knowledge")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.knowledge")+"")&&O(l,e)},d(t){t&&p(l)}}}function El(o){let e=o[3]("default.page.fights.form.general.yes")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.yes")+"")&&O(l,e)},d(t){t&&p(l)}}}function Dl(o){let e,l,t;function r(a,i){return a[0]===1?El:a[0]===2?Cl:kl}let s=r(o),n=s(o);return l=new _t({props:{class:"h-3 w-3"}}),{c(){n.c(),e=F(),V(l.$$.fragment)},l(a){n.l(a),e=j(a),S(l.$$.fragment,a)},m(a,i){n.m(a,i),C(a,e,i),T(l,a,i),t=!0},p(a,i){s===(s=r(a))&&n?n.p(a,i):(n.d(1),n=s(a),n&&(n.c(),n.m(e.parentNode,e)))},i(a){t||(h(l.$$.fragment,a),t=!0)},o(a){v(l.$$.fragment,a),t=!1},d(a){a&&p(e),n.d(a),y(l,a)}}}function Il(o){let e=o[3]("default.page.fights.form.general.checkJudgement")+"",l,t,r,s;return r=new _t({props:{class:"h-3 w-3"}}),{c(){l=J(e),t=F(),V(r.$$.fragment)},l(n){l=z(n,e),t=j(n),S(r.$$.fragment,n)},m(n,a){C(n,l,a),C(n,t,a),T(r,n,a),s=!0},p(n,a){(!s||a&8)&&e!==(e=n[3]("default.page.fights.form.general.checkJudgement")+"")&&O(l,e)},i(n){s||(h(r.$$.fragment,n),s=!0)},o(n){v(r.$$.fragment,n),s=!1},d(n){n&&(p(l),p(t)),y(r,n)}}}function Nl(o){let e,l,t,r,s,n,a,i,f;t=new qe({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[vl]},$$scope:{ctx:o}}}),t.$on("click",o[4]);const u=[wl,bl],d=[];function c(g,m){return g[1]?0:1}return n=c(o),a=d[n]=u[n](o),{c(){e=D("div"),l=D("div"),V(t.$$.fragment),s=F(),a.c(),this.h()},l(g){e=I(g,"DIV",{class:!0});var m=N(e);l=I(m,"DIV",{class:!0});var _=N(l);S(t.$$.fragment,_),_.forEach(p),s=j(m),a.l(m),m.forEach(p),this.h()},h(){b(l,"class",r=(o[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"),b(e,"class",i="flex justify-between "+o[2])},m(g,m){C(g,e,m),w(e,l),T(t,l,null),w(e,s),d[n].m(e,null),f=!0},p(g,[m]){const _={};m&256&&(_.$$scope={dirty:m,ctx:g}),t.$set(_),(!f||m&1&&r!==(r=(g[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"))&&b(l,"class",r);let $=n;n=c(g),n===$?d[n].p(g,m):(K(),v(d[$],1,1,()=>{d[$]=null}),Q(),a=d[n],a?a.p(g,m):(a=d[n]=u[n](g),a.c()),h(a,1),a.m(e,null)),(!f||m&4&&i!==(i="flex justify-between "+g[2]))&&b(e,"class",i)},i(g){f||(h(t.$$.fragment,g),h(a),f=!0)},o(g){v(t.$$.fragment,g),v(a),f=!1},d(g){g&&p(e),y(t),d[n].d()}}}function Vl(o,e,l){let t;oe(o,Z,d=>l(3,t=d));const r=Lt();let{step:s}=e,{checkForJudgement:n}=e,{class:a=void 0}=e,{primaryButtonClass:i=void 0}=e;const f=()=>{console.log("toPrev"),r("toPrev")},u=()=>{r("validateObservation")};return o.$$set=d=>{"step"in d&&l(0,s=d.step),"checkForJudgement"in d&&l(1,n=d.checkForJudgement),"class"in d&&l(2,a=d.class),"primaryButtonClass"in d&&l(6,i=d.primaryButtonClass)},[s,n,a,t,f,u,i]}class Sl extends ve{constructor(e){super(),be(this,e,Vl,Nl,me,{step:0,checkForJudgement:1,class:2,primaryButtonClass:6})}}const Te=x.object({}),ye=x.object({}),Be=x.object({}),Fe=x.object({}),Tl=x.object({}),yl=x.object({}),Bl=x.object({}),Fl=x.object({}),jl=Te.extend({observation:x.string().min(10,{message:G(Z)("default.page.fights.form.observation.tooShortError")})}),ql=ye.extend({feelings:x.array(x.string()).min(1,{message:G(Z)("default.page.fights.form.feelings.tooFewError")})}),Jl=Be.extend({needs:x.array(x.string()).min(1,{message:G(Z)("default.page.fights.form.needs.tooFewError")})}),ce=Fe.extend({request:x.string().optional()});function zl(o){let e;return{c(){e=D("div"),this.h()},l(l){e=I(l,"DIV",{id:!0,class:!0}),N(e).forEach(p),this.h()},h(){b(e,"id","speechBubble"),b(e,"class","w-full")},m(l,t){C(l,e,t),o[11](e)},p:M,d(l){l&&p(e),o[11](null)}}}function Ol(o){let e,l="...";return{c(){e=D("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),je(e)!=="svelte-534rav"&&(e.textContent=l),this.h()},h(){b(e,"id","speechBubble"),b(e,"class","w-full")},m(t,r){C(t,e,r)},p:M,d(t){t&&p(e)}}}function Ue(o){let e,l,t,r,s,n,a,i,f,u;return r=new ul({props:{class:"size-2.5"}}),a=new cl({props:{class:"size-2.5"}}),{c(){e=D("div"),l=D("div"),t=D("button"),V(r.$$.fragment),s=F(),n=D("button"),V(a.$$.fragment),this.h()},l(d){e=I(d,"DIV",{class:!0});var c=N(e);l=I(c,"DIV",{class:!0});var g=N(l);t=I(g,"BUTTON",{class:!0});var m=N(t);S(r.$$.fragment,m),m.forEach(p),s=j(g),n=I(g,"BUTTON",{class:!0});var _=N(n);S(a.$$.fragment,_),_.forEach(p),g.forEach(p),c.forEach(p),this.h()},h(){b(t,"class","chevron svelte-12yl6i5"),b(n,"class","chevron svelte-12yl6i5"),b(l,"class","-mr-1 flex flex-col items-center gap-0.5"),b(e,"class","flex justify-end text-2xs")},m(d,c){C(d,e,c),w(e,l),w(l,t),T(r,t,null),w(l,s),w(l,n),T(a,n,null),i=!0,f||(u=[pe(t,"click",o[12]),pe(n,"click",o[13])],f=!0)},p:M,i(d){i||(h(r.$$.fragment,d),h(a.$$.fragment,d),i=!0)},o(d){v(r.$$.fragment,d),v(a.$$.fragment,d),i=!1},d(d){d&&p(e),y(r),y(a),f=!1,dt(u)}}}function Ml(o){let e,l,t=`<div style="background-image: url(&#39;${Kt}&#39;); background-size: 300% 100%" class="animate-bg relative z-10 flex h-full w-[60px] items-center justify-center rounded-b rounded-t-[50px] shadow-lg transition duration-700"><div data-name="face" class="lookaround face-3 flex flex-col gap-1 svelte-12yl6i5"><div data-name="eyes" class="eyes flex items-center justify-center gap-2"><div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div> <div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div></div> <div data-name="mouth" class="mouth flex items-center justify-center svelte-12yl6i5"><div class="h-1.5 w-2.5 rounded-b-full bg-black"></div></div></div></div>`,r,s,n,a,i,f,u;function d(_,$){return _[2]?Ol:zl}let c=d(o),g=c(o),m=o[1].length>1&&Ue(o);return{c(){e=D("div"),l=D("div"),l.innerHTML=t,r=F(),s=D("div"),n=D("div"),a=F(),i=D("div"),g.c(),f=F(),m&&m.c(),this.h()},l(_){e=I(_,"DIV",{class:!0});var $=N(e);l=I($,"DIV",{class:!0,"data-svelte-h":!0}),je(l)!=="svelte-ido9h0"&&(l.innerHTML=t),r=j($),s=I($,"DIV",{class:!0});var E=N(s);n=I(E,"DIV",{class:!0}),N(n).forEach(p),a=j(E),i=I(E,"DIV",{class:!0});var H=N(i);g.l(H),f=j(H),m&&m.l(H),H.forEach(p),E.forEach(p),$.forEach(p),this.h()},h(){b(l,"class","relative left-0 right-0 flex h-12 flex-shrink-0 justify-center gap-1"),b(n,"class","triangle size-3 flex-shrink-0 bg-muted svelte-12yl6i5"),b(i,"class","rounded-tl-0 relative flex flex-grow rounded-b rounded-tr bg-muted px-2 pb-2 pt-1 text-sm leading-tight gap-2"),b(s,"class","flex flex-grow"),b(e,"class","mt-4 flex items-start gap-2")},m(_,$){C(_,e,$),w(e,l),w(e,r),w(e,s),w(s,n),w(s,a),w(s,i),g.m(i,null),w(i,f),m&&m.m(i,null),u=!0},p(_,[$]){c===(c=d(_))&&g?g.p(_,$):(g.d(1),g=c(_),g&&(g.c(),g.m(i,f))),_[1].length>1?m?(m.p(_,$),$&2&&h(m,1)):(m=Ue(_),m.c(),h(m,1),m.m(i,null)):m&&(K(),v(m,1,1,()=>{m=null}),Q())},i(_){u||(h(m),u=!0)},o(_){v(m),u=!1},d(_){_&&p(e),g.d(),m&&m.d()}}}function Al(o,e,l){let t,r;oe(o,mt,q=>l(15,r=q));let{step:s}=e,{stepName:n}=e,{formSuccess:a}=e,{speechBubbleContentArray:i}=e,f=0,u=!1;const d=(q,U,le)=>{try{return console.log("speechBubbleContentArray",le),U===13&&!q?le.find(W=>W.step===13).errorContent:le.find(W=>W.step===U).content}catch(W){return console.error("error in getSpeechBubbleContent",W),[]}};let c,g;const m=(q,U,le)=>{try{let W=function(){ue<U.length&&(q.innerHTML+=U.charAt(ue),ue++,g=setTimeout(W,le))};console.log("typeText");let ue=0;q.innerHTML="";const ee=document.createElement("div");ee.style.visibility="hidden",ee.style.position="absolute",ee.style.width=`${q.clientWidth}px`,ee.style.color="red",ee.style.whiteSpace="pre-wrap",ee.innerText=U,q.appendChild(ee);const re=ee.clientHeight;q.style.height=`${re}px`,q.removeChild(ee),g&&clearTimeout(g),W()}catch(W){console.error("error typing text",W)}},_=(q="Hi")=>{l(1,t=[t[0],q]),l(10,f=1)},$=async q=>{l(2,u=!0);try{const le=await(await fetch("/api/ai/checkForJudgement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:q,lang:r})})).json();l(2,u=!1);const W=le.result;_(W)}catch(U){console.error("error in getting judgement",U)}},E=()=>{console.log("decreaseIndex"),f>0&&l(10,f--,f)},H=()=>{console.log("increaseIndex"),t.length>1&&f===0&&l(10,f++,f)};Ht(()=>{g&&clearTimeout(g)});function ne(q){ie[q?"unshift":"push"](()=>{c=q,l(0,c)})}const B=()=>E(),L=()=>H();return o.$$set=q=>{"step"in q&&l(5,s=q.step),"stepName"in q&&l(6,n=q.stepName),"formSuccess"in q&&l(7,a=q.formSuccess),"speechBubbleContentArray"in q&&l(8,i=q.speechBubbleContentArray)},o.$$.update=()=>{o.$$.dirty&416&&l(1,t=d(a,s,i)),o.$$.dirty&32&&l(10,f=0),o.$$.dirty&1027&&c&&(console.log("inside if speechBubbleElement"),m(c,t[f],30))},[c,t,u,E,H,s,n,a,i,$,f,ne,B,L]}class Rl extends ve{constructor(e){super(),be(this,e,Al,Ml,me,{step:5,stepName:6,formSuccess:7,speechBubbleContentArray:8,checkJudgement:9})}get checkJudgement(){return this.$$.ctx[9]}}function Ze(o,e,l){const t=o.slice();return t[62]=e[l],t}function Ge(o,e,l){const t=o.slice();return t[55]=e[l],t}function Ke(o,e,l){const t=o.slice();return t[59]=e[l],t}function Qe(o,e,l){const t=o.slice();return t[62]=e[l],t}function We(o,e,l){const t=o.slice();return t[52]=e[l],t}function Ye(o,e,l){const t=o.slice();return t[55]=e[l],t}function Xe(o,e,l){const t=o.slice();return t[52]=e[l],t}function xe(o){let e,l,t,r,s=o[0]>8&&et(o);function n(i){o[26](i)}let a={speechBubbleContentArray:o[5],step:o[0],stepName:o[10][o[0]-1].slug,formSuccess:o[7]};return o[4]!==void 0&&(a.checkJudgement=o[4]),l=new Rl({props:a}),ie.push(()=>de(l,"checkJudgement",n)),{c(){s&&s.c(),e=F(),V(l.$$.fragment)},l(i){s&&s.l(i),e=j(i),S(l.$$.fragment,i)},m(i,f){s&&s.m(i,f),C(i,e,f),T(l,i,f),r=!0},p(i,f){i[0]>8?s?(s.p(i,f),f[0]&1&&h(s,1)):(s=et(i),s.c(),h(s,1),s.m(e.parentNode,e)):s&&(K(),v(s,1,1,()=>{s=null}),Q());const u={};f[0]&32&&(u.speechBubbleContentArray=i[5]),f[0]&1&&(u.step=i[0]),f[0]&1025&&(u.stepName=i[10][i[0]-1].slug),f[0]&128&&(u.formSuccess=i[7]),!t&&f[0]&16&&(t=!0,u.checkJudgement=i[4],ge(()=>t=!1)),l.$set(u)},i(i){r||(h(s),h(l.$$.fragment,i),r=!0)},o(i){v(s),v(l.$$.fragment,i),r=!1},d(i){i&&p(e),s&&s.d(i),y(l,i)}}}function et(o){let e,l;return e=new gl({props:{step:o[0],steps:o[10],stepBackground:o[10][o[0]-1].slug}}),e.$on("changeStep",o[21]),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const s={};r[0]&1&&(s.step=t[0]),r[0]&1024&&(s.steps=t[10]),r[0]&1025&&(s.stepBackground=t[10][t[0]-1].slug),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function tt(o){let e=o[0],l,t,r=ct(o);return{c(){r.c(),l=te()},l(s){r.l(s),l=te()},m(s,n){r.m(s,n),C(s,l,n),t=!0},p(s,n){n[0]&1&&me(e,e=s[0])?(K(),v(r,1,1,M),Q(),r=ct(s),r.c(),h(r,1),r.m(l.parentNode,l)):r.p(s,n)},i(s){t||(h(r),t=!0)},o(s){v(r),t=!1},d(s){s&&p(l),r.d(s)}}}function Ll(o){let e=o[12]("default.page.respond.steps.error.heading")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&4096&&e!==(e=t[12]("default.page.respond.steps.error.heading")+"")&&O(l,e)},i:M,o:M,d(t){t&&p(l)}}}function Hl(o){let e,l,t=o[12]("default.page.respond.steps.success.heading")+"",r;return{c(){e=D("div"),l=D("div"),r=J(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=N(e);l=I(n,"DIV",{class:!0});var a=N(l);r=z(a,t),a.forEach(p),n.forEach(p),this.h()},h(){b(l,"class","my-6"),b(e,"class","form-content")},m(s,n){C(s,e,n),w(e,l),w(l,r)},p(s,n){n[0]&4096&&t!==(t=s[12]("default.page.respond.steps.success.heading")+"")&&O(r,t)},i:M,o:M,d(s){s&&p(e)}}}function Pl(o){let e,l,t;return l=new ke({props:{form:o[17],name:"request",$$slots:{default:[nr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=N(e);S(l.$$.fragment,s),s.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,s){C(r,e,s),T(l,e,null),t=!0},p(r,s){const n={};s[0]&12288|s[2]&512&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Ul(o){let e,l,t;return l=new ke({props:{form:o[17],name:"needs",$$slots:{default:[fr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=N(e);S(l.$$.fragment,s),s.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,s){C(r,e,s),T(l,e,null),t=!0},p(r,s){const n={};s[0]&28676|s[2]&512&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Zl(o){let e,l,t;return l=new ke({props:{form:o[17],name:"feelings",$$slots:{default:[pr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=N(e);S(l.$$.fragment,s),s.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,s){C(r,e,s),T(l,e,null),t=!0},p(r,s){const n={};s[0]&29699|s[2]&512&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Gl(o){let e,l,t;return l=new ke({props:{form:o[17],name:"observation",$$slots:{default:[hr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=N(e);S(l.$$.fragment,s),s.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,s){C(r,e,s),T(l,e,null),t=!0},p(r,s){const n={};s[0]&12544|s[2]&512&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Kl(o){let e,l='<div class="flex max-w-[18em] flex-col gap-4 pb-6 text-center"></div>';return{c(){e=D("div"),e.innerHTML=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),je(e)!=="svelte-ey3syw"&&(e.innerHTML=l),this.h()},h(){b(e,"class","form-content flex items-center justify-center")},m(t,r){C(t,e,r)},p:M,i:M,o:M,d(t){t&&p(e)}}}function Ql(o){let e,l,t=o[3].expand.owner.firstName+"",r,s,n=o[12]("default.page.respond.steps.ownerRequest.heading")+"",a,i,f,u=o[3].request+"",d;return{c(){e=D("div"),l=D("div"),r=J(t),s=F(),a=J(n),i=F(),f=D("div"),d=J(u),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=N(e);l=I(g,"DIV",{class:!0});var m=N(l);r=z(m,t),s=j(m),a=z(m,n),m.forEach(p),i=j(g),f=I(g,"DIV",{class:!0});var _=N(f);d=z(_,u),_.forEach(p),g.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(f,"class","rounded bg-white/10 px-4 py-3 pb-6 shadow-xl"),b(e,"class","form-content")},m(c,g){C(c,e,g),w(e,l),w(l,r),w(l,s),w(l,a),w(e,i),w(e,f),w(f,d)},p(c,g){g[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&O(r,t),g[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerRequest.heading")+"")&&O(a,n),g[0]&8&&u!==(u=c[3].request+"")&&O(d,u)},i:M,o:M,d(c){c&&p(e)}}}function Wl(o){let e,l,t=o[3].expand.owner.firstName+"",r,s,n=o[12]("default.page.respond.steps.ownerNeeds.heading")+"",a,i,f,u=X(o[3].expand.needs),d=[];for(let c=0;c<u.length;c+=1)d[c]=ft(Ye(o,u,c));return{c(){e=D("div"),l=D("div"),r=J(t),s=F(),a=J(n),i=F(),f=D("div");for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=I(c,"DIV",{class:!0});var g=N(e);l=I(g,"DIV",{class:!0});var m=N(l);r=z(m,t),s=j(m),a=z(m,n),m.forEach(p),i=j(g),f=I(g,"DIV",{class:!0});var _=N(f);for(let $=0;$<d.length;$+=1)d[$].l(_);_.forEach(p),g.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(f,"class","flex flex-wrap items-center gap-2 pb-6"),b(e,"class","form-content")},m(c,g){C(c,e,g),w(e,l),w(l,r),w(l,s),w(l,a),w(e,i),w(e,f);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(f,null)},p(c,g){if(g[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&O(r,t),g[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerNeeds.heading")+"")&&O(a,n),g[0]&16392){u=X(c[3].expand.needs);let m;for(m=0;m<u.length;m+=1){const _=Ye(c,u,m);d[m]?d[m].p(_,g):(d[m]=ft(_),d[m].c(),d[m].m(f,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=u.length}},i:M,o:M,d(c){c&&p(e),fe(d,c)}}}function Yl(o){let e,l,t=o[3].expand.owner.firstName+"",r,s,n=o[12]("default.page.respond.steps.ownerFeelings.heading")+"",a,i,f,u=X(o[3].expand.feelings),d=[];for(let c=0;c<u.length;c+=1)d[c]=ut(Xe(o,u,c));return{c(){e=D("div"),l=D("div"),r=J(t),s=F(),a=J(n),i=F(),f=D("div");for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=I(c,"DIV",{class:!0});var g=N(e);l=I(g,"DIV",{class:!0});var m=N(l);r=z(m,t),s=j(m),a=z(m,n),m.forEach(p),i=j(g),f=I(g,"DIV",{class:!0});var _=N(f);for(let $=0;$<d.length;$+=1)d[$].l(_);_.forEach(p),g.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(f,"class","flex flex-wrap items-center gap-2 pb-6"),b(e,"class","form-content")},m(c,g){C(c,e,g),w(e,l),w(l,r),w(l,s),w(l,a),w(e,i),w(e,f);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(f,null)},p(c,g){if(g[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&O(r,t),g[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerFeelings.heading")+"")&&O(a,n),g[0]&16392){u=X(c[3].expand.feelings);let m;for(m=0;m<u.length;m+=1){const _=Xe(c,u,m);d[m]?d[m].p(_,g):(d[m]=ut(_),d[m].c(),d[m].m(f,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=u.length}},i:M,o:M,d(c){c&&p(e),fe(d,c)}}}function Xl(o){let e,l,t=o[3].expand.owner.firstName+"",r,s,n=o[12]("default.page.respond.steps.ownerObservation.heading")+"",a,i,f,u=o[3].observation+"",d;return{c(){e=D("div"),l=D("div"),r=J(t),s=F(),a=J(n),i=F(),f=D("div"),d=J(u),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=N(e);l=I(g,"DIV",{class:!0});var m=N(l);r=z(m,t),s=j(m),a=z(m,n),m.forEach(p),i=j(g),f=I(g,"DIV",{class:!0});var _=N(f);d=z(_,u),_.forEach(p),g.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(f,"class","rounded bg-white/10 px-4 py-3 shadow-xl"),b(e,"class","form-content")},m(c,g){C(c,e,g),w(e,l),w(l,r),w(l,s),w(l,a),w(e,i),w(e,f),w(f,d)},p(c,g){g[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&O(r,t),g[0]&4096&&n!==(n=c[12]("default.page.respond.steps.ownerObservation.heading")+"")&&O(a,n),g[0]&8&&u!==(u=c[3].observation+"")&&O(d,u)},i:M,o:M,d(c){c&&p(e)}}}function xl(o){let e,l,t,r=o[12]("default.page.respond.steps.breathe.heading")+"",s,n,a,i,f;return{c(){e=D("div"),l=D("div"),t=D("span"),s=J(r),n=F(),a=D("div"),i=F(),f=D("div"),this.h()},l(u){e=I(u,"DIV",{class:!0});var d=N(e);l=I(d,"DIV",{class:!0});var c=N(l);t=I(c,"SPAN",{class:!0});var g=N(t);s=z(g,r),g.forEach(p),n=j(c),a=I(c,"DIV",{class:!0}),N(a).forEach(p),i=j(c),f=I(c,"DIV",{class:!0}),N(f).forEach(p),c.forEach(p),d.forEach(p),this.h()},h(){b(t,"class","relative z-10 -mb-2"),b(a,"class","breathe svelte-18kg1ym"),b(f,"class","breathe2 svelte-18kg1ym"),b(l,"class","relative my-40 flex flex-col text-center"),b(e,"class","form-content flex items-center justify-center")},m(u,d){C(u,e,d),w(e,l),w(l,t),w(t,s),w(l,n),w(l,a),w(l,i),w(l,f)},p(u,d){d[0]&4096&&r!==(r=u[12]("default.page.respond.steps.breathe.heading")+"")&&O(s,r)},i:M,o:M,d(u){u&&p(e)}}}function er(o){let e;return{c(){e=D("div"),this.h()},l(l){e=I(l,"DIV",{class:!0}),N(e).forEach(p),this.h()},h(){b(e,"class","form-content flex flex-col items-center justify-center text-center")},m(l,t){C(l,e,t)},p:M,i:M,o:M,d(l){l&&p(e)}}}function tr(o){let e,l,t,r,s;return r=new ml({props:{variant:"ghost",class:"mb-6 flex w-full items-center justify-start gap-2",$$slots:{default:[$r]},$$scope:{ctx:o}}}),r.$on("click",o[27]),{c(){e=D("div"),l=D("div"),t=F(),V(r.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var a=N(e);l=I(a,"DIV",{}),N(l).forEach(p),t=j(a),S(r.$$.fragment,a),a.forEach(p),this.h()},h(){b(e,"class","form-content flex flex-col items-center justify-between pb-1 pt-10 text-center")},m(n,a){C(n,e,a),w(e,l),w(e,t),T(r,e,null),s=!0},p(n,a){const i={};a[0]&4096|a[2]&512&&(i.$$scope={dirty:a,ctx:n}),r.$set(i)},i(n){s||(h(r.$$.fragment,n),s=!0)},o(n){v(r.$$.fragment,n),s=!1},d(n){n&&p(e),y(r)}}}function lr(o){let e=o[12]("default.page.fights.form.request.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&4096&&e!==(e=t[12]("default.page.fights.form.request.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function rr(o){let e,l,t,r,s;e=new De({props:{class:"form-label",$$slots:{default:[lr]},$$scope:{ctx:o}}});const n=[o[58],{class:"min-h-60"}];function a(f){o[32](f)}let i={};for(let f=0;f<n.length;f+=1)i=ae(i,n[f]);return o[13].request!==void 0&&(i.value=o[13].request),t=new ht({props:i}),ie.push(()=>de(t,"value",a)),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(f){S(e.$$.fragment,f),l=j(f),S(t.$$.fragment,f)},m(f,u){T(e,f,u),C(f,l,u),T(t,f,u),s=!0},p(f,u){const d={};u[0]&4096|u[2]&512&&(d.$$scope={dirty:u,ctx:f}),e.$set(d);const c=u[1]&134217728?_e(n,[we(f[58]),n[1]]):{};!r&&u[0]&8192&&(r=!0,c.value=f[13].request,ge(()=>r=!1)),t.$set(c)},i(f){s||(h(e.$$.fragment,f),h(t.$$.fragment,f),s=!0)},o(f){v(e.$$.fragment,f),v(t.$$.fragment,f),s=!1},d(f){f&&p(l),y(e,f),y(t,f)}}}function nr(o){let e,l,t,r;return e=new Ce({props:{$$slots:{default:[rr,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new Ee({}),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(s){S(e.$$.fragment,s),l=j(s),S(t.$$.fragment,s)},m(s,n){T(e,s,n),C(s,l,n),T(t,s,n),r=!0},p(s,n){const a={};n[0]&12288|n[1]&134217728|n[2]&512&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),v(t.$$.fragment,s),r=!1},d(s){s&&p(l),y(e,s),y(t,s)}}}function sr(o){let e=o[12]("default.page.fights.form.needs.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&4096&&e!==(e=t[12]("default.page.fights.form.needs.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function lt(o){let e,l,t=X(o[2]),r=[];for(let n=0;n<t.length;n+=1)r[n]=nt(Ze(o,t,n));const s=n=>v(r[n],1,1,()=>{r[n]=null});return{c(){e=D("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var a=N(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){b(e,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(n,a){C(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);l=!0},p(n,a){if(a[0]&20996100){t=X(n[2]);let i;for(i=0;i<t.length;i+=1){const f=Ze(n,t,i);r[i]?(r[i].p(f,a),h(r[i],1)):(r[i]=nt(f),r[i].c(),h(r[i],1),r[i].m(e,null))}for(K(),i=t.length;i<r.length;i+=1)s(i);Q()}},i(n){if(!l){for(let a=0;a<t.length;a+=1)h(r[a]);l=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)v(r[a]);l=!1},d(n){n&&p(e),fe(r,n)}}}function or(o){let e=(o[14]==="de"?o[55].nameDE:o[55].nameEN)+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&16388&&e!==(e=(t[14]==="de"?t[55].nameDE:t[55].nameEN)+"")&&O(l,e)},d(t){t&&p(l)}}}function rt(o){let e,l,t,r,s,n,a;return l=new vt({props:{value:o[55].id,class:(o[55].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-needs-foreground",$$slots:{default:[or]},$$scope:{ctx:o}}}),{c(){e=D("button"),V(l.$$.fragment),t=F(),this.h()},l(i){e=I(i,"BUTTON",{type:!0,class:!0});var f=N(e);S(l.$$.fragment,f),t=j(f),f.forEach(p),this.h()},h(){var i;b(e,"type","button"),b(e,"class",r=(o[24](o[55],o[62])||(i=o[13].needs)!=null&&i.includes(o[55].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(i,f){C(i,e,f),T(l,e,null),w(e,t),s=!0,n||(a=pe(e,"click",function(){pt(o[22](o[55],o[62].category))&&o[22](o[55],o[62].category).apply(this,arguments)}),n=!0)},p(i,f){var d;o=i;const u={};f[0]&4&&(u.value=o[55].id),f[0]&4&&(u.class=(o[55].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-needs-foreground"),f[0]&16388|f[2]&512&&(u.$$scope={dirty:f,ctx:o}),l.$set(u),(!s||f[0]&8196&&r!==(r=(o[24](o[55],o[62])||(d=o[13].needs)!=null&&d.includes(o[55].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&b(e,"class",r)},i(i){s||(h(l.$$.fragment,i),s=!0)},o(i){v(l.$$.fragment,i),s=!1},d(i){i&&p(e),y(l),n=!1,a()}}}function nt(o){let e,l,t=X(o[62].content),r=[];for(let n=0;n<t.length;n+=1)r[n]=rt(Ge(o,t,n));const s=n=>v(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=te()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);e=te()},m(n,a){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,a);C(n,e,a),l=!0},p(n,a){if(a[0]&20996100){t=X(n[62].content);let i;for(i=0;i<t.length;i+=1){const f=Ge(n,t,i);r[i]?(r[i].p(f,a),h(r[i],1)):(r[i]=rt(f),r[i].c(),h(r[i],1),r[i].m(e.parentNode,e))}for(K(),i=t.length;i<r.length;i+=1)s(i);Q()}},i(n){if(!l){for(let a=0;a<t.length;a+=1)h(r[a]);l=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)v(r[a]);l=!1},d(n){n&&p(e),fe(r,n)}}}function ar(o){let e,l,t=o[2].length>0&&lt(o);return{c(){t&&t.c(),e=te()},l(r){t&&t.l(r),e=te()},m(r,s){t&&t.m(r,s),C(r,e,s),l=!0},p(r,s){r[2].length>0?t?(t.p(r,s),s[0]&4&&h(t,1)):(t=lt(r),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(K(),v(t,1,1,()=>{t=null}),Q())},i(r){l||(h(t),l=!0)},o(r){v(t),l=!1},d(r){r&&p(e),t&&t.d(r)}}}function ir(o){let e,l,t,r,s;e=new De({props:{class:"form-label",$$slots:{default:[sr]},$$scope:{ctx:o}}});const n=[{type:"multiple"},o[58],{class:""}];function a(f){o[31](f)}let i={$$slots:{default:[ar]},$$scope:{ctx:o}};for(let f=0;f<n.length;f+=1)i=ae(i,n[f]);return o[13].needs!==void 0&&(i.value=o[13].needs),t=new $t({props:i}),ie.push(()=>de(t,"value",a)),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(f){S(e.$$.fragment,f),l=j(f),S(t.$$.fragment,f)},m(f,u){T(e,f,u),C(f,l,u),T(t,f,u),s=!0},p(f,u){const d={};u[0]&4096|u[2]&512&&(d.$$scope={dirty:u,ctx:f}),e.$set(d);const c=u[1]&134217728?_e(n,[n[0],we(f[58]),n[2]]):{};u[0]&24580|u[2]&512&&(c.$$scope={dirty:u,ctx:f}),!r&&u[0]&8192&&(r=!0,c.value=f[13].needs,ge(()=>r=!1)),t.$set(c)},i(f){s||(h(e.$$.fragment,f),h(t.$$.fragment,f),s=!0)},o(f){v(e.$$.fragment,f),v(t.$$.fragment,f),s=!1},d(f){f&&p(l),y(e,f),y(t,f)}}}function fr(o){let e,l,t,r;return e=new Ce({props:{$$slots:{default:[ir,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new Ee({}),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(s){S(e.$$.fragment,s),l=j(s),S(t.$$.fragment,s)},m(s,n){T(e,s,n),C(s,l,n),T(t,s,n),r=!0},p(s,n){const a={};n[0]&28676|n[1]&134217728|n[2]&512&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),v(t.$$.fragment,s),r=!1},d(s){s&&p(l),y(e,s),y(t,s)}}}function ur(o){let e=o[12]("default.page.fights.form.feelings.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&4096&&e!==(e=t[12]("default.page.fights.form.feelings.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function st(o){let e,l,t=X(o[1]),r=[];for(let n=0;n<t.length;n+=1)r[n]=it(Ke(o,t,n));const s=n=>v(r[n],1,1,()=>{r[n]=null});return{c(){e=D("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var a=N(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){b(e,"class","")},m(n,a){C(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);l=!0},p(n,a){if(a[0]&25195523){t=X(n[1]);let i;for(i=0;i<t.length;i+=1){const f=Ke(n,t,i);r[i]?(r[i].p(f,a),h(r[i],1)):(r[i]=it(f),r[i].c(),h(r[i],1),r[i].m(e,null))}for(K(),i=t.length;i<r.length;i+=1)s(i);Q()}},i(n){if(!l){for(let a=0;a<t.length;a+=1)h(r[a]);l=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)v(r[a]);l=!1},d(n){n&&p(e),fe(r,n)}}}function cr(o){let e=(o[14]==="de"?o[52].nameDE:o[52].nameEN)+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&16386&&e!==(e=(t[14]==="de"?t[52].nameDE:t[52].nameEN)+"")&&O(l,e)},d(t){t&&p(l)}}}function ot(o){let e,l,t,r,s,n;return l=new vt({props:{value:o[52].id,class:(o[52].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-feelings-foreground",$$slots:{default:[cr]},$$scope:{ctx:o}}}),{c(){e=D("button"),V(l.$$.fragment),this.h()},l(a){e=I(a,"BUTTON",{type:!0,class:!0});var i=N(e);S(l.$$.fragment,i),i.forEach(p),this.h()},h(){var a;b(e,"type","button"),b(e,"class",t=(o[24](o[52],o[62])||(a=o[13].feelings)!=null&&a.includes(o[52].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(a,i){C(a,e,i),T(l,e,null),r=!0,s||(n=pe(e,"click",function(){pt(o[23](o[52],o[62].category))&&o[23](o[52],o[62].category).apply(this,arguments)}),s=!0)},p(a,i){var u;o=a;const f={};i[0]&2&&(f.value=o[52].id),i[0]&2&&(f.class=(o[52].nameEN===o[62].category?"bg-white/40 font-bold dark:bg-muted":"border border-white/40 dark:border-white/20")+" max-w-[300px] py-0  text-black shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:data-[state=on]:bg-feelings-foreground"),i[0]&16386|i[2]&512&&(f.$$scope={dirty:i,ctx:o}),l.$set(f),(!r||i[0]&8194&&t!==(t=(o[24](o[52],o[62])||(u=o[13].feelings)!=null&&u.includes(o[52].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&b(e,"class",t)},i(a){r||(h(l.$$.fragment,a),r=!0)},o(a){v(l.$$.fragment,a),r=!1},d(a){a&&p(e),y(l),s=!1,n()}}}function at(o){let e,l,t=X(o[62].content),r=[];for(let n=0;n<t.length;n+=1)r[n]=ot(We(o,t,n));const s=n=>v(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=te()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);e=te()},m(n,a){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,a);C(n,e,a),l=!0},p(n,a){if(a[0]&25190402){t=X(n[62].content);let i;for(i=0;i<t.length;i+=1){const f=We(n,t,i);r[i]?(r[i].p(f,a),h(r[i],1)):(r[i]=ot(f),r[i].c(),h(r[i],1),r[i].m(e.parentNode,e))}for(K(),i=t.length;i<r.length;i+=1)s(i);Q()}},i(n){if(!l){for(let a=0;a<t.length;a+=1)h(r[a]);l=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)v(r[a]);l=!1},d(n){n&&p(e),fe(r,n)}}}function it(o){let e,l=(o[59].category==="true"?o[12]("default.page.fights.form.general.goodFeelings"):o[12]("default.page.fights.form.general.badFeelings"))+"",t,r,s,n,a,i,f,u,d,c=X(o[59].content),g=[];for(let _=0;_<c.length;_+=1)g[_]=at(Qe(o,c,_));const m=_=>v(g[_],1,1,()=>{g[_]=null});return{c(){e=D("div"),t=J(l),r=F(),s=D("div"),i=F(),f=D("div");for(let _=0;_<g.length;_+=1)g[_].c();u=F(),this.h()},l(_){e=I(_,"DIV",{class:!0});var $=N(e);t=z($,l),r=j($),s=I($,"DIV",{class:!0}),N(s).forEach(p),$.forEach(p),i=j(_),f=I(_,"DIV",{class:!0});var E=N(f);for(let H=0;H<g.length;H+=1)g[H].l(E);u=j(E),E.forEach(p),this.h()},h(){b(s,"class",n="border-b border-"+o[10][o[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-18kg1ym"),b(e,"class",a="text-"+o[10][o[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-18kg1ym"),b(f,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(_,$){C(_,e,$),w(e,t),w(e,r),w(e,s),C(_,i,$),C(_,f,$);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(f,null);w(f,u),d=!0},p(_,$){if((!d||$[0]&4098)&&l!==(l=(_[59].category==="true"?_[12]("default.page.fights.form.general.goodFeelings"):_[12]("default.page.fights.form.general.badFeelings"))+"")&&O(t,l),(!d||$[0]&1025&&n!==(n="border-b border-"+_[10][_[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-18kg1ym"))&&b(s,"class",n),(!d||$[0]&1025&&a!==(a="text-"+_[10][_[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-18kg1ym"))&&b(e,"class",a),$[0]&25190402){c=X(_[59].content);let E;for(E=0;E<c.length;E+=1){const H=Qe(_,c,E);g[E]?(g[E].p(H,$),h(g[E],1)):(g[E]=at(H),g[E].c(),h(g[E],1),g[E].m(f,u))}for(K(),E=c.length;E<g.length;E+=1)m(E);Q()}},i(_){if(!d){for(let $=0;$<c.length;$+=1)h(g[$]);d=!0}},o(_){g=g.filter(Boolean);for(let $=0;$<g.length;$+=1)v(g[$]);d=!1},d(_){_&&(p(e),p(i),p(f)),fe(g,_)}}}function gr(o){let e,l,t=o[1].length>0&&st(o);return{c(){t&&t.c(),e=te()},l(r){t&&t.l(r),e=te()},m(r,s){t&&t.m(r,s),C(r,e,s),l=!0},p(r,s){r[1].length>0?t?(t.p(r,s),s[0]&2&&h(t,1)):(t=st(r),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(K(),v(t,1,1,()=>{t=null}),Q())},i(r){l||(h(t),l=!0)},o(r){v(t),l=!1},d(r){r&&p(e),t&&t.d(r)}}}function dr(o){let e,l,t,r,s;e=new De({props:{class:"form-label",$$slots:{default:[ur]},$$scope:{ctx:o}}});const n=[{type:"multiple"},o[58],{class:"flex flex-col gap-4"}];function a(f){o[30](f)}let i={$$slots:{default:[gr]},$$scope:{ctx:o}};for(let f=0;f<n.length;f+=1)i=ae(i,n[f]);return o[13].feelings!==void 0&&(i.value=o[13].feelings),t=new $t({props:i}),ie.push(()=>de(t,"value",a)),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(f){S(e.$$.fragment,f),l=j(f),S(t.$$.fragment,f)},m(f,u){T(e,f,u),C(f,l,u),T(t,f,u),s=!0},p(f,u){const d={};u[0]&4096|u[2]&512&&(d.$$scope={dirty:u,ctx:f}),e.$set(d);const c=u[1]&134217728?_e(n,[n[0],we(f[58]),n[2]]):{};u[0]&29699|u[2]&512&&(c.$$scope={dirty:u,ctx:f}),!r&&u[0]&8192&&(r=!0,c.value=f[13].feelings,ge(()=>r=!1)),t.$set(c)},i(f){s||(h(e.$$.fragment,f),h(t.$$.fragment,f),s=!0)},o(f){v(e.$$.fragment,f),v(t.$$.fragment,f),s=!1},d(f){f&&p(l),y(e,f),y(t,f)}}}function pr(o){let e,l,t,r;return e=new Ce({props:{$$slots:{default:[dr,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new Ee({}),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(s){S(e.$$.fragment,s),l=j(s),S(t.$$.fragment,s)},m(s,n){T(e,s,n),C(s,l,n),T(t,s,n),r=!0},p(s,n){const a={};n[0]&29699|n[1]&134217728|n[2]&512&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),v(t.$$.fragment,s),r=!1},d(s){s&&p(l),y(e,s),y(t,s)}}}function mr(o){let e=o[12]("default.page.fights.form.observation.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&4096&&e!==(e=t[12]("default.page.fights.form.observation.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function _r(o){let e,l,t,r,s;e=new De({props:{class:"form-label",$$slots:{default:[mr]},$$scope:{ctx:o}}});const n=[o[58],{class:"min-h-60"}];function a(f){o[28](f)}let i={};for(let f=0;f<n.length;f+=1)i=ae(i,n[f]);return o[13].observation!==void 0&&(i.value=o[13].observation),t=new ht({props:i}),ie.push(()=>de(t,"value",a)),t.$on("input",o[29]),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(f){S(e.$$.fragment,f),l=j(f),S(t.$$.fragment,f)},m(f,u){T(e,f,u),C(f,l,u),T(t,f,u),s=!0},p(f,u){const d={};u[0]&4096|u[2]&512&&(d.$$scope={dirty:u,ctx:f}),e.$set(d);const c=u[1]&134217728?_e(n,[we(f[58]),n[1]]):{};!r&&u[0]&8192&&(r=!0,c.value=f[13].observation,ge(()=>r=!1)),t.$set(c)},i(f){s||(h(e.$$.fragment,f),h(t.$$.fragment,f),s=!0)},o(f){v(e.$$.fragment,f),v(t.$$.fragment,f),s=!1},d(f){f&&p(l),y(e,f),y(t,f)}}}function hr(o){let e,l,t,r;return e=new Ce({props:{$$slots:{default:[_r,({attrs:s})=>({58:s}),({attrs:s})=>[0,s?134217728:0]]},$$scope:{ctx:o}}}),t=new Ee({}),{c(){V(e.$$.fragment),l=F(),V(t.$$.fragment)},l(s){S(e.$$.fragment,s),l=j(s),S(t.$$.fragment,s)},m(s,n){T(e,s,n),C(s,l,n),T(t,s,n),r=!0},p(s,n){const a={};n[0]&12544|n[1]&134217728|n[2]&512&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),v(t.$$.fragment,s),r=!1},d(s){s&&p(l),y(e,s),y(t,s)}}}function ft(o){let e,l=(o[14]==="de"?o[55].nameDE:o[55].nameEN)+"",t,r;return{c(){e=D("div"),t=J(l),r=F(),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=N(e);t=z(n,l),r=j(n),n.forEach(p),this.h()},h(){b(e,"class","rounded-md bg-white/10 px-4 py-2 shadow-lg")},m(s,n){C(s,e,n),w(e,t),w(e,r)},p(s,n){n[0]&16392&&l!==(l=(s[14]==="de"?s[55].nameDE:s[55].nameEN)+"")&&O(t,l)},d(s){s&&p(e)}}}function ut(o){let e,l=(o[14]==="de"?o[52].nameDE:o[52].nameEN)+"",t,r;return{c(){e=D("div"),t=J(l),r=F(),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=N(e);t=z(n,l),r=j(n),n.forEach(p),this.h()},h(){b(e,"class","rounded-md bg-white/20 px-4 py-2 shadow-lg")},m(s,n){C(s,e,n),w(e,t),w(e,r)},p(s,n){n[0]&16392&&l!==(l=(s[14]==="de"?s[52].nameDE:s[52].nameEN)+"")&&O(t,l)},d(s){s&&p(e)}}}function $r(o){let e,l,t=o[12]("default.page.respond.steps.greeting.explanationCta")+"",r,s;return e=new $l({}),{c(){V(e.$$.fragment),l=F(),r=J(t)},l(n){S(e.$$.fragment,n),l=j(n),r=z(n,t)},m(n,a){T(e,n,a),C(n,l,a),C(n,r,a),s=!0},p(n,a){(!s||a[0]&4096)&&t!==(t=n[12]("default.page.respond.steps.greeting.explanationCta")+"")&&O(r,t)},i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){v(e.$$.fragment,n),s=!1},d(n){n&&(p(l),p(r)),y(e,n)}}}function ct(o){let e,l,t,r;const s=[tr,er,xl,Xl,Yl,Wl,Ql,Kl,Gl,Zl,Ul,Pl,Hl,Ll],n=[];function a(i,f){return i[0]===1?0:i[0]===2?1:i[0]===3?2:i[0]===4?3:i[0]===5?4:i[0]===6?5:i[0]===7?6:i[0]===8?7:i[0]===9?8:i[0]===10?9:i[0]===11?10:i[6]?i[7]?12:13:11}return e=a(o),l=n[e]=s[e](o),{c(){l.c(),t=te()},l(i){l.l(i),t=te()},m(i,f){n[e].m(i,f),C(i,t,f),r=!0},p(i,f){let u=e;e=a(i),e===u?n[e].p(i,f):(K(),v(n[u],1,1,()=>{n[u]=null}),Q(),l=n[e],l?l.p(i,f):(l=n[e]=s[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){r||(h(l),r=!0)},o(i){v(l),r=!1},d(i){i&&p(t),n[e].d(i)}}}function gt(o){let e,l;return e=new el({props:{$$slots:{default:[vr]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const s={};r[0]&1281|r[2]&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function vr(o){let e,l;return e=new Sl({props:{step:o[0],checkForJudgement:o[8],primaryButtonClass:`bg-${o[10][o[0]-1].slug}-background`,class:"flex-shrink-0"}}),e.$on("validateObservation",o[15]),e.$on("disableJudgementCheck",o[16]),e.$on("toPrev",o[20]),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const s={};r[0]&1&&(s.step=t[0]),r[0]&256&&(s.checkForJudgement=t[8]),r[0]&1025&&(s.primaryButtonClass=`bg-${t[10][t[0]-1].slug}-background`),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function br(o){let e=o[12]("default.page.respond.explanationTitle")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){C(t,l,r)},p(t,r){r[0]&4096&&e!==(e=t[12]("default.page.respond.explanationTitle")+"")&&O(l,e)},d(t){t&&p(l)}}}function wr(o){let e,l;return e=new il({props:{class:"text-red-600"}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function kr(o){let e,l,t,r,s;return l=new ol({props:{$$slots:{default:[br]},$$scope:{ctx:o}}}),r=new al({props:{$$slots:{default:[wr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),t=F(),V(r.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var a=N(e);S(l.$$.fragment,a),t=j(a),S(r.$$.fragment,a),a.forEach(p),this.h()},h(){b(e,"class","flex items-center justify-between")},m(n,a){C(n,e,a),T(l,e,null),w(e,t),T(r,e,null),s=!0},p(n,a){const i={};a[0]&4096|a[2]&512&&(i.$$scope={dirty:a,ctx:n}),l.$set(i);const f={};a[2]&512&&(f.$$scope={dirty:a,ctx:n}),r.$set(f)},i(n){s||(h(l.$$.fragment,n),h(r.$$.fragment,n),s=!0)},o(n){v(l.$$.fragment,n),v(r.$$.fragment,n),s=!1},d(n){n&&p(e),y(l),y(r)}}}function Cr(o){let e,l,t,r=o[12]("default.page.respond.explanation")+"",s,n;return e=new sl({props:{$$slots:{default:[kr]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment),l=F(),t=D("p"),s=J(r),this.h()},l(a){S(e.$$.fragment,a),l=j(a),t=I(a,"P",{class:!0});var i=N(t);s=z(i,r),i.forEach(p),this.h()},h(){b(t,"class","mb-20 p-4")},m(a,i){T(e,a,i),C(a,l,i),C(a,t,i),w(t,s),n=!0},p(a,i){const f={};i[0]&4096|i[2]&512&&(f.$$scope={dirty:i,ctx:a}),e.$set(f),(!n||i[0]&4096)&&r!==(r=a[12]("default.page.respond.explanation")+"")&&O(s,r)},i(a){n||(h(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){a&&(p(l),p(t)),y(e,a)}}}function Er(o){let e,l;return e=new nl({props:{class:"p-4",$$slots:{default:[Cr]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const s={};r[0]&4096|r[2]&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function Dr(o){let e,l,t,r,s,n,a,i,f,u,d,c,g,m;l=new xt({});let _=!o[6]&&!o[7]&&xe(o),$=o[3]&&tt(o),E=!o[6]&&!o[7]&&gt(o);function H(B){o[33](B)}let ne={$$slots:{default:[Er]},$$scope:{ctx:o}};return o[9]!==void 0&&(ne.open=o[9]),u=new ll({props:ne}),ie.push(()=>de(u,"open",H)),{c(){e=D("div"),V(l.$$.fragment),t=F(),r=D("div"),s=D("form"),_&&_.c(),n=F(),$&&$.c(),a=F(),E&&E.c(),f=F(),V(u.$$.fragment),this.h()},l(B){e=I(B,"DIV",{class:!0});var L=N(e);S(l.$$.fragment,L),t=j(L),r=I(L,"DIV",{class:!0});var q=N(r);s=I(q,"FORM",{class:!0});var U=N(s);_&&_.l(U),n=j(U),$&&$.l(U),a=j(U),E&&E.l(U),U.forEach(p),q.forEach(p),L.forEach(p),f=j(B),S(u.$$.fragment,B),this.h()},h(){b(s,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),b(r,"class","max-container relative flex flex-grow flex-col pb-40"),b(e,"class",i="flex flex-grow flex-col justify-between transition duration-500 "+o[11]+" min-h-svh overflow-hidden dark:bg-background svelte-18kg1ym")},m(B,L){C(B,e,L),T(l,e,null),w(e,t),w(e,r),w(r,s),_&&_.m(s,null),w(s,n),$&&$.m(s,null),w(s,a),E&&E.m(s,null),C(B,f,L),T(u,B,L),c=!0,g||(m=[pe(s,"submit",Pt(o[25])),Ut(o[19].call(null,s))],g=!0)},p(B,L){!B[6]&&!B[7]?_?(_.p(B,L),L[0]&192&&h(_,1)):(_=xe(B),_.c(),h(_,1),_.m(s,n)):_&&(K(),v(_,1,1,()=>{_=null}),Q()),B[3]?$?($.p(B,L),L[0]&8&&h($,1)):($=tt(B),$.c(),h($,1),$.m(s,a)):$&&(K(),v($,1,1,()=>{$=null}),Q()),!B[6]&&!B[7]?E?(E.p(B,L),L[0]&192&&h(E,1)):(E=gt(B),E.c(),h(E,1),E.m(s,null)):E&&(K(),v(E,1,1,()=>{E=null}),Q()),(!c||L[0]&2048&&i!==(i="flex flex-grow flex-col justify-between transition duration-500 "+B[11]+" min-h-svh overflow-hidden dark:bg-background svelte-18kg1ym"))&&b(e,"class",i);const q={};L[0]&4096|L[2]&512&&(q.$$scope={dirty:L,ctx:B}),!d&&L[0]&512&&(d=!0,q.open=B[9],ge(()=>d=!1)),u.$set(q)},i(B){c||(h(l.$$.fragment,B),h(_),h($),h(E),h(u.$$.fragment,B),c=!0)},o(B){v(l.$$.fragment,B),v(_),v($),v(E),v(u.$$.fragment,B),c=!1},d(B){B&&(p(e),p(f)),y(l),_&&_.d(),$&&$.d(),E&&E.d(),y(u,B),g=!1,dt(m)}}}function Ir(o,e,l){let t,r,s,n,a,i;oe(o,tl,k=>l(35,r=k)),oe(o,Yt,k=>l(36,s=k)),oe(o,Z,k=>l(12,n=k)),oe(o,mt,k=>l(14,i=k));const f=rl(Y(ce));let u=[],d=[],c,g,m=[{step:1,content:[""]}];const _=[Y(Te),Y(ye),Y(Be),Y(Fe),Y(Tl),Y(yl),Y(Bl),Y(Fl),Y(jl),Y(ql),Y(Jl),Y(ce)];let $=1,E=!1,H=!1,ne=!1,B=!1;const L=k=>{const A=`bg-${he[k-1].slug}-background`;return Xt.set(A),A},q=async()=>{try{let k=a;k.fight=c.id,console.log("submit form",k);const A=await $e.collection("responses").create(k);l(7,H=!0),l(6,E=!0)}catch(k){console.log("error handling submit",k),l(7,H=!1),l(6,E=!0)}},U=async k=>{const R=Object.keys(Y([Te,ye,Be,Fe,ce][k-1]).constraints);let P=!0;for(const se of R)await wt(se,{update:!1})&&(P=!1);return!!P},le=async()=>{const k=await ze(a,ce);return k.valid?!0:(Je.set(k.errors),!1)},W=async()=>{const k=await ze(ce);return k.errors.observation?(Je.set(k.errors),!1):(ue(),!0)},ue=()=>{g(a.observation),l(8,ne=!1)},ee=dl(f,{resetForm:!1,validators:fl(ce),async onSubmit({validators:k,cancel:A}){console.log("onSubmit"),A(),await le()&&($==_.length?q():l(0,$++,$))},async onUpdated({form:k}){console.log("onUpdated"),k.valid&&l(0,$=1)}}),{form:re,errors:Je,message:Nr,enhance:bt,validate:wt,validateForm:ze,options:kt,updateForm:Vr}=ee;oe(o,re,k=>l(13,a=k)),re.subscribe(k=>{console.log("form was updated",k)});let he=[{slug:"greeting",name:G(Z)("default.page.fights.form.general.steps.info"),icon:Ve,invertedTextColor:!1,hidden:!0},{slug:"disclaimer",name:G(Z)("default.page.fights.form.general.steps.info"),icon:Ve,invertedTextColor:!1,hidden:!0},{slug:"breathe",name:G(Z)("default.page.fights.form.general.steps.info"),icon:Ve,invertedTextColor:!1,hidden:!0},{slug:"observation",name:G(Z)("default.page.fights.form.general.steps.observation"),icon:Se,invertedTextColor:!0,hidden:!0},{slug:"feelings",name:G(Z)("default.page.fights.form.general.steps.feelings"),icon:Le,invertedTextColor:!1,hidden:!0},{slug:"needs",name:G(Z)("default.page.fights.form.general.steps.needs"),icon:He,invertedTextColor:!1,hidden:!0},{slug:"request",name:G(Z)("default.page.fights.form.general.steps.request"),icon:Pe,invertedTextColor:!1,hidden:!0},{slug:"pause",name:G(Z)("default.page.fights.form.general.steps.observation"),icon:Se,invertedTextColor:!0,hidden:!0},{slug:"observation",name:G(Z)("default.page.fights.form.general.steps.observation"),icon:Se,invertedTextColor:!0},{slug:"feelings",name:G(Z)("default.page.fights.form.general.steps.feelings"),icon:Le,invertedTextColor:!1},{slug:"needs",name:G(Z)("default.page.fights.form.general.steps.needs"),icon:He,invertedTextColor:!1},{slug:"request",name:G(Z)("default.page.fights.form.general.steps.request"),icon:Pe,invertedTextColor:!1}];Z.subscribe(k=>{const A=he.map(R=>{const P=k(`default.page.fights.form.general.steps.${R.slug}`);return R.name=P,R});l(10,he=[...A])});const Ct=()=>{console.log("decreaseStep"),$>1&&(console.log("step",$),l(0,$=$-1),console.log("step",$))},Et=async()=>{const k=await $e.collection("feelings").getFullList({sort:"category"}),A=Ie(k);let R=Ne(A,"positive");R.map(P=>(P.content=Ne(P.content,"category"),P.content.map(se=>se.visible=!1),P)),console.log("res",R),l(1,u=R)},Dt=async()=>{const k=await $e.collection("needs").getFullList({sort:"category"}),A=Ie(k);let R=Ne(A,"category");R.map(P=>P.visible=!1),console.log("res",R),l(2,d=R)},It=async()=>{const k=await $e.collection("fights").getOne(r.params.id,{expand:"owner, feelings, needs"});l(3,c=Ie(k)),console.log("fight",c)},Nt=async k=>{console.log("changeStep");const A=k.detail.step,R=await U(A);console.log("targetStepIsValid",R),R&&l(0,$=A)},Vt=(k,A)=>{if(k.nameEN!==A)return;const R=d.find(P=>P.category===A);R&&(R.visible=!R.visible),l(2,d=[...d])},St=(k,A)=>{if(k.nameEN!==A)return;const R=u[0].content.find(se=>se.category===A),P=u[1].content.find(se=>se.category===A);R&&(R.visible=!R.visible),P&&(P.visible=!P.visible),l(1,u=[...u])},Tt=(k,A)=>{const R=k.nameEN,P=A.category;return!!(R===P||A.visible)},yt=()=>{l(5,m=[{step:1,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.greeting.heading")}. ${n("default.page.respond.steps.greeting.question")}`]},{step:2,content:[`${n("default.page.respond.steps.disclaimer.heading")}: ${n("default.page.respond.steps.disclaimer.description")}`]},{step:3,content:[`${n("default.page.respond.steps.breathe.heading")}`]},{step:4,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerObservation.heading")}`]},{step:5,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerFeelings.heading")}`]},{step:6,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerNeeds.heading")}`]},{step:7,content:[`${c.expand.owner.firstName} ${n("default.page.respond.steps.ownerRequest.heading")}`]},{step:8,content:[n("default.page.respond.steps.pause.heading")]},{step:9,content:[n("default.page.fight.create.observation")]},{step:10,content:[n("default.page.fight.create.feelings")]},{step:11,content:[n("default.page.fight.create.needs")]},{step:12,content:[n("default.page.fight.create.request")]},{step:13,content:[n("default.page.respond.steps.success")],errorContent:[n("default.page.respond.steps.error")]}])};Zt(async()=>{await Et(),await Dt(),await It(),yt(),r.url&&(s?(console.log("deleting cookie loginRedirectTarget"),Wt("loginRedirectTarget")):(console.log("setting cookie loginRedirectTarget"),Qt("loginRedirectTarget",r.url.pathname+r.url.search,.1)))});function Bt(k){Gt.call(this,o,k)}function Ft(k){g=k,l(4,g)}const jt=()=>l(9,B=!0);function qt(k){o.$$.not_equal(a.observation,k)&&(a.observation=k,re.set(a))}const Jt=()=>l(8,ne=!0);function zt(k){o.$$.not_equal(a.feelings,k)&&(a.feelings=k,re.set(a))}function Ot(k){o.$$.not_equal(a.needs,k)&&(a.needs=k,re.set(a))}function Mt(k){o.$$.not_equal(a.request,k)&&(a.request=k,re.set(a))}function At(k){B=k,l(9,B)}return o.$$.update=()=>{o.$$.dirty[0]&1,o.$$.dirty[0]&1&&(kt.validators=_[$-1]),o.$$.dirty[0]&1&&l(11,t=L($))},[$,u,d,c,g,m,E,H,ne,B,he,t,n,a,i,W,ue,ee,re,bt,Ct,Nt,Vt,St,Tt,Bt,Ft,jt,qt,Jt,zt,Ot,Mt,At]}class Qr extends ve{constructor(e){super(),be(this,e,Ir,Dr,me,{},null,[-1,-1,-1])}}export{Qr as component};
