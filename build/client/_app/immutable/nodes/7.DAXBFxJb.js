import{s as Ce,l as Te,m as Ue,o as Ke,b as v,f,p as h,q as Je,i as O,h as i,n as ke,r as Ye,u as _t,v as ye,k as Ee,w as Be,L as lt,e as m,a as C,t as Q,c as _,y as rt,g as z,d as W,j as X,M as st,z as at,D as nt,U as ot,Y as Ze}from"../chunks/scheduler.BmBrB_dT.js";import{S as ze,i as Fe,g as $e,t as V,c as be,a as D,f as it,b as H,d as N,m as A,e as q}from"../chunks/index.BQZQ5DB3.js";import{g as vt,u as je,t as He,y as ct,e as Re,S as $t,c as Ge,b as bt}from"../chunks/helpers.g8wrkI0H.js";import{S as ft}from"../chunks/skeleton.BQQp5uE_.js";import{p as xe}from"../chunks/pocketbase.Ce4YzWbP.js";import{e as dt,C as Le}from"../chunks/dashboard.DpCWL34F.js";import{g as Ne}from"../chunks/entry.DnNy0IhO.js";import{d as ut,e as ht}from"../chunks/switch.fB03Cpk5.js";import{C as pt}from"../chunks/CaretRight.4QcEA5-H.js";import{B as gt}from"../chunks/button.D_ITeu-i.js";import{C as Me}from"../chunks/Check.CFBCV6Q5.js";import{A as wt,a as kt}from"../chunks/AppBottomMenu.CkXkkK6h.js";import"../chunks/memoize.BzJ9-avW.js";import"../chunks/schema.Dzw43gaf.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.CqHcWxsp.js";/* empty css                                                             */import{B as Dt}from"../chunks/index.Bj_hiVz4.js";import{C as Et}from"../chunks/CaretLeft.Cs-VcT_4.js";function It(s){let e,l,t=[{width:s[1]},{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[2]],r={};for(let a=0;a<t.length;a+=1)r=Te(r,t[a]);return{c(){e=Ue("svg"),l=Ue("path"),this.h()},l(a){e=Ke(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=v(e);l=Ke(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),v(l).forEach(f),n.forEach(f),this.h()},h(){h(l,"fill-rule","evenodd"),h(l,"clip-rule","evenodd"),h(l,"d","M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z"),h(l,"fill",s[0]),Je(e,r)},m(a,n){O(a,e,n),i(e,l)},p(a,[n]){n&1&&h(l,"fill",a[0]),Je(e,r=vt(t,[n&2&&{width:a[1]},n&2&&{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n&4&&a[2]]))},i:ke,o:ke,d(a){a&&f(e)}}}function Vt(s,e,l){const t=["color","size"];let r=Ye(e,t),{color:a="currentColor"}=e,{size:n=15}=e;return s.$$set=d=>{e=Te(Te({},e),_t(d)),l(2,r=Ye(e,t)),"color"in d&&l(0,a=d.color),"size"in d&&l(1,n=d.size)},[a,n,r]}class mt extends ze{constructor(e){super(),Fe(this,e,Vt,It,Ce,{color:0,size:1})}}function Qe(s,e,l){const t=s.slice();return t[14]=e[l],t}function xt(s){let e,l='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-0 top-20 z-0 h-[500px] w-[500px] -translate-x-1/2 -translate-y-1/2 transform dark:opacity-10"></div>',t,r,a,n,d,o=s[5]("default.page.fight.title")+"",u,p,$,x,K,F,k,b,c,y,L=s[5]("default.page.dashboard.fights.table.resolved")+"",S,oe,B,ee=s[5]("default.page.dashboard.fights.table.partner")+"",ie,pe,T,se=s[5]("default.page.dashboard.fights.table.date")+"",ce,J,te,R=s[5]("default.page.dashboard.fights.table.opened")+"",I,G,U,ge,Z,le,re,ue,fe,ae;function P(g){s[9](g)}let Ie={id:"lightMode",class:"bg-gray-500 transform scale-75"};s[0]!==void 0&&(Ie.checked=s[0]),x=new ut({props:Ie}),lt.push(()=>it(x,"checked",P)),x.$on("click",s[10]),k=new ht({props:{for:"lightMode",class:"cursor-pointer",$$slots:{default:[Rt]},$$scope:{ctx:s}}});let E=Re(s[4]),w=[];for(let g=0;g<E.length;g+=1)w[g]=We(Qe(s,E,g));const he=g=>V(w[g],1,1,()=>{w[g]=null}),me=[St,Mt],j=[];function _e(g,M){return g[3]?1:0}return ue=_e(s),fe=j[ue]=me[ue](s),{c(){e=m("div"),e.innerHTML=l,t=C(),r=m("div"),a=m("div"),n=m("div"),d=m("h2"),u=Q(o),p=C(),$=m("div"),H(x.$$.fragment),F=C(),H(k.$$.fragment),b=C(),c=m("div"),y=m("div"),S=Q(L),oe=C(),B=m("div"),ie=Q(ee),pe=C(),T=m("div"),ce=Q(se),J=C(),te=m("div"),I=Q(R),G=C(),U=m("div"),ge=C(),Z=m("div"),le=m("div");for(let g=0;g<w.length;g+=1)w[g].c();re=C(),fe.c(),this.h()},l(g){e=_(g,"DIV",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-2ba7nq"&&(e.innerHTML=l),t=z(g),r=_(g,"DIV",{class:!0});var M=v(r);a=_(M,"DIV",{class:!0});var de=v(a);n=_(de,"DIV",{class:!0});var ve=v(n);d=_(ve,"H2",{class:!0});var we=v(d);u=W(we,o),we.forEach(f),p=z(ve),$=_(ve,"DIV",{class:!0});var Y=v($);N(x.$$.fragment,Y),F=z(Y),N(k.$$.fragment,Y),Y.forEach(f),ve.forEach(f),b=z(de),c=_(de,"DIV",{class:!0});var ne=v(c);y=_(ne,"DIV",{class:!0});var De=v(y);S=W(De,L),De.forEach(f),oe=z(ne),B=_(ne,"DIV",{class:!0});var Ae=v(B);ie=W(Ae,ee),Ae.forEach(f),pe=z(ne),T=_(ne,"DIV",{class:!0});var qe=v(T);ce=W(qe,se),qe.forEach(f),J=z(ne),te=_(ne,"DIV",{class:!0});var Oe=v(te);I=W(Oe,R),Oe.forEach(f),G=z(ne),U=_(ne,"DIV",{class:!0}),v(U).forEach(f),ne.forEach(f),de.forEach(f),ge=z(M),Z=_(M,"DIV",{class:!0});var Ve=v(Z);le=_(Ve,"DIV",{});var Pe=v(le);for(let Se=0;Se<w.length;Se+=1)w[Se].l(Pe);Pe.forEach(f),re=z(Ve),fe.l(Ve),Ve.forEach(f),M.forEach(f),this.h()},h(){h(e,"class","relative z-0"),h(d,"class","text-md font-bold"),h($,"class","flex items-center gap-1"),h(n,"class","flex items-center justify-between mb-4"),h(y,"class","w-1/6"),h(B,"class","w-1/3"),h(T,"class","w-1/4"),h(te,"class","w-1/6"),h(U,"class","w-1/6"),h(c,"class","flex items-center text-2xs text-neutral-400"),h(a,"class","rounded-t-xl border-b border-black/5 bg-almostwhite px-5 pb-3 pt-4 shadow-2xl shadow-black/10 dark:bg-muted"),h(Z,"class","rounded-b-xl bg-almostwhite px-4 pb-3 pt-2 shadow-2xl shadow-black/10 dark:bg-muted"),h(r,"class","relative z-10")},m(g,M){O(g,e,M),O(g,t,M),O(g,r,M),i(r,a),i(a,n),i(n,d),i(d,u),i(n,p),i(n,$),A(x,$,null),i($,F),A(k,$,null),i(a,b),i(a,c),i(c,y),i(y,S),i(c,oe),i(c,B),i(B,ie),i(c,pe),i(c,T),i(T,ce),i(c,J),i(c,te),i(te,I),i(c,G),i(c,U),i(r,ge),i(r,Z),i(Z,le);for(let de=0;de<w.length;de+=1)w[de]&&w[de].m(le,null);i(Z,re),j[ue].m(Z,null),ae=!0},p(g,M){(!ae||M&32)&&o!==(o=g[5]("default.page.fight.title")+"")&&X(u,o);const de={};!K&&M&1&&(K=!0,de.checked=g[0],st(()=>K=!1)),x.$set(de);const ve={};if(M&131104&&(ve.$$scope={dirty:M,ctx:g}),k.$set(ve),(!ae||M&32)&&L!==(L=g[5]("default.page.dashboard.fights.table.resolved")+"")&&X(S,L),(!ae||M&32)&&ee!==(ee=g[5]("default.page.dashboard.fights.table.partner")+"")&&X(ie,ee),(!ae||M&32)&&se!==(se=g[5]("default.page.dashboard.fights.table.date")+"")&&X(ce,se),(!ae||M&32)&&R!==(R=g[5]("default.page.dashboard.fights.table.opened")+"")&&X(I,R),M&144){E=Re(g[4]);let Y;for(Y=0;Y<E.length;Y+=1){const ne=Qe(g,E,Y);w[Y]?(w[Y].p(ne,M),D(w[Y],1)):(w[Y]=We(ne),w[Y].c(),D(w[Y],1),w[Y].m(le,null))}for($e(),Y=E.length;Y<w.length;Y+=1)he(Y);be()}let we=ue;ue=_e(g),ue===we?j[ue].p(g,M):($e(),V(j[we],1,1,()=>{j[we]=null}),be(),fe=j[ue],fe?fe.p(g,M):(fe=j[ue]=me[ue](g),fe.c()),D(fe,1),fe.m(Z,null))},i(g){if(!ae){D(x.$$.fragment,g),D(k.$$.fragment,g);for(let M=0;M<E.length;M+=1)D(w[M]);D(fe),ae=!0}},o(g){V(x.$$.fragment,g),V(k.$$.fragment,g),w=w.filter(Boolean);for(let M=0;M<w.length;M+=1)V(w[M]);V(fe),ae=!1},d(g){g&&(f(e),f(t),f(r)),q(x),q(k),at(w,g),j[ue].d()}}}function yt(s){let e,l;return e=new ft({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:ke,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Rt(s){let e=s[5]("default.page.fights.displayResolved")+"",l;return{c(){l=Q(e)},l(t){l=W(t,e)},m(t,r){O(t,l,r)},p(t,r){r&32&&e!==(e=t[5]("default.page.fights.displayResolved")+"")&&X(l,e)},d(t){t&&f(l)}}}function Ct(s){let e,l,t;return l=new Le({props:{class:"size-3"}}),{c(){e=m("div"),H(l.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=v(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full text-red-600/80 p-1 text-2xs")},m(r,a){O(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),q(l)}}}function zt(s){let e,l,t;return l=new Me({props:{class:"size-3"}}),{c(){e=m("div"),H(l.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=v(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full text-green-600/80 p-1 text-2xs")},m(r,a){O(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),q(l)}}}function Ft(s){let e,l;return e=new Le({props:{class:"h-3 w-3 text-black"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Lt(s){let e,l;return e=new Me({props:{class:"h-3 w-3 text-black"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function We(s){let e,l,t,r,a,n,d=s[14].name+"",o,u,p,$=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[14].created))+"",x,K,F,k,b,c,y,L,S,oe,B,ee,ie;const pe=[zt,Ct],T=[];function se(R,I){return R[14].resolved?0:1}t=se(s),r=T[t]=pe[t](s);const ce=[Lt,Ft],J=[];function te(R,I){return R[14].opened?0:1}return k=te(s),b=J[k]=ce[k](s),S=new pt({props:{class:"h-4 w-4 rounded-full group-hover:bg-neutral-300 group-hover:text-black"}}),{c(){e=m("button"),l=m("div"),r.c(),a=C(),n=m("div"),o=Q(d),u=C(),p=m("div"),x=Q($),K=C(),F=m("div"),b.c(),c=C(),y=m("div"),L=m("div"),H(S.$$.fragment),oe=C(),this.h()},l(R){e=_(R,"BUTTON",{class:!0});var I=v(e);l=_(I,"DIV",{class:!0});var G=v(l);r.l(G),G.forEach(f),a=z(I),n=_(I,"DIV",{class:!0});var U=v(n);o=W(U,d),U.forEach(f),u=z(I),p=_(I,"DIV",{class:!0});var ge=v(p);x=W(ge,$),ge.forEach(f),K=z(I),F=_(I,"DIV",{class:!0});var Z=v(F);b.l(Z),Z.forEach(f),c=z(I),y=_(I,"DIV",{class:!0});var le=v(y);L=_(le,"DIV",{class:!0});var re=v(L);N(S.$$.fragment,re),re.forEach(f),le.forEach(f),oe=z(I),I.forEach(f),this.h()},h(){h(l,"class","flex w-1/6"),h(n,"class","input-fade-right mr-2 w-1/3 overflow-hidden whitespace-nowrap"),h(p,"class","w-1/4"),h(F,"class","w-1/6"),h(L,"class","skeumorphic-button rounded-full p-0.5 svelte-5cv73o"),h(y,"class","flex w-1/6 justify-end"),h(e,"class","group flex w-full items-center border-b border-black/5 py-2 text-left text-xs last:border-b-0 sm:py-3")},m(R,I){O(R,e,I),i(e,l),T[t].m(l,null),i(e,a),i(e,n),i(n,o),i(e,u),i(e,p),i(p,x),i(e,K),i(e,F),J[k].m(F,null),i(e,c),i(e,y),i(y,L),A(S,L,null),i(e,oe),B=!0,ee||(ie=nt(e,"click",function(){ot(s[7](s[14].id))&&s[7](s[14].id).apply(this,arguments)}),ee=!0)},p(R,I){s=R;let G=t;t=se(s),t!==G&&($e(),V(T[G],1,1,()=>{T[G]=null}),be(),r=T[t],r||(r=T[t]=pe[t](s),r.c()),D(r,1),r.m(l,null)),(!B||I&16)&&d!==(d=s[14].name+"")&&X(o,d),(!B||I&16)&&$!==($=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[14].created))+"")&&X(x,$);let U=k;k=te(s),k!==U&&($e(),V(J[U],1,1,()=>{J[U]=null}),be(),b=J[k],b||(b=J[k]=ce[k](s),b.c()),D(b,1),b.m(F,null))},i(R){B||(D(r),D(b),D(S.$$.fragment,R),B=!0)},o(R){V(r),V(b),V(S.$$.fragment,R),B=!1},d(R){R&&f(e),T[t].d(),J[k].d(),q(S),ee=!1,ie()}}}function Mt(s){let e,l=s[5]("default.page.dashboard.fights.endReached")+"",t,r,a;return{c(){e=m("div"),t=Q(l),r=C(),a=m("div"),this.h()},l(n){e=_(n,"DIV",{class:!0});var d=v(e);t=W(d,l),r=z(d),a=_(d,"DIV",{class:!0}),v(a).forEach(f),d.forEach(f),this.h()},h(){h(a,"class","mt-0.5 flex-grow border-t border-black/5"),h(e,"class","mt-6 flex items-center gap-2 text-2xs text-neutral-400")},m(n,d){O(n,e,d),i(e,t),i(e,r),i(e,a)},p(n,d){d&32&&l!==(l=n[5]("default.page.dashboard.fights.endReached")+"")&&X(t,l)},i:ke,o:ke,d(n){n&&f(e)}}}function St(s){let e,l,t;return l=new gt({props:{decoration:"floating-op1",noInnerShadow:!0,class:"gap-3 border-neutral-100 bg-almostwhite text-black hover:bg-almostwhite dark:border-neutral-800 dark:bg-muted dark:text-white",$$slots:{default:[Tt]},$$scope:{ctx:s}}}),l.$on("click",s[6]),{c(){e=m("div"),H(l.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=v(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","mt-4 flex items-center justify-center")},m(r,a){O(r,e,a),A(l,e,null),t=!0},p(r,a){const n={};a&131108&&(n.$$scope={dirty:a,ctx:r}),l.$set(n)},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),q(l)}}}function Tt(s){let e,l,t=s[5]("default.page.fights.loadMore")+"",r,a,n,d;return e=new $t({props:{fast:!0,class:"-ml-2 -mr-1 h-3 w-5 shadow-xl transition-all duration-500 dark:shadow-gray-200/30 "+(s[2]?"max-h-4 max-w-10 opacity-100":"max-h-0 max-w-0 opacity-0")}}),n=new mt({props:{class:"-mr-2 h-4 w-4"}}),{c(){H(e.$$.fragment),l=C(),r=Q(t),a=C(),H(n.$$.fragment)},l(o){N(e.$$.fragment,o),l=z(o),r=W(o,t),a=z(o),N(n.$$.fragment,o)},m(o,u){A(e,o,u),O(o,l,u),O(o,r,u),O(o,a,u),A(n,o,u),d=!0},p(o,u){const p={};u&4&&(p.class="-ml-2 -mr-1 h-3 w-5 shadow-xl transition-all duration-500 dark:shadow-gray-200/30 "+(o[2]?"max-h-4 max-w-10 opacity-100":"max-h-0 max-w-0 opacity-0")),e.$set(p),(!d||u&32)&&t!==(t=o[5]("default.page.fights.loadMore")+"")&&X(r,t)},i(o){d||(D(e.$$.fragment,o),D(n.$$.fragment,o),d=!0)},o(o){V(e.$$.fragment,o),V(n.$$.fragment,o),d=!1},d(o){o&&(f(l),f(r),f(a)),q(e,o),q(n,o)}}}function Bt(s){let e,l,t,r;const a=[yt,xt],n=[];function d(o,u){return o[1]?1:0}return e=d(s),l=n[e]=a[e](s),{c(){l.c(),t=ye()},l(o){l.l(o),t=ye()},m(o,u){n[e].m(o,u),O(o,t,u),r=!0},p(o,[u]){let p=e;e=d(o),e===p?n[e].p(o,u):($e(),V(n[p],1,1,()=>{n[p]=null}),be(),l=n[e],l?l.p(o,u):(l=n[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){r||(D(l),r=!0)},o(o){V(l),r=!1},d(o){o&&f(t),n[e].d(o)}}}const jt=5;function Ht(s,e,l){let t,r,a;Ee(s,je,c=>l(12,r=c)),Ee(s,He,c=>l(5,a=c));let n=!1,d=!0,o=[],u=1,p=!1,$=!0;const x=async()=>{l(2,d=!0);const c=await xe.collection("fights").getList(u,jt,{filter:`owner = '${r.id}'`,sort:"-updated",expand:"responses"});c.items.length===0&&l(3,p=!0),await ct(1e3),l(8,o=[...o,...c.items]),l(2,d=!1)};dt.subscribe(async()=>{console.log("endDate changed -> fetching data"),l(2,d=!0),await x()});const K=()=>{u++,x()},F=c=>{console.log("gotoFight"),Ne(`/app/fights/${c}`)};Be(async()=>{await x(),console.log("records",o),l(1,n=!0),console.log("$user",r)});function k(c){$=c,l(0,$)}const b=()=>l(0,$=!$);return s.$$.update=()=>{s.$$.dirty&257&&l(4,t=$?o:o.filter(c=>!c.resolved))},[$,n,d,p,t,a,K,F,o,k,b]}class Nt extends ze{constructor(e){super(),Fe(this,e,Ht,Bt,Ce,{})}}function Xe(s,e,l){const t=s.slice();return t[16]=e[l],t}function At(s){let e,l='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute right-0 top-20 z-0 h-[500px] w-[500px] translate-x-1/2 -translate-y-1/2 transform dark:opacity-10"></div>',t,r,a,n,d,o=s[4]("default.page.fights.receivedLinks.heading")+"",u,p,$,x,K,F,k,b,c,y,L=s[4]("default.page.dashboard.fights.table.resolved")+"",S,oe,B,ee=s[4]("default.page.dashboard.fights.table.partner")+"",ie,pe,T,se=s[4]("default.page.dashboard.fights.table.date")+"",ce,J,te,R=s[4]("default.page.dashboard.fights.table.opened")+"",I,G,U,ge,Z,le,re;function ue(E){s[7](E)}let fe={id:"lightMode",class:"scale-75 transform bg-gray-500"};s[1]!==void 0&&(fe.checked=s[1]),x=new ut({props:fe}),lt.push(()=>it(x,"checked",ue)),x.$on("click",s[8]),k=new ht({props:{for:"lightMode",class:"cursor-pointer",$$slots:{default:[Ot]},$$scope:{ctx:s}}});let ae=Re(s[3]),P=[];for(let E=0;E<ae.length;E+=1)P[E]=et(Xe(s,ae,E));const Ie=E=>V(P[E],1,1,()=>{P[E]=null});return{c(){e=m("div"),e.innerHTML=l,t=C(),r=m("div"),a=m("div"),n=m("div"),d=m("h2"),u=Q(o),p=C(),$=m("div"),H(x.$$.fragment),F=C(),H(k.$$.fragment),b=C(),c=m("div"),y=m("div"),S=Q(L),oe=C(),B=m("div"),ie=Q(ee),pe=C(),T=m("div"),ce=Q(se),J=C(),te=m("div"),I=Q(R),G=C(),U=m("div"),ge=C(),Z=m("div"),le=m("div");for(let E=0;E<P.length;E+=1)P[E].c();this.h()},l(E){e=_(E,"DIV",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-osbaoh"&&(e.innerHTML=l),t=z(E),r=_(E,"DIV",{class:!0});var w=v(r);a=_(w,"DIV",{class:!0});var he=v(a);n=_(he,"DIV",{class:!0});var me=v(n);d=_(me,"H2",{class:!0});var j=v(d);u=W(j,o),j.forEach(f),p=z(me),$=_(me,"DIV",{class:!0});var _e=v($);N(x.$$.fragment,_e),F=z(_e),N(k.$$.fragment,_e),_e.forEach(f),me.forEach(f),b=z(he),c=_(he,"DIV",{class:!0});var g=v(c);y=_(g,"DIV",{class:!0});var M=v(y);S=W(M,L),M.forEach(f),oe=z(g),B=_(g,"DIV",{class:!0});var de=v(B);ie=W(de,ee),de.forEach(f),pe=z(g),T=_(g,"DIV",{class:!0});var ve=v(T);ce=W(ve,se),ve.forEach(f),J=z(g),te=_(g,"DIV",{class:!0});var we=v(te);I=W(we,R),we.forEach(f),G=z(g),U=_(g,"DIV",{class:!0}),v(U).forEach(f),g.forEach(f),he.forEach(f),ge=z(w),Z=_(w,"DIV",{class:!0});var Y=v(Z);le=_(Y,"DIV",{});var ne=v(le);for(let De=0;De<P.length;De+=1)P[De].l(ne);ne.forEach(f),Y.forEach(f),w.forEach(f),this.h()},h(){h(e,"class","relative z-0"),h(d,"class","text-md font-bold"),h($,"class","flex items-center gap-1"),h(n,"class","mb-4 flex items-center justify-between"),h(y,"class","w-1/6"),h(B,"class","w-1/3"),h(T,"class","w-1/4"),h(te,"class","w-1/6"),h(U,"class","w-1/6"),h(c,"class","flex items-center text-2xs text-neutral-400"),h(a,"class","rounded-t-xl border-b border-black/5 bg-white/30 dark:bg-neutral-900 px-5 pb-3 pt-4 "),h(Z,"class","rounded-b-xl bg-white/30 dark:bg-neutral-900 px-4 pb-3 pt-2 shadow-2xl shadow-black/10"),h(r,"class","relative z-10 shadow-2xl shadow-black/10")},m(E,w){O(E,e,w),O(E,t,w),O(E,r,w),i(r,a),i(a,n),i(n,d),i(d,u),i(n,p),i(n,$),A(x,$,null),i($,F),A(k,$,null),i(a,b),i(a,c),i(c,y),i(y,S),i(c,oe),i(c,B),i(B,ie),i(c,pe),i(c,T),i(T,ce),i(c,J),i(c,te),i(te,I),i(c,G),i(c,U),i(r,ge),i(r,Z),i(Z,le);for(let he=0;he<P.length;he+=1)P[he]&&P[he].m(le,null);re=!0},p(E,w){(!re||w&16)&&o!==(o=E[4]("default.page.fights.receivedLinks.heading")+"")&&X(u,o);const he={};!K&&w&2&&(K=!0,he.checked=E[1],st(()=>K=!1)),x.$set(he);const me={};if(w&524304&&(me.$$scope={dirty:w,ctx:E}),k.$set(me),(!re||w&16)&&L!==(L=E[4]("default.page.dashboard.fights.table.resolved")+"")&&X(S,L),(!re||w&16)&&ee!==(ee=E[4]("default.page.dashboard.fights.table.partner")+"")&&X(ie,ee),(!re||w&16)&&se!==(se=E[4]("default.page.dashboard.fights.table.date")+"")&&X(ce,se),(!re||w&16)&&R!==(R=E[4]("default.page.dashboard.fights.table.opened")+"")&&X(I,R),w&40){ae=Re(E[3]);let j;for(j=0;j<ae.length;j+=1){const _e=Xe(E,ae,j);P[j]?(P[j].p(_e,w),D(P[j],1)):(P[j]=et(_e),P[j].c(),D(P[j],1),P[j].m(le,null))}for($e(),j=ae.length;j<P.length;j+=1)Ie(j);be()}},i(E){if(!re){D(x.$$.fragment,E),D(k.$$.fragment,E);for(let w=0;w<ae.length;w+=1)D(P[w]);re=!0}},o(E){V(x.$$.fragment,E),V(k.$$.fragment,E),P=P.filter(Boolean);for(let w=0;w<P.length;w+=1)V(P[w]);re=!1},d(E){E&&(f(e),f(t),f(r)),q(x),q(k),at(P,E)}}}function qt(s){let e,l;return e=new ft({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:ke,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Ot(s){let e=s[4]("default.page.fights.displayResolved")+"",l;return{c(){l=Q(e)},l(t){l=W(t,e)},m(t,r){O(t,l,r)},p(t,r){r&16&&e!==(e=t[4]("default.page.fights.displayResolved")+"")&&X(l,e)},d(t){t&&f(l)}}}function Pt(s){let e,l,t;return l=new Le({props:{class:"size-3"}}),{c(){e=m("div"),H(l.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=v(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full p-1 text-2xs text-red-600/80")},m(r,a){O(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),q(l)}}}function Ut(s){let e,l,t;return l=new Me({props:{class:"size-3"}}),{c(){e=m("div"),H(l.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=v(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full p-1 text-2xs text-green-600/80")},m(r,a){O(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),q(l)}}}function Kt(s){let e,l;return e=new Le({props:{class:"h-3 w-3 text-black"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Jt(s){let e,l;return e=new Me({props:{class:"h-3 w-3 text-black"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function et(s){let e,l,t,r,a,n,d=s[16].expand.owner.firstName+"",o,u,p,$=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[16].created))+"",x,K,F,k,b,c,y,L,S,oe,B,ee,ie;const pe=[Ut,Pt],T=[];function se(R,I){return R[16].resolved?0:1}t=se(s),r=T[t]=pe[t](s);const ce=[Jt,Kt],J=[];function te(R,I){return R[16].opened?0:1}return k=te(s),b=J[k]=ce[k](s),S=new pt({props:{class:"h-4 w-4 rounded-full group-hover:bg-neutral-300 group-hover:text-black"}}),{c(){e=m("button"),l=m("div"),r.c(),a=C(),n=m("div"),o=Q(d),u=C(),p=m("div"),x=Q($),K=C(),F=m("div"),b.c(),c=C(),y=m("div"),L=m("div"),H(S.$$.fragment),oe=C(),this.h()},l(R){e=_(R,"BUTTON",{class:!0});var I=v(e);l=_(I,"DIV",{class:!0});var G=v(l);r.l(G),G.forEach(f),a=z(I),n=_(I,"DIV",{class:!0});var U=v(n);o=W(U,d),U.forEach(f),u=z(I),p=_(I,"DIV",{class:!0});var ge=v(p);x=W(ge,$),ge.forEach(f),K=z(I),F=_(I,"DIV",{class:!0});var Z=v(F);b.l(Z),Z.forEach(f),c=z(I),y=_(I,"DIV",{class:!0});var le=v(y);L=_(le,"DIV",{class:!0});var re=v(L);N(S.$$.fragment,re),re.forEach(f),le.forEach(f),oe=z(I),I.forEach(f),this.h()},h(){h(l,"class","flex w-1/6"),h(n,"class","input-fade-right mr-2 w-1/3 overflow-hidden whitespace-nowrap"),h(p,"class","w-1/4"),h(F,"class","w-1/6"),h(L,"class","skeumorphic-button rounded-full p-0.5 svelte-5cv73o"),h(y,"class","flex w-1/6 justify-end"),h(e,"class","group flex w-full items-center border-b border-black/5 py-2 text-left text-xs last:border-b-0 sm:py-3")},m(R,I){O(R,e,I),i(e,l),T[t].m(l,null),i(e,a),i(e,n),i(n,o),i(e,u),i(e,p),i(p,x),i(e,K),i(e,F),J[k].m(F,null),i(e,c),i(e,y),i(y,L),A(S,L,null),i(e,oe),B=!0,ee||(ie=nt(e,"click",function(){ot(s[5](s[16].id))&&s[5](s[16].id).apply(this,arguments)}),ee=!0)},p(R,I){s=R;let G=t;t=se(s),t!==G&&($e(),V(T[G],1,1,()=>{T[G]=null}),be(),r=T[t],r||(r=T[t]=pe[t](s),r.c()),D(r,1),r.m(l,null)),(!B||I&8)&&d!==(d=s[16].expand.owner.firstName+"")&&X(o,d),(!B||I&8)&&$!==($=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[16].created))+"")&&X(x,$);let U=k;k=te(s),k!==U&&($e(),V(J[U],1,1,()=>{J[U]=null}),be(),b=J[k],b||(b=J[k]=ce[k](s),b.c()),D(b,1),b.m(F,null))},i(R){B||(D(r),D(b),D(S.$$.fragment,R),B=!0)},o(R){V(r),V(b),V(S.$$.fragment,R),B=!1},d(R){R&&f(e),T[t].d(),J[k].d(),q(S),ee=!1,ie()}}}function Yt(s){let e,l,t,r,a;const n=[qt,At],d=[];function o(u,p){return u[2]?1:0}return l=o(s),t=d[l]=n[l](s),{c(){e=m("div"),t.c(),this.h()},l(u){e=_(u,"DIV",{class:!0});var p=v(e);t.l(p),p.forEach(f),this.h()},h(){h(e,"class",r=Ze(Ge(s[0],""))+" svelte-5cv73o")},m(u,p){O(u,e,p),d[l].m(e,null),a=!0},p(u,[p]){let $=l;l=o(u),l===$?d[l].p(u,p):($e(),V(d[$],1,1,()=>{d[$]=null}),be(),t=d[l],t?t.p(u,p):(t=d[l]=n[l](u),t.c()),D(t,1),t.m(e,null)),(!a||p&1&&r!==(r=Ze(Ge(u[0],""))+" svelte-5cv73o"))&&h(e,"class",r)},i(u){a||(D(t),a=!0)},o(u){V(t),a=!1},d(u){u&&f(e),d[l].d()}}}function Zt(s,e,l){let t,r,a;Ee(s,je,c=>l(12,r=c)),Ee(s,He,c=>l(4,a=c));let{class:n=void 0}=e,d=!1,o=!0,u=[],p=!0,$=[];const x=async()=>{try{o=!0;const c=await xe.collection("fights").getFullList({filter:`opponent = '${r.id}'`,requestKey:"existingRecords",expand:"owner"});l(6,u=c),console.log("existingRecords",c.map(L=>L.id)),$=$.filter(L=>!c.map(S=>S.id).includes(L)),console.log("openedFights",$);const y=$.map(L=>`owner != '${r.id}' && id = '${L}'`).join(" || ");if(console.log("filterString",y),y){const L=await xe.collection("fights").getFullList({sort:"-created",filter:y,requestKey:"receivedLinks",expand:"owner"});K(L)}await ct(1e3),l(6,u=[...u,...newRecords]),console.log("newRecords",newRecords),o=!1}catch(c){console.error("Error fetching receivedLinksdata",c)}},K=c=>{console.log("transferRecords",c),localStorage.removeItem("openedFights"),c.forEach(async y=>{r.id!==y.owner&&await xe.collection("fights").update(y.id,{opponent:r.id})})};dt.subscribe(async()=>{console.log("endDate changed -> fetching data"),o=!0,await x()});const F=c=>{console.log("gotoFight"),Ne(`/app/fights/${c}/respond`)};Be(async()=>{{const c=localStorage.getItem("openedFights");c&&($=JSON.parse(c))}await x(),l(2,d=!0)});function k(c){p=c,l(1,p)}const b=()=>l(1,p=!p);return s.$$set=c=>{"class"in c&&l(0,n=c.class)},s.$$.update=()=>{s.$$.dirty&66&&l(3,t=p?u:u.filter(c=>!c.resolved))},[n,p,d,t,a,F,u,k,b]}class Gt extends ze{constructor(e){super(),Fe(this,e,Zt,Yt,Ce,{class:0})}}function tt(s){let e,l,t,r,a,n,d=s[1]("default.page.fight.heading")+"",o,u,p,$,x,K,F,k;return l=new wt({}),p=new Gt({props:{class:"mb-14"}}),x=new Nt({}),F=new kt({props:{$$slots:{default:[Xt]},$$scope:{ctx:s}}}),{c(){e=m("div"),H(l.$$.fragment),t=C(),r=m("div"),a=m("div"),n=m("h1"),o=Q(d),u=C(),H(p.$$.fragment),$=C(),H(x.$$.fragment),K=C(),H(F.$$.fragment),this.h()},l(b){e=_(b,"DIV",{class:!0});var c=v(e);N(l.$$.fragment,c),t=z(c),r=_(c,"DIV",{class:!0});var y=v(r);a=_(y,"DIV",{class:!0});var L=v(a);n=_(L,"H1",{class:!0});var S=v(n);o=W(S,d),S.forEach(f),L.forEach(f),u=z(y),N(p.$$.fragment,y),$=z(y),N(x.$$.fragment,y),K=z(y),N(F.$$.fragment,y),y.forEach(f),c.forEach(f),this.h()},h(){h(n,"class","font-heading text-lg font-semibold"),h(a,"class","relative z-10 mb-8 flex flex-row items-start justify-between py-4 md:items-center md:bg-transparent md:pb-6"),h(r,"class","max-container flex-grow pb-40"),h(e,"class","flex h-full flex-grow flex-col justify-between overflow-hidden")},m(b,c){O(b,e,c),A(l,e,null),i(e,t),i(e,r),i(r,a),i(a,n),i(n,o),i(r,u),A(p,r,null),i(r,$),A(x,r,null),i(r,K),A(F,r,null),k=!0},p(b,c){(!k||c&2)&&d!==(d=b[1]("default.page.fight.heading")+"")&&X(o,d);const y={};c&6&&(y.$$scope={dirty:c,ctx:b}),F.$set(y)},i(b){k||(D(l.$$.fragment,b),D(p.$$.fragment,b),D(x.$$.fragment,b),D(F.$$.fragment,b),k=!0)},o(b){V(l.$$.fragment,b),V(p.$$.fragment,b),V(x.$$.fragment,b),V(F.$$.fragment,b),k=!1},d(b){b&&f(e),q(l),q(p),q(x),q(F)}}}function Qt(s){let e,l;return e=new Et({props:{class:"h-4 w-4 rounded-full"}}),{c(){H(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:ke,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Wt(s){let e=s[1]("default.page.fights.create")+"",l,t,r,a;return r=new mt({props:{class:"h-4 w-4"}}),{c(){l=Q(e),t=C(),H(r.$$.fragment)},l(n){l=W(n,e),t=z(n),N(r.$$.fragment,n)},m(n,d){O(n,l,d),O(n,t,d),A(r,n,d),a=!0},p(n,d){(!a||d&2)&&e!==(e=n[1]("default.page.fights.create")+"")&&X(l,e)},i(n){a||(D(r.$$.fragment,n),a=!0)},o(n){V(r.$$.fragment,n),a=!1},d(n){n&&(f(l),f(t)),q(r,n)}}}function Xt(s){let e,l,t,r,a,n,d;return t=new gt({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[Qt]},$$scope:{ctx:s}}}),n=new Dt({props:{class:"flex items-center justify-between gap-10 rounded-full pl-5 pr-3 font-bold text-black dark:shadow-gray-300/30",$$slots:{default:[Wt]},$$scope:{ctx:s}}}),{c(){e=m("div"),l=m("a"),H(t.$$.fragment),r=C(),a=m("a"),H(n.$$.fragment),this.h()},l(o){e=_(o,"DIV",{class:!0});var u=v(e);l=_(u,"A",{href:!0,class:!0});var p=v(l);N(t.$$.fragment,p),p.forEach(f),r=z(u),a=_(u,"A",{href:!0,class:!0});var $=v(a);N(n.$$.fragment,$),$.forEach(f),u.forEach(f),this.h()},h(){h(l,"href","/app/dashboard"),h(l,"class","block"),h(a,"href","/app/fights/create"),h(a,"class","skeumorphic-button-dark inline-block rounded-full mr-1 md:mr-0.5 svelte-ef713u"),h(e,"class","relative flex h-auto items-center justify-between")},m(o,u){O(o,e,u),i(e,l),A(t,l,null),i(e,r),i(e,a),A(n,a,null),d=!0},p(o,u){const p={};u&4&&(p.$$scope={dirty:u,ctx:o}),t.$set(p);const $={};u&6&&($.$$scope={dirty:u,ctx:o}),n.$set($)},i(o){d||(D(t.$$.fragment,o),D(n.$$.fragment,o),d=!0)},o(o){V(t.$$.fragment,o),V(n.$$.fragment,o),d=!1},d(o){o&&f(e),q(t),q(n)}}}function el(s){let e,l,t=s[0]&&tt(s);return{c(){t&&t.c(),e=ye()},l(r){t&&t.l(r),e=ye()},m(r,a){t&&t.m(r,a),O(r,e,a),l=!0},p(r,[a]){r[0]?t?(t.p(r,a),a&1&&D(t,1)):(t=tt(r),t.c(),D(t,1),t.m(e.parentNode,e)):t&&($e(),V(t,1,1,()=>{t=null}),be())},i(r){l||(D(t),l=!0)},o(r){V(t),l=!1},d(r){r&&f(e),t&&t.d(r)}}}function tl(s,e,l){let t,r;return Ee(s,je,a=>l(0,t=a)),Ee(s,He,a=>l(1,r=a)),Be(()=>{t||Ne("/app/auth/login"),bt.set("bg-background")}),[t,r]}class bl extends ze{constructor(e){super(),Fe(this,e,tl,el,Ce,{})}}export{bl as component};
