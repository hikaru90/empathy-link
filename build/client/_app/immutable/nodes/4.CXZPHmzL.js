import{s as G,O as ae,i as P,f as _,r as K,k as H,l as T,u as _e,K as Q,A as Z,e as M,c as R,b as j,v as oe,B as y,C as x,D as ee,a as A,t as O,g as V,d as B,p as C,h as I,J as ve,j as N,L as te,x as be}from"../chunks/scheduler.BGpOBVyA.js";import{S as U,i as W,g as we,b as $,e as ke,t as p,c as b,a as w,m as k,d as D,f as se}from"../chunks/index.wJhSdTM5.js";import{F as De,M as Pe}from"../chunks/form-button.Bt4HIfP4.js";import{g as X,a as re,t as de}from"../chunks/page.BxjNqAN0.js";import{s as Ee}from"../chunks/memoize.DZzCiDwd.js";import{g as Fe,c as Ie,d as Ce,F as ne,z as Ae,C as $e,a as pe,b as ge}from"../chunks/zod.DVU-mH4r.js";import{I as he}from"../chunks/input.Dnbnrzao.js";import{f as Ve}from"../chunks/schema.DicqP0gP.js";import"../chunks/entry.B5Mv6Uxa.js";import{t as fe}from"../chunks/Toaster.svelte_svelte_type_style_lang.B5laX6kM.js";import"../chunks/index.DfSKg4Ih.js";import{R as Me,D as Re,a as je,b as qe,c as Se}from"../chunks/index.B1FcFaw1.js";import{p as Oe}from"../chunks/pocketbase.Ce4YzWbP.js";import{c as ie}from"../chunks/helpers.C2F2lmQ3.js";import{B as Be}from"../chunks/button.C095cpuc.js";import{C as Ne}from"../chunks/Check.G5YLyjQw.js";import{p as Te}from"../chunks/stores.C46p-EcX.js";const ze=n=>({descriptionAttrs:n&4}),ue=n=>({descriptionAttrs:n[2]}),Le=n=>({descriptionAttrs:n&4}),ce=n=>({descriptionAttrs:n[2]});function He(n){let e,s;const t=n[9].default,r=Z(t,n,n[8],ue);let l=[n[2]],o={};for(let a=0;a<l.length;a+=1)o=T(o,l[a]);return{c(){e=M("div"),r&&r.c(),this.h()},l(a){e=R(a,"DIV",{});var f=j(e);r&&r.l(f),f.forEach(_),this.h()},h(){oe(e,o)},m(a,f){P(a,e,f),r&&r.m(e,null),n[10](e),s=!0},p(a,f){r&&r.p&&(!s||f&260)&&y(r,t,a,a[8],s?ee(t,a[8],f,ze):x(a[8]),ue),oe(e,o=X(l,[f&4&&a[2]]))},i(a){s||(p(r,a),s=!0)},o(a){$(r,a),s=!1},d(a){a&&_(e),r&&r.d(a),n[10](null)}}}function Je(n){let e;const s=n[9].default,t=Z(s,n,n[8],ce);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&260)&&y(t,s,r,r[8],e?ee(s,r[8],l,Le):x(r[8]),ce)},i(r){e||(p(t,r),e=!0)},o(r){$(t,r),e=!1},d(r){t&&t.d(r)}}}function Ke(n){let e,s,t,r;const l=[Je,He],o=[];function a(f,i){return f[1]?0:1}return e=a(n),s=o[e]=l[e](n),{c(){s.c(),t=ae()},l(f){s.l(f),t=ae()},m(f,i){o[e].m(f,i),P(f,t,i),r=!0},p(f,[i]){let c=e;e=a(f),e===c?o[e].p(f,i):(we(),$(o[c],1,1,()=>{o[c]=null}),ke(),s=o[e],s?s.p(f,i):(s=o[e]=l[e](f),s.c()),p(s,1),s.m(t.parentNode,t))},i(f){r||(p(s),r=!0)},o(f){$(s),r=!1},d(f){f&&_(t),o[e].d(f)}}}function Ge(n,e,s){let t;const r=["id","asChild","el"];let l=K(e,r),o,a,{$$slots:f={},$$scope:i}=e;const{descriptionId:c,errors:v}=Fe();H(n,c,d=>s(7,a=d)),H(n,v,d=>s(6,o=d));let{id:h=Ce()}=e,{asChild:E=!1}=e,{el:F=void 0}=e;function g(d){Q[d?"unshift":"push"](()=>{F=d,s(0,F)})}return n.$$set=d=>{e=T(T({},e),_e(d)),s(11,l=K(e,r)),"id"in d&&s(5,h=d.id),"asChild"in d&&s(1,E=d.asChild),"el"in d&&s(0,F=d.el),"$$scope"in d&&s(8,i=d.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&c.set(h),s(2,t={id:a,"data-fs-error":Ie(o),"data-fs-description":"",...l})},[F,E,t,c,v,h,o,a,i,f,g]}class Qe extends U{constructor(e){super(),W(this,e,Ge,Ke,G,{id:5,asChild:1,el:0})}}const Ue=n=>({descriptionAttrs:n&16}),me=n=>({descriptionAttrs:n[4]});function We(n){let e;const s=n[2].default,t=Z(s,n,n[3],me);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&24)&&y(t,s,r,r[3],e?ee(s,r[3],l,Ue):x(r[3]),me)},i(r){e||(p(t,r),e=!0)},o(r){$(t,r),e=!1},d(r){t&&t.d(r)}}}function Xe(n){let e,s;const t=[{class:ie("text-[0.8rem] text-muted-foreground",n[0])},n[1]];let r={$$slots:{default:[We,({descriptionAttrs:l})=>({4:l}),({descriptionAttrs:l})=>l?16:0]},$$scope:{ctx:n}};for(let l=0;l<t.length;l+=1)r=T(r,t[l]);return e=new Qe({props:r}),{c(){b(e.$$.fragment)},l(l){w(e.$$.fragment,l)},m(l,o){k(e,l,o),s=!0},p(l,[o]){const a=o&3?X(t,[o&1&&{class:ie("text-[0.8rem] text-muted-foreground",l[0])},o&2&&re(l[1])]):{};o&24&&(a.$$scope={dirty:o,ctx:l}),e.$set(a)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){$(e.$$.fragment,l),s=!1},d(l){D(e,l)}}}function Ye(n,e,s){const t=["class"];let r=K(e,t),{$$slots:l={},$$scope:o}=e,{class:a=void 0}=e;return n.$$set=f=>{e=T(T({},e),_e(f)),s(1,r=K(e,t)),"class"in f&&s(0,a=f.class),"$$scope"in f&&s(3,o=f.$$scope)},[a,r,l,o]}class Ze extends U{constructor(e){super(),W(this,e,Ye,Xe,G,{class:0})}}function ye(n){let e=n[2]("default.page.login.form.email.label")+"",s;return{c(){s=O(e)},l(t){s=B(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.form.email.label")+"")&&N(s,e)},d(t){t&&_(s)}}}function xe(n){let e,s,t,r,l;e=new ge({props:{$$slots:{default:[ye]},$$scope:{ctx:n}}});const o=[n[18],{type:"email"}];function a(i){n[9](i)}let f={};for(let i=0;i<o.length;i+=1)f=T(f,o[i]);return n[3].email!==void 0&&(f.value=n[3].email),t=new he({props:f}),Q.push(()=>se(t,"value",a)),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(i){w(e.$$.fragment,i),s=V(i),w(t.$$.fragment,i)},m(i,c){k(e,i,c),P(i,s,c),k(t,i,c),l=!0},p(i,c){const v={};c&524292&&(v.$$scope={dirty:c,ctx:i}),e.$set(v);const h=c&262144?X(o,[re(i[18]),o[1]]):{};!r&&c&8&&(r=!0,h.value=i[3].email,te(()=>r=!1)),t.$set(h)},i(i){l||(p(e.$$.fragment,i),p(t.$$.fragment,i),l=!0)},o(i){$(e.$$.fragment,i),$(t.$$.fragment,i),l=!1},d(i){i&&_(s),D(e,i),D(t,i)}}}function et(n){let e,s,t,r;return e=new $e({props:{$$slots:{default:[xe,({attrs:l})=>({18:l}),({attrs:l})=>l?262144:0]},$$scope:{ctx:n}}}),t=new pe({}),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(l){w(e.$$.fragment,l),s=V(l),w(t.$$.fragment,l)},m(l,o){k(e,l,o),P(l,s,o),k(t,l,o),r=!0},p(l,o){const a={};o&786444&&(a.$$scope={dirty:o,ctx:l}),e.$set(a)},i(l){r||(p(e.$$.fragment,l),p(t.$$.fragment,l),r=!0)},o(l){$(e.$$.fragment,l),$(t.$$.fragment,l),r=!1},d(l){l&&_(s),D(e,l),D(t,l)}}}function tt(n){let e=n[2]("default.page.login.form.password.label")+"",s;return{c(){s=O(e)},l(t){s=B(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.form.password.label")+"")&&N(s,e)},d(t){t&&_(s)}}}function st(n){let e,s,t,r,l;e=new ge({props:{$$slots:{default:[tt]},$$scope:{ctx:n}}});const o=[n[18],{type:"password"}];function a(i){n[10](i)}let f={};for(let i=0;i<o.length;i+=1)f=T(f,o[i]);return n[3].password!==void 0&&(f.value=n[3].password),t=new he({props:f}),Q.push(()=>se(t,"value",a)),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(i){w(e.$$.fragment,i),s=V(i),w(t.$$.fragment,i)},m(i,c){k(e,i,c),P(i,s,c),k(t,i,c),l=!0},p(i,c){const v={};c&524292&&(v.$$scope={dirty:c,ctx:i}),e.$set(v);const h=c&262144?X(o,[re(i[18]),o[1]]):{};!r&&c&8&&(r=!0,h.value=i[3].password,te(()=>r=!1)),t.$set(h)},i(i){l||(p(e.$$.fragment,i),p(t.$$.fragment,i),l=!0)},o(i){$(e.$$.fragment,i),$(t.$$.fragment,i),l=!1},d(i){i&&_(s),D(e,i),D(t,i)}}}function rt(n){let e,s=n[2]("default.page.login.forgotPassword.question")+"",t,r,l;return{c(){e=M("a"),t=O(s),this.h()},l(o){e=R(o,"A",{role:!0,tabindex:!0,class:!0});var a=j(e);t=B(a,s),a.forEach(_),this.h()},h(){C(e,"role","button"),C(e,"tabindex","0"),C(e,"class","text-sm text-muted-foreground hover:underline")},m(o,a){P(o,e,a),I(e,t),r||(l=be(e,"click",n[11]),r=!0)},p(o,a){a&4&&s!==(s=o[2]("default.page.login.forgotPassword.question")+"")&&N(t,s)},d(o){o&&_(e),r=!1,l()}}}function lt(n){let e,s,t,r,l,o;return e=new $e({props:{$$slots:{default:[st,({attrs:a})=>({18:a}),({attrs:a})=>a?262144:0]},$$scope:{ctx:n}}}),t=new Ze({props:{$$slots:{default:[rt]},$$scope:{ctx:n}}}),l=new pe({}),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment),r=A(),b(l.$$.fragment)},l(a){w(e.$$.fragment,a),s=V(a),w(t.$$.fragment,a),r=V(a),w(l.$$.fragment,a)},m(a,f){k(e,a,f),P(a,s,f),k(t,a,f),P(a,r,f),k(l,a,f),o=!0},p(a,f){const i={};f&786444&&(i.$$scope={dirty:f,ctx:a}),e.$set(i);const c={};f&524294&&(c.$$scope={dirty:f,ctx:a}),t.$set(c)},i(a){o||(p(e.$$.fragment,a),p(t.$$.fragment,a),p(l.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),$(t.$$.fragment,a),$(l.$$.fragment,a),o=!1},d(a){a&&(_(s),_(r)),D(e,a),D(t,a),D(l,a)}}}function at(n){let e=n[2]("default.page.login.cta")+"",s;return{c(){s=O(e)},l(t){s=B(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.cta")+"")&&N(s,e)},d(t){t&&_(s)}}}function ot(n){let e=n[2]("default.page.login.forgotPassword.heading")+"",s;return{c(){s=O(e)},l(t){s=B(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.forgotPassword.heading")+"")&&N(s,e)},d(t){t&&_(s)}}}function nt(n){let e=n[2]("default.page.login.forgotPassword.heading")+"",s,t,r,l;return r=new Ne({props:{class:"text-needs-background"}}),{c(){s=O(e),t=A(),b(r.$$.fragment)},l(o){s=B(o,e),t=V(o),w(r.$$.fragment,o)},m(o,a){P(o,s,a),P(o,t,a),k(r,o,a),l=!0},p(o,a){(!l||a&4)&&e!==(e=o[2]("default.page.login.forgotPassword.heading")+"")&&N(s,e)},i(o){l||(p(r.$$.fragment,o),l=!0)},o(o){$(r.$$.fragment,o),l=!1},d(o){o&&(_(s),_(t)),D(r,o)}}}function ft(n){let e=n[2]("default.page.login.forgotPassword.description")+"",s,t,r,l,o;return l=new Be({props:{class:"flex items-center gap-3 bg-muted-dark",$$slots:{default:[nt]},$$scope:{ctx:n}}}),l.$on("click",n[5]),{c(){s=O(e),t=A(),r=M("div"),b(l.$$.fragment),this.h()},l(a){s=B(a,e),t=V(a),r=R(a,"DIV",{class:!0});var f=j(r);w(l.$$.fragment,f),f.forEach(_),this.h()},h(){C(r,"class","mt-4 flex justify-end")},m(a,f){P(a,s,f),P(a,t,f),P(a,r,f),k(l,r,null),o=!0},p(a,f){(!o||f&4)&&e!==(e=a[2]("default.page.login.forgotPassword.description")+"")&&N(s,e);const i={};f&524292&&(i.$$scope={dirty:f,ctx:a}),l.$set(i)},i(a){o||(p(l.$$.fragment,a),o=!0)},o(a){$(l.$$.fragment,a),o=!1},d(a){a&&(_(s),_(t),_(r)),D(l)}}}function it(n){let e,s,t,r;return e=new qe({props:{class:"mb-10 leading-tight",$$slots:{default:[ot]},$$scope:{ctx:n}}}),t=new Se({props:{$$slots:{default:[ft]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(l){w(e.$$.fragment,l),s=V(l),w(t.$$.fragment,l)},m(l,o){k(e,l,o),P(l,s,o),k(t,l,o),r=!0},p(l,o){const a={};o&524292&&(a.$$scope={dirty:o,ctx:l}),e.$set(a);const f={};o&524292&&(f.$$scope={dirty:o,ctx:l}),t.$set(f)},i(l){r||(p(e.$$.fragment,l),p(t.$$.fragment,l),r=!0)},o(l){$(e.$$.fragment,l),$(t.$$.fragment,l),r=!1},d(l){l&&_(s),D(e,l),D(t,l)}}}function ut(n){let e,s;return e=new je({props:{$$slots:{default:[it]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const l={};r&524292&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function ct(n){let e,s;return e=new Re({props:{$$slots:{default:[ut]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const l={};r&524292&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function mt(n){let e,s,t,r,l,o,a,f=n[2]("default.page.login.switchToRegister")+"",i,c,v,h,E,F,g,d,q;s=new ne({props:{form:n[4],name:"email",$$slots:{default:[et]},$$scope:{ctx:n}}}),r=new ne({props:{form:n[4],name:"password",$$slots:{default:[lt]},$$scope:{ctx:n}}}),v=new De({props:{class:"bg-primary text-muted",$$slots:{default:[at]},$$scope:{ctx:n}}});function L(m){n[12](m)}let S={preventScroll:!1,$$slots:{default:[ct]},$$scope:{ctx:n}};return n[1]!==void 0&&(S.open=n[1]),E=new Me({props:S}),Q.push(()=>se(E,"open",L)),{c(){e=M("form"),b(s.$$.fragment),t=A(),b(r.$$.fragment),l=A(),o=M("div"),a=M("a"),i=O(f),c=A(),b(v.$$.fragment),h=A(),b(E.$$.fragment),this.h()},l(m){e=R(m,"FORM",{method:!0,class:!0});var u=j(e);w(s.$$.fragment,u),t=V(u),w(r.$$.fragment,u),l=V(u),o=R(u,"DIV",{class:!0});var z=j(o);a=R(z,"A",{href:!0,class:!0});var J=j(a);i=B(J,f),J.forEach(_),c=V(z),w(v.$$.fragment,z),z.forEach(_),u.forEach(_),h=V(m),w(E.$$.fragment,m),this.h()},h(){C(a,"href","/app/auth/register"),C(a,"class","text-sm hover:underline"),C(o,"class","flex items-center justify-between"),C(e,"method","POST"),C(e,"class",n[0])},m(m,u){P(m,e,u),k(s,e,null),I(e,t),k(r,e,null),I(e,l),I(e,o),I(o,a),I(a,i),I(o,c),k(v,o,null),P(m,h,u),k(E,m,u),g=!0,d||(q=ve(n[7].call(null,e)),d=!0)},p(m,[u]){const z={};u&524300&&(z.$$scope={dirty:u,ctx:m}),s.$set(z);const J={};u&524302&&(J.$$scope={dirty:u,ctx:m}),r.$set(J),(!g||u&4)&&f!==(f=m[2]("default.page.login.switchToRegister")+"")&&N(i,f);const le={};u&524292&&(le.$$scope={dirty:u,ctx:m}),v.$set(le),(!g||u&1)&&C(e,"class",m[0]);const Y={};u&524292&&(Y.$$scope={dirty:u,ctx:m}),!F&&u&2&&(F=!0,Y.open=m[1],te(()=>F=!1)),E.$set(Y)},i(m){g||(p(s.$$.fragment,m),p(r.$$.fragment,m),p(v.$$.fragment,m),p(E.$$.fragment,m),g=!0)},o(m){$(s.$$.fragment,m),$(r.$$.fragment,m),$(v.$$.fragment,m),$(E.$$.fragment,m),g=!1},d(m){m&&(_(e),_(h)),D(s),D(r),D(v),D(E,m),d=!1,q()}}}function _t(n,e,s){let t,r;H(n,de,u=>s(2,t=u));let{class:l=void 0}=e,{data:o}=e,a=!1;const f=Ee(o,{resetForm:!1,validators:Ae(Ve),onResult:({result:u})=>{console.log("result",u),u.type==="failure"&&fe.error(t("default.page.login.toasts.error")),u.type}}),i=async()=>{s(1,a=!1),await Oe.collection("users").requestPasswordReset(r.email),fe.success(t("default.page.login.forgotPassword.success"))},{form:c,errors:v,enhance:h,delayed:E,message:F,constraints:g,reset:d}=f;H(n,c,u=>s(3,r=u));function q(u){n.$$.not_equal(r.email,u)&&(r.email=u,c.set(r))}function L(u){n.$$.not_equal(r.password,u)&&(r.password=u,c.set(r))}const S=()=>s(1,a=!0);function m(u){a=u,s(1,a)}return n.$$set=u=>{"class"in u&&s(0,l=u.class),"data"in u&&s(8,o=u.data)},[l,a,t,r,f,i,c,h,o,q,L,S,m]}class dt extends U{constructor(e){super(),W(this,e,_t,mt,G,{class:0,data:8})}}function $t(n){let e,s,t=n[1]("default.page.login.verifyMail")+"",r;return{c(){e=M("div"),s=M("div"),r=O(t),this.h()},l(l){e=R(l,"DIV",{class:!0});var o=j(e);s=R(o,"DIV",{class:!0});var a=j(s);r=B(a,t),a.forEach(_),o.forEach(_),this.h()},h(){C(s,"class","text-white"),C(e,"class","max-container relative")},m(l,o){P(l,e,o),I(e,s),I(s,r)},p(l,o){o&2&&t!==(t=l[1]("default.page.login.verifyMail")+"")&&N(r,t)},d(l){l&&_(e)}}}function pt(n){let e,s,t,r,l,o,a,f,i=n[1]("default.page.login.heading")+"",c,v,h,E;t=new Pe({});let F=n[2]&&$t(n);return h=new dt({props:{data:n[0].form,class:"w-full md:w-[400px]"}}),{c(){e=M("div"),s=M("div"),b(t.$$.fragment),r=A(),l=M("div"),o=M("div"),F&&F.c(),a=A(),f=M("h1"),c=O(i),v=A(),b(h.$$.fragment),this.h()},l(g){e=R(g,"DIV",{class:!0});var d=j(e);s=R(d,"DIV",{class:!0});var q=j(s);w(t.$$.fragment,q),r=V(q),l=R(q,"DIV",{class:!0});var L=j(l);o=R(L,"DIV",{class:!0});var S=j(o);F&&F.l(S),a=V(S),f=R(S,"H1",{class:!0});var m=j(f);c=B(m,i),m.forEach(_),v=V(S),w(h.$$.fragment,S),S.forEach(_),L.forEach(_),q.forEach(_),d.forEach(_),this.h()},h(){C(f,"class","font-heading font-bold text-2xl"),C(o,"class","w-full flex flex-col items-center justify-center py-32"),C(l,"class","max-container relative"),C(s,"class","flex-grow"),C(e,"class","flex h-full flex-grow flex-col justify-between")},m(g,d){P(g,e,d),I(e,s),k(t,s,null),I(s,r),I(s,l),I(l,o),F&&F.m(o,null),I(o,a),I(o,f),I(f,c),I(o,v),k(h,o,null),E=!0},p(g,[d]){g[2]&&F.p(g,d),(!E||d&2)&&i!==(i=g[1]("default.page.login.heading")+"")&&N(c,i);const q={};d&1&&(q.data=g[0].form),h.$set(q)},i(g){E||(p(t.$$.fragment,g),p(h.$$.fragment,g),E=!0)},o(g){$(t.$$.fragment,g),$(h.$$.fragment,g),E=!1},d(g){g&&_(e),D(t),F&&F.d(),D(h)}}}function gt(n,e,s){let t,r;H(n,Te,a=>s(3,t=a)),H(n,de,a=>s(1,r=a));let{data:l}=e;const o=t.url.searchParams.get("verifyMail");return console.log("verifyMail",o),console.log("login page"),n.$$set=a=>{"data"in a&&s(0,l=a.data)},[l,r,o]}class St extends U{constructor(e){super(),W(this,e,gt,pt,G,{data:0})}}export{St as component};
