import{t as T,e as ce,u as J,f as me,s as de,w as _e,h as pe}from"../chunks/page.Bd4QL5cq.js";import{s as O,e as y,a as j,c as I,b as S,g as M,f as g,V as K,p as b,i as L,h as $,M as he,k as Q,F as C,t as P,d as x,j as G,W as ve,X as be,E as ge,I as we,Y as $e,O as U,n as ke,A as ye,B as Ie,C as Ee,D as De,G as ne}from"../chunks/scheduler.Clviz5E8.js";import{S as oe,i as ie,t as E,g as R,b as D,f as q,c as H,a as W,m as A,d as B,h as ue,j as fe}from"../chunks/index.C2t9fK9o.js";import{S as Ve,i as je,M as Se}from"../chunks/ResizeObserver.es.V3FZBZeS.js";import{e as Z,g as Me,a as N,S as Le}from"../chunks/helpers.F_hB7tz5.js";import{I as Te}from"../chunks/icon-folder.CBGieXVr.js";import{I as ze,a as Ce,b as He,c as We}from"../chunks/icon-learn.DB5MBh20.js";import{p as Ae}from"../chunks/stores.Qg9DDuR0.js";import{g as Be,o as Fe}from"../chunks/entry.DyrkCWPu.js";import{a as Ne}from"../chunks/button.OZ_DY3bL.js";function ee(n,e,t){const l=n.slice();return l[5]=e[t],l}function te(n){let e,t,l;return t=new Ne({props:{decoration:"dark-op1",class:"border-neutral-700",$$slots:{default:[Oe]},$$scope:{ctx:n}}}),t.$on("click",n[4]),{c(){e=y("div"),H(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=S(e);W(t.$$.fragment,r),r.forEach(g),this.h()},h(){b(e,"class","w-full h-full bg-black/60 absolute top-0 left-0 z-10 flex items-center justify-center")},m(s,r){L(s,e,r),A(t,e,null),l=!0},p(s,r){const a={};r&260&&(a.$$scope={dirty:r,ctx:s}),t.$set(a)},i(s){l||(E(t.$$.fragment,s),l=!0)},o(s){D(t.$$.fragment,s),l=!1},d(s){s&&g(e),B(t)}}}function Oe(n){let e=n[2]("default.page.login.text")+"",t;return{c(){t=P(e)},l(l){t=x(l,e)},m(l,s){L(l,t,s)},p(l,s){s&4&&e!==(e=l[2]("default.page.login.text")+"")&&G(t,e)},d(l){l&&g(t)}}}function le(n){let e,t='<div class="h-1 w-1 rounded-full bg-neon"></div>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(l){e=I(l,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-fxfcox"&&(e.innerHTML=t),this.h()},h(){b(e,"class","absolute -bottom-2 flex justify-center")},m(l,s){L(l,e,s)},d(l){l&&g(e)}}}function ae(n){let e,t=n[2]("default.menu.soon")+"",l;return{c(){e=y("div"),l=P(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=S(e);l=x(r,t),r.forEach(g),this.h()},h(){b(e,"class","absolute bottom-2.5 left-1/3 translate-x-1/2 transform rounded-full bg-red-600 px-1 text-[6px]")},m(s,r){L(s,e,r),$(e,l)},p(s,r){r&4&&t!==(t=s[2]("default.menu.soon")+"")&&G(l,t)},d(s){s&&g(e)}}}function se(n){let e,t,l,s,r=n[5].icon+"",a,u,o=n[5].name+"",i,d,f,w,p=n[3].data.route.includes(n[5].path),V,v,_,m=p&&le(),c=!n[5].available&&ae(n);return{c(){e=y("div"),t=y("a"),l=y("div"),s=new ve(!1),a=j(),u=y("span"),i=P(o),w=j(),m&&m.c(),V=j(),c&&c.c(),v=j(),this.h()},l(h){e=I(h,"DIV",{class:!0});var k=S(e);t=I(k,"A",{href:!0,class:!0});var F=S(t);l=I(F,"DIV",{class:!0});var X=S(l);s=be(X,!1),X.forEach(g),a=M(F),u=I(F,"SPAN",{class:!0});var Y=S(u);i=x(Y,o),Y.forEach(g),F.forEach(g),w=M(k),m&&m.l(k),V=M(k),c&&c.l(k),v=M(k),k.forEach(g),this.h()},h(){s.a=null,b(l,"class","h-6 w-6 fill-white"),b(u,"class","text-2xs lg:mt-2 lg:text-xs"),b(t,"href",d=n[5].path),b(t,"class",f="flex flex-col items-center justify-center "+(n[5].available?"":"pointer-events-none")),b(e,"class",_="relative flex flex-col items-center justify-center "+(n[5].available?"":"opacity-40")+" last:mr-2")},m(h,k){L(h,e,k),$(e,t),$(t,l),s.m(r,l),$(t,a),$(t,u),$(u,i),$(e,w),m&&m.m(e,null),$(e,V),c&&c.m(e,null),$(e,v)},p(h,k){k&2&&r!==(r=h[5].icon+"")&&s.p(r),k&2&&o!==(o=h[5].name+"")&&G(i,o),k&2&&d!==(d=h[5].path)&&b(t,"href",d),k&2&&f!==(f="flex flex-col items-center justify-center "+(h[5].available?"":"pointer-events-none"))&&b(t,"class",f),k&10&&(p=h[3].data.route.includes(h[5].path)),p?m||(m=le(),m.c(),m.m(e,V)):m&&(m.d(1),m=null),h[5].available?c&&(c.d(1),c=null):c?c.p(h,k):(c=ae(h),c.c(),c.m(e,v)),k&2&&_!==(_="relative flex flex-col items-center justify-center "+(h[5].available?"":"opacity-40")+" last:mr-2")&&b(e,"class",_)},d(h){h&&g(e),m&&m.d(),c&&c.d()}}}function Pe(n){let e,t,l,s,r,a,u,o,i,d,f,w,p=!n[0]&&te(n),V=Z(n[1]),v=[];for(let _=0;_<V.length;_+=1)v[_]=se(ee(n,V,_));return{c(){e=y("div"),p&&p.c(),t=j(),l=y("img"),r=j(),a=y("img"),o=j(),i=y("div"),d=j(),f=y("div");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){e=I(_,"DIV",{class:!0});var m=S(e);p&&p.l(m),t=M(m),l=I(m,"IMG",{src:!0,alt:!0,class:!0}),r=M(m),a=I(m,"IMG",{src:!0,alt:!0,class:!0}),o=M(m),i=I(m,"DIV",{class:!0}),S(i).forEach(g),d=M(m),f=I(m,"DIV",{class:!0});var c=S(f);for(let h=0;h<v.length;h+=1)v[h].l(c);c.forEach(g),m.forEach(g),this.h()},h(){K(l.src,s="/inverted-border.svg")||b(l,"src",s),b(l,"alt",""),b(l,"class","absolute left-0 top-0 w-5 -translate-y-full transform"),K(a.src,u="/inverted-border.svg")||b(a,"src",u),b(a,"alt",""),b(a,"class","absolute right-0 top-0 w-5 -translate-y-full -rotate-90 transform"),b(i,"class","absolute left-0 top-0 h-[0.5px] w-full -translate-y-full transform bg-black"),b(f,"class","flex items-center justify-around"),b(e,"class","fixed bottom-0 left-0 z-[1002] w-full bg-black px-4 pb-4 pt-2 text-gray-200")},m(_,m){L(_,e,m),p&&p.m(e,null),$(e,t),$(e,l),$(e,r),$(e,a),$(e,o),$(e,i),$(e,d),$(e,f);for(let c=0;c<v.length;c+=1)v[c]&&v[c].m(f,null);w=!0},p(_,[m]){if(_[0]?p&&(R(),D(p,1,1,()=>{p=null}),q()):p?(p.p(_,m),m&1&&E(p,1)):(p=te(_),p.c(),E(p,1),p.m(e,t)),m&14){V=Z(_[1]);let c;for(c=0;c<V.length;c+=1){const h=ee(_,V,c);v[c]?v[c].p(h,m):(v[c]=se(h),v[c].c(),v[c].m(f,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=V.length}},i(_){w||(E(p),w=!0)},o(_){D(p),w=!1},d(_){_&&g(e),p&&p.d(),he(v,_)}}}function xe(n,e,t){let l,s;Q(n,T,o=>t(2,l=o)),Q(n,Ae,o=>t(3,s=o));let{user:r}=e,a=[{slug:"home",name:C(T)("default.menu.bar.home"),path:"/app/dashboard",icon:Te,available:!0},{slug:"selfempathy",name:C(T)("default.menu.bar.selfempathy"),path:"/app/selfempathy",icon:ze,available:!1},{slug:"fights",name:C(T)("default.menu.bar.fights"),path:"/app/fights",icon:Ce,available:!0},{slug:"feedback",name:C(T)("default.menu.bar.feedback"),path:"/app/feedback",icon:He,available:!1},{slug:"learn",name:C(T)("default.menu.bar.learn"),path:"/app/learn",icon:We,available:!1}];T.subscribe(o=>{const i=a.map(d=>{const f=o(`default.menu.bar.${d.slug}`);return d.name=f,d});t(1,a=[...i])});const u=()=>Be("/app/auth/login");return n.$$set=o=>{"user"in o&&t(0,r=o.user)},[r,a,l,s,u]}class Ge extends oe{constructor(e){super(),ie(this,e,xe,Pe,O,{user:0})}}const Re=async({url:n,data:e})=>(await ce(e.locale,n.pathname),e.user?J.set(e.user):J.set(void 0),console.log("layout.ts values - locals:",e),console.log("layout.ts values - user:",e.user),{locale:e.locale,route:n.pathname,user:e.user}),nt=Object.freeze(Object.defineProperty({__proto__:null,load:Re},Symbol.toStringTag,{value:"Module"}));function qe(n){let e,t,l,s,r,a,u,o;t=new Se({});const i=n[3].default,d=ye(i,n,n[2],null);return u=new Ge({props:{user:n[0].user}}),{c(){e=y("div"),H(t.$$.fragment),l=j(),d&&d.c(),a=j(),H(u.$$.fragment),this.h()},l(f){e=I(f,"DIV",{class:!0});var w=S(e);W(t.$$.fragment,w),l=M(w),d&&d.l(w),w.forEach(g),a=M(f),W(u.$$.fragment,f),this.h()},h(){b(e,"class","app/layout bg-background min-h-svh")},m(f,w){L(f,e,w),A(t,e,null),$(e,l),d&&d.m(e,null),L(f,a,w),A(u,f,w),o=!0},p(f,w){n=f,d&&d.p&&(!o||w&4)&&Ie(d,i,n,n[2],o?De(i,n[2],w,null):Ee(n[2]),null);const p={};w&1&&(p.user=n[0].user),u.$set(p)},i(f){o||(E(t.$$.fragment,f),E(d,f),f&&ne(()=>{o&&(r&&r.end(1),s=ue(e,N,{duration:z,delay:z}),s.start())}),E(u.$$.fragment,f),o=!0)},o(f){D(t.$$.fragment,f),D(d,f),s&&s.invalidate(),f&&(r=fe(e,N,{duration:z})),D(u.$$.fragment,f),o=!1},d(f){f&&(g(e),g(a)),B(t),d&&d.d(f),f&&r&&r.end(),B(u,f)}}}function Xe(n){let e,t,l,s,r;return t=new Le({props:{fast:!0,class:"h-6 w-16 shadow-xl dark:shadow-gray-200/30"}}),{c(){e=y("div"),H(t.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0});var u=S(e);W(t.$$.fragment,u),u.forEach(g),this.h()},h(){b(e,"class","flex items-center justify-center h-svh")},m(a,u){L(a,e,u),A(t,e,null),r=!0},p(a,u){},i(a){r||(E(t.$$.fragment,a),a&&ne(()=>{r&&(s&&s.end(1),l=ue(e,N,{duration:z,delay:z}),l.start())}),r=!0)},o(a){D(t.$$.fragment,a),l&&l.invalidate(),a&&(s=fe(e,N,{duration:z})),r=!1},d(a){a&&g(e),B(t),a&&s&&s.end()}}}function re(n){let e,t,l,s;const r=[Xe,qe],a=[];function u(o,i){return o[1]?1:0}return e=u(n),t=a[e]=r[e](n),{c(){t.c(),l=U()},l(o){t.l(o),l=U()},m(o,i){a[e].m(o,i),L(o,l,i),s=!0},p(o,i){let d=e;e=u(o),e===d?a[e].p(o,i):(R(),D(a[d],1,1,()=>{a[d]=null}),q(),t=a[e],t?t.p(o,i):(t=a[e]=r[e](o),t.c()),E(t,1),t.m(l.parentNode,l))},i(o){s||(E(t),s=!0)},o(o){D(t),s=!1},d(o){o&&g(l),a[e].d(o)}}}function Ye(n){let e=n[0].url,t,l,s,r=re(n);return l=new Ve({}),{c(){r.c(),t=j(),H(l.$$.fragment)},l(a){r.l(a),t=M(a),W(l.$$.fragment,a)},m(a,u){r.m(a,u),L(a,t,u),A(l,a,u),s=!0},p(a,[u]){u&1&&O(e,e=a[0].url)?(R(),D(r,1,1,ke),q(),r=re(a),r.c(),E(r,1),r.m(t.parentNode,t)):r.p(a,u)},i(a){s||(E(r),E(l.$$.fragment,a),s=!0)},o(a){D(r),D(l.$$.fragment,a),s=!1},d(a){a&&g(t),r.d(a),B(l,a)}}}const z=400;function Je(n,e,t){let{$$slots:l={},$$scope:s}=e;window.ResizeObserver=je;let{data:r}=e,a=!1;console.log("+layout.svelte - user:",r.user);const u=i=>{de.set(i.target.scrollTop)},o=()=>{const i=Me();_e.set(window.innerWidth-i),pe.set(window.innerHeight)};return we(()=>{var i;o(),t(1,a=!0),(i=document.getElementById("scrollContainer"))==null||i.addEventListener("scroll",u),window==null||window.addEventListener("resize",o),me.set("bg-black")}),Fe(i=>{if(document.startViewTransition)return new Promise(d=>{document.startViewTransition(async()=>{d(),await i.complete})})}),$e(()=>{var i;(i=document.getElementById("scrollContainer"))==null||i.removeEventListener("scroll",u),window==null||window.removeEventListener("resize",o)}),n.$$set=i=>{"data"in i&&t(0,r=i.data),"$$scope"in i&&t(2,s=i.$$scope)},[r,a,s,l]}class ot extends oe{constructor(e){super(),ie(this,e,Je,Ye,O,{data:0})}}export{ot as component,nt as universal};
