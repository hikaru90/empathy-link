import{s as K,v as le,i as P,f as _,r as J,k as L,l as T,u as _e,L as Q,G as Z,e as V,c as R,b as j,B as oe,H as y,I as x,J as ee,a as A,t as B,g as M,d as N,p as C,h as F,K as ve,j as O,M as te,D as be}from"../chunks/scheduler.BmBrB_dT.js";import{S as U,i as W,g as we,t as $,c as ke,a as g,b,d as w,m as k,e as D,f as se}from"../chunks/index.BQZQ5DB3.js";import{F as De,M as Pe}from"../chunks/form-button.CNyopK56.js";import{g as X,c as ne,a as re,t as de}from"../chunks/helpers.g8wrkI0H.js";import{s as Ie}from"../chunks/memoize.BzJ9-avW.js";import{g as Ee,d as Fe,e as Ce,F as fe,z as Ae,C as $e,a as ge,b as pe}from"../chunks/zod.B5pDC7Hl.js";import{I as he}from"../chunks/input.QcM6aL-y.js";import{f as Me}from"../chunks/schema.Dzw43gaf.js";import"../chunks/entry.DnNy0IhO.js";import{t as ie}from"../chunks/Toaster.svelte_svelte_type_style_lang.CqHcWxsp.js";import"../chunks/switch.fB03Cpk5.js";import{R as Ve,D as Re,a as je,b as qe,c as Se}from"../chunks/index.CRAHlQQo.js";import{p as Be}from"../chunks/pocketbase.Ce4YzWbP.js";import{B as Ne}from"../chunks/button.BlP37tcM.js";import{C as Oe}from"../chunks/Check.CFBCV6Q5.js";import{p as Te}from"../chunks/stores.BdCL2gQQ.js";const ze=n=>({descriptionAttrs:n&4}),ue=n=>({descriptionAttrs:n[2]}),He=n=>({descriptionAttrs:n&4}),ce=n=>({descriptionAttrs:n[2]});function Le(n){let e,s;const t=n[9].default,r=Z(t,n,n[8],ue);let a=[n[2]],o={};for(let l=0;l<a.length;l+=1)o=T(o,a[l]);return{c(){e=V("div"),r&&r.c(),this.h()},l(l){e=R(l,"DIV",{});var f=j(e);r&&r.l(f),f.forEach(_),this.h()},h(){oe(e,o)},m(l,f){P(l,e,f),r&&r.m(e,null),n[10](e),s=!0},p(l,f){r&&r.p&&(!s||f&260)&&y(r,t,l,l[8],s?ee(t,l[8],f,ze):x(l[8]),ue),oe(e,o=X(a,[f&4&&l[2]]))},i(l){s||(g(r,l),s=!0)},o(l){$(r,l),s=!1},d(l){l&&_(e),r&&r.d(l),n[10](null)}}}function Ge(n){let e;const s=n[9].default,t=Z(s,n,n[8],ce);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,a){t&&t.p&&(!e||a&260)&&y(t,s,r,r[8],e?ee(s,r[8],a,He):x(r[8]),ce)},i(r){e||(g(t,r),e=!0)},o(r){$(t,r),e=!1},d(r){t&&t.d(r)}}}function Je(n){let e,s,t,r;const a=[Ge,Le],o=[];function l(f,i){return f[1]?0:1}return e=l(n),s=o[e]=a[e](n),{c(){s.c(),t=le()},l(f){s.l(f),t=le()},m(f,i){o[e].m(f,i),P(f,t,i),r=!0},p(f,[i]){let c=e;e=l(f),e===c?o[e].p(f,i):(we(),$(o[c],1,1,()=>{o[c]=null}),ke(),s=o[e],s?s.p(f,i):(s=o[e]=a[e](f),s.c()),g(s,1),s.m(t.parentNode,t))},i(f){r||(g(s),r=!0)},o(f){$(s),r=!1},d(f){f&&_(t),o[e].d(f)}}}function Ke(n,e,s){let t;const r=["id","asChild","el"];let a=J(e,r),o,l,{$$slots:f={},$$scope:i}=e;const{descriptionId:c,errors:v}=Ee();L(n,c,d=>s(7,l=d)),L(n,v,d=>s(6,o=d));let{id:h=Ce()}=e,{asChild:I=!1}=e,{el:E=void 0}=e;function p(d){Q[d?"unshift":"push"](()=>{E=d,s(0,E)})}return n.$$set=d=>{e=T(T({},e),_e(d)),s(11,a=J(e,r)),"id"in d&&s(5,h=d.id),"asChild"in d&&s(1,I=d.asChild),"el"in d&&s(0,E=d.el),"$$scope"in d&&s(8,i=d.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&c.set(h),s(2,t={id:l,"data-fs-error":Fe(o),"data-fs-description":"",...a})},[E,I,t,c,v,h,o,l,i,f,p]}class Qe extends U{constructor(e){super(),W(this,e,Ke,Je,K,{id:5,asChild:1,el:0})}}const Ue=n=>({descriptionAttrs:n&16}),me=n=>({descriptionAttrs:n[4]});function We(n){let e;const s=n[2].default,t=Z(s,n,n[3],me);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,a){t&&t.p&&(!e||a&24)&&y(t,s,r,r[3],e?ee(s,r[3],a,Ue):x(r[3]),me)},i(r){e||(g(t,r),e=!0)},o(r){$(t,r),e=!1},d(r){t&&t.d(r)}}}function Xe(n){let e,s;const t=[{class:ne("text-[0.8rem] text-muted-foreground",n[0])},n[1]];let r={$$slots:{default:[We,({descriptionAttrs:a})=>({4:a}),({descriptionAttrs:a})=>a?16:0]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)r=T(r,t[a]);return e=new Qe({props:r}),{c(){b(e.$$.fragment)},l(a){w(e.$$.fragment,a)},m(a,o){k(e,a,o),s=!0},p(a,[o]){const l=o&3?X(t,[o&1&&{class:ne("text-[0.8rem] text-muted-foreground",a[0])},o&2&&re(a[1])]):{};o&24&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){s||(g(e.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),s=!1},d(a){D(e,a)}}}function Ye(n,e,s){const t=["class"];let r=J(e,t),{$$slots:a={},$$scope:o}=e,{class:l=void 0}=e;return n.$$set=f=>{e=T(T({},e),_e(f)),s(1,r=J(e,t)),"class"in f&&s(0,l=f.class),"$$scope"in f&&s(3,o=f.$$scope)},[l,r,a,o]}class Ze extends U{constructor(e){super(),W(this,e,Ye,Xe,K,{class:0})}}function ye(n){let e=n[2]("default.page.login.form.email.label")+"",s;return{c(){s=B(e)},l(t){s=N(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.form.email.label")+"")&&O(s,e)},d(t){t&&_(s)}}}function xe(n){let e,s,t,r,a;e=new pe({props:{$$slots:{default:[ye]},$$scope:{ctx:n}}});const o=[n[18],{type:"email"}];function l(i){n[9](i)}let f={};for(let i=0;i<o.length;i+=1)f=T(f,o[i]);return n[3].email!==void 0&&(f.value=n[3].email),t=new he({props:f}),Q.push(()=>se(t,"value",l)),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(i){w(e.$$.fragment,i),s=M(i),w(t.$$.fragment,i)},m(i,c){k(e,i,c),P(i,s,c),k(t,i,c),a=!0},p(i,c){const v={};c&524292&&(v.$$scope={dirty:c,ctx:i}),e.$set(v);const h=c&262144?X(o,[re(i[18]),o[1]]):{};!r&&c&8&&(r=!0,h.value=i[3].email,te(()=>r=!1)),t.$set(h)},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),a=!0)},o(i){$(e.$$.fragment,i),$(t.$$.fragment,i),a=!1},d(i){i&&_(s),D(e,i),D(t,i)}}}function et(n){let e,s,t,r;return e=new $e({props:{$$slots:{default:[xe,({attrs:a})=>({18:a}),({attrs:a})=>a?262144:0]},$$scope:{ctx:n}}}),t=new ge({}),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(a){w(e.$$.fragment,a),s=M(a),w(t.$$.fragment,a)},m(a,o){k(e,a,o),P(a,s,o),k(t,a,o),r=!0},p(a,o){const l={};o&786444&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){$(e.$$.fragment,a),$(t.$$.fragment,a),r=!1},d(a){a&&_(s),D(e,a),D(t,a)}}}function tt(n){let e=n[2]("default.page.login.form.password.label")+"",s;return{c(){s=B(e)},l(t){s=N(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.form.password.label")+"")&&O(s,e)},d(t){t&&_(s)}}}function st(n){let e,s,t,r,a;e=new pe({props:{$$slots:{default:[tt]},$$scope:{ctx:n}}});const o=[n[18],{type:"password"}];function l(i){n[10](i)}let f={};for(let i=0;i<o.length;i+=1)f=T(f,o[i]);return n[3].password!==void 0&&(f.value=n[3].password),t=new he({props:f}),Q.push(()=>se(t,"value",l)),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(i){w(e.$$.fragment,i),s=M(i),w(t.$$.fragment,i)},m(i,c){k(e,i,c),P(i,s,c),k(t,i,c),a=!0},p(i,c){const v={};c&524292&&(v.$$scope={dirty:c,ctx:i}),e.$set(v);const h=c&262144?X(o,[re(i[18]),o[1]]):{};!r&&c&8&&(r=!0,h.value=i[3].password,te(()=>r=!1)),t.$set(h)},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),a=!0)},o(i){$(e.$$.fragment,i),$(t.$$.fragment,i),a=!1},d(i){i&&_(s),D(e,i),D(t,i)}}}function rt(n){let e,s=n[2]("default.page.login.forgotPassword.question")+"",t,r,a;return{c(){e=V("a"),t=B(s),this.h()},l(o){e=R(o,"A",{role:!0,tabindex:!0,class:!0});var l=j(e);t=N(l,s),l.forEach(_),this.h()},h(){C(e,"role","button"),C(e,"tabindex","0"),C(e,"class","text-sm text-muted-foreground hover:underline")},m(o,l){P(o,e,l),F(e,t),r||(a=be(e,"click",n[11]),r=!0)},p(o,l){l&4&&s!==(s=o[2]("default.page.login.forgotPassword.question")+"")&&O(t,s)},d(o){o&&_(e),r=!1,a()}}}function at(n){let e,s,t,r,a,o;return e=new $e({props:{$$slots:{default:[st,({attrs:l})=>({18:l}),({attrs:l})=>l?262144:0]},$$scope:{ctx:n}}}),t=new Ze({props:{$$slots:{default:[rt]},$$scope:{ctx:n}}}),a=new ge({}),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment),r=A(),b(a.$$.fragment)},l(l){w(e.$$.fragment,l),s=M(l),w(t.$$.fragment,l),r=M(l),w(a.$$.fragment,l)},m(l,f){k(e,l,f),P(l,s,f),k(t,l,f),P(l,r,f),k(a,l,f),o=!0},p(l,f){const i={};f&786444&&(i.$$scope={dirty:f,ctx:l}),e.$set(i);const c={};f&524294&&(c.$$scope={dirty:f,ctx:l}),t.$set(c)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),g(a.$$.fragment,l),o=!0)},o(l){$(e.$$.fragment,l),$(t.$$.fragment,l),$(a.$$.fragment,l),o=!1},d(l){l&&(_(s),_(r)),D(e,l),D(t,l),D(a,l)}}}function lt(n){let e=n[2]("default.page.login.cta")+"",s;return{c(){s=B(e)},l(t){s=N(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.cta")+"")&&O(s,e)},d(t){t&&_(s)}}}function ot(n){let e=n[2]("default.page.login.forgotPassword.heading")+"",s;return{c(){s=B(e)},l(t){s=N(t,e)},m(t,r){P(t,s,r)},p(t,r){r&4&&e!==(e=t[2]("default.page.login.forgotPassword.heading")+"")&&O(s,e)},d(t){t&&_(s)}}}function nt(n){let e=n[2]("default.page.login.forgotPassword.heading")+"",s,t,r,a;return r=new Oe({props:{class:"text-needs-background"}}),{c(){s=B(e),t=A(),b(r.$$.fragment)},l(o){s=N(o,e),t=M(o),w(r.$$.fragment,o)},m(o,l){P(o,s,l),P(o,t,l),k(r,o,l),a=!0},p(o,l){(!a||l&4)&&e!==(e=o[2]("default.page.login.forgotPassword.heading")+"")&&O(s,e)},i(o){a||(g(r.$$.fragment,o),a=!0)},o(o){$(r.$$.fragment,o),a=!1},d(o){o&&(_(s),_(t)),D(r,o)}}}function ft(n){let e=n[2]("default.page.login.forgotPassword.description")+"",s,t,r,a,o;return a=new Ne({props:{class:"flex items-center gap-3 bg-muted-dark",$$slots:{default:[nt]},$$scope:{ctx:n}}}),a.$on("click",n[5]),{c(){s=B(e),t=A(),r=V("div"),b(a.$$.fragment),this.h()},l(l){s=N(l,e),t=M(l),r=R(l,"DIV",{class:!0});var f=j(r);w(a.$$.fragment,f),f.forEach(_),this.h()},h(){C(r,"class","mt-4 flex justify-end")},m(l,f){P(l,s,f),P(l,t,f),P(l,r,f),k(a,r,null),o=!0},p(l,f){(!o||f&4)&&e!==(e=l[2]("default.page.login.forgotPassword.description")+"")&&O(s,e);const i={};f&524292&&(i.$$scope={dirty:f,ctx:l}),a.$set(i)},i(l){o||(g(a.$$.fragment,l),o=!0)},o(l){$(a.$$.fragment,l),o=!1},d(l){l&&(_(s),_(t),_(r)),D(a)}}}function it(n){let e,s,t,r;return e=new qe({props:{class:"mb-10 leading-tight",$$slots:{default:[ot]},$$scope:{ctx:n}}}),t=new Se({props:{$$slots:{default:[ft]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment),s=A(),b(t.$$.fragment)},l(a){w(e.$$.fragment,a),s=M(a),w(t.$$.fragment,a)},m(a,o){k(e,a,o),P(a,s,o),k(t,a,o),r=!0},p(a,o){const l={};o&524292&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const f={};o&524292&&(f.$$scope={dirty:o,ctx:a}),t.$set(f)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){$(e.$$.fragment,a),$(t.$$.fragment,a),r=!1},d(a){a&&_(s),D(e,a),D(t,a)}}}function ut(n){let e,s;return e=new je({props:{$$slots:{default:[it]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const a={};r&524292&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function ct(n){let e,s;return e=new Re({props:{$$slots:{default:[ut]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const a={};r&524292&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){D(e,t)}}}function mt(n){let e,s,t,r,a,o,l,f=n[2]("default.page.login.switchToRegister")+"",i,c,v,h,I,E,p,d,q;s=new fe({props:{form:n[4],name:"email",$$slots:{default:[et]},$$scope:{ctx:n}}}),r=new fe({props:{form:n[4],name:"password",$$slots:{default:[at]},$$scope:{ctx:n}}}),v=new De({props:{class:"bg-primary text-muted",$$slots:{default:[lt]},$$scope:{ctx:n}}});function H(m){n[12](m)}let S={preventScroll:!1,$$slots:{default:[ct]},$$scope:{ctx:n}};return n[1]!==void 0&&(S.open=n[1]),I=new Ve({props:S}),Q.push(()=>se(I,"open",H)),{c(){e=V("form"),b(s.$$.fragment),t=A(),b(r.$$.fragment),a=A(),o=V("div"),l=V("a"),i=B(f),c=A(),b(v.$$.fragment),h=A(),b(I.$$.fragment),this.h()},l(m){e=R(m,"FORM",{method:!0,class:!0});var u=j(e);w(s.$$.fragment,u),t=M(u),w(r.$$.fragment,u),a=M(u),o=R(u,"DIV",{class:!0});var z=j(o);l=R(z,"A",{href:!0,class:!0});var G=j(l);i=N(G,f),G.forEach(_),c=M(z),w(v.$$.fragment,z),z.forEach(_),u.forEach(_),h=M(m),w(I.$$.fragment,m),this.h()},h(){C(l,"href","/app/auth/register"),C(l,"class","text-sm hover:underline"),C(o,"class","flex items-center justify-between"),C(e,"method","POST"),C(e,"class",n[0])},m(m,u){P(m,e,u),k(s,e,null),F(e,t),k(r,e,null),F(e,a),F(e,o),F(o,l),F(l,i),F(o,c),k(v,o,null),P(m,h,u),k(I,m,u),p=!0,d||(q=ve(n[7].call(null,e)),d=!0)},p(m,[u]){const z={};u&524300&&(z.$$scope={dirty:u,ctx:m}),s.$set(z);const G={};u&524302&&(G.$$scope={dirty:u,ctx:m}),r.$set(G),(!p||u&4)&&f!==(f=m[2]("default.page.login.switchToRegister")+"")&&O(i,f);const ae={};u&524292&&(ae.$$scope={dirty:u,ctx:m}),v.$set(ae),(!p||u&1)&&C(e,"class",m[0]);const Y={};u&524292&&(Y.$$scope={dirty:u,ctx:m}),!E&&u&2&&(E=!0,Y.open=m[1],te(()=>E=!1)),I.$set(Y)},i(m){p||(g(s.$$.fragment,m),g(r.$$.fragment,m),g(v.$$.fragment,m),g(I.$$.fragment,m),p=!0)},o(m){$(s.$$.fragment,m),$(r.$$.fragment,m),$(v.$$.fragment,m),$(I.$$.fragment,m),p=!1},d(m){m&&(_(e),_(h)),D(s),D(r),D(v),D(I,m),d=!1,q()}}}function _t(n,e,s){let t,r;L(n,de,u=>s(2,t=u));let{class:a=void 0}=e,{data:o}=e,l=!1;const f=Ie(o,{resetForm:!1,validators:Ae(Me),onResult:({result:u})=>{console.log("result",u),u.type==="failure"&&ie.error(t("default.page.login.toasts.error")),u.type}}),i=async()=>{s(1,l=!1),await Be.collection("users").requestPasswordReset(r.email),ie.success(t("default.page.login.forgotPassword.success"))},{form:c,errors:v,enhance:h,delayed:I,message:E,constraints:p,reset:d}=f;L(n,c,u=>s(3,r=u));function q(u){n.$$.not_equal(r.email,u)&&(r.email=u,c.set(r))}function H(u){n.$$.not_equal(r.password,u)&&(r.password=u,c.set(r))}const S=()=>s(1,l=!0);function m(u){l=u,s(1,l)}return n.$$set=u=>{"class"in u&&s(0,a=u.class),"data"in u&&s(8,o=u.data)},[a,l,t,r,f,i,c,h,o,q,H,S,m]}class dt extends U{constructor(e){super(),W(this,e,_t,mt,K,{class:0,data:8})}}function $t(n){let e,s,t=n[1]("default.page.login.verifyMail")+"",r;return{c(){e=V("div"),s=V("div"),r=B(t),this.h()},l(a){e=R(a,"DIV",{class:!0});var o=j(e);s=R(o,"DIV",{class:!0});var l=j(s);r=N(l,t),l.forEach(_),o.forEach(_),this.h()},h(){C(s,"class","text-white"),C(e,"class","max-container relative")},m(a,o){P(a,e,o),F(e,s),F(s,r)},p(a,o){o&2&&t!==(t=a[1]("default.page.login.verifyMail")+"")&&O(r,t)},d(a){a&&_(e)}}}function gt(n){let e,s,t,r,a,o,l,f,i=n[1]("default.page.login.heading")+"",c,v,h,I;t=new Pe({});let E=n[2]&&$t(n);return h=new dt({props:{data:n[0].form,class:"w-full max-w-[400px]"}}),{c(){e=V("div"),s=V("div"),b(t.$$.fragment),r=A(),a=V("div"),o=V("div"),E&&E.c(),l=A(),f=V("h1"),c=B(i),v=A(),b(h.$$.fragment),this.h()},l(p){e=R(p,"DIV",{class:!0});var d=j(e);s=R(d,"DIV",{class:!0});var q=j(s);w(t.$$.fragment,q),r=M(q),a=R(q,"DIV",{class:!0});var H=j(a);o=R(H,"DIV",{class:!0});var S=j(o);E&&E.l(S),l=M(S),f=R(S,"H1",{class:!0});var m=j(f);c=N(m,i),m.forEach(_),v=M(S),w(h.$$.fragment,S),S.forEach(_),H.forEach(_),q.forEach(_),d.forEach(_),this.h()},h(){C(f,"class","font-heading font-bold text-2xl"),C(o,"class","w-full flex flex-col items-center justify-center py-32"),C(a,"class","max-container relative"),C(s,"class","flex-grow"),C(e,"class","flex h-full flex-grow flex-col justify-between")},m(p,d){P(p,e,d),F(e,s),k(t,s,null),F(s,r),F(s,a),F(a,o),E&&E.m(o,null),F(o,l),F(o,f),F(f,c),F(o,v),k(h,o,null),I=!0},p(p,[d]){p[2]&&E.p(p,d),(!I||d&2)&&i!==(i=p[1]("default.page.login.heading")+"")&&O(c,i);const q={};d&1&&(q.data=p[0].form),h.$set(q)},i(p){I||(g(t.$$.fragment,p),g(h.$$.fragment,p),I=!0)},o(p){$(t.$$.fragment,p),$(h.$$.fragment,p),I=!1},d(p){p&&_(e),D(t),E&&E.d(),D(h)}}}function pt(n,e,s){let t,r;L(n,Te,l=>s(3,t=l)),L(n,de,l=>s(1,r=l));let{data:a}=e;const o=t.url.searchParams.get("verifyMail");return console.log("verifyMail",o),console.log("login page"),n.$$set=l=>{"data"in l&&s(0,a=l.data)},[a,r,o]}class qt extends U{constructor(e){super(),W(this,e,pt,gt,K,{data:0})}}export{qt as component};
