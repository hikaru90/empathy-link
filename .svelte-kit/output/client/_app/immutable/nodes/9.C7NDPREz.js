import{F as Q,s as Ze,H as se,e as V,a as F,c as N,b as S,g as C,f as p,y as k,i as I,h,C as Ve,R as vt,G as bt,I as ae,D as wt,k as fe,N as kt,L as x,n as L,p as Et,t as O,d as z,j as M,J as le,l as ue,Q as ye}from"../chunks/scheduler.CKu2orG_.js";import{S as Dt,i as It,e as ne,c as q,a as T,m as j,t as _,b,f as Z,d as B,g as y}from"../chunks/index.DXc6nQ0s.js";import{t as G,l as Vt,e as X,g as ce,a as pe}from"../chunks/page.CjYSaJLb.js";import{p as Nt}from"../chunks/stores.3cYkxB9D.js";import{M as St,s as $e,g as ve,B as Ft}from"../chunks/Menu.DmxiePjz.js";import{D as Ct,a as qt,b as Tt,c as jt,C as Bt,d as Ot}from"../chunks/index.BhsRs3n4.js";import{c as W,z as zt,F as ge,C as de,a as me,b as _e}from"../chunks/zod.CoJ9B_D1.js";import{M as Mt,F as Rt,a as Pt,T as xe,b as et,c as tt}from"../chunks/Mascot.DdMQgkTt.js";import{z as Y,s as Ut}from"../chunks/memoize.CGCrhbMP.js";import{d as Lt}from"../chunks/defaults.CEskAMGU.js";import{I as be}from"../chunks/icon-folder.CBGieXVr.js";import{I as we,a as Ne,b as Se,c as Fe}from"../chunks/icon-steps.dGSELuxl.js";import{p as ie}from"../chunks/pocketbase.Ce4YzWbP.js";const ke=Y.object({}),Ee=Y.object({}),De=Y.object({}),Ie=Y.object({}),Ht=Y.object({}),Jt=Y.object({}),At=Y.object({}),Gt=Y.object({}),Qt=ke.extend({observation:Y.string().min(10,{message:Q(G)("default.page.fights.form.observation.tooShortError")})}),Kt=Ee.extend({feelings:Y.array(Y.string()).min(1,{message:Q(G)("default.page.fights.form.feelings.tooFewError")})}),Wt=De.extend({needs:Y.array(Y.string()).min(1,{message:Q(G)("default.page.fights.form.needs.tooFewError")})}),re=Ie.extend({request:Y.string().min(10,{message:Q(G)("default.page.fights.form.request.tooFewError")})});function Ce(n,e,r){const t=n.slice();return t[51]=e[r],t}function qe(n,e,r){const t=n.slice();return t[44]=e[r],t}function Te(n,e,r){const t=n.slice();return t[48]=e[r],t}function je(n,e,r){const t=n.slice();return t[51]=e[r],t}function Be(n,e,r){const t=n.slice();return t[41]=e[r],t}function Oe(n,e,r){const t=n.slice();return t[44]=e[r],t}function ze(n,e,r){const t=n.slice();return t[41]=e[r],t}function Me(n){let e,r,t,l=n[0]>8&&Re(n);return r=new Mt({props:{step:n[0],stepName:n[7][n[0]-1].slug}}),{c(){l&&l.c(),e=F(),q(r.$$.fragment)},l(s){l&&l.l(s),e=C(s),T(r.$$.fragment,s)},m(s,a){l&&l.m(s,a),I(s,e,a),j(r,s,a),t=!0},p(s,a){s[0]>8?l?(l.p(s,a),a[0]&1&&_(l,1)):(l=Re(s),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(y(),b(l,1,1,()=>{l=null}),Z());const i={};a[0]&1&&(i.step=s[0]),a[0]&129&&(i.stepName=s[7][s[0]-1].slug),r.$set(i)},i(s){t||(_(l),_(r.$$.fragment,s),t=!0)},o(s){b(l),b(r.$$.fragment,s),t=!1},d(s){s&&p(e),l&&l.d(s),B(r,s)}}}function Re(n){let e,r;return e=new Rt({props:{step:n[0],steps:n[7],stepBackground:n[7][n[0]-1].slug}}),e.$on("changeStep",n[15]),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l[0]&1&&(s.step=t[0]),l[0]&128&&(s.steps=t[7]),l[0]&129&&(s.stepBackground=t[7][t[0]-1].slug),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Pe(n){let e=n[0],r,t,l=Xe(n);return{c(){l.c(),r=x()},l(s){l.l(s),r=x()},m(s,a){l.m(s,a),I(s,r,a),t=!0},p(s,a){a[0]&1&&Ze(e,e=s[0])?(y(),b(l,1,1,L),Z(),l=Xe(s),l.c(),_(l,1),l.m(r.parentNode,r)):l.p(s,a)},i(s){t||(_(l),t=!0)},o(s){b(l),t=!1},d(s){s&&p(r),l.d(s)}}}function Xt(n){let e;return{c(){e=O("Error in Submit")},l(r){e=z(r,"Error in Submit")},m(r,t){I(r,e,t)},p:L,i:L,o:L,d(r){r&&p(e)}}}function Yt(n){let e;return{c(){e=O("Success")},l(r){e=z(r,"Success")},m(r,t){I(r,e,t)},p:L,i:L,o:L,d(r){r&&p(e)}}}function Zt(n){let e,r,t;return r=new ge({props:{form:n[11],name:"request",$$slots:{default:[cl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{"data-simplebar":!0,class:!0});var s=S(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&768|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function yt(n){let e,r,t;return r=new ge({props:{form:n[11],name:"needs",$$slots:{default:[_l]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{"data-simplebar":!0,class:!0});var s=S(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&1796|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function xt(n){let e,r,t;return r=new ge({props:{form:n[11],name:"feelings",$$slots:{default:[wl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{"data-simplebar":!0,class:!0});var s=S(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&1923|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function el(n){let e,r,t;return r=new ge({props:{form:n[11],name:"observation",$$slots:{default:[Dl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),this.h()},l(l){e=N(l,"DIV",{"data-simplebar":!0,class:!0});var s=S(e);T(r.$$.fragment,s),s.forEach(p),this.h()},h(){k(e,"data-simplebar",""),k(e,"class","form-content")},m(l,s){I(l,e,s),j(r,e,null),t=!0},p(l,s){const a={};s[0]&768|s[1]&536870912&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){t||(_(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){l&&p(e),B(r)}}}function tl(n){let e,r,t=n[9]("default.page.respond.steps.pause.heading")+"",l;return{c(){e=V("div"),r=V("div"),l=O(t),this.h()},l(s){e=N(s,"DIV",{class:!0});var a=S(e);r=N(a,"DIV",{class:!0});var i=S(r);l=z(i,t),i.forEach(p),a.forEach(p),this.h()},h(){k(r,"class","flex flex-col gap-4 text-center max-w-[18em]"),k(e,"class","form-content flex items-center justify-center")},m(s,a){I(s,e,a),h(e,r),h(r,l)},p(s,a){a[0]&512&&t!==(t=s[9]("default.page.respond.steps.pause.heading")+"")&&M(l,t)},i:L,o:L,d(s){s&&p(e)}}}function ll(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerRequest.heading")+"",i,o,f,u=n[3].request+"",g;return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div"),g=O(u),this.h()},l(c){e=N(c,"DIV",{"data-simplebar":!0,class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var $=S(r);l=z($,t),s=C($),i=z($,a),$.forEach(p),o=C(d),f=N(d,"DIV",{class:!0});var m=S(f);g=z(m,u),m.forEach(p),d.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","bg-white/10 px-4 py-3 rounded shadow-xl"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,d){I(c,e,d),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f),h(f,g)},p(c,d){d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerRequest.heading")+"")&&M(i,a),d[0]&8&&u!==(u=c[3].request+"")&&M(g,u)},i:L,o:L,d(c){c&&p(e)}}}function rl(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerNeeds.heading")+"",i,o,f,u=X(n[3].expand.needs),g=[];for(let c=0;c<u.length;c+=1)g[c]=Ke(Oe(n,u,c));return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=N(c,"DIV",{"data-simplebar":!0,class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var $=S(r);l=z($,t),s=C($),i=z($,a),$.forEach(p),o=C(d),f=N(d,"DIV",{class:!0});var m=S(f);for(let v=0;v<g.length;v+=1)g[v].l(m);m.forEach(p),d.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","flex items-center flex-wrap gap-2"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,d){I(c,e,d),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(f,null)},p(c,d){if(d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerNeeds.heading")+"")&&M(i,a),d[0]&1032){u=X(c[3].expand.needs);let $;for($=0;$<u.length;$+=1){const m=Oe(c,u,$);g[$]?g[$].p(m,d):(g[$]=Ke(m),g[$].c(),g[$].m(f,null))}for(;$<g.length;$+=1)g[$].d(1);g.length=u.length}},i:L,o:L,d(c){c&&p(e),le(g,c)}}}function sl(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerFeelings.heading")+"",i,o,f,u=X(n[3].expand.feelings),g=[];for(let c=0;c<u.length;c+=1)g[c]=We(ze(n,u,c));return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=N(c,"DIV",{"data-simplebar":!0,class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var $=S(r);l=z($,t),s=C($),i=z($,a),$.forEach(p),o=C(d),f=N(d,"DIV",{class:!0});var m=S(f);for(let v=0;v<g.length;v+=1)g[v].l(m);m.forEach(p),d.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","flex items-center flex-wrap gap-2"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,d){I(c,e,d),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(f,null)},p(c,d){if(d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerFeelings.heading")+"")&&M(i,a),d[0]&1032){u=X(c[3].expand.feelings);let $;for($=0;$<u.length;$+=1){const m=ze(c,u,$);g[$]?g[$].p(m,d):(g[$]=We(m),g[$].c(),g[$].m(f,null))}for(;$<g.length;$+=1)g[$].d(1);g.length=u.length}},i:L,o:L,d(c){c&&p(e),le(g,c)}}}function al(n){let e,r,t=n[3].expand.owner.firstName+"",l,s,a=n[9]("default.page.respond.steps.ownerObservation.heading")+"",i,o,f,u=n[3].observation+"",g;return{c(){e=V("div"),r=V("div"),l=O(t),s=F(),i=O(a),o=F(),f=V("div"),g=O(u),this.h()},l(c){e=N(c,"DIV",{"data-simplebar":!0,class:!0});var d=S(e);r=N(d,"DIV",{class:!0});var $=S(r);l=z($,t),s=C($),i=z($,a),$.forEach(p),o=C(d),f=N(d,"DIV",{class:!0});var m=S(f);g=z(m,u),m.forEach(p),d.forEach(p),this.h()},h(){k(r,"class","form-label pt-10"),k(f,"class","bg-white/10 px-4 py-3 rounded shadow-xl"),k(e,"data-simplebar",""),k(e,"class","form-content")},m(c,d){I(c,e,d),h(e,r),h(r,l),h(r,s),h(r,i),h(e,o),h(e,f),h(f,g)},p(c,d){d[0]&8&&t!==(t=c[3].expand.owner.firstName+"")&&M(l,t),d[0]&512&&a!==(a=c[9]("default.page.respond.steps.ownerObservation.heading")+"")&&M(i,a),d[0]&8&&u!==(u=c[3].observation+"")&&M(g,u)},i:L,o:L,d(c){c&&p(e)}}}function nl(n){let e,r,t,l=n[9]("default.page.respond.steps.breathe.heading")+"",s,a,i,o,f;return{c(){e=V("div"),r=V("div"),t=V("span"),s=O(l),a=F(),i=V("div"),o=F(),f=V("div"),this.h()},l(u){e=N(u,"DIV",{class:!0});var g=S(e);r=N(g,"DIV",{class:!0});var c=S(r);t=N(c,"SPAN",{class:!0});var d=S(t);s=z(d,l),d.forEach(p),a=C(c),i=N(c,"DIV",{class:!0}),S(i).forEach(p),o=C(c),f=N(c,"DIV",{class:!0}),S(f).forEach(p),c.forEach(p),g.forEach(p),this.h()},h(){k(t,"class","relative z-10 -mb-2"),k(i,"class","breathe svelte-1p6uaeu"),k(f,"class","breathe2 svelte-1p6uaeu"),k(r,"class","flex flex-col text-center relative"),k(e,"class","form-content flex items-center justify-center")},m(u,g){I(u,e,g),h(e,r),h(r,t),h(t,s),h(r,a),h(r,i),h(r,o),h(r,f)},p(u,g){g[0]&512&&l!==(l=u[9]("default.page.respond.steps.breathe.heading")+"")&&M(s,l)},i:L,o:L,d(u){u&&p(e)}}}function ol(n){let e,r,t=n[9]("default.page.respond.steps.disclaimer.heading")+"",l,s,a,i,o=n[9]("default.page.respond.steps.disclaimer.description")+"",f;return{c(){e=V("div"),r=V("div"),l=O(t),s=O(" —"),a=V("br"),i=F(),f=O(o),this.h()},l(u){e=N(u,"DIV",{class:!0});var g=S(e);r=N(g,"DIV",{class:!0});var c=S(r);l=z(c,t),s=z(c," —"),a=N(c,"BR",{}),i=C(c),f=z(c,o),c.forEach(p),g.forEach(p),this.h()},h(){k(r,"class","flex flex-col gap-4 text-center max-w-[18em]"),k(e,"class","form-content flex flex-col justify-center items-center text-center")},m(u,g){I(u,e,g),h(e,r),h(r,l),h(r,s),h(r,a),h(r,i),h(r,f)},p(u,g){g[0]&512&&t!==(t=u[9]("default.page.respond.steps.disclaimer.heading")+"")&&M(l,t),g[0]&512&&o!==(o=u[9]("default.page.respond.steps.disclaimer.description")+"")&&M(f,o)},i:L,o:L,d(u){u&&p(e)}}}function fl(n){let e,r,t,l,s,a=n[3].expand.owner.firstName+"",i,o,f=n[9]("default.page.respond.steps.greeting.heading")+"",u,g,c,d,$,m,v=n[9]("default.page.respond.steps.greeting.question")+"",D,A;return d=new Ft({props:{class:"bg-white/40 text-black",$$slots:{default:[Il]},$$scope:{ctx:n}}}),d.$on("click",n[20]),{c(){e=V("div"),r=V("div"),t=F(),l=V("div"),s=V("div"),i=O(a),o=F(),u=O(f),g=F(),c=V("div"),q(d.$$.fragment),$=F(),m=V("div"),D=O(v),this.h()},l(H){e=N(H,"DIV",{class:!0});var w=S(e);r=N(w,"DIV",{}),S(r).forEach(p),t=C(w),l=N(w,"DIV",{class:!0});var R=S(l);s=N(R,"DIV",{});var K=S(s);i=z(K,a),o=C(K),u=z(K,f),K.forEach(p),g=C(R),c=N(R,"DIV",{class:!0});var ee=S(c);T(d.$$.fragment,ee),ee.forEach(p),R.forEach(p),$=C(w),m=N(w,"DIV",{class:!0});var oe=S(m);D=z(oe,v),oe.forEach(p),w.forEach(p),this.h()},h(){k(c,"class","flex justify-center"),k(l,"class","flex flex-col gap-4 max-w-[18em]"),k(m,"class","max-w-[18em]"),k(e,"class","form-content flex flex-col justify-between items-center pt-10 pb-1 text-center")},m(H,w){I(H,e,w),h(e,r),h(e,t),h(e,l),h(l,s),h(s,i),h(s,o),h(s,u),h(l,g),h(l,c),j(d,c,null),h(e,$),h(e,m),h(m,D),A=!0},p(H,w){(!A||w[0]&8)&&a!==(a=H[3].expand.owner.firstName+"")&&M(i,a),(!A||w[0]&512)&&f!==(f=H[9]("default.page.respond.steps.greeting.heading")+"")&&M(u,f);const R={};w[0]&512|w[1]&536870912&&(R.$$scope={dirty:w,ctx:H}),d.$set(R),(!A||w[0]&512)&&v!==(v=H[9]("default.page.respond.steps.greeting.question")+"")&&M(D,v)},i(H){A||(_(d.$$.fragment,H),A=!0)},o(H){b(d.$$.fragment,H),A=!1},d(H){H&&p(e),B(d)}}}function il(n){let e=n[9]("default.page.fights.form.request.label")+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.request.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function ul(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[il]},$$scope:{ctx:n}}});const a=[n[47],{class:"min-h-60"}];function i(f){n[24](f)}let o={};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].request!==void 0&&(o.value=n[8].request),t=new xe({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[pe(f[47]),a[1]]):{};!l&&u[0]&256&&(l=!0,c.value=f[8].request,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function cl(n){let e,r,t,l;return e=new de({props:{$$slots:{default:[ul,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new me({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&768|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function pl(n){let e=n[9]("default.page.fights.form.needs.label")+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.needs.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function Ue(n){let e,r,t=X(n[2]),l=[];for(let a=0;a<t.length;a+=1)l[a]=He(Ce(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){e=V("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=N(a,"DIV",{class:!0});var i=S(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(p),this.h()},h(){k(e,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(a,i){I(a,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);r=!0},p(a,i){if(i[0]&328964){t=X(a[2]);let o;for(o=0;o<t.length;o+=1){const f=Ce(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=He(f),l[o].c(),_(l[o],1),l[o].m(e,null))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function gl(n){let e=(n[10]==="de"?n[44].nameDE:n[44].nameEN)+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&1028&&e!==(e=(t[10]==="de"?t[44].nameDE:t[44].nameEN)+"")&&M(r,e)},d(t){t&&p(r)}}}function Le(n){let e,r,t,l,s,a,i;return r=new tt({props:{value:n[44].id,class:(n[44].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[gl]},$$scope:{ctx:n}}}),{c(){e=V("button"),q(r.$$.fragment),t=F(),this.h()},l(o){e=N(o,"BUTTON",{type:!0,class:!0});var f=S(e);T(r.$$.fragment,f),t=C(f),f.forEach(p),this.h()},h(){var o;k(e,"type","button"),k(e,"class",l=(n[18](n[44],n[51])||(o=n[8].needs)!=null&&o.includes(n[44].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(o,f){I(o,e,f),j(r,e,null),h(e,t),s=!0,a||(i=Ve(e,"click",function(){ye(n[16](n[44],n[51].category))&&n[16](n[44],n[51].category).apply(this,arguments)}),a=!0)},p(o,f){var g;n=o;const u={};f[0]&4&&(u.value=n[44].id),f[0]&4&&(u.class=(n[44].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),f[0]&1028|f[1]&536870912&&(u.$$scope={dirty:f,ctx:n}),r.$set(u),(!s||f[0]&260&&l!==(l=(n[18](n[44],n[51])||(g=n[8].needs)!=null&&g.includes(n[44].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&k(e,"class",l)},i(o){s||(_(r.$$.fragment,o),s=!0)},o(o){b(r.$$.fragment,o),s=!1},d(o){o&&p(e),B(r),a=!1,i()}}}function He(n){let e,r,t=X(n[51].content),l=[];for(let a=0;a<t.length;a+=1)l[a]=Le(qe(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=x()},l(a){for(let i=0;i<l.length;i+=1)l[i].l(a);e=x()},m(a,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(a,i);I(a,e,i),r=!0},p(a,i){if(i[0]&328964){t=X(a[51].content);let o;for(o=0;o<t.length;o+=1){const f=qe(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Le(f),l[o].c(),_(l[o],1),l[o].m(e.parentNode,e))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function dl(n){let e,r,t=n[2].length>0&&Ue(n);return{c(){t&&t.c(),e=x()},l(l){t&&t.l(l),e=x()},m(l,s){t&&t.m(l,s),I(l,e,s),r=!0},p(l,s){l[2].length>0?t?(t.p(l,s),s[0]&4&&_(t,1)):(t=Ue(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(y(),b(t,1,1,()=>{t=null}),Z())},i(l){r||(_(t),r=!0)},o(l){b(t),r=!1},d(l){l&&p(e),t&&t.d(l)}}}function ml(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[pl]},$$scope:{ctx:n}}});const a=[{type:"multiple"},n[47],{class:""}];function i(f){n[23](f)}let o={$$slots:{default:[dl]},$$scope:{ctx:n}};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].needs!==void 0&&(o.value=n[8].needs),t=new et({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[a[0],pe(f[47]),a[2]]):{};u[0]&1284|u[1]&536870912&&(c.$$scope={dirty:u,ctx:f}),!l&&u[0]&256&&(l=!0,c.value=f[8].needs,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function _l(n){let e,r,t,l;return e=new de({props:{$$slots:{default:[ml,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new me({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&1796|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function hl(n){let e=n[9]("default.page.fights.form.feelings.label")+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.feelings.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function Je(n){let e,r,t=X(n[1]),l=[];for(let a=0;a<t.length;a+=1)l[a]=Qe(Te(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){e=V("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=N(a,"DIV",{class:!0});var i=S(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(p),this.h()},h(){k(e,"class","")},m(a,i){I(a,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);r=!0},p(a,i){if(i[0]&395139){t=X(a[1]);let o;for(o=0;o<t.length;o+=1){const f=Te(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Qe(f),l[o].c(),_(l[o],1),l[o].m(e,null))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function $l(n){let e=(n[10]==="de"?n[41].nameDE:n[41].nameEN)+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&1026&&e!==(e=(t[10]==="de"?t[41].nameDE:t[41].nameEN)+"")&&M(r,e)},d(t){t&&p(r)}}}function Ae(n){let e,r,t,l,s,a;return r=new tt({props:{value:n[41].id,class:(n[41].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[$l]},$$scope:{ctx:n}}}),{c(){e=V("button"),q(r.$$.fragment),this.h()},l(i){e=N(i,"BUTTON",{type:!0,class:!0});var o=S(e);T(r.$$.fragment,o),o.forEach(p),this.h()},h(){var i;k(e,"type","button"),k(e,"class",t=(n[18](n[41],n[51])||(i=n[8].feelings)!=null&&i.includes(n[41].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(i,o){I(i,e,o),j(r,e,null),l=!0,s||(a=Ve(e,"click",function(){ye(n[17](n[41],n[51].category))&&n[17](n[41],n[51].category).apply(this,arguments)}),s=!0)},p(i,o){var u;n=i;const f={};o[0]&2&&(f.value=n[41].id),o[0]&2&&(f.class=(n[41].nameEN===n[51].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),o[0]&1026|o[1]&536870912&&(f.$$scope={dirty:o,ctx:n}),r.$set(f),(!l||o[0]&258&&t!==(t=(n[18](n[41],n[51])||(u=n[8].feelings)!=null&&u.includes(n[41].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&k(e,"class",t)},i(i){l||(_(r.$$.fragment,i),l=!0)},o(i){b(r.$$.fragment,i),l=!1},d(i){i&&p(e),B(r),s=!1,a()}}}function Ge(n){let e,r,t=X(n[51].content),l=[];for(let a=0;a<t.length;a+=1)l[a]=Ae(Be(n,t,a));const s=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=x()},l(a){for(let i=0;i<l.length;i+=1)l[i].l(a);e=x()},m(a,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(a,i);I(a,e,i),r=!0},p(a,i){if(i[0]&394498){t=X(a[51].content);let o;for(o=0;o<t.length;o+=1){const f=Be(a,t,o);l[o]?(l[o].p(f,i),_(l[o],1)):(l[o]=Ae(f),l[o].c(),_(l[o],1),l[o].m(e.parentNode,e))}for(y(),o=t.length;o<l.length;o+=1)s(o);Z()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)_(l[i]);r=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)b(l[i]);r=!1},d(a){a&&p(e),le(l,a)}}}function Qe(n){let e,r=(n[48].category==="true"?n[9]("default.page.fights.form.general.goodFeelings"):n[9]("default.page.fights.form.general.badFeelings"))+"",t,l,s,a,i,o,f,u,g,c=X(n[48].content),d=[];for(let m=0;m<c.length;m+=1)d[m]=Ge(je(n,c,m));const $=m=>b(d[m],1,1,()=>{d[m]=null});return{c(){e=V("div"),t=O(r),l=F(),s=V("div"),o=F(),f=V("div");for(let m=0;m<d.length;m+=1)d[m].c();u=F(),this.h()},l(m){e=N(m,"DIV",{class:!0});var v=S(e);t=z(v,r),l=C(v),s=N(v,"DIV",{class:!0}),S(s).forEach(p),v.forEach(p),o=C(m),f=N(m,"DIV",{class:!0});var D=S(f);for(let A=0;A<d.length;A+=1)d[A].l(D);u=C(D),D.forEach(p),this.h()},h(){k(s,"class",a="border-b border-"+n[7][n[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-1p6uaeu"),k(e,"class",i="text-"+n[7][n[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-1p6uaeu"),k(f,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(m,v){I(m,e,v),h(e,t),h(e,l),h(e,s),I(m,o,v),I(m,f,v);for(let D=0;D<d.length;D+=1)d[D]&&d[D].m(f,null);h(f,u),g=!0},p(m,v){if((!g||v[0]&514)&&r!==(r=(m[48].category==="true"?m[9]("default.page.fights.form.general.goodFeelings"):m[9]("default.page.fights.form.general.badFeelings"))+"")&&M(t,r),(!g||v[0]&129&&a!==(a="border-b border-"+m[7][m[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-1p6uaeu"))&&k(s,"class",a),(!g||v[0]&129&&i!==(i="text-"+m[7][m[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-1p6uaeu"))&&k(e,"class",i),v[0]&394498){c=X(m[48].content);let D;for(D=0;D<c.length;D+=1){const A=je(m,c,D);d[D]?(d[D].p(A,v),_(d[D],1)):(d[D]=Ge(A),d[D].c(),_(d[D],1),d[D].m(f,u))}for(y(),D=c.length;D<d.length;D+=1)$(D);Z()}},i(m){if(!g){for(let v=0;v<c.length;v+=1)_(d[v]);g=!0}},o(m){d=d.filter(Boolean);for(let v=0;v<d.length;v+=1)b(d[v]);g=!1},d(m){m&&(p(e),p(o),p(f)),le(d,m)}}}function vl(n){let e,r,t=n[1].length>0&&Je(n);return{c(){t&&t.c(),e=x()},l(l){t&&t.l(l),e=x()},m(l,s){t&&t.m(l,s),I(l,e,s),r=!0},p(l,s){l[1].length>0?t?(t.p(l,s),s[0]&2&&_(t,1)):(t=Je(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(y(),b(t,1,1,()=>{t=null}),Z())},i(l){r||(_(t),r=!0)},o(l){b(t),r=!1},d(l){l&&p(e),t&&t.d(l)}}}function bl(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[hl]},$$scope:{ctx:n}}});const a=[{type:"multiple"},n[47],{class:"flex flex-col gap-4"}];function i(f){n[22](f)}let o={$$slots:{default:[vl]},$$scope:{ctx:n}};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].feelings!==void 0&&(o.value=n[8].feelings),t=new et({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[a[0],pe(f[47]),a[2]]):{};u[0]&1923|u[1]&536870912&&(c.$$scope={dirty:u,ctx:f}),!l&&u[0]&256&&(l=!0,c.value=f[8].feelings,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function wl(n){let e,r,t,l;return e=new de({props:{$$slots:{default:[bl,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new me({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&1923|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function kl(n){let e=n[9]("default.page.fights.form.observation.label")+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.fights.form.observation.label")+"")&&M(r,e)},d(t){t&&p(r)}}}function El(n){let e,r,t,l,s;e=new _e({props:{class:"form-label",$$slots:{default:[kl]},$$scope:{ctx:n}}});const a=[n[47],{class:"min-h-60"}];function i(f){n[21](f)}let o={};for(let f=0;f<a.length;f+=1)o=ue(o,a[f]);return n[8].observation!==void 0&&(o.value=n[8].observation),t=new xe({props:o}),se.push(()=>ne(t,"value",i)),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(f){T(e.$$.fragment,f),r=C(f),T(t.$$.fragment,f)},m(f,u){j(e,f,u),I(f,r,u),j(t,f,u),s=!0},p(f,u){const g={};u[0]&512|u[1]&536870912&&(g.$$scope={dirty:u,ctx:f}),e.$set(g);const c=u[1]&65536?ce(a,[pe(f[47]),a[1]]):{};!l&&u[0]&256&&(l=!0,c.value=f[8].observation,ae(()=>l=!1)),t.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),b(t.$$.fragment,f),s=!1},d(f){f&&p(r),B(e,f),B(t,f)}}}function Dl(n){let e,r,t,l;return e=new de({props:{$$slots:{default:[El,({attrs:s})=>({47:s}),({attrs:s})=>[0,s?65536:0]]},$$scope:{ctx:n}}}),t=new me({}),{c(){q(e.$$.fragment),r=F(),q(t.$$.fragment)},l(s){T(e.$$.fragment,s),r=C(s),T(t.$$.fragment,s)},m(s,a){j(e,s,a),I(s,r,a),j(t,s,a),l=!0},p(s,a){const i={};a[0]&768|a[1]&536936448&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){l||(_(e.$$.fragment,s),_(t.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),l=!1},d(s){s&&p(r),B(e,s),B(t,s)}}}function Ke(n){let e,r=(n[10]==="de"?n[44].nameDE:n[44].nameEN)+"",t,l;return{c(){e=V("div"),t=O(r),l=F(),this.h()},l(s){e=N(s,"DIV",{class:!0});var a=S(e);t=z(a,r),l=C(a),a.forEach(p),this.h()},h(){k(e,"class","bg-white/10 shadow-lg px-4 py-2 rounded-md")},m(s,a){I(s,e,a),h(e,t),h(e,l)},p(s,a){a[0]&1032&&r!==(r=(s[10]==="de"?s[44].nameDE:s[44].nameEN)+"")&&M(t,r)},d(s){s&&p(e)}}}function We(n){let e,r=(n[10]==="de"?n[41].nameDE:n[41].nameEN)+"",t,l;return{c(){e=V("div"),t=O(r),l=F(),this.h()},l(s){e=N(s,"DIV",{class:!0});var a=S(e);t=z(a,r),l=C(a),a.forEach(p),this.h()},h(){k(e,"class","bg-white/20 shadow-lg px-4 py-2 rounded-md")},m(s,a){I(s,e,a),h(e,t),h(e,l)},p(s,a){a[0]&1032&&r!==(r=(s[10]==="de"?s[41].nameDE:s[41].nameEN)+"")&&M(t,r)},d(s){s&&p(e)}}}function Il(n){let e=n[9]("default.page.respond.steps.greeting.explanationCta")+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.respond.steps.greeting.explanationCta")+"")&&M(r,e)},d(t){t&&p(r)}}}function Xe(n){let e,r,t,l;const s=[fl,ol,nl,al,sl,rl,ll,tl,el,xt,yt,Zt,Yt,Xt],a=[];function i(o,f){return o[0]===1?0:o[0]===2?1:o[0]===3?2:o[0]===4?3:o[0]===5?4:o[0]===6?5:o[0]===7?6:o[0]===8?7:o[0]===9?8:o[0]===10?9:o[0]===11?10:o[4]?o[5]?12:13:11}return e=i(n),r=a[e]=s[e](n),{c(){r.c(),t=x()},l(o){r.l(o),t=x()},m(o,f){a[e].m(o,f),I(o,t,f),l=!0},p(o,f){let u=e;e=i(o),e===u?a[e].p(o,f):(y(),b(a[u],1,1,()=>{a[u]=null}),Z(),r=a[e],r?r.p(o,f):(r=a[e]=s[e](o),r.c()),_(r,1),r.m(t.parentNode,t))},i(o){l||(_(r),l=!0)},o(o){b(r),l=!1},d(o){o&&p(t),a[e].d(o)}}}function Ye(n){let e,r;return e=new Pt({props:{step:n[0],primaryButtonClass:`bg-${n[7][n[0]-1].slug}-background`,class:"flex-shrink-0"}}),e.$on("toPrev",n[14]),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l[0]&1&&(s.step=t[0]),l[0]&129&&(s.primaryButtonClass=`bg-${t[7][t[0]-1].slug}-background`),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Vl(n){let e=n[9]("default.page.respond.explanationTitle")+"",r;return{c(){r=O(e)},l(t){r=z(t,e)},m(t,l){I(t,r,l)},p(t,l){l[0]&512&&e!==(e=t[9]("default.page.respond.explanationTitle")+"")&&M(r,e)},d(t){t&&p(r)}}}function Nl(n){let e,r;return e=new Ot({props:{class:"text-red-600"}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p:L,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Sl(n){let e,r,t,l,s;return r=new jt({props:{$$slots:{default:[Vl]},$$scope:{ctx:n}}}),l=new Bt({props:{$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){e=V("div"),q(r.$$.fragment),t=F(),q(l.$$.fragment),this.h()},l(a){e=N(a,"DIV",{class:!0});var i=S(e);T(r.$$.fragment,i),t=C(i),T(l.$$.fragment,i),i.forEach(p),this.h()},h(){k(e,"class","flex items-center justify-between")},m(a,i){I(a,e,i),j(r,e,null),h(e,t),j(l,e,null),s=!0},p(a,i){const o={};i[0]&512|i[1]&536870912&&(o.$$scope={dirty:i,ctx:a}),r.$set(o);const f={};i[1]&536870912&&(f.$$scope={dirty:i,ctx:a}),l.$set(f)},i(a){s||(_(r.$$.fragment,a),_(l.$$.fragment,a),s=!0)},o(a){b(r.$$.fragment,a),b(l.$$.fragment,a),s=!1},d(a){a&&p(e),B(r),B(l)}}}function Fl(n){let e,r,t,l=n[9]("default.page.respond.explanation")+"",s,a;return e=new Tt({props:{$$slots:{default:[Sl]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment),r=F(),t=V("p"),s=O(l),this.h()},l(i){T(e.$$.fragment,i),r=C(i),t=N(i,"P",{class:!0});var o=S(t);s=z(o,l),o.forEach(p),this.h()},h(){k(t,"class","mb-20 p-4")},m(i,o){j(e,i,o),I(i,r,o),I(i,t,o),h(t,s),a=!0},p(i,o){const f={};o[0]&512|o[1]&536870912&&(f.$$scope={dirty:o,ctx:i}),e.$set(f),(!a||o[0]&512)&&l!==(l=i[9]("default.page.respond.explanation")+"")&&M(s,l)},i(i){a||(_(e.$$.fragment,i),a=!0)},o(i){b(e.$$.fragment,i),a=!1},d(i){i&&(p(r),p(t)),B(e,i)}}}function Cl(n){let e,r;return e=new qt({props:{class:"p-4",$$slots:{default:[Fl]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l[0]&512|l[1]&536870912&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function ql(n){let e,r,t,l,s,a,i,o,f,u,g,c,d,$;t=new St({});let m=!n[4]&&!n[5]&&Me(n),v=n[3]&&Pe(n),D=!n[4]&&!n[5]&&Ye(n);function A(w){n[25](w)}let H={$$slots:{default:[Cl]},$$scope:{ctx:n}};return n[6]!==void 0&&(H.open=n[6]),u=new Ct({props:H}),se.push(()=>ne(u,"open",A)),{c(){e=V("div"),r=V("div"),q(t.$$.fragment),l=F(),s=V("form"),m&&m.c(),a=F(),v&&v.c(),i=F(),D&&D.c(),f=F(),q(u.$$.fragment),this.h()},l(w){e=N(w,"DIV",{class:!0});var R=S(e);r=N(R,"DIV",{class:!0});var K=S(r);T(t.$$.fragment,K),l=C(K),s=N(K,"FORM",{class:!0});var ee=S(s);m&&m.l(ee),a=C(ee),v&&v.l(ee),i=C(ee),D&&D.l(ee),ee.forEach(p),K.forEach(p),R.forEach(p),f=C(w),T(u.$$.fragment,w),this.h()},h(){k(s,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),k(r,"class","max-container relative flex h-dvh flex-grow flex-col"),k(e,"class",o=`flex flex-grow flex-col justify-between transition duration-700 bg-${n[7][n[0]-1].slug}-background svelte-1p6uaeu`)},m(w,R){I(w,e,R),h(e,r),j(t,r,null),h(r,l),h(r,s),m&&m.m(s,null),h(s,a),v&&v.m(s,null),h(s,i),D&&D.m(s,null),I(w,f,R),j(u,w,R),c=!0,d||($=[Ve(s,"submit",vt(n[19])),bt(n[13].call(null,s))],d=!0)},p(w,R){!w[4]&&!w[5]?m?(m.p(w,R),R[0]&48&&_(m,1)):(m=Me(w),m.c(),_(m,1),m.m(s,a)):m&&(y(),b(m,1,1,()=>{m=null}),Z()),w[3]?v?(v.p(w,R),R[0]&8&&_(v,1)):(v=Pe(w),v.c(),_(v,1),v.m(s,i)):v&&(y(),b(v,1,1,()=>{v=null}),Z()),!w[4]&&!w[5]?D?(D.p(w,R),R[0]&48&&_(D,1)):(D=Ye(w),D.c(),_(D,1),D.m(s,null)):D&&(y(),b(D,1,1,()=>{D=null}),Z()),(!c||R[0]&129&&o!==(o=`flex flex-grow flex-col justify-between transition duration-700 bg-${w[7][w[0]-1].slug}-background svelte-1p6uaeu`))&&k(e,"class",o);const K={};R[0]&512|R[1]&536870912&&(K.$$scope={dirty:R,ctx:w}),!g&&R[0]&64&&(g=!0,K.open=w[6],ae(()=>g=!1)),u.$set(K)},i(w){c||(_(t.$$.fragment,w),_(m),_(v),_(D),_(u.$$.fragment,w),c=!0)},o(w){b(t.$$.fragment,w),b(m),b(v),b(D),b(u.$$.fragment,w),c=!1},d(w){w&&(p(e),p(f)),B(t),m&&m.d(),v&&v.d(),D&&D.d(),B(u,w),d=!1,wt($)}}}function Tl(n,e,r){let t,l,s,a;fe(n,Nt,E=>r(27,t=E)),fe(n,G,E=>r(9,s=E)),fe(n,Vt,E=>r(10,a=E));const i=Lt(W(re));let o=[],f=[],u;const g=[W(ke),W(Ee),W(De),W(Ie),W(Ht),W(Jt),W(At),W(Gt),W(Qt),W(Kt),W(Wt),W(re)];let c=1,d=!1,$=!1,m=!1;const v=async()=>{try{let E=l;E.fight=u.id,console.log("submit form",E);const U=await ie.collection("responses").create(E);r(5,$=!0),r(4,d=!0)}catch(E){console.log("error handling submit",E),r(5,$=!1),r(4,d=!0)}},D=async E=>{const P=Object.keys(W([ke,Ee,De,Ie,re][E-1]).constraints);let J=!0;for(const te of P)await oe(te,{update:!1})&&(J=!1);return!!J},A=async()=>{const E=await lt(l,re);return E.valid?!0:(R.set(E.errors),!1)},H=Ut(i,{resetForm:!1,validators:zt(re),async onSubmit({validators:E,cancel:U}){console.log("onSubmit"),U(),await A()&&(c==g.length?v():r(0,c++,c))},async onUpdated({form:E}){console.log("onUpdated"),E.valid&&r(0,c=1)}}),{form:w,errors:R,message:K,enhance:ee,validate:oe,validateForm:lt,options:rt,updateForm:jl}=H;fe(n,w,E=>r(8,l=E)),w.subscribe(E=>{console.log("form was updated",E)});let he=[{slug:"greeting",name:Q(G)("default.page.fights.form.general.steps.info"),icon:be,invertedTextColor:!1,hidden:!0},{slug:"disclaimer",name:Q(G)("default.page.fights.form.general.steps.info"),icon:be,invertedTextColor:!1,hidden:!0},{slug:"breathe",name:Q(G)("default.page.fights.form.general.steps.info"),icon:be,invertedTextColor:!1,hidden:!0},{slug:"observation",name:Q(G)("default.page.fights.form.general.steps.observation"),icon:we,invertedTextColor:!0,hidden:!0},{slug:"feelings",name:Q(G)("default.page.fights.form.general.steps.feelings"),icon:Ne,invertedTextColor:!1,hidden:!0},{slug:"needs",name:Q(G)("default.page.fights.form.general.steps.needs"),icon:Se,invertedTextColor:!1,hidden:!0},{slug:"request",name:Q(G)("default.page.fights.form.general.steps.request"),icon:Fe,invertedTextColor:!1,hidden:!0},{slug:"pause",name:Q(G)("default.page.fights.form.general.steps.observation"),icon:we,invertedTextColor:!0,hidden:!0},{slug:"observation",name:Q(G)("default.page.fights.form.general.steps.observation"),icon:we,invertedTextColor:!0},{slug:"feelings",name:Q(G)("default.page.fights.form.general.steps.feelings"),icon:Ne,invertedTextColor:!1},{slug:"needs",name:Q(G)("default.page.fights.form.general.steps.needs"),icon:Se,invertedTextColor:!1},{slug:"request",name:Q(G)("default.page.fights.form.general.steps.request"),icon:Fe,invertedTextColor:!1}];G.subscribe(E=>{const U=he.map(P=>{const J=E(`default.page.fights.form.general.steps.${P.slug}`);return P.name=J,P});r(7,he=[...U])});const st=()=>{console.log("decreaseStep"),c>1&&(console.log("step",c),r(0,c=c-1),console.log("step",c))},at=async()=>{const E=await ie.collection("feelings").getFullList({sort:"category"}),U=$e(E);let P=ve(U,"positive");P.map(J=>(J.content=ve(J.content,"category"),J.content.map(te=>te.visible=!1),J)),console.log("res",P),r(1,o=P)},nt=async()=>{const E=await ie.collection("needs").getFullList({sort:"category"}),U=$e(E);let P=ve(U,"category");P.map(J=>J.visible=!1),console.log("res",P),r(2,f=P)},ot=async()=>{const E=await ie.collection("fights").getOne(t.params.id,{expand:"owner, feelings, needs"});r(3,u=$e(E)),console.log("fight",u)},ft=async E=>{console.log("changeStep");const U=E.detail.step,P=await D(U);console.log("targetStepIsValid",P),P&&r(0,c=U)},it=(E,U)=>{if(E.nameEN!==U)return;const P=f.find(J=>J.category===U);P&&(P.visible=!P.visible),r(2,f=[...f])},ut=(E,U)=>{if(E.nameEN!==U)return;const P=o[0].content.find(te=>te.category===U),J=o[1].content.find(te=>te.category===U);P&&(P.visible=!P.visible),J&&(J.visible=!J.visible),r(1,o=[...o])},ct=(E,U)=>{const P=E.nameEN,J=U.category;return!!(P===J||U.visible)};kt(async()=>{await at(),await nt(),await ot()}),c=4;function pt(E){Et.call(this,n,E)}const gt=()=>r(6,m=!0);function dt(E){n.$$.not_equal(l.observation,E)&&(l.observation=E,w.set(l))}function mt(E){n.$$.not_equal(l.feelings,E)&&(l.feelings=E,w.set(l))}function _t(E){n.$$.not_equal(l.needs,E)&&(l.needs=E,w.set(l))}function ht(E){n.$$.not_equal(l.request,E)&&(l.request=E,w.set(l))}function $t(E){m=E,r(6,m)}return n.$$.update=()=>{n.$$.dirty[0]&1&&(rt.validators=g[c-1])},[c,o,f,u,d,$,m,he,l,s,a,H,w,ee,st,ft,it,ut,ct,pt,gt,dt,mt,_t,ht,$t]}class Wl extends Dt{constructor(e){super(),It(this,e,Tl,ql,Ze,{},null,[-1,-1])}}export{Wl as component};
