import{s as Re,l as He,m as Ke,o as Ue,b as $,f,p as h,q as Ge,i as q,h as i,n as ke,r as Je,u as _t,O as ye,k as Ee,G as Se,K as lt,e as _,a as R,t as W,c as v,H as rt,g as z,d as X,j as Y,L as st,M as at,x as nt,T as ot,U as Ze}from"../chunks/scheduler.BGpOBVyA.js";import{S as ze,i as Fe,g as $e,b as V,e as be,t as D,f as it,c as B,a as N,m as A,d as O}from"../chunks/index.wJhSdTM5.js";import{f as ct,e as Ce,S as vt,c as Qe}from"../chunks/helpers.Dibp7sA5.js";import{S as ft}from"../chunks/skeleton.B82JgwlZ.js";import{g as $t,u as je,t as Be,f as bt}from"../chunks/page.bZUY7JJF.js";import{p as xe}from"../chunks/pocketbase.Ce4YzWbP.js";import{e as dt,C as Le}from"../chunks/dashboard.Bu0VCYnW.js";import{g as Ne}from"../chunks/entry.Ctrs9mTK.js";import{b as ut,c as ht}from"../chunks/switch.ugwwvEwu.js";import{C as pt}from"../chunks/CaretRight.Dwc9mlyu.js";import{a as gt}from"../chunks/button.JkBH6UTa.js";import{C as Me}from"../chunks/Check.B_Ok3goj.js";import{A as wt}from"../chunks/AppTopMenu.Dq6v7hsH.js";import{A as kt}from"../chunks/AppBottomMenu.IwLlHcLO.js";import"../chunks/memoize.DxdV8b0X.js";import"../chunks/index.DDDUaqVC.js";import"../chunks/schema.a03NdEzJ.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.G8TICqEJ.js";/* empty css                                                             */import{B as Dt}from"../chunks/index.B79lEfiI.js";import{C as Et}from"../chunks/CaretLeft.BbUvETf9.js";function It(s){let e,l,t=[{width:s[1]},{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[2]],r={};for(let a=0;a<t.length;a+=1)r=He(r,t[a]);return{c(){e=Ke("svg"),l=Ke("path"),this.h()},l(a){e=Ue(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=$(e);l=Ue(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$(l).forEach(f),n.forEach(f),this.h()},h(){h(l,"fill-rule","evenodd"),h(l,"clip-rule","evenodd"),h(l,"d","M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z"),h(l,"fill",s[0]),Ge(e,r)},m(a,n){q(a,e,n),i(e,l)},p(a,[n]){n&1&&h(l,"fill",a[0]),Ge(e,r=$t(t,[n&2&&{width:a[1]},n&2&&{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n&4&&a[2]]))},i:ke,o:ke,d(a){a&&f(e)}}}function Vt(s,e,l){const t=["color","size"];let r=Je(e,t),{color:a="currentColor"}=e,{size:n=15}=e;return s.$$set=d=>{e=He(He({},e),_t(d)),l(2,r=Je(e,t)),"color"in d&&l(0,a=d.color),"size"in d&&l(1,n=d.size)},[a,n,r]}class mt extends ze{constructor(e){super(),Fe(this,e,Vt,It,Re,{color:0,size:1})}}function We(s,e,l){const t=s.slice();return t[14]=e[l],t}function xt(s){let e,l='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-0 top-20 z-0 h-[500px] w-[500px] -translate-x-1/2 -translate-y-1/2 transform dark:opacity-10"></div>',t,r,a,n,d,o=s[5]("default.page.fight.title")+"",u,p,g,x,U,F,k,b,c,y,M=s[5]("default.page.dashboard.fights.table.resolved")+"",T,se,S,ee=s[5]("default.page.dashboard.fights.table.partner")+"",ie,pe,H,ae=s[5]("default.page.dashboard.fights.table.date")+"",ce,G,te,C=s[5]("default.page.dashboard.fights.table.opened")+"",I,Q,K,ge,Z,le,re,ue,fe,ne;function P(m){s[9](m)}let Ie={id:"lightMode",class:"bg-gray-500 transform scale-75"};s[0]!==void 0&&(Ie.checked=s[0]),x=new ut({props:Ie}),lt.push(()=>it(x,"checked",P)),x.$on("click",s[10]),k=new ht({props:{for:"lightMode",class:"cursor-pointer",$$slots:{default:[Ct]},$$scope:{ctx:s}}});let E=Ce(s[4]),w=[];for(let m=0;m<E.length;m+=1)w[m]=Xe(We(s,E,m));const he=m=>V(w[m],1,1,()=>{w[m]=null}),me=[Tt,Mt],j=[];function _e(m,L){return m[3]?1:0}return ue=_e(s),fe=j[ue]=me[ue](s),{c(){e=_("div"),e.innerHTML=l,t=R(),r=_("div"),a=_("div"),n=_("div"),d=_("h2"),u=W(o),p=R(),g=_("div"),B(x.$$.fragment),F=R(),B(k.$$.fragment),b=R(),c=_("div"),y=_("div"),T=W(M),se=R(),S=_("div"),ie=W(ee),pe=R(),H=_("div"),ce=W(ae),G=R(),te=_("div"),I=W(C),Q=R(),K=_("div"),ge=R(),Z=_("div"),le=_("div");for(let m=0;m<w.length;m+=1)w[m].c();re=R(),fe.c(),this.h()},l(m){e=v(m,"DIV",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-2ba7nq"&&(e.innerHTML=l),t=z(m),r=v(m,"DIV",{class:!0});var L=$(r);a=v(L,"DIV",{class:!0});var de=$(a);n=v(de,"DIV",{class:!0});var ve=$(n);d=v(ve,"H2",{class:!0});var we=$(d);u=X(we,o),we.forEach(f),p=z(ve),g=v(ve,"DIV",{class:!0});var J=$(g);N(x.$$.fragment,J),F=z(J),N(k.$$.fragment,J),J.forEach(f),ve.forEach(f),b=z(de),c=v(de,"DIV",{class:!0});var oe=$(c);y=v(oe,"DIV",{class:!0});var De=$(y);T=X(De,M),De.forEach(f),se=z(oe),S=v(oe,"DIV",{class:!0});var Ae=$(S);ie=X(Ae,ee),Ae.forEach(f),pe=z(oe),H=v(oe,"DIV",{class:!0});var Oe=$(H);ce=X(Oe,ae),Oe.forEach(f),G=z(oe),te=v(oe,"DIV",{class:!0});var qe=$(te);I=X(qe,C),qe.forEach(f),Q=z(oe),K=v(oe,"DIV",{class:!0}),$(K).forEach(f),oe.forEach(f),de.forEach(f),ge=z(L),Z=v(L,"DIV",{class:!0});var Ve=$(Z);le=v(Ve,"DIV",{});var Pe=$(le);for(let Te=0;Te<w.length;Te+=1)w[Te].l(Pe);Pe.forEach(f),re=z(Ve),fe.l(Ve),Ve.forEach(f),L.forEach(f),this.h()},h(){h(e,"class","relative z-0"),h(d,"class","text-md font-bold"),h(g,"class","flex items-center gap-2"),h(n,"class","flex items-center justify-between mb-4"),h(y,"class","w-1/6"),h(S,"class","w-1/3"),h(H,"class","w-1/4"),h(te,"class","w-1/6"),h(K,"class","w-1/6"),h(c,"class","flex items-center text-2xs text-neutral-400"),h(a,"class","rounded-t-xl border-b border-black/5 bg-almostwhite px-5 pb-3 pt-4 shadow-2xl shadow-black/10 dark:bg-muted"),h(Z,"class","rounded-b-xl bg-almostwhite px-4 pb-3 pt-2 shadow-2xl shadow-black/10 dark:bg-muted"),h(r,"class","relative z-10")},m(m,L){q(m,e,L),q(m,t,L),q(m,r,L),i(r,a),i(a,n),i(n,d),i(d,u),i(n,p),i(n,g),A(x,g,null),i(g,F),A(k,g,null),i(a,b),i(a,c),i(c,y),i(y,T),i(c,se),i(c,S),i(S,ie),i(c,pe),i(c,H),i(H,ce),i(c,G),i(c,te),i(te,I),i(c,Q),i(c,K),i(r,ge),i(r,Z),i(Z,le);for(let de=0;de<w.length;de+=1)w[de]&&w[de].m(le,null);i(Z,re),j[ue].m(Z,null),ne=!0},p(m,L){(!ne||L&32)&&o!==(o=m[5]("default.page.fight.title")+"")&&Y(u,o);const de={};!U&&L&1&&(U=!0,de.checked=m[0],st(()=>U=!1)),x.$set(de);const ve={};if(L&131104&&(ve.$$scope={dirty:L,ctx:m}),k.$set(ve),(!ne||L&32)&&M!==(M=m[5]("default.page.dashboard.fights.table.resolved")+"")&&Y(T,M),(!ne||L&32)&&ee!==(ee=m[5]("default.page.dashboard.fights.table.partner")+"")&&Y(ie,ee),(!ne||L&32)&&ae!==(ae=m[5]("default.page.dashboard.fights.table.date")+"")&&Y(ce,ae),(!ne||L&32)&&C!==(C=m[5]("default.page.dashboard.fights.table.opened")+"")&&Y(I,C),L&144){E=Ce(m[4]);let J;for(J=0;J<E.length;J+=1){const oe=We(m,E,J);w[J]?(w[J].p(oe,L),D(w[J],1)):(w[J]=Xe(oe),w[J].c(),D(w[J],1),w[J].m(le,null))}for($e(),J=E.length;J<w.length;J+=1)he(J);be()}let we=ue;ue=_e(m),ue===we?j[ue].p(m,L):($e(),V(j[we],1,1,()=>{j[we]=null}),be(),fe=j[ue],fe?fe.p(m,L):(fe=j[ue]=me[ue](m),fe.c()),D(fe,1),fe.m(Z,null))},i(m){if(!ne){D(x.$$.fragment,m),D(k.$$.fragment,m);for(let L=0;L<E.length;L+=1)D(w[L]);D(fe),ne=!0}},o(m){V(x.$$.fragment,m),V(k.$$.fragment,m),w=w.filter(Boolean);for(let L=0;L<w.length;L+=1)V(w[L]);V(fe),ne=!1},d(m){m&&(f(e),f(t),f(r)),O(x),O(k),at(w,m),j[ue].d()}}}function yt(s){let e,l;return e=new ft({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:ke,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Ct(s){let e=s[5]("default.page.fights.displayResolved")+"",l;return{c(){l=W(e)},l(t){l=X(t,e)},m(t,r){q(t,l,r)},p(t,r){r&32&&e!==(e=t[5]("default.page.fights.displayResolved")+"")&&Y(l,e)},d(t){t&&f(l)}}}function Rt(s){let e,l,t;return l=new Le({props:{class:"size-3"}}),{c(){e=_("div"),B(l.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=$(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full text-red-600/80 p-1 text-2xs")},m(r,a){q(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),O(l)}}}function zt(s){let e,l,t;return l=new Me({props:{class:"size-3"}}),{c(){e=_("div"),B(l.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=$(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full text-green-600/80 p-1 text-2xs")},m(r,a){q(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),O(l)}}}function Ft(s){let e,l;return e=new Le({props:{class:"h-3 w-3 text-black"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Lt(s){let e,l;return e=new Me({props:{class:"h-3 w-3 text-black"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Xe(s){let e,l,t,r,a,n,d=s[14].name+"",o,u,p,g=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[14].created))+"",x,U,F,k,b,c,y,M,T,se,S,ee,ie;const pe=[zt,Rt],H=[];function ae(C,I){return C[14].resolved?0:1}t=ae(s),r=H[t]=pe[t](s);const ce=[Lt,Ft],G=[];function te(C,I){return C[14].opened?0:1}return k=te(s),b=G[k]=ce[k](s),T=new pt({props:{class:"h-4 w-4 rounded-full group-hover:bg-neutral-300 group-hover:text-black"}}),{c(){e=_("button"),l=_("div"),r.c(),a=R(),n=_("div"),o=W(d),u=R(),p=_("div"),x=W(g),U=R(),F=_("div"),b.c(),c=R(),y=_("div"),M=_("div"),B(T.$$.fragment),se=R(),this.h()},l(C){e=v(C,"BUTTON",{class:!0});var I=$(e);l=v(I,"DIV",{class:!0});var Q=$(l);r.l(Q),Q.forEach(f),a=z(I),n=v(I,"DIV",{class:!0});var K=$(n);o=X(K,d),K.forEach(f),u=z(I),p=v(I,"DIV",{class:!0});var ge=$(p);x=X(ge,g),ge.forEach(f),U=z(I),F=v(I,"DIV",{class:!0});var Z=$(F);b.l(Z),Z.forEach(f),c=z(I),y=v(I,"DIV",{class:!0});var le=$(y);M=v(le,"DIV",{class:!0});var re=$(M);N(T.$$.fragment,re),re.forEach(f),le.forEach(f),se=z(I),I.forEach(f),this.h()},h(){h(l,"class","flex w-1/6"),h(n,"class","input-fade-right mr-2 w-1/3 overflow-hidden whitespace-nowrap"),h(p,"class","w-1/4"),h(F,"class","w-1/6"),h(M,"class","skeumorphic-button rounded-full p-0.5 svelte-5cv73o"),h(y,"class","flex w-1/6 justify-end"),h(e,"class","group flex w-full items-center border-b border-black/5 py-2 text-left text-xs last:border-b-0 sm:py-3")},m(C,I){q(C,e,I),i(e,l),H[t].m(l,null),i(e,a),i(e,n),i(n,o),i(e,u),i(e,p),i(p,x),i(e,U),i(e,F),G[k].m(F,null),i(e,c),i(e,y),i(y,M),A(T,M,null),i(e,se),S=!0,ee||(ie=nt(e,"click",function(){ot(s[7](s[14].id))&&s[7](s[14].id).apply(this,arguments)}),ee=!0)},p(C,I){s=C;let Q=t;t=ae(s),t!==Q&&($e(),V(H[Q],1,1,()=>{H[Q]=null}),be(),r=H[t],r||(r=H[t]=pe[t](s),r.c()),D(r,1),r.m(l,null)),(!S||I&16)&&d!==(d=s[14].name+"")&&Y(o,d),(!S||I&16)&&g!==(g=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[14].created))+"")&&Y(x,g);let K=k;k=te(s),k!==K&&($e(),V(G[K],1,1,()=>{G[K]=null}),be(),b=G[k],b||(b=G[k]=ce[k](s),b.c()),D(b,1),b.m(F,null))},i(C){S||(D(r),D(b),D(T.$$.fragment,C),S=!0)},o(C){V(r),V(b),V(T.$$.fragment,C),S=!1},d(C){C&&f(e),H[t].d(),G[k].d(),O(T),ee=!1,ie()}}}function Mt(s){let e,l=s[5]("default.page.dashboard.fights.endReached")+"",t,r,a;return{c(){e=_("div"),t=W(l),r=R(),a=_("div"),this.h()},l(n){e=v(n,"DIV",{class:!0});var d=$(e);t=X(d,l),r=z(d),a=v(d,"DIV",{class:!0}),$(a).forEach(f),d.forEach(f),this.h()},h(){h(a,"class","mt-0.5 flex-grow border-t border-black/5"),h(e,"class","mt-6 flex items-center gap-2 text-2xs text-neutral-400")},m(n,d){q(n,e,d),i(e,t),i(e,r),i(e,a)},p(n,d){d&32&&l!==(l=n[5]("default.page.dashboard.fights.endReached")+"")&&Y(t,l)},i:ke,o:ke,d(n){n&&f(e)}}}function Tt(s){let e,l,t;return l=new gt({props:{decoration:"floating-op1",noInnerShadow:!0,class:"gap-3 border-neutral-100 bg-almostwhite text-black hover:bg-almostwhite dark:border-neutral-800 dark:bg-muted dark:text-white",$$slots:{default:[Ht]},$$scope:{ctx:s}}}),l.$on("click",s[6]),{c(){e=_("div"),B(l.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=$(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","mt-4 flex items-center justify-center")},m(r,a){q(r,e,a),A(l,e,null),t=!0},p(r,a){const n={};a&131108&&(n.$$scope={dirty:a,ctx:r}),l.$set(n)},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),O(l)}}}function Ht(s){let e,l,t=s[5]("default.page.fights.loadMore")+"",r,a,n,d;return e=new vt({props:{fast:!0,class:"-ml-2 -mr-1 h-3 w-5 shadow-xl transition-all duration-500 dark:shadow-gray-200/30 "+(s[2]?"max-h-4 max-w-10 opacity-100":"max-h-0 max-w-0 opacity-0")}}),n=new mt({props:{class:"-mr-2 h-4 w-4"}}),{c(){B(e.$$.fragment),l=R(),r=W(t),a=R(),B(n.$$.fragment)},l(o){N(e.$$.fragment,o),l=z(o),r=X(o,t),a=z(o),N(n.$$.fragment,o)},m(o,u){A(e,o,u),q(o,l,u),q(o,r,u),q(o,a,u),A(n,o,u),d=!0},p(o,u){const p={};u&4&&(p.class="-ml-2 -mr-1 h-3 w-5 shadow-xl transition-all duration-500 dark:shadow-gray-200/30 "+(o[2]?"max-h-4 max-w-10 opacity-100":"max-h-0 max-w-0 opacity-0")),e.$set(p),(!d||u&32)&&t!==(t=o[5]("default.page.fights.loadMore")+"")&&Y(r,t)},i(o){d||(D(e.$$.fragment,o),D(n.$$.fragment,o),d=!0)},o(o){V(e.$$.fragment,o),V(n.$$.fragment,o),d=!1},d(o){o&&(f(l),f(r),f(a)),O(e,o),O(n,o)}}}function St(s){let e,l,t,r;const a=[yt,xt],n=[];function d(o,u){return o[1]?1:0}return e=d(s),l=n[e]=a[e](s),{c(){l.c(),t=ye()},l(o){l.l(o),t=ye()},m(o,u){n[e].m(o,u),q(o,t,u),r=!0},p(o,[u]){let p=e;e=d(o),e===p?n[e].p(o,u):($e(),V(n[p],1,1,()=>{n[p]=null}),be(),l=n[e],l?l.p(o,u):(l=n[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){r||(D(l),r=!0)},o(o){V(l),r=!1},d(o){o&&f(t),n[e].d(o)}}}const jt=5;function Bt(s,e,l){let t,r,a;Ee(s,je,c=>l(12,r=c)),Ee(s,Be,c=>l(5,a=c));let n=!1,d=!0,o=[],u=1,p=!1,g=!0;const x=async()=>{l(2,d=!0);const c=await xe.collection("fights").getList(u,jt,{filter:`owner = '${r.id}'`,sort:"-updated",expand:"responses"});c.items.length===0&&l(3,p=!0),await ct(1e3),l(8,o=[...o,...c.items]),l(2,d=!1)};dt.subscribe(async()=>{console.log("endDate changed -> fetching data"),l(2,d=!0),await x()});const U=()=>{u++,x()},F=c=>{console.log("gotoFight"),Ne(`/app/fights/${c}`)};Se(async()=>{await x(),console.log("records",o),l(1,n=!0),console.log("$user",r)});function k(c){g=c,l(0,g)}const b=()=>l(0,g=!g);return s.$$.update=()=>{s.$$.dirty&257&&l(4,t=g?o:o.filter(c=>!c.resolved))},[g,n,d,p,t,a,U,F,o,k,b]}class Nt extends ze{constructor(e){super(),Fe(this,e,Bt,St,Re,{})}}function Ye(s,e,l){const t=s.slice();return t[16]=e[l],t}function At(s){let e,l='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute right-0 top-20 z-0 h-[500px] w-[500px] translate-x-1/2 -translate-y-1/2 transform dark:opacity-10"></div>',t,r,a,n,d,o=s[4]("default.page.fights.receivedLinks.heading")+"",u,p,g,x,U,F,k,b,c,y,M=s[4]("default.page.dashboard.fights.table.resolved")+"",T,se,S,ee=s[4]("default.page.dashboard.fights.table.partner")+"",ie,pe,H,ae=s[4]("default.page.dashboard.fights.table.date")+"",ce,G,te,C=s[4]("default.page.dashboard.fights.table.opened")+"",I,Q,K,ge,Z,le,re;function ue(E){s[7](E)}let fe={id:"lightMode",class:"scale-75 transform bg-gray-500"};s[1]!==void 0&&(fe.checked=s[1]),x=new ut({props:fe}),lt.push(()=>it(x,"checked",ue)),x.$on("click",s[8]),k=new ht({props:{for:"lightMode",class:"cursor-pointer",$$slots:{default:[qt]},$$scope:{ctx:s}}});let ne=Ce(s[3]),P=[];for(let E=0;E<ne.length;E+=1)P[E]=et(Ye(s,ne,E));const Ie=E=>V(P[E],1,1,()=>{P[E]=null});return{c(){e=_("div"),e.innerHTML=l,t=R(),r=_("div"),a=_("div"),n=_("div"),d=_("h2"),u=W(o),p=R(),g=_("div"),B(x.$$.fragment),F=R(),B(k.$$.fragment),b=R(),c=_("div"),y=_("div"),T=W(M),se=R(),S=_("div"),ie=W(ee),pe=R(),H=_("div"),ce=W(ae),G=R(),te=_("div"),I=W(C),Q=R(),K=_("div"),ge=R(),Z=_("div"),le=_("div");for(let E=0;E<P.length;E+=1)P[E].c();this.h()},l(E){e=v(E,"DIV",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-osbaoh"&&(e.innerHTML=l),t=z(E),r=v(E,"DIV",{class:!0});var w=$(r);a=v(w,"DIV",{class:!0});var he=$(a);n=v(he,"DIV",{class:!0});var me=$(n);d=v(me,"H2",{class:!0});var j=$(d);u=X(j,o),j.forEach(f),p=z(me),g=v(me,"DIV",{class:!0});var _e=$(g);N(x.$$.fragment,_e),F=z(_e),N(k.$$.fragment,_e),_e.forEach(f),me.forEach(f),b=z(he),c=v(he,"DIV",{class:!0});var m=$(c);y=v(m,"DIV",{class:!0});var L=$(y);T=X(L,M),L.forEach(f),se=z(m),S=v(m,"DIV",{class:!0});var de=$(S);ie=X(de,ee),de.forEach(f),pe=z(m),H=v(m,"DIV",{class:!0});var ve=$(H);ce=X(ve,ae),ve.forEach(f),G=z(m),te=v(m,"DIV",{class:!0});var we=$(te);I=X(we,C),we.forEach(f),Q=z(m),K=v(m,"DIV",{class:!0}),$(K).forEach(f),m.forEach(f),he.forEach(f),ge=z(w),Z=v(w,"DIV",{class:!0});var J=$(Z);le=v(J,"DIV",{});var oe=$(le);for(let De=0;De<P.length;De+=1)P[De].l(oe);oe.forEach(f),J.forEach(f),w.forEach(f),this.h()},h(){h(e,"class","relative z-0"),h(d,"class","text-md font-bold"),h(g,"class","flex items-center gap-2"),h(n,"class","mb-4 flex items-center justify-between"),h(y,"class","w-1/6"),h(S,"class","w-1/3"),h(H,"class","w-1/4"),h(te,"class","w-1/6"),h(K,"class","w-1/6"),h(c,"class","flex items-center text-2xs text-neutral-400"),h(a,"class","rounded-t-xl border-b border-black/5 bg-white/30 dark:bg-neutral-900 px-5 pb-3 pt-4 "),h(Z,"class","rounded-b-xl bg-white/30 dark:bg-neutral-900 px-4 pb-3 pt-2 shadow-2xl shadow-black/10"),h(r,"class","relative z-10 shadow-2xl shadow-black/10")},m(E,w){q(E,e,w),q(E,t,w),q(E,r,w),i(r,a),i(a,n),i(n,d),i(d,u),i(n,p),i(n,g),A(x,g,null),i(g,F),A(k,g,null),i(a,b),i(a,c),i(c,y),i(y,T),i(c,se),i(c,S),i(S,ie),i(c,pe),i(c,H),i(H,ce),i(c,G),i(c,te),i(te,I),i(c,Q),i(c,K),i(r,ge),i(r,Z),i(Z,le);for(let he=0;he<P.length;he+=1)P[he]&&P[he].m(le,null);re=!0},p(E,w){(!re||w&16)&&o!==(o=E[4]("default.page.fights.receivedLinks.heading")+"")&&Y(u,o);const he={};!U&&w&2&&(U=!0,he.checked=E[1],st(()=>U=!1)),x.$set(he);const me={};if(w&524304&&(me.$$scope={dirty:w,ctx:E}),k.$set(me),(!re||w&16)&&M!==(M=E[4]("default.page.dashboard.fights.table.resolved")+"")&&Y(T,M),(!re||w&16)&&ee!==(ee=E[4]("default.page.dashboard.fights.table.partner")+"")&&Y(ie,ee),(!re||w&16)&&ae!==(ae=E[4]("default.page.dashboard.fights.table.date")+"")&&Y(ce,ae),(!re||w&16)&&C!==(C=E[4]("default.page.dashboard.fights.table.opened")+"")&&Y(I,C),w&40){ne=Ce(E[3]);let j;for(j=0;j<ne.length;j+=1){const _e=Ye(E,ne,j);P[j]?(P[j].p(_e,w),D(P[j],1)):(P[j]=et(_e),P[j].c(),D(P[j],1),P[j].m(le,null))}for($e(),j=ne.length;j<P.length;j+=1)Ie(j);be()}},i(E){if(!re){D(x.$$.fragment,E),D(k.$$.fragment,E);for(let w=0;w<ne.length;w+=1)D(P[w]);re=!0}},o(E){V(x.$$.fragment,E),V(k.$$.fragment,E),P=P.filter(Boolean);for(let w=0;w<P.length;w+=1)V(P[w]);re=!1},d(E){E&&(f(e),f(t),f(r)),O(x),O(k),at(P,E)}}}function Ot(s){let e,l;return e=new ft({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:ke,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function qt(s){let e=s[4]("default.page.fights.displayResolved")+"",l;return{c(){l=W(e)},l(t){l=X(t,e)},m(t,r){q(t,l,r)},p(t,r){r&16&&e!==(e=t[4]("default.page.fights.displayResolved")+"")&&Y(l,e)},d(t){t&&f(l)}}}function Pt(s){let e,l,t;return l=new Le({props:{class:"size-3"}}),{c(){e=_("div"),B(l.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=$(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full p-1 text-2xs text-red-600/80")},m(r,a){q(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),O(l)}}}function Kt(s){let e,l,t;return l=new Me({props:{class:"size-3"}}),{c(){e=_("div"),B(l.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=$(e);N(l.$$.fragment,a),a.forEach(f),this.h()},h(){h(e,"class","rounded-full p-1 text-2xs text-green-600/80")},m(r,a){q(r,e,a),A(l,e,null),t=!0},i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){V(l.$$.fragment,r),t=!1},d(r){r&&f(e),O(l)}}}function Ut(s){let e,l;return e=new Le({props:{class:"h-3 w-3 text-black"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Gt(s){let e,l;return e=new Me({props:{class:"h-3 w-3 text-black"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function et(s){let e,l,t,r,a,n,d=s[16].expand.owner.firstName+"",o,u,p,g=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[16].created))+"",x,U,F,k,b,c,y,M,T,se,S,ee,ie;const pe=[Kt,Pt],H=[];function ae(C,I){return C[16].resolved?0:1}t=ae(s),r=H[t]=pe[t](s);const ce=[Gt,Ut],G=[];function te(C,I){return C[16].opened?0:1}return k=te(s),b=G[k]=ce[k](s),T=new pt({props:{class:"h-4 w-4 rounded-full group-hover:bg-neutral-300 group-hover:text-black"}}),{c(){e=_("button"),l=_("div"),r.c(),a=R(),n=_("div"),o=W(d),u=R(),p=_("div"),x=W(g),U=R(),F=_("div"),b.c(),c=R(),y=_("div"),M=_("div"),B(T.$$.fragment),se=R(),this.h()},l(C){e=v(C,"BUTTON",{class:!0});var I=$(e);l=v(I,"DIV",{class:!0});var Q=$(l);r.l(Q),Q.forEach(f),a=z(I),n=v(I,"DIV",{class:!0});var K=$(n);o=X(K,d),K.forEach(f),u=z(I),p=v(I,"DIV",{class:!0});var ge=$(p);x=X(ge,g),ge.forEach(f),U=z(I),F=v(I,"DIV",{class:!0});var Z=$(F);b.l(Z),Z.forEach(f),c=z(I),y=v(I,"DIV",{class:!0});var le=$(y);M=v(le,"DIV",{class:!0});var re=$(M);N(T.$$.fragment,re),re.forEach(f),le.forEach(f),se=z(I),I.forEach(f),this.h()},h(){h(l,"class","flex w-1/6"),h(n,"class","input-fade-right mr-2 w-1/3 overflow-hidden whitespace-nowrap"),h(p,"class","w-1/4"),h(F,"class","w-1/6"),h(M,"class","skeumorphic-button rounded-full p-0.5 svelte-5cv73o"),h(y,"class","flex w-1/6 justify-end"),h(e,"class","group flex w-full items-center border-b border-black/5 py-2 text-left text-xs last:border-b-0 sm:py-3")},m(C,I){q(C,e,I),i(e,l),H[t].m(l,null),i(e,a),i(e,n),i(n,o),i(e,u),i(e,p),i(p,x),i(e,U),i(e,F),G[k].m(F,null),i(e,c),i(e,y),i(y,M),A(T,M,null),i(e,se),S=!0,ee||(ie=nt(e,"click",function(){ot(s[5](s[16].id))&&s[5](s[16].id).apply(this,arguments)}),ee=!0)},p(C,I){s=C;let Q=t;t=ae(s),t!==Q&&($e(),V(H[Q],1,1,()=>{H[Q]=null}),be(),r=H[t],r||(r=H[t]=pe[t](s),r.c()),D(r,1),r.m(l,null)),(!S||I&8)&&d!==(d=s[16].expand.owner.firstName+"")&&Y(o,d),(!S||I&8)&&g!==(g=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(s[16].created))+"")&&Y(x,g);let K=k;k=te(s),k!==K&&($e(),V(G[K],1,1,()=>{G[K]=null}),be(),b=G[k],b||(b=G[k]=ce[k](s),b.c()),D(b,1),b.m(F,null))},i(C){S||(D(r),D(b),D(T.$$.fragment,C),S=!0)},o(C){V(r),V(b),V(T.$$.fragment,C),S=!1},d(C){C&&f(e),H[t].d(),G[k].d(),O(T),ee=!1,ie()}}}function Jt(s){let e,l,t,r,a;const n=[Ot,At],d=[];function o(u,p){return u[2]?1:0}return l=o(s),t=d[l]=n[l](s),{c(){e=_("div"),t.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var p=$(e);t.l(p),p.forEach(f),this.h()},h(){h(e,"class",r=Ze(Qe(s[0],""))+" svelte-5cv73o")},m(u,p){q(u,e,p),d[l].m(e,null),a=!0},p(u,[p]){let g=l;l=o(u),l===g?d[l].p(u,p):($e(),V(d[g],1,1,()=>{d[g]=null}),be(),t=d[l],t?t.p(u,p):(t=d[l]=n[l](u),t.c()),D(t,1),t.m(e,null)),(!a||p&1&&r!==(r=Ze(Qe(u[0],""))+" svelte-5cv73o"))&&h(e,"class",r)},i(u){a||(D(t),a=!0)},o(u){V(t),a=!1},d(u){u&&f(e),d[l].d()}}}function Zt(s,e,l){let t,r,a;Ee(s,je,c=>l(12,r=c)),Ee(s,Be,c=>l(4,a=c));let{class:n=void 0}=e,d=!1,o=!0,u=[],p=!0,g=[];const x=async()=>{try{o=!0;const c=await xe.collection("fights").getFullList({filter:`opponent = '${r.id}'`,requestKey:"existingRecords",expand:"owner"});l(6,u=c),console.log("existingRecords",c),g=g.filter(T=>!c.map(se=>se.id).includes(T)),console.log("openedFights",g);const y=g.map(T=>`owner != '${r.id}' && id = '${T}'`).join(" || ");console.log("filterString",y);const M=await xe.collection("fights").getFullList({sort:"-created",filter:y,requestKey:"receivedLinks",expand:"owner"});U(M),await ct(1e3),l(6,u=[...u,...M]),console.log("newRecords",M),o=!1}catch(c){console.error("Error fetching receivedLinksdata",c)}},U=c=>{console.log("transferRecords",c),c.forEach(async y=>{r.id!==y.owner&&await xe.collection("fights").update(y.id,{opponent:r.id})})};dt.subscribe(async()=>{console.log("endDate changed -> fetching data"),o=!0,await x()});const F=c=>{console.log("gotoFight"),Ne(`/app/fights/${c}/respond`)};Se(async()=>{{const c=localStorage.getItem("openedFights");c&&(g=JSON.parse(c))}console.log("openedFights",g),await x(),l(2,d=!0)});function k(c){p=c,l(1,p)}const b=()=>l(1,p=!p);return s.$$set=c=>{"class"in c&&l(0,n=c.class)},s.$$.update=()=>{s.$$.dirty&66&&l(3,t=p?u:u.filter(c=>!c.resolved))},[n,p,d,t,a,F,u,k,b]}class Qt extends ze{constructor(e){super(),Fe(this,e,Zt,Jt,Re,{class:0})}}function tt(s){let e,l,t,r,a,n,d=s[1]("default.page.fight.heading")+"",o,u,p,g,x,U,F,k;return l=new wt({}),p=new Qt({props:{class:"mb-14"}}),x=new Nt({}),F=new kt({props:{$$slots:{default:[Yt]},$$scope:{ctx:s}}}),{c(){e=_("div"),B(l.$$.fragment),t=R(),r=_("div"),a=_("div"),n=_("h1"),o=W(d),u=R(),B(p.$$.fragment),g=R(),B(x.$$.fragment),U=R(),B(F.$$.fragment),this.h()},l(b){e=v(b,"DIV",{class:!0});var c=$(e);N(l.$$.fragment,c),t=z(c),r=v(c,"DIV",{class:!0});var y=$(r);a=v(y,"DIV",{class:!0});var M=$(a);n=v(M,"H1",{class:!0});var T=$(n);o=X(T,d),T.forEach(f),M.forEach(f),u=z(y),N(p.$$.fragment,y),g=z(y),N(x.$$.fragment,y),U=z(y),N(F.$$.fragment,y),y.forEach(f),c.forEach(f),this.h()},h(){h(n,"class","font-heading text-lg font-semibold"),h(a,"class","relative z-10 mb-8 flex flex-row items-start justify-between py-4 md:items-center md:bg-transparent md:pb-6"),h(r,"class","max-container flex-grow pb-40"),h(e,"class","flex h-full flex-grow flex-col justify-between")},m(b,c){q(b,e,c),A(l,e,null),i(e,t),i(e,r),i(r,a),i(a,n),i(n,o),i(r,u),A(p,r,null),i(r,g),A(x,r,null),i(r,U),A(F,r,null),k=!0},p(b,c){(!k||c&2)&&d!==(d=b[1]("default.page.fight.heading")+"")&&Y(o,d);const y={};c&6&&(y.$$scope={dirty:c,ctx:b}),F.$set(y)},i(b){k||(D(l.$$.fragment,b),D(p.$$.fragment,b),D(x.$$.fragment,b),D(F.$$.fragment,b),k=!0)},o(b){V(l.$$.fragment,b),V(p.$$.fragment,b),V(x.$$.fragment,b),V(F.$$.fragment,b),k=!1},d(b){b&&f(e),O(l),O(p),O(x),O(F)}}}function Wt(s){let e,l;return e=new Et({props:{class:"h-4 w-4 rounded-full"}}),{c(){B(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:ke,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Xt(s){let e=s[1]("default.page.fights.create")+"",l,t,r,a;return r=new mt({props:{class:"h-4 w-4"}}),{c(){l=W(e),t=R(),B(r.$$.fragment)},l(n){l=X(n,e),t=z(n),N(r.$$.fragment,n)},m(n,d){q(n,l,d),q(n,t,d),A(r,n,d),a=!0},p(n,d){(!a||d&2)&&e!==(e=n[1]("default.page.fights.create")+"")&&Y(l,e)},i(n){a||(D(r.$$.fragment,n),a=!0)},o(n){V(r.$$.fragment,n),a=!1},d(n){n&&(f(l),f(t)),O(r,n)}}}function Yt(s){let e,l,t,r,a,n,d;return t=new gt({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[Wt]},$$scope:{ctx:s}}}),n=new Dt({props:{class:"flex items-center justify-between gap-10 rounded-full pl-5 pr-3 font-bold text-black dark:shadow-gray-300/30",$$slots:{default:[Xt]},$$scope:{ctx:s}}}),{c(){e=_("div"),l=_("a"),B(t.$$.fragment),r=R(),a=_("a"),B(n.$$.fragment),this.h()},l(o){e=v(o,"DIV",{class:!0});var u=$(e);l=v(u,"A",{href:!0,class:!0});var p=$(l);N(t.$$.fragment,p),p.forEach(f),r=z(u),a=v(u,"A",{href:!0,class:!0});var g=$(a);N(n.$$.fragment,g),g.forEach(f),u.forEach(f),this.h()},h(){h(l,"href","/app/dashboard"),h(l,"class","block"),h(a,"href","/app/fights/create"),h(a,"class","skeumorphic-button-dark inline-block rounded-full mr-1 md:mr-0.5 svelte-ef713u"),h(e,"class","relative flex h-auto items-center justify-between")},m(o,u){q(o,e,u),i(e,l),A(t,l,null),i(e,r),i(e,a),A(n,a,null),d=!0},p(o,u){const p={};u&4&&(p.$$scope={dirty:u,ctx:o}),t.$set(p);const g={};u&6&&(g.$$scope={dirty:u,ctx:o}),n.$set(g)},i(o){d||(D(t.$$.fragment,o),D(n.$$.fragment,o),d=!0)},o(o){V(t.$$.fragment,o),V(n.$$.fragment,o),d=!1},d(o){o&&f(e),O(t),O(n)}}}function el(s){let e,l,t=s[0]&&tt(s);return{c(){t&&t.c(),e=ye()},l(r){t&&t.l(r),e=ye()},m(r,a){t&&t.m(r,a),q(r,e,a),l=!0},p(r,[a]){r[0]?t?(t.p(r,a),a&1&&D(t,1)):(t=tt(r),t.c(),D(t,1),t.m(e.parentNode,e)):t&&($e(),V(t,1,1,()=>{t=null}),be())},i(r){l||(D(t),l=!0)},o(r){V(t),l=!1},d(r){r&&f(e),t&&t.d(r)}}}function tl(s,e,l){let t,r;return Ee(s,je,a=>l(0,t=a)),Ee(s,Be,a=>l(1,r=a)),Se(()=>{t||Ne("/app/auth/login"),bt.set("bg-background")}),[t,r]}class Dl extends ze{constructor(e){super(),Fe(this,e,tl,el,Re,{})}}export{Dl as component};
