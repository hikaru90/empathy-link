import{s as ge,l as se,m as ze,o as Je,b as N,f as d,p as $,q as Oe,i as k,h as w,n as M,r as Me,u as Ot,e as D,a as j,c as I,g as y,k as ie,Z as Mt,t as z,d as J,j as O,G as U,H as Fe,V as At,x as pe,y as ct,M as ne,_ as Lt,L as Rt,N as ue,K as Ht,E as ee,z as Pt,O as ae,R as pt}from"../chunks/scheduler.CkaH_kk_.js";import{S as _e,i as he,c as S,a as T,m as B,g as G,b,e as K,t as h,d as F,f as ce}from"../chunks/index.54FFccaA.js";import{b as Ut,s as Ee,h as De,e as W}from"../chunks/helpers.Ds6scvgk.js";import{g as de,t as P,l as gt,a as $e}from"../chunks/page.9O7M_nH0.js";import{A as Zt,p as me}from"../chunks/pocketbase.Ca1sjrxv.js";import{A as Gt}from"../chunks/AppBottomMenu.DEoiUOa7.js";import{p as Kt}from"../chunks/stores.M8yFnWEk.js";import"../chunks/Avatar.svelte_svelte_type_style_lang.DU-Db0_i.js";import{D as Qt,d as Wt,a as Xt,b as Yt,c as xt,C as el,e as tl}from"../chunks/index._7RppESj.js";import"../chunks/entry.CRGHYhxA.js";import{c as Q,z as ll,F as ve,C as be,a as we,b as ke}from"../chunks/zod.C_X1RODJ.js";import{A as dt,C as rl,a as sl,F as nl,T as mt,b as _t,c as ht}from"../chunks/textarea.DgxOACLq.js";import{z as X,s as al}from"../chunks/memoize.Z5ApZ70n.js";import{B as je}from"../chunks/button.DXf-moEL.js";import{C as ol}from"../chunks/CaretLeft.CnkXNcjD.js";import{I as Ie}from"../chunks/icon-folder.CBGieXVr.js";import{I as Ne,a as Ae,b as Le,c as Re}from"../chunks/icon-steps.dGSELuxl.js";import{B as fl}from"../chunks/button.DD3aJA0C.js";function il(a){let e,l,t=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],r={};for(let s=0;s<t.length;s+=1)r=se(r,t[s]);return{c(){e=ze("svg"),l=ze("path"),this.h()},l(s){e=Je(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=N(e);l=Je(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),N(l).forEach(d),n.forEach(d),this.h()},h(){$(l,"fill-rule","evenodd"),$(l,"clip-rule","evenodd"),$(l,"d","M0.877075 7.49972C0.877075 3.84204 3.84222 0.876892 7.49991 0.876892C11.1576 0.876892 14.1227 3.84204 14.1227 7.49972C14.1227 11.1574 11.1576 14.1226 7.49991 14.1226C3.84222 14.1226 0.877075 11.1574 0.877075 7.49972ZM7.49991 1.82689C4.36689 1.82689 1.82708 4.36671 1.82708 7.49972C1.82708 10.6327 4.36689 13.1726 7.49991 13.1726C10.6329 13.1726 13.1727 10.6327 13.1727 7.49972C13.1727 4.36671 10.6329 1.82689 7.49991 1.82689ZM8.24993 10.5C8.24993 10.9142 7.91414 11.25 7.49993 11.25C7.08571 11.25 6.74993 10.9142 6.74993 10.5C6.74993 10.0858 7.08571 9.75 7.49993 9.75C7.91414 9.75 8.24993 10.0858 8.24993 10.5ZM6.05003 6.25C6.05003 5.57211 6.63511 4.925 7.50003 4.925C8.36496 4.925 8.95003 5.57211 8.95003 6.25C8.95003 6.74118 8.68002 6.99212 8.21447 7.27494C8.16251 7.30651 8.10258 7.34131 8.03847 7.37854L8.03841 7.37858C7.85521 7.48497 7.63788 7.61119 7.47449 7.73849C7.23214 7.92732 6.95003 8.23198 6.95003 8.7C6.95004 9.00376 7.19628 9.25 7.50004 9.25C7.8024 9.25 8.04778 9.00601 8.05002 8.70417L8.05056 8.7033C8.05924 8.6896 8.08493 8.65735 8.15058 8.6062C8.25207 8.52712 8.36508 8.46163 8.51567 8.37436L8.51571 8.37433C8.59422 8.32883 8.68296 8.27741 8.78559 8.21506C9.32004 7.89038 10.05 7.35382 10.05 6.25C10.05 4.92789 8.93511 3.825 7.50003 3.825C6.06496 3.825 4.95003 4.92789 4.95003 6.25C4.95003 6.55376 5.19628 6.8 5.50003 6.8C5.80379 6.8 6.05003 6.55376 6.05003 6.25Z"),$(l,"fill",a[0]),Oe(e,r)},m(s,n){k(s,e,n),w(e,l)},p(s,[n]){n&1&&$(l,"fill",s[0]),Oe(e,r=de(t,[n&2&&{width:s[1]},n&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n&4&&s[2]]))},i:M,o:M,d(s){s&&d(e)}}}function ul(a,e,l){const t=["color","size"];let r=Me(e,t),{color:s="currentColor"}=e,{size:n=15}=e;return a.$$set=f=>{e=se(se({},e),Ot(f)),l(2,r=Me(e,t)),"color"in f&&l(0,s=f.color),"size"in f&&l(1,n=f.size)},[s,n,r]}class cl extends _e{constructor(e){super(),he(this,e,ul,il,ge,{color:0,size:1})}}function pl(a){let e,l;return e=new ol({props:{class:"h-4 w-4 rounded-full"}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function gl(a){let e,l;return e=new je({props:{type:"submit",decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[$l]},$$scope:{ctx:a}}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p(t,r){const s={};r&265&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function dl(a){let e,l;return e=new je({props:{decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[vl]},$$scope:{ctx:a}}}),e.$on("click",a[5]),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p(t,r){const s={};r&264&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function ml(a){let e=a[3]("default.page.fights.form.general.next")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.next")+"")&&O(l,e)},d(t){t&&d(l)}}}function _l(a){let e=a[3]("default.page.fights.form.general.knowledge")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.knowledge")+"")&&O(l,e)},d(t){t&&d(l)}}}function hl(a){let e=a[3]("default.page.fights.form.general.yes")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.yes")+"")&&O(l,e)},d(t){t&&d(l)}}}function $l(a){let e,l,t;function r(f,o){return f[0]===1?hl:f[0]===2?_l:ml}let s=r(a),n=s(a);return l=new dt({props:{class:"h-3 w-3"}}),{c(){n.c(),e=j(),S(l.$$.fragment)},l(f){n.l(f),e=y(f),T(l.$$.fragment,f)},m(f,o){n.m(f,o),k(f,e,o),B(l,f,o),t=!0},p(f,o){s===(s=r(f))&&n?n.p(f,o):(n.d(1),n=s(f),n&&(n.c(),n.m(e.parentNode,e)))},i(f){t||(h(l.$$.fragment,f),t=!0)},o(f){b(l.$$.fragment,f),t=!1},d(f){f&&d(e),n.d(f),F(l,f)}}}function vl(a){let e=a[3]("default.page.fights.form.general.checkJudgement")+"",l,t,r,s;return r=new dt({props:{class:"h-3 w-3"}}),{c(){l=z(e),t=j(),S(r.$$.fragment)},l(n){l=J(n,e),t=y(n),T(r.$$.fragment,n)},m(n,f){k(n,l,f),k(n,t,f),B(r,n,f),s=!0},p(n,f){(!s||f&8)&&e!==(e=n[3]("default.page.fights.form.general.checkJudgement")+"")&&O(l,e)},i(n){s||(h(r.$$.fragment,n),s=!0)},o(n){b(r.$$.fragment,n),s=!1},d(n){n&&(d(l),d(t)),F(r,n)}}}function bl(a){let e,l,t,r,s,n,f,o,i;t=new je({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[pl]},$$scope:{ctx:a}}}),t.$on("click",a[4]);const u=[dl,gl],c=[];function g(p,m){return p[1]?0:1}return n=g(a),f=c[n]=u[n](a),{c(){e=D("div"),l=D("div"),S(t.$$.fragment),s=j(),f.c(),this.h()},l(p){e=I(p,"DIV",{class:!0});var m=N(e);l=I(m,"DIV",{class:!0});var _=N(l);T(t.$$.fragment,_),_.forEach(d),s=y(m),f.l(m),m.forEach(d),this.h()},h(){$(l,"class",r=(a[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"),$(e,"class",o="flex justify-between "+a[2])},m(p,m){k(p,e,m),w(e,l),B(t,l,null),w(e,s),c[n].m(e,null),i=!0},p(p,[m]){const _={};m&256&&(_.$$scope={dirty:m,ctx:p}),t.$set(_),(!i||m&1&&r!==(r=(p[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"))&&$(l,"class",r);let v=n;n=g(p),n===v?c[n].p(p,m):(G(),b(c[v],1,1,()=>{c[v]=null}),K(),f=c[n],f?f.p(p,m):(f=c[n]=u[n](p),f.c()),h(f,1),f.m(e,null)),(!i||m&4&&o!==(o="flex justify-between "+p[2]))&&$(e,"class",o)},i(p){i||(h(t.$$.fragment,p),h(f),i=!0)},o(p){b(t.$$.fragment,p),b(f),i=!1},d(p){p&&d(e),F(t),c[n].d()}}}function wl(a,e,l){let t;ie(a,P,c=>l(3,t=c));const r=Mt();let{step:s}=e,{checkForJudgement:n}=e,{class:f=void 0}=e,{primaryButtonClass:o=void 0}=e;const i=()=>{console.log("toPrev"),r("toPrev")},u=()=>{r("validateObservation")};return a.$$set=c=>{"step"in c&&l(0,s=c.step),"checkForJudgement"in c&&l(1,n=c.checkForJudgement),"class"in c&&l(2,f=c.class),"primaryButtonClass"in c&&l(6,o=c.primaryButtonClass)},[s,n,f,t,i,u,o]}class kl extends _e{constructor(e){super(),he(this,e,wl,bl,ge,{step:0,checkForJudgement:1,class:2,primaryButtonClass:6})}}const Ve=X.object({}),Se=X.object({}),Te=X.object({}),Be=X.object({}),Cl=X.object({}),El=X.object({}),Dl=X.object({}),Il=X.object({}),Nl=Ve.extend({observation:X.string().min(10,{message:U(P)("default.page.fights.form.observation.tooShortError")})}),Vl=Se.extend({feelings:X.array(X.string()).min(1,{message:U(P)("default.page.fights.form.feelings.tooFewError")})}),Sl=Te.extend({needs:X.array(X.string()).min(1,{message:U(P)("default.page.fights.form.needs.tooFewError")})}),fe=Be.extend({request:X.string().min(10,{message:U(P)("default.page.fights.form.request.tooFewError")})});function Tl(a){let e;return{c(){e=D("div"),this.h()},l(l){e=I(l,"DIV",{id:!0,class:!0}),N(e).forEach(d),this.h()},h(){$(e,"id","speechBubble"),$(e,"class","w-full")},m(l,t){k(l,e,t),a[11](e)},p:M,d(l){l&&d(e),a[11](null)}}}function Bl(a){let e,l="...";return{c(){e=D("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-534rav"&&(e.textContent=l),this.h()},h(){$(e,"id","speechBubble"),$(e,"class","w-full")},m(t,r){k(t,e,r)},p:M,d(t){t&&d(e)}}}function He(a){let e,l,t,r,s,n,f,o,i,u;return r=new rl({props:{class:"size-2.5"}}),f=new sl({props:{class:"size-2.5"}}),{c(){e=D("div"),l=D("div"),t=D("button"),S(r.$$.fragment),s=j(),n=D("button"),S(f.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=N(e);l=I(g,"DIV",{class:!0});var p=N(l);t=I(p,"BUTTON",{class:!0});var m=N(t);T(r.$$.fragment,m),m.forEach(d),s=y(p),n=I(p,"BUTTON",{class:!0});var _=N(n);T(f.$$.fragment,_),_.forEach(d),p.forEach(d),g.forEach(d),this.h()},h(){$(t,"class","chevron svelte-12yl6i5"),$(n,"class","chevron svelte-12yl6i5"),$(l,"class","-mr-1 flex flex-col items-center gap-0.5"),$(e,"class","flex justify-end text-2xs")},m(c,g){k(c,e,g),w(e,l),w(l,t),B(r,t,null),w(l,s),w(l,n),B(f,n,null),o=!0,i||(u=[pe(t,"click",a[12]),pe(n,"click",a[13])],i=!0)},p:M,i(c){o||(h(r.$$.fragment,c),h(f.$$.fragment,c),o=!0)},o(c){b(r.$$.fragment,c),b(f.$$.fragment,c),o=!1},d(c){c&&d(e),F(r),F(f),i=!1,ct(u)}}}function Fl(a){let e,l,t=`<div style="background-image: url(&#39;${Ut}&#39;); background-size: 300% 100%" class="animate-bg relative z-10 flex h-full w-[60px] items-center justify-center rounded-b rounded-t-[50px] shadow-lg transition duration-700"><div data-name="face" class="lookaround face-3 flex flex-col gap-1 svelte-12yl6i5"><div data-name="eyes" class="eyes flex items-center justify-center gap-2"><div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div> <div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div></div> <div data-name="mouth" class="mouth flex items-center justify-center svelte-12yl6i5"><div class="h-1.5 w-2.5 rounded-b-full bg-black"></div></div></div></div>`,r,s,n,f,o,i,u;function c(_,v){return _[2]?Bl:Tl}let g=c(a),p=g(a),m=a[1].length>1&&He(a);return{c(){e=D("div"),l=D("div"),l.innerHTML=t,r=j(),s=D("div"),n=D("div"),f=j(),o=D("div"),p.c(),i=j(),m&&m.c(),this.h()},l(_){e=I(_,"DIV",{class:!0});var v=N(e);l=I(v,"DIV",{class:!0,"data-svelte-h":!0}),Fe(l)!=="svelte-ido9h0"&&(l.innerHTML=t),r=y(v),s=I(v,"DIV",{class:!0});var E=N(s);n=I(E,"DIV",{class:!0}),N(n).forEach(d),f=y(E),o=I(E,"DIV",{class:!0});var R=N(o);p.l(R),i=y(R),m&&m.l(R),R.forEach(d),E.forEach(d),v.forEach(d),this.h()},h(){$(l,"class","relative left-0 right-0 flex h-12 flex-shrink-0 justify-center gap-1"),$(n,"class","triangle size-3 flex-shrink-0 bg-white svelte-12yl6i5"),$(o,"class","rounded-tl-0 relative flex flex-grow rounded-b rounded-tr bg-white px-2 pb-2 pt-1 text-sm leading-tight gap-2"),$(s,"class","flex flex-grow"),$(e,"class","mt-4 flex items-start gap-2")},m(_,v){k(_,e,v),w(e,l),w(e,r),w(e,s),w(s,n),w(s,f),w(s,o),p.m(o,null),w(o,i),m&&m.m(o,null),u=!0},p(_,[v]){g===(g=c(_))&&p?p.p(_,v):(p.d(1),p=g(_),p&&(p.c(),p.m(o,i))),_[1].length>1?m?(m.p(_,v),v&2&&h(m,1)):(m=He(_),m.c(),h(m,1),m.m(o,null)):m&&(G(),b(m,1,1,()=>{m=null}),K())},i(_){u||(h(m),u=!0)},o(_){b(m),u=!1},d(_){_&&d(e),p.d(),m&&m.d()}}}function jl(a,e,l){let t,r;ie(a,gt,V=>l(15,r=V));let{step:s}=e,{stepName:n}=e,{formSuccess:f}=e,{speechBubbleContentArray:o}=e,i=0,u=!1,c,g;const p=(V,Z,Y)=>{try{let le=function(){te<Z.length&&(V.innerHTML+=Z.charAt(te),te++,g=setTimeout(le,Y))};console.log("typeText");let te=0;V.innerHTML="";const x=document.createElement("div");x.style.visibility="hidden",x.style.position="absolute",x.style.width=`${V.clientWidth}px`,x.style.color="red",x.style.whiteSpace="pre-wrap",x.innerText=Z,V.appendChild(x);const ye=x.clientHeight;V.style.height=`${ye}px`,V.removeChild(x),g&&clearTimeout(g),le()}catch(le){console.error("error typing text",le)}},m=(V="Hi")=>{l(1,t=[t[0],V]),l(10,i=1)},_=async V=>{l(2,u=!0);try{const Y=await(await fetch("/api/ai/checkForJudgement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:V,lang:r})})).json();l(2,u=!1);const le=Y.result;m(le)}catch(Z){console.error("error in getting judgement",Z)}},v=()=>{console.log("decreaseIndex"),i>0&&l(10,i--,i)},E=()=>{console.log("increaseIndex"),t.length>1&&i===0&&l(10,i++,i)};At(()=>{g&&clearTimeout(g)});function R(V){ne[V?"unshift":"push"](()=>{c=V,l(0,c)})}const oe=()=>v(),q=()=>E();return a.$$set=V=>{"step"in V&&l(5,s=V.step),"stepName"in V&&l(6,n=V.stepName),"formSuccess"in V&&l(7,f=V.formSuccess),"speechBubbleContentArray"in V&&l(8,o=V.speechBubbleContentArray)},a.$$.update=()=>{a.$$.dirty&416&&l(1,t=s===13&&!f?o.find(V=>V.step===13).errorContent:o.find(V=>V.step===s).content),a.$$.dirty&32&&l(10,i=0),a.$$.dirty&1027&&c&&(console.log("inside if speechBubbleElement"),p(c,t[i],30))},[c,t,u,v,E,s,n,f,o,_,i,R,oe,q]}class yl extends _e{constructor(e){super(),he(this,e,jl,Fl,ge,{step:5,stepName:6,formSuccess:7,speechBubbleContentArray:8,checkJudgement:9})}get checkJudgement(){return this.$$.ctx[9]}}function Pe(a,e,l){const t=a.slice();return t[58]=e[l],t}function Ue(a,e,l){const t=a.slice();return t[51]=e[l],t}function Ze(a,e,l){const t=a.slice();return t[55]=e[l],t}function Ge(a,e,l){const t=a.slice();return t[58]=e[l],t}function Ke(a,e,l){const t=a.slice();return t[48]=e[l],t}function Qe(a,e,l){const t=a.slice();return t[51]=e[l],t}function We(a,e,l){const t=a.slice();return t[48]=e[l],t}function Xe(a){let e,l,t,r,s=a[0]>8&&Ye(a);function n(o){a[25](o)}let f={speechBubbleContentArray:a[5],step:a[0],stepName:a[10][a[0]-1].slug,formSuccess:a[7]};return a[4]!==void 0&&(f.checkJudgement=a[4]),l=new yl({props:f}),ne.push(()=>ce(l,"checkJudgement",n)),{c(){s&&s.c(),e=j(),S(l.$$.fragment)},l(o){s&&s.l(o),e=y(o),T(l.$$.fragment,o)},m(o,i){s&&s.m(o,i),k(o,e,i),B(l,o,i),r=!0},p(o,i){o[0]>8?s?(s.p(o,i),i[0]&1&&h(s,1)):(s=Ye(o),s.c(),h(s,1),s.m(e.parentNode,e)):s&&(G(),b(s,1,1,()=>{s=null}),K());const u={};i[0]&32&&(u.speechBubbleContentArray=o[5]),i[0]&1&&(u.step=o[0]),i[0]&1025&&(u.stepName=o[10][o[0]-1].slug),i[0]&128&&(u.formSuccess=o[7]),!t&&i[0]&16&&(t=!0,u.checkJudgement=o[4],ue(()=>t=!1)),l.$set(u)},i(o){r||(h(s),h(l.$$.fragment,o),r=!0)},o(o){b(s),b(l.$$.fragment,o),r=!1},d(o){o&&d(e),s&&s.d(o),F(l,o)}}}function Ye(a){let e,l;return e=new nl({props:{step:a[0],steps:a[10],stepBackground:a[10][a[0]-1].slug}}),e.$on("changeStep",a[20]),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p(t,r){const s={};r[0]&1&&(s.step=t[0]),r[0]&1024&&(s.steps=t[10]),r[0]&1025&&(s.stepBackground=t[10][t[0]-1].slug),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function xe(a){let e=a[0],l,t,r=it(a);return{c(){r.c(),l=ee()},l(s){r.l(s),l=ee()},m(s,n){r.m(s,n),k(s,l,n),t=!0},p(s,n){n[0]&1&&ge(e,e=s[0])?(G(),b(r,1,1,M),K(),r=it(s),r.c(),h(r,1),r.m(l.parentNode,l)):r.p(s,n)},i(s){t||(h(r),t=!0)},o(s){b(r),t=!1},d(s){s&&d(l),r.d(s)}}}function ql(a){let e=a[11]("default.page.respond.steps.error")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.respond.steps.error")+"")&&O(l,e)},i:M,o:M,d(t){t&&d(l)}}}function zl(a){let e=a[11]("default.page.respond.steps.success")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.respond.steps.success")+"")&&O(l,e)},i:M,o:M,d(t){t&&d(l)}}}function Jl(a){let e,l,t;return l=new ve({props:{form:a[16],name:"request",$$slots:{default:[Xl]},$$scope:{ctx:a}}}),{c(){e=D("div"),S(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(l.$$.fragment,s),s.forEach(d),this.h()},h(){$(e,"data-simplebar",""),$(e,"class","form-content")},m(r,s){k(r,e,s),B(l,e,null),t=!0},p(r,s){const n={};s[0]&6144|s[2]&32&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){b(l.$$.fragment,r),t=!1},d(r){r&&d(e),F(l)}}}function Ol(a){let e,l,t;return l=new ve({props:{form:a[16],name:"needs",$$slots:{default:[lr]},$$scope:{ctx:a}}}),{c(){e=D("div"),S(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(l.$$.fragment,s),s.forEach(d),this.h()},h(){$(e,"data-simplebar",""),$(e,"class","form-content")},m(r,s){k(r,e,s),B(l,e,null),t=!0},p(r,s){const n={};s[0]&14340|s[2]&32&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){b(l.$$.fragment,r),t=!1},d(r){r&&d(e),F(l)}}}function Ml(a){let e,l,t;return l=new ve({props:{form:a[16],name:"feelings",$$slots:{default:[or]},$$scope:{ctx:a}}}),{c(){e=D("div"),S(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(l.$$.fragment,s),s.forEach(d),this.h()},h(){$(e,"data-simplebar",""),$(e,"class","form-content")},m(r,s){k(r,e,s),B(l,e,null),t=!0},p(r,s){const n={};s[0]&15363|s[2]&32&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){b(l.$$.fragment,r),t=!1},d(r){r&&d(e),F(l)}}}function Al(a){let e,l,t;return l=new ve({props:{form:a[16],name:"observation",$$slots:{default:[ur]},$$scope:{ctx:a}}}),{c(){e=D("div"),S(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{"data-simplebar":!0,class:!0});var s=N(e);T(l.$$.fragment,s),s.forEach(d),this.h()},h(){$(e,"data-simplebar",""),$(e,"class","form-content")},m(r,s){k(r,e,s),B(l,e,null),t=!0},p(r,s){const n={};s[0]&6400|s[2]&32&&(n.$$scope={dirty:s,ctx:r}),l.$set(n)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){b(l.$$.fragment,r),t=!1},d(r){r&&d(e),F(l)}}}function Ll(a){let e,l,t=a[11]("default.page.respond.steps.pause.heading")+"",r;return{c(){e=D("div"),l=D("div"),r=z(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=N(e);l=I(n,"DIV",{class:!0});var f=N(l);r=J(f,t),f.forEach(d),n.forEach(d),this.h()},h(){$(l,"class","flex max-w-[18em] flex-col gap-4 text-center"),$(e,"class","form-content flex items-center justify-center")},m(s,n){k(s,e,n),w(e,l),w(l,r)},p(s,n){n[0]&2048&&t!==(t=s[11]("default.page.respond.steps.pause.heading")+"")&&O(r,t)},i:M,o:M,d(s){s&&d(e)}}}function Rl(a){let e,l,t=a[3].expand.owner.firstName+"",r,s,n=a[11]("default.page.respond.steps.ownerRequest.heading")+"",f,o,i,u=a[3].request+"",c;return{c(){e=D("div"),l=D("div"),r=z(t),s=j(),f=z(n),o=j(),i=D("div"),c=z(u),this.h()},l(g){e=I(g,"DIV",{"data-simplebar":!0,class:!0});var p=N(e);l=I(p,"DIV",{class:!0});var m=N(l);r=J(m,t),s=y(m),f=J(m,n),m.forEach(d),o=y(p),i=I(p,"DIV",{class:!0});var _=N(i);c=J(_,u),_.forEach(d),p.forEach(d),this.h()},h(){$(l,"class","form-label pt-10"),$(i,"class","rounded bg-white/10 px-4 py-3 shadow-xl"),$(e,"data-simplebar",""),$(e,"class","form-content")},m(g,p){k(g,e,p),w(e,l),w(l,r),w(l,s),w(l,f),w(e,o),w(e,i),w(i,c)},p(g,p){p[0]&8&&t!==(t=g[3].expand.owner.firstName+"")&&O(r,t),p[0]&2048&&n!==(n=g[11]("default.page.respond.steps.ownerRequest.heading")+"")&&O(f,n),p[0]&8&&u!==(u=g[3].request+"")&&O(c,u)},i:M,o:M,d(g){g&&d(e)}}}function Hl(a){let e,l,t=a[3].expand.owner.firstName+"",r,s,n=a[11]("default.page.respond.steps.ownerNeeds.heading")+"",f,o,i,u=W(a[3].expand.needs),c=[];for(let g=0;g<u.length;g+=1)c[g]=ot(Qe(a,u,g));return{c(){e=D("div"),l=D("div"),r=z(t),s=j(),f=z(n),o=j(),i=D("div");for(let g=0;g<c.length;g+=1)c[g].c();this.h()},l(g){e=I(g,"DIV",{"data-simplebar":!0,class:!0});var p=N(e);l=I(p,"DIV",{class:!0});var m=N(l);r=J(m,t),s=y(m),f=J(m,n),m.forEach(d),o=y(p),i=I(p,"DIV",{class:!0});var _=N(i);for(let v=0;v<c.length;v+=1)c[v].l(_);_.forEach(d),p.forEach(d),this.h()},h(){$(l,"class","form-label pt-10"),$(i,"class","flex flex-wrap items-center gap-2"),$(e,"data-simplebar",""),$(e,"class","form-content")},m(g,p){k(g,e,p),w(e,l),w(l,r),w(l,s),w(l,f),w(e,o),w(e,i);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(i,null)},p(g,p){if(p[0]&8&&t!==(t=g[3].expand.owner.firstName+"")&&O(r,t),p[0]&2048&&n!==(n=g[11]("default.page.respond.steps.ownerNeeds.heading")+"")&&O(f,n),p[0]&8200){u=W(g[3].expand.needs);let m;for(m=0;m<u.length;m+=1){const _=Qe(g,u,m);c[m]?c[m].p(_,p):(c[m]=ot(_),c[m].c(),c[m].m(i,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}},i:M,o:M,d(g){g&&d(e),ae(c,g)}}}function Pl(a){let e,l,t=a[3].expand.owner.firstName+"",r,s,n=a[11]("default.page.respond.steps.ownerFeelings.heading")+"",f,o,i,u=W(a[3].expand.feelings),c=[];for(let g=0;g<u.length;g+=1)c[g]=ft(We(a,u,g));return{c(){e=D("div"),l=D("div"),r=z(t),s=j(),f=z(n),o=j(),i=D("div");for(let g=0;g<c.length;g+=1)c[g].c();this.h()},l(g){e=I(g,"DIV",{"data-simplebar":!0,class:!0});var p=N(e);l=I(p,"DIV",{class:!0});var m=N(l);r=J(m,t),s=y(m),f=J(m,n),m.forEach(d),o=y(p),i=I(p,"DIV",{class:!0});var _=N(i);for(let v=0;v<c.length;v+=1)c[v].l(_);_.forEach(d),p.forEach(d),this.h()},h(){$(l,"class","form-label pt-10"),$(i,"class","flex flex-wrap items-center gap-2"),$(e,"data-simplebar",""),$(e,"class","form-content")},m(g,p){k(g,e,p),w(e,l),w(l,r),w(l,s),w(l,f),w(e,o),w(e,i);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(i,null)},p(g,p){if(p[0]&8&&t!==(t=g[3].expand.owner.firstName+"")&&O(r,t),p[0]&2048&&n!==(n=g[11]("default.page.respond.steps.ownerFeelings.heading")+"")&&O(f,n),p[0]&8200){u=W(g[3].expand.feelings);let m;for(m=0;m<u.length;m+=1){const _=We(g,u,m);c[m]?c[m].p(_,p):(c[m]=ft(_),c[m].c(),c[m].m(i,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}},i:M,o:M,d(g){g&&d(e),ae(c,g)}}}function Ul(a){let e,l,t=a[3].expand.owner.firstName+"",r,s,n=a[11]("default.page.respond.steps.ownerObservation.heading")+"",f,o,i,u=a[3].observation+"",c;return{c(){e=D("div"),l=D("div"),r=z(t),s=j(),f=z(n),o=j(),i=D("div"),c=z(u),this.h()},l(g){e=I(g,"DIV",{"data-simplebar":!0,class:!0});var p=N(e);l=I(p,"DIV",{class:!0});var m=N(l);r=J(m,t),s=y(m),f=J(m,n),m.forEach(d),o=y(p),i=I(p,"DIV",{class:!0});var _=N(i);c=J(_,u),_.forEach(d),p.forEach(d),this.h()},h(){$(l,"class","form-label pt-10"),$(i,"class","rounded bg-white/10 px-4 py-3 shadow-xl"),$(e,"data-simplebar",""),$(e,"class","form-content")},m(g,p){k(g,e,p),w(e,l),w(l,r),w(l,s),w(l,f),w(e,o),w(e,i),w(i,c)},p(g,p){p[0]&8&&t!==(t=g[3].expand.owner.firstName+"")&&O(r,t),p[0]&2048&&n!==(n=g[11]("default.page.respond.steps.ownerObservation.heading")+"")&&O(f,n),p[0]&8&&u!==(u=g[3].observation+"")&&O(c,u)},i:M,o:M,d(g){g&&d(e)}}}function Zl(a){let e,l,t,r=a[11]("default.page.respond.steps.breathe.heading")+"",s,n,f,o,i;return{c(){e=D("div"),l=D("div"),t=D("span"),s=z(r),n=j(),f=D("div"),o=j(),i=D("div"),this.h()},l(u){e=I(u,"DIV",{class:!0});var c=N(e);l=I(c,"DIV",{class:!0});var g=N(l);t=I(g,"SPAN",{class:!0});var p=N(t);s=J(p,r),p.forEach(d),n=y(g),f=I(g,"DIV",{class:!0}),N(f).forEach(d),o=y(g),i=I(g,"DIV",{class:!0}),N(i).forEach(d),g.forEach(d),c.forEach(d),this.h()},h(){$(t,"class","relative z-10 -mb-2"),$(f,"class","breathe svelte-1oous0z"),$(i,"class","breathe2 svelte-1oous0z"),$(l,"class","relative flex flex-col text-center"),$(e,"class","form-content flex items-center justify-center")},m(u,c){k(u,e,c),w(e,l),w(l,t),w(t,s),w(l,n),w(l,f),w(l,o),w(l,i)},p(u,c){c[0]&2048&&r!==(r=u[11]("default.page.respond.steps.breathe.heading")+"")&&O(s,r)},i:M,o:M,d(u){u&&d(e)}}}function Gl(a){let e,l="";return{c(){e=D("div"),e.innerHTML=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-16so695"&&(e.innerHTML=l),this.h()},h(){$(e,"class","form-content flex flex-col items-center justify-center text-center")},m(t,r){k(t,e,r)},p:M,i:M,o:M,d(t){t&&d(e)}}}function Kl(a){let e,l,t,r,s;return r=new fl({props:{variant:"ghost",class:"mb-6 flex w-full items-center justify-start gap-2 text-black",$$slots:{default:[cr]},$$scope:{ctx:a}}}),r.$on("click",a[26]),{c(){e=D("div"),l=D("div"),t=j(),S(r.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var f=N(e);l=I(f,"DIV",{}),N(l).forEach(d),t=y(f),T(r.$$.fragment,f),f.forEach(d),this.h()},h(){$(e,"class","form-content flex flex-col items-center justify-between pb-1 pt-10 text-center")},m(n,f){k(n,e,f),w(e,l),w(e,t),B(r,e,null),s=!0},p(n,f){const o={};f[0]&2048|f[2]&32&&(o.$$scope={dirty:f,ctx:n}),r.$set(o)},i(n){s||(h(r.$$.fragment,n),s=!0)},o(n){b(r.$$.fragment,n),s=!1},d(n){n&&d(e),F(r)}}}function Ql(a){let e=a[11]("default.page.fights.form.request.label")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.request.label")+"")&&O(l,e)},d(t){t&&d(l)}}}function Wl(a){let e,l,t,r,s;e=new ke({props:{class:"form-label",$$slots:{default:[Ql]},$$scope:{ctx:a}}});const n=[a[54],{class:"min-h-60"}];function f(i){a[31](i)}let o={};for(let i=0;i<n.length;i+=1)o=se(o,n[i]);return a[12].request!==void 0&&(o.value=a[12].request),t=new mt({props:o}),ne.push(()=>ce(t,"value",f)),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(i){T(e.$$.fragment,i),l=y(i),T(t.$$.fragment,i)},m(i,u){B(e,i,u),k(i,l,u),B(t,i,u),s=!0},p(i,u){const c={};u[0]&2048|u[2]&32&&(c.$$scope={dirty:u,ctx:i}),e.$set(c);const g=u[1]&8388608?de(n,[$e(i[54]),n[1]]):{};!r&&u[0]&4096&&(r=!0,g.value=i[12].request,ue(()=>r=!1)),t.$set(g)},i(i){s||(h(e.$$.fragment,i),h(t.$$.fragment,i),s=!0)},o(i){b(e.$$.fragment,i),b(t.$$.fragment,i),s=!1},d(i){i&&d(l),F(e,i),F(t,i)}}}function Xl(a){let e,l,t,r;return e=new be({props:{$$slots:{default:[Wl,({attrs:s})=>({54:s}),({attrs:s})=>[0,s?8388608:0]]},$$scope:{ctx:a}}}),t=new we({}),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=y(s),T(t.$$.fragment,s)},m(s,n){B(e,s,n),k(s,l,n),B(t,s,n),r=!0},p(s,n){const f={};n[0]&6144|n[1]&8388608|n[2]&32&&(f.$$scope={dirty:n,ctx:s}),e.$set(f)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),r=!1},d(s){s&&d(l),F(e,s),F(t,s)}}}function Yl(a){let e=a[11]("default.page.fights.form.needs.label")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.needs.label")+"")&&O(l,e)},d(t){t&&d(l)}}}function et(a){let e,l,t=W(a[2]),r=[];for(let n=0;n<t.length;n+=1)r[n]=lt(Pe(a,t,n));const s=n=>b(r[n],1,1,()=>{r[n]=null});return{c(){e=D("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var f=N(e);for(let o=0;o<r.length;o+=1)r[o].l(f);f.forEach(d),this.h()},h(){$(e,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(n,f){k(n,e,f);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);l=!0},p(n,f){if(f[0]&10498052){t=W(n[2]);let o;for(o=0;o<t.length;o+=1){const i=Pe(n,t,o);r[o]?(r[o].p(i,f),h(r[o],1)):(r[o]=lt(i),r[o].c(),h(r[o],1),r[o].m(e,null))}for(G(),o=t.length;o<r.length;o+=1)s(o);K()}},i(n){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(n){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)b(r[f]);l=!1},d(n){n&&d(e),ae(r,n)}}}function xl(a){let e=(a[13]==="de"?a[51].nameDE:a[51].nameEN)+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&8196&&e!==(e=(t[13]==="de"?t[51].nameDE:t[51].nameEN)+"")&&O(l,e)},d(t){t&&d(l)}}}function tt(a){let e,l,t,r,s,n,f;return l=new ht({props:{value:a[51].id,class:(a[51].nameEN===a[58].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[xl]},$$scope:{ctx:a}}}),{c(){e=D("button"),S(l.$$.fragment),t=j(),this.h()},l(o){e=I(o,"BUTTON",{type:!0,class:!0});var i=N(e);T(l.$$.fragment,i),t=y(i),i.forEach(d),this.h()},h(){var o;$(e,"type","button"),$(e,"class",r=(a[23](a[51],a[58])||(o=a[12].needs)!=null&&o.includes(a[51].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(o,i){k(o,e,i),B(l,e,null),w(e,t),s=!0,n||(f=pe(e,"click",function(){pt(a[21](a[51],a[58].category))&&a[21](a[51],a[58].category).apply(this,arguments)}),n=!0)},p(o,i){var c;a=o;const u={};i[0]&4&&(u.value=a[51].id),i[0]&4&&(u.class=(a[51].nameEN===a[58].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-needs-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),i[0]&8196|i[2]&32&&(u.$$scope={dirty:i,ctx:a}),l.$set(u),(!s||i[0]&4100&&r!==(r=(a[23](a[51],a[58])||(c=a[12].needs)!=null&&c.includes(a[51].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&$(e,"class",r)},i(o){s||(h(l.$$.fragment,o),s=!0)},o(o){b(l.$$.fragment,o),s=!1},d(o){o&&d(e),F(l),n=!1,f()}}}function lt(a){let e,l,t=W(a[58].content),r=[];for(let n=0;n<t.length;n+=1)r[n]=tt(Ue(a,t,n));const s=n=>b(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ee()},l(n){for(let f=0;f<r.length;f+=1)r[f].l(n);e=ee()},m(n,f){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,f);k(n,e,f),l=!0},p(n,f){if(f[0]&10498052){t=W(n[58].content);let o;for(o=0;o<t.length;o+=1){const i=Ue(n,t,o);r[o]?(r[o].p(i,f),h(r[o],1)):(r[o]=tt(i),r[o].c(),h(r[o],1),r[o].m(e.parentNode,e))}for(G(),o=t.length;o<r.length;o+=1)s(o);K()}},i(n){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(n){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)b(r[f]);l=!1},d(n){n&&d(e),ae(r,n)}}}function er(a){let e,l,t=a[2].length>0&&et(a);return{c(){t&&t.c(),e=ee()},l(r){t&&t.l(r),e=ee()},m(r,s){t&&t.m(r,s),k(r,e,s),l=!0},p(r,s){r[2].length>0?t?(t.p(r,s),s[0]&4&&h(t,1)):(t=et(r),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(G(),b(t,1,1,()=>{t=null}),K())},i(r){l||(h(t),l=!0)},o(r){b(t),l=!1},d(r){r&&d(e),t&&t.d(r)}}}function tr(a){let e,l,t,r,s;e=new ke({props:{class:"form-label",$$slots:{default:[Yl]},$$scope:{ctx:a}}});const n=[{type:"multiple"},a[54],{class:""}];function f(i){a[30](i)}let o={$$slots:{default:[er]},$$scope:{ctx:a}};for(let i=0;i<n.length;i+=1)o=se(o,n[i]);return a[12].needs!==void 0&&(o.value=a[12].needs),t=new _t({props:o}),ne.push(()=>ce(t,"value",f)),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(i){T(e.$$.fragment,i),l=y(i),T(t.$$.fragment,i)},m(i,u){B(e,i,u),k(i,l,u),B(t,i,u),s=!0},p(i,u){const c={};u[0]&2048|u[2]&32&&(c.$$scope={dirty:u,ctx:i}),e.$set(c);const g=u[1]&8388608?de(n,[n[0],$e(i[54]),n[2]]):{};u[0]&12292|u[2]&32&&(g.$$scope={dirty:u,ctx:i}),!r&&u[0]&4096&&(r=!0,g.value=i[12].needs,ue(()=>r=!1)),t.$set(g)},i(i){s||(h(e.$$.fragment,i),h(t.$$.fragment,i),s=!0)},o(i){b(e.$$.fragment,i),b(t.$$.fragment,i),s=!1},d(i){i&&d(l),F(e,i),F(t,i)}}}function lr(a){let e,l,t,r;return e=new be({props:{$$slots:{default:[tr,({attrs:s})=>({54:s}),({attrs:s})=>[0,s?8388608:0]]},$$scope:{ctx:a}}}),t=new we({}),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=y(s),T(t.$$.fragment,s)},m(s,n){B(e,s,n),k(s,l,n),B(t,s,n),r=!0},p(s,n){const f={};n[0]&14340|n[1]&8388608|n[2]&32&&(f.$$scope={dirty:n,ctx:s}),e.$set(f)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),r=!1},d(s){s&&d(l),F(e,s),F(t,s)}}}function rr(a){let e=a[11]("default.page.fights.form.feelings.label")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.feelings.label")+"")&&O(l,e)},d(t){t&&d(l)}}}function rt(a){let e,l,t=W(a[1]),r=[];for(let n=0;n<t.length;n+=1)r[n]=at(Ze(a,t,n));const s=n=>b(r[n],1,1,()=>{r[n]=null});return{c(){e=D("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var f=N(e);for(let o=0;o<r.length;o+=1)r[o].l(f);f.forEach(d),this.h()},h(){$(e,"class","")},m(n,f){k(n,e,f);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);l=!0},p(n,f){if(f[0]&12598275){t=W(n[1]);let o;for(o=0;o<t.length;o+=1){const i=Ze(n,t,o);r[o]?(r[o].p(i,f),h(r[o],1)):(r[o]=at(i),r[o].c(),h(r[o],1),r[o].m(e,null))}for(G(),o=t.length;o<r.length;o+=1)s(o);K()}},i(n){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(n){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)b(r[f]);l=!1},d(n){n&&d(e),ae(r,n)}}}function sr(a){let e=(a[13]==="de"?a[48].nameDE:a[48].nameEN)+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&8194&&e!==(e=(t[13]==="de"?t[48].nameDE:t[48].nameEN)+"")&&O(l,e)},d(t){t&&d(l)}}}function st(a){let e,l,t,r,s,n;return l=new ht({props:{value:a[48].id,class:(a[48].nameEN===a[58].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20",$$slots:{default:[sr]},$$scope:{ctx:a}}}),{c(){e=D("button"),S(l.$$.fragment),this.h()},l(f){e=I(f,"BUTTON",{type:!0,class:!0});var o=N(e);T(l.$$.fragment,o),o.forEach(d),this.h()},h(){var f;$(e,"type","button"),$(e,"class",t=(a[23](a[48],a[58])||(f=a[12].feelings)!=null&&f.includes(a[48].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(f,o){k(f,e,o),B(l,e,null),r=!0,s||(n=pe(e,"click",function(){pt(a[22](a[48],a[58].category))&&a[22](a[48],a[58].category).apply(this,arguments)}),s=!0)},p(f,o){var u;a=f;const i={};o[0]&2&&(i.value=a[48].id),o[0]&2&&(i.class=(a[48].nameEN===a[58].category?"bg-white/40 font-bold":"border border-white/40")+" py-0 text-black  shadow hover:text-black data-[state=on]:bg-feelings-foreground data-[state=on]:text-white dark:text-white dark:hover:bg-black/20"),o[0]&8194|o[2]&32&&(i.$$scope={dirty:o,ctx:a}),l.$set(i),(!r||o[0]&4098&&t!==(t=(a[23](a[48],a[58])||(u=a[12].feelings)!=null&&u.includes(a[48].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&$(e,"class",t)},i(f){r||(h(l.$$.fragment,f),r=!0)},o(f){b(l.$$.fragment,f),r=!1},d(f){f&&d(e),F(l),s=!1,n()}}}function nt(a){let e,l,t=W(a[58].content),r=[];for(let n=0;n<t.length;n+=1)r[n]=st(Ke(a,t,n));const s=n=>b(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ee()},l(n){for(let f=0;f<r.length;f+=1)r[f].l(n);e=ee()},m(n,f){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,f);k(n,e,f),l=!0},p(n,f){if(f[0]&12595202){t=W(n[58].content);let o;for(o=0;o<t.length;o+=1){const i=Ke(n,t,o);r[o]?(r[o].p(i,f),h(r[o],1)):(r[o]=st(i),r[o].c(),h(r[o],1),r[o].m(e.parentNode,e))}for(G(),o=t.length;o<r.length;o+=1)s(o);K()}},i(n){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(n){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)b(r[f]);l=!1},d(n){n&&d(e),ae(r,n)}}}function at(a){let e,l=(a[55].category==="true"?a[11]("default.page.fights.form.general.goodFeelings"):a[11]("default.page.fights.form.general.badFeelings"))+"",t,r,s,n,f,o,i,u,c,g=W(a[55].content),p=[];for(let _=0;_<g.length;_+=1)p[_]=nt(Ge(a,g,_));const m=_=>b(p[_],1,1,()=>{p[_]=null});return{c(){e=D("div"),t=z(l),r=j(),s=D("div"),o=j(),i=D("div");for(let _=0;_<p.length;_+=1)p[_].c();u=j(),this.h()},l(_){e=I(_,"DIV",{class:!0});var v=N(e);t=J(v,l),r=y(v),s=I(v,"DIV",{class:!0}),N(s).forEach(d),v.forEach(d),o=y(_),i=I(_,"DIV",{class:!0});var E=N(i);for(let R=0;R<p.length;R+=1)p[R].l(E);u=y(E),E.forEach(d),this.h()},h(){$(s,"class",n="border-b border-"+a[10][a[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-1oous0z"),$(e,"class",f="text-"+a[10][a[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-1oous0z"),$(i,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(_,v){k(_,e,v),w(e,t),w(e,r),w(e,s),k(_,o,v),k(_,i,v);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(i,null);w(i,u),c=!0},p(_,v){if((!c||v[0]&2050)&&l!==(l=(_[55].category==="true"?_[11]("default.page.fights.form.general.goodFeelings"):_[11]("default.page.fights.form.general.badFeelings"))+"")&&O(t,l),(!c||v[0]&1025&&n!==(n="border-b border-"+_[10][_[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-1oous0z"))&&$(s,"class",n),(!c||v[0]&1025&&f!==(f="text-"+_[10][_[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-1oous0z"))&&$(e,"class",f),v[0]&12595202){g=W(_[55].content);let E;for(E=0;E<g.length;E+=1){const R=Ge(_,g,E);p[E]?(p[E].p(R,v),h(p[E],1)):(p[E]=nt(R),p[E].c(),h(p[E],1),p[E].m(i,u))}for(G(),E=g.length;E<p.length;E+=1)m(E);K()}},i(_){if(!c){for(let v=0;v<g.length;v+=1)h(p[v]);c=!0}},o(_){p=p.filter(Boolean);for(let v=0;v<p.length;v+=1)b(p[v]);c=!1},d(_){_&&(d(e),d(o),d(i)),ae(p,_)}}}function nr(a){let e,l,t=a[1].length>0&&rt(a);return{c(){t&&t.c(),e=ee()},l(r){t&&t.l(r),e=ee()},m(r,s){t&&t.m(r,s),k(r,e,s),l=!0},p(r,s){r[1].length>0?t?(t.p(r,s),s[0]&2&&h(t,1)):(t=rt(r),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(G(),b(t,1,1,()=>{t=null}),K())},i(r){l||(h(t),l=!0)},o(r){b(t),l=!1},d(r){r&&d(e),t&&t.d(r)}}}function ar(a){let e,l,t,r,s;e=new ke({props:{class:"form-label",$$slots:{default:[rr]},$$scope:{ctx:a}}});const n=[{type:"multiple"},a[54],{class:"flex flex-col gap-4"}];function f(i){a[29](i)}let o={$$slots:{default:[nr]},$$scope:{ctx:a}};for(let i=0;i<n.length;i+=1)o=se(o,n[i]);return a[12].feelings!==void 0&&(o.value=a[12].feelings),t=new _t({props:o}),ne.push(()=>ce(t,"value",f)),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(i){T(e.$$.fragment,i),l=y(i),T(t.$$.fragment,i)},m(i,u){B(e,i,u),k(i,l,u),B(t,i,u),s=!0},p(i,u){const c={};u[0]&2048|u[2]&32&&(c.$$scope={dirty:u,ctx:i}),e.$set(c);const g=u[1]&8388608?de(n,[n[0],$e(i[54]),n[2]]):{};u[0]&15363|u[2]&32&&(g.$$scope={dirty:u,ctx:i}),!r&&u[0]&4096&&(r=!0,g.value=i[12].feelings,ue(()=>r=!1)),t.$set(g)},i(i){s||(h(e.$$.fragment,i),h(t.$$.fragment,i),s=!0)},o(i){b(e.$$.fragment,i),b(t.$$.fragment,i),s=!1},d(i){i&&d(l),F(e,i),F(t,i)}}}function or(a){let e,l,t,r;return e=new be({props:{$$slots:{default:[ar,({attrs:s})=>({54:s}),({attrs:s})=>[0,s?8388608:0]]},$$scope:{ctx:a}}}),t=new we({}),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=y(s),T(t.$$.fragment,s)},m(s,n){B(e,s,n),k(s,l,n),B(t,s,n),r=!0},p(s,n){const f={};n[0]&15363|n[1]&8388608|n[2]&32&&(f.$$scope={dirty:n,ctx:s}),e.$set(f)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),r=!1},d(s){s&&d(l),F(e,s),F(t,s)}}}function fr(a){let e=a[11]("default.page.fights.form.observation.label")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.observation.label")+"")&&O(l,e)},d(t){t&&d(l)}}}function ir(a){let e,l,t,r,s;e=new ke({props:{class:"form-label",$$slots:{default:[fr]},$$scope:{ctx:a}}});const n=[a[54],{class:"min-h-60"}];function f(i){a[27](i)}let o={};for(let i=0;i<n.length;i+=1)o=se(o,n[i]);return a[12].observation!==void 0&&(o.value=a[12].observation),t=new mt({props:o}),ne.push(()=>ce(t,"value",f)),t.$on("input",a[28]),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(i){T(e.$$.fragment,i),l=y(i),T(t.$$.fragment,i)},m(i,u){B(e,i,u),k(i,l,u),B(t,i,u),s=!0},p(i,u){const c={};u[0]&2048|u[2]&32&&(c.$$scope={dirty:u,ctx:i}),e.$set(c);const g=u[1]&8388608?de(n,[$e(i[54]),n[1]]):{};!r&&u[0]&4096&&(r=!0,g.value=i[12].observation,ue(()=>r=!1)),t.$set(g)},i(i){s||(h(e.$$.fragment,i),h(t.$$.fragment,i),s=!0)},o(i){b(e.$$.fragment,i),b(t.$$.fragment,i),s=!1},d(i){i&&d(l),F(e,i),F(t,i)}}}function ur(a){let e,l,t,r;return e=new be({props:{$$slots:{default:[ir,({attrs:s})=>({54:s}),({attrs:s})=>[0,s?8388608:0]]},$$scope:{ctx:a}}}),t=new we({}),{c(){S(e.$$.fragment),l=j(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=y(s),T(t.$$.fragment,s)},m(s,n){B(e,s,n),k(s,l,n),B(t,s,n),r=!0},p(s,n){const f={};n[0]&6400|n[1]&8388608|n[2]&32&&(f.$$scope={dirty:n,ctx:s}),e.$set(f)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),r=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),r=!1},d(s){s&&d(l),F(e,s),F(t,s)}}}function ot(a){let e,l=(a[13]==="de"?a[51].nameDE:a[51].nameEN)+"",t,r;return{c(){e=D("div"),t=z(l),r=j(),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=N(e);t=J(n,l),r=y(n),n.forEach(d),this.h()},h(){$(e,"class","rounded-md bg-white/10 px-4 py-2 shadow-lg")},m(s,n){k(s,e,n),w(e,t),w(e,r)},p(s,n){n[0]&8200&&l!==(l=(s[13]==="de"?s[51].nameDE:s[51].nameEN)+"")&&O(t,l)},d(s){s&&d(e)}}}function ft(a){let e,l=(a[13]==="de"?a[48].nameDE:a[48].nameEN)+"",t,r;return{c(){e=D("div"),t=z(l),r=j(),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=N(e);t=J(n,l),r=y(n),n.forEach(d),this.h()},h(){$(e,"class","rounded-md bg-white/20 px-4 py-2 shadow-lg")},m(s,n){k(s,e,n),w(e,t),w(e,r)},p(s,n){n[0]&8200&&l!==(l=(s[13]==="de"?s[48].nameDE:s[48].nameEN)+"")&&O(t,l)},d(s){s&&d(e)}}}function cr(a){let e,l,t=a[11]("default.page.respond.steps.greeting.explanationCta")+"",r,s;return e=new cl({}),{c(){S(e.$$.fragment),l=j(),r=z(t)},l(n){T(e.$$.fragment,n),l=y(n),r=J(n,t)},m(n,f){B(e,n,f),k(n,l,f),k(n,r,f),s=!0},p(n,f){(!s||f[0]&2048)&&t!==(t=n[11]("default.page.respond.steps.greeting.explanationCta")+"")&&O(r,t)},i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){b(e.$$.fragment,n),s=!1},d(n){n&&(d(l),d(r)),F(e,n)}}}function it(a){let e,l,t,r;const s=[Kl,Gl,Zl,Ul,Pl,Hl,Rl,Ll,Al,Ml,Ol,Jl,zl,ql],n=[];function f(o,i){return o[0]===1?0:o[0]===2?1:o[0]===3?2:o[0]===4?3:o[0]===5?4:o[0]===6?5:o[0]===7?6:o[0]===8?7:o[0]===9?8:o[0]===10?9:o[0]===11?10:o[6]?o[7]?12:13:11}return e=f(a),l=n[e]=s[e](a),{c(){l.c(),t=ee()},l(o){l.l(o),t=ee()},m(o,i){n[e].m(o,i),k(o,t,i),r=!0},p(o,i){let u=e;e=f(o),e===u?n[e].p(o,i):(G(),b(n[u],1,1,()=>{n[u]=null}),K(),l=n[e],l?l.p(o,i):(l=n[e]=s[e](o),l.c()),h(l,1),l.m(t.parentNode,t))},i(o){r||(h(l),r=!0)},o(o){b(l),r=!1},d(o){o&&d(t),n[e].d(o)}}}function ut(a){let e,l;return e=new Gt({props:{$$slots:{default:[pr]},$$scope:{ctx:a}}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p(t,r){const s={};r[0]&1281|r[2]&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function pr(a){let e,l;return e=new kl({props:{step:a[0],checkForJudgement:a[8],primaryButtonClass:`bg-${a[10][a[0]-1].slug}-background`,class:"flex-shrink-0"}}),e.$on("validateObservation",a[14]),e.$on("disableJudgementCheck",a[15]),e.$on("toPrev",a[19]),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p(t,r){const s={};r[0]&1&&(s.step=t[0]),r[0]&256&&(s.checkForJudgement=t[8]),r[0]&1025&&(s.primaryButtonClass=`bg-${t[10][t[0]-1].slug}-background`),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function gr(a){let e=a[11]("default.page.respond.explanationTitle")+"",l;return{c(){l=z(e)},l(t){l=J(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.respond.explanationTitle")+"")&&O(l,e)},d(t){t&&d(l)}}}function dr(a){let e,l;return e=new tl({props:{class:"text-red-600"}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function mr(a){let e,l,t,r,s;return l=new xt({props:{$$slots:{default:[gr]},$$scope:{ctx:a}}}),r=new el({props:{$$slots:{default:[dr]},$$scope:{ctx:a}}}),{c(){e=D("div"),S(l.$$.fragment),t=j(),S(r.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var f=N(e);T(l.$$.fragment,f),t=y(f),T(r.$$.fragment,f),f.forEach(d),this.h()},h(){$(e,"class","flex items-center justify-between")},m(n,f){k(n,e,f),B(l,e,null),w(e,t),B(r,e,null),s=!0},p(n,f){const o={};f[0]&2048|f[2]&32&&(o.$$scope={dirty:f,ctx:n}),l.$set(o);const i={};f[2]&32&&(i.$$scope={dirty:f,ctx:n}),r.$set(i)},i(n){s||(h(l.$$.fragment,n),h(r.$$.fragment,n),s=!0)},o(n){b(l.$$.fragment,n),b(r.$$.fragment,n),s=!1},d(n){n&&d(e),F(l),F(r)}}}function _r(a){let e,l,t,r=a[11]("default.page.respond.explanation")+"",s,n;return e=new Yt({props:{$$slots:{default:[mr]},$$scope:{ctx:a}}}),{c(){S(e.$$.fragment),l=j(),t=D("p"),s=z(r),this.h()},l(f){T(e.$$.fragment,f),l=y(f),t=I(f,"P",{class:!0});var o=N(t);s=J(o,r),o.forEach(d),this.h()},h(){$(t,"class","mb-20 p-4")},m(f,o){B(e,f,o),k(f,l,o),k(f,t,o),w(t,s),n=!0},p(f,o){const i={};o[0]&2048|o[2]&32&&(i.$$scope={dirty:o,ctx:f}),e.$set(i),(!n||o[0]&2048)&&r!==(r=f[11]("default.page.respond.explanation")+"")&&O(s,r)},i(f){n||(h(e.$$.fragment,f),n=!0)},o(f){b(e.$$.fragment,f),n=!1},d(f){f&&(d(l),d(t)),F(e,f)}}}function hr(a){let e,l;return e=new Xt({props:{class:"p-4",$$slots:{default:[_r]},$$scope:{ctx:a}}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),l=!0},p(t,r){const s={};r[0]&2048|r[2]&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function $r(a){let e,l,t,r,s,n,f,o,i,u,c,g,p,m;l=new Zt({});let _=!a[6]&&!a[7]&&Xe(a),v=a[3]&&xe(a),E=!a[6]&&!a[7]&&ut(a);function R(q){a[32](q)}let oe={$$slots:{default:[hr]},$$scope:{ctx:a}};return a[9]!==void 0&&(oe.open=a[9]),u=new Qt({props:oe}),ne.push(()=>ce(u,"open",R)),{c(){e=D("div"),S(l.$$.fragment),t=j(),r=D("div"),s=D("form"),_&&_.c(),n=j(),v&&v.c(),f=j(),E&&E.c(),i=j(),S(u.$$.fragment),this.h()},l(q){e=I(q,"DIV",{class:!0});var V=N(e);T(l.$$.fragment,V),t=y(V),r=I(V,"DIV",{class:!0});var Z=N(r);s=I(Z,"FORM",{class:!0});var Y=N(s);_&&_.l(Y),n=y(Y),v&&v.l(Y),f=y(Y),E&&E.l(Y),Y.forEach(d),Z.forEach(d),V.forEach(d),i=y(q),T(u.$$.fragment,q),this.h()},h(){$(s,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),$(r,"class","max-container relative flex h-[calc(100dvh-100px)] flex-grow flex-col"),$(e,"class",o=`flex flex-grow flex-col justify-between transition duration-700 bg-${a[10][a[0]-1].slug}-background svelte-1oous0z`)},m(q,V){k(q,e,V),B(l,e,null),w(e,t),w(e,r),w(r,s),_&&_.m(s,null),w(s,n),v&&v.m(s,null),w(s,f),E&&E.m(s,null),k(q,i,V),B(u,q,V),g=!0,p||(m=[pe(s,"submit",Lt(a[24])),Rt(a[18].call(null,s))],p=!0)},p(q,V){!q[6]&&!q[7]?_?(_.p(q,V),V[0]&192&&h(_,1)):(_=Xe(q),_.c(),h(_,1),_.m(s,n)):_&&(G(),b(_,1,1,()=>{_=null}),K()),q[3]?v?(v.p(q,V),V[0]&8&&h(v,1)):(v=xe(q),v.c(),h(v,1),v.m(s,f)):v&&(G(),b(v,1,1,()=>{v=null}),K()),!q[6]&&!q[7]?E?(E.p(q,V),V[0]&192&&h(E,1)):(E=ut(q),E.c(),h(E,1),E.m(s,null)):E&&(G(),b(E,1,1,()=>{E=null}),K()),(!g||V[0]&1025&&o!==(o=`flex flex-grow flex-col justify-between transition duration-700 bg-${q[10][q[0]-1].slug}-background svelte-1oous0z`))&&$(e,"class",o);const Z={};V[0]&2048|V[2]&32&&(Z.$$scope={dirty:V,ctx:q}),!c&&V[0]&512&&(c=!0,Z.open=q[9],ue(()=>c=!1)),u.$set(Z)},i(q){g||(h(l.$$.fragment,q),h(_),h(v),h(E),h(u.$$.fragment,q),g=!0)},o(q){b(l.$$.fragment,q),b(_),b(v),b(E),b(u.$$.fragment,q),g=!1},d(q){q&&(d(e),d(i)),F(l),_&&_.d(),v&&v.d(),E&&E.d(),F(u,q),p=!1,ct(m)}}}function vr(a,e,l){let t,r,s,n;ie(a,P,C=>l(11,t=C)),ie(a,Kt,C=>l(34,r=C)),ie(a,gt,C=>l(13,n=C));const f=Wt(Q(fe));let o=[],i=[],u,c,g=[{step:1,content:[""]}];const p=[Q(Ve),Q(Se),Q(Te),Q(Be),Q(Cl),Q(El),Q(Dl),Q(Il),Q(Nl),Q(Vl),Q(Sl),Q(fe)];let m=1,_=!1,v=!1,E=!1,R=!1;const oe=async()=>{try{let C=s;C.fight=u.id,console.log("submit form",C);const L=await me.collection("responses").create(C);l(7,v=!0),l(6,_=!0)}catch(C){console.log("error handling submit",C),l(7,v=!1),l(6,_=!0)}},q=async C=>{const A=Object.keys(Q([Ve,Se,Te,Be,fe][C-1]).constraints);let H=!0;for(const re of A)await vt(re,{update:!1})&&(H=!1);return!!H},V=async()=>{const C=await qe(s,fe);return C.valid?!0:(x.set(C.errors),!1)},Z=async()=>{const C=await qe(fe);return C.errors.observation?(x.set(C.errors),!1):(Y(),!0)},Y=()=>{c(s.observation),l(8,E=!1)},le=al(f,{resetForm:!1,validators:ll(fe),async onSubmit({validators:C,cancel:L}){console.log("onSubmit"),L(),await V()&&(m==p.length?oe():l(0,m++,m))},async onUpdated({form:C}){console.log("onUpdated"),C.valid&&l(0,m=1)}}),{form:te,errors:x,message:ye,enhance:$t,validate:vt,validateForm:qe,options:bt,updateForm:br}=le;ie(a,te,C=>l(12,s=C)),te.subscribe(C=>{console.log("form was updated",C)});let Ce=[{slug:"greeting",name:U(P)("default.page.fights.form.general.steps.info"),icon:Ie,invertedTextColor:!1,hidden:!0},{slug:"disclaimer",name:U(P)("default.page.fights.form.general.steps.info"),icon:Ie,invertedTextColor:!1,hidden:!0},{slug:"breathe",name:U(P)("default.page.fights.form.general.steps.info"),icon:Ie,invertedTextColor:!1,hidden:!0},{slug:"observation",name:U(P)("default.page.fights.form.general.steps.observation"),icon:Ne,invertedTextColor:!0,hidden:!0},{slug:"feelings",name:U(P)("default.page.fights.form.general.steps.feelings"),icon:Ae,invertedTextColor:!1,hidden:!0},{slug:"needs",name:U(P)("default.page.fights.form.general.steps.needs"),icon:Le,invertedTextColor:!1,hidden:!0},{slug:"request",name:U(P)("default.page.fights.form.general.steps.request"),icon:Re,invertedTextColor:!1,hidden:!0},{slug:"pause",name:U(P)("default.page.fights.form.general.steps.observation"),icon:Ne,invertedTextColor:!0,hidden:!0},{slug:"observation",name:U(P)("default.page.fights.form.general.steps.observation"),icon:Ne,invertedTextColor:!0},{slug:"feelings",name:U(P)("default.page.fights.form.general.steps.feelings"),icon:Ae,invertedTextColor:!1},{slug:"needs",name:U(P)("default.page.fights.form.general.steps.needs"),icon:Le,invertedTextColor:!1},{slug:"request",name:U(P)("default.page.fights.form.general.steps.request"),icon:Re,invertedTextColor:!1}];P.subscribe(C=>{const L=Ce.map(A=>{const H=C(`default.page.fights.form.general.steps.${A.slug}`);return A.name=H,A});l(10,Ce=[...L])});const wt=()=>{console.log("decreaseStep"),m>1&&(console.log("step",m),l(0,m=m-1),console.log("step",m))},kt=async()=>{const C=await me.collection("feelings").getFullList({sort:"category"}),L=Ee(C);let A=De(L,"positive");A.map(H=>(H.content=De(H.content,"category"),H.content.map(re=>re.visible=!1),H)),console.log("res",A),l(1,o=A)},Ct=async()=>{const C=await me.collection("needs").getFullList({sort:"category"}),L=Ee(C);let A=De(L,"category");A.map(H=>H.visible=!1),console.log("res",A),l(2,i=A)},Et=async()=>{const C=await me.collection("fights").getOne(r.params.id,{expand:"owner, feelings, needs"});l(3,u=Ee(C)),console.log("fight",u)},Dt=async C=>{console.log("changeStep");const L=C.detail.step,A=await q(L);console.log("targetStepIsValid",A),A&&l(0,m=L)},It=(C,L)=>{if(C.nameEN!==L)return;const A=i.find(H=>H.category===L);A&&(A.visible=!A.visible),l(2,i=[...i])},Nt=(C,L)=>{if(C.nameEN!==L)return;const A=o[0].content.find(re=>re.category===L),H=o[1].content.find(re=>re.category===L);A&&(A.visible=!A.visible),H&&(H.visible=!H.visible),l(1,o=[...o])},Vt=(C,L)=>{const A=C.nameEN,H=L.category;return!!(A===H||L.visible)};Ht(async()=>{await kt(),await Ct(),await Et(),l(5,g=[{step:1,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.greeting.heading")}. ${t("default.page.respond.steps.greeting.question")}`]},{step:2,content:[`${t("default.page.respond.steps.disclaimer.heading")}: ${t("default.page.respond.steps.disclaimer.description")}`]},{step:3,content:[`${t("default.page.respond.steps.breathe.heading")}`]},{step:4,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerObservation.heading")}`]},{step:5,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerFeelings.heading")}`]},{step:6,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerNeeds.heading")}`]},{step:7,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerRequest.heading")}`]},{step:8,content:[t("default.page.respond.steps.pause.heading")]},{step:9,content:[t("default.page.fight.create.observation")]},{step:10,content:[t("default.page.fight.create.feelings")]},{step:11,content:[t("default.page.fight.create.needs")]},{step:12,content:[t("default.page.fight.create.request")]},{step:13,content:[t("default.page.respond.steps.success")],errorContent:[t("default.page.respond.steps.error")]}])}),m=1;function St(C){Pt.call(this,a,C)}function Tt(C){c=C,l(4,c)}const Bt=()=>l(9,R=!0);function Ft(C){a.$$.not_equal(s.observation,C)&&(s.observation=C,te.set(s))}const jt=()=>l(8,E=!0);function yt(C){a.$$.not_equal(s.feelings,C)&&(s.feelings=C,te.set(s))}function qt(C){a.$$.not_equal(s.needs,C)&&(s.needs=C,te.set(s))}function zt(C){a.$$.not_equal(s.request,C)&&(s.request=C,te.set(s))}function Jt(C){R=C,l(9,R)}return a.$$.update=()=>{a.$$.dirty[0]&1,a.$$.dirty[0]&1&&(bt.validators=p[m-1])},[m,o,i,u,c,g,_,v,E,R,Ce,t,s,n,Z,Y,le,te,$t,wt,Dt,It,Nt,Vt,St,Tt,Bt,Ft,jt,yt,qt,zt,Jt]}class Ar extends _e{constructor(e){super(),he(this,e,vr,$r,ge,{},null,[-1,-1,-1])}}export{Ar as component};
