import{s as pe,l as ne,m as ze,o as Oe,b as N,f as p,p as b,q as Me,i as k,h as w,n as M,r as Ae,u as Ot,e as D,a as B,c as I,g as F,k as ue,_ as Mt,t as J,d as z,j as O,F as K,E as je,Y as At,x as de,y as gt,K as se,$ as Lt,J as Rt,L as ce,I as Ht,O as te,z as Pt,M as oe,T as dt}from"../chunks/scheduler.Clviz5E8.js";import{S as he,i as $e,c as V,a as S,m as T,g as Q,b as v,f as W,t as h,d as y,e as ge}from"../chunks/index.C2t9fK9o.js";import{b as Ut,h as Ie,i as Ne,e as X}from"../chunks/helpers.F_hB7tz5.js";import{g as me,t as Z,l as pt,a as ve}from"../chunks/page.Bd4QL5cq.js";import{A as Zt,p as _e}from"../chunks/pocketbase.PRKJtBbO.js";import{A as Kt}from"../chunks/AppBottomMenu.DXtCMbaf.js";import{p as Qt}from"../chunks/stores.Qg9DDuR0.js";import"../chunks/index.CLzr7ZlM.js";import{D as Wt,d as Yt,a as Gt,b as Xt,c as xt,C as el,e as tl}from"../chunks/index.DyBJejKP.js";import"../chunks/entry.DyrkCWPu.js";import{c as G,z as ll,F as be,C as we,a as ke,b as Ce}from"../chunks/zod.DbI0_dRq.js";import{A as mt,C as rl,a as nl,F as sl,T as _t,b as ht,c as $t}from"../chunks/textarea.DNKeDpc1.js";import{z as x,s as ol}from"../chunks/memoize.B38AcDh4.js";import{a as qe}from"../chunks/button.OZ_DY3bL.js";import{C as al}from"../chunks/CaretLeft.C7mtIpMG.js";import{I as Ve}from"../chunks/icon-folder.CBGieXVr.js";import{I as Se,a as Le,b as Re,c as He}from"../chunks/icon-steps.dGSELuxl.js";import{B as fl}from"../chunks/button.CJCC36Bh.js";function il(o){let e,l,t=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],r={};for(let n=0;n<t.length;n+=1)r=ne(r,t[n]);return{c(){e=ze("svg"),l=ze("path"),this.h()},l(n){e=Oe(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=N(e);l=Oe(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),N(l).forEach(p),s.forEach(p),this.h()},h(){b(l,"fill-rule","evenodd"),b(l,"clip-rule","evenodd"),b(l,"d","M0.877075 7.49972C0.877075 3.84204 3.84222 0.876892 7.49991 0.876892C11.1576 0.876892 14.1227 3.84204 14.1227 7.49972C14.1227 11.1574 11.1576 14.1226 7.49991 14.1226C3.84222 14.1226 0.877075 11.1574 0.877075 7.49972ZM7.49991 1.82689C4.36689 1.82689 1.82708 4.36671 1.82708 7.49972C1.82708 10.6327 4.36689 13.1726 7.49991 13.1726C10.6329 13.1726 13.1727 10.6327 13.1727 7.49972C13.1727 4.36671 10.6329 1.82689 7.49991 1.82689ZM8.24993 10.5C8.24993 10.9142 7.91414 11.25 7.49993 11.25C7.08571 11.25 6.74993 10.9142 6.74993 10.5C6.74993 10.0858 7.08571 9.75 7.49993 9.75C7.91414 9.75 8.24993 10.0858 8.24993 10.5ZM6.05003 6.25C6.05003 5.57211 6.63511 4.925 7.50003 4.925C8.36496 4.925 8.95003 5.57211 8.95003 6.25C8.95003 6.74118 8.68002 6.99212 8.21447 7.27494C8.16251 7.30651 8.10258 7.34131 8.03847 7.37854L8.03841 7.37858C7.85521 7.48497 7.63788 7.61119 7.47449 7.73849C7.23214 7.92732 6.95003 8.23198 6.95003 8.7C6.95004 9.00376 7.19628 9.25 7.50004 9.25C7.8024 9.25 8.04778 9.00601 8.05002 8.70417L8.05056 8.7033C8.05924 8.6896 8.08493 8.65735 8.15058 8.6062C8.25207 8.52712 8.36508 8.46163 8.51567 8.37436L8.51571 8.37433C8.59422 8.32883 8.68296 8.27741 8.78559 8.21506C9.32004 7.89038 10.05 7.35382 10.05 6.25C10.05 4.92789 8.93511 3.825 7.50003 3.825C6.06496 3.825 4.95003 4.92789 4.95003 6.25C4.95003 6.55376 5.19628 6.8 5.50003 6.8C5.80379 6.8 6.05003 6.55376 6.05003 6.25Z"),b(l,"fill",o[0]),Me(e,r)},m(n,s){k(n,e,s),w(e,l)},p(n,[s]){s&1&&b(l,"fill",n[0]),Me(e,r=me(t,[s&2&&{width:n[1]},s&2&&{height:n[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&n[2]]))},i:M,o:M,d(n){n&&p(e)}}}function ul(o,e,l){const t=["color","size"];let r=Ae(e,t),{color:n="currentColor"}=e,{size:s=15}=e;return o.$$set=f=>{e=ne(ne({},e),Ot(f)),l(2,r=Ae(e,t)),"color"in f&&l(0,n=f.color),"size"in f&&l(1,s=f.size)},[n,s,r]}class cl extends he{constructor(e){super(),$e(this,e,ul,il,pe,{color:0,size:1})}}function gl(o){let e,l;return e=new al({props:{class:"h-4 w-4 rounded-full"}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function dl(o){let e,l;return e=new qe({props:{type:"submit",decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[$l]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&265&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function pl(o){let e,l;return e=new qe({props:{decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[vl]},$$scope:{ctx:o}}}),e.$on("click",o[5]),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&264&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function ml(o){let e=o[3]("default.page.fights.form.general.next")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.next")+"")&&O(l,e)},d(t){t&&p(l)}}}function _l(o){let e=o[3]("default.page.fights.form.general.knowledge")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.knowledge")+"")&&O(l,e)},d(t){t&&p(l)}}}function hl(o){let e=o[3]("default.page.fights.form.general.yes")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[3]("default.page.fights.form.general.yes")+"")&&O(l,e)},d(t){t&&p(l)}}}function $l(o){let e,l,t;function r(f,a){return f[0]===1?hl:f[0]===2?_l:ml}let n=r(o),s=n(o);return l=new mt({props:{class:"h-3 w-3"}}),{c(){s.c(),e=B(),V(l.$$.fragment)},l(f){s.l(f),e=F(f),S(l.$$.fragment,f)},m(f,a){s.m(f,a),k(f,e,a),T(l,f,a),t=!0},p(f,a){n===(n=r(f))&&s?s.p(f,a):(s.d(1),s=n(f),s&&(s.c(),s.m(e.parentNode,e)))},i(f){t||(h(l.$$.fragment,f),t=!0)},o(f){v(l.$$.fragment,f),t=!1},d(f){f&&p(e),s.d(f),y(l,f)}}}function vl(o){let e=o[3]("default.page.fights.form.general.checkJudgement")+"",l,t,r,n;return r=new mt({props:{class:"h-3 w-3"}}),{c(){l=J(e),t=B(),V(r.$$.fragment)},l(s){l=z(s,e),t=F(s),S(r.$$.fragment,s)},m(s,f){k(s,l,f),k(s,t,f),T(r,s,f),n=!0},p(s,f){(!n||f&8)&&e!==(e=s[3]("default.page.fights.form.general.checkJudgement")+"")&&O(l,e)},i(s){n||(h(r.$$.fragment,s),n=!0)},o(s){v(r.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),y(r,s)}}}function bl(o){let e,l,t,r,n,s,f,a,i;t=new qe({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[gl]},$$scope:{ctx:o}}}),t.$on("click",o[4]);const u=[pl,dl],g=[];function d(c,m){return c[1]?0:1}return s=d(o),f=g[s]=u[s](o),{c(){e=D("div"),l=D("div"),V(t.$$.fragment),n=B(),f.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var m=N(e);l=I(m,"DIV",{class:!0});var _=N(l);S(t.$$.fragment,_),_.forEach(p),n=F(m),f.l(m),m.forEach(p),this.h()},h(){b(l,"class",r=(o[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"),b(e,"class",a="flex justify-between "+o[2])},m(c,m){k(c,e,m),w(e,l),T(t,l,null),w(e,n),g[s].m(e,null),i=!0},p(c,[m]){const _={};m&256&&(_.$$scope={dirty:m,ctx:c}),t.$set(_),(!i||m&1&&r!==(r=(c[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"))&&b(l,"class",r);let $=s;s=d(c),s===$?g[s].p(c,m):(Q(),v(g[$],1,1,()=>{g[$]=null}),W(),f=g[s],f?f.p(c,m):(f=g[s]=u[s](c),f.c()),h(f,1),f.m(e,null)),(!i||m&4&&a!==(a="flex justify-between "+c[2]))&&b(e,"class",a)},i(c){i||(h(t.$$.fragment,c),h(f),i=!0)},o(c){v(t.$$.fragment,c),v(f),i=!1},d(c){c&&p(e),y(t),g[s].d()}}}function wl(o,e,l){let t;ue(o,Z,g=>l(3,t=g));const r=Mt();let{step:n}=e,{checkForJudgement:s}=e,{class:f=void 0}=e,{primaryButtonClass:a=void 0}=e;const i=()=>{console.log("toPrev"),r("toPrev")},u=()=>{r("validateObservation")};return o.$$set=g=>{"step"in g&&l(0,n=g.step),"checkForJudgement"in g&&l(1,s=g.checkForJudgement),"class"in g&&l(2,f=g.class),"primaryButtonClass"in g&&l(6,a=g.primaryButtonClass)},[n,s,f,t,i,u,a]}class kl extends he{constructor(e){super(),$e(this,e,wl,bl,pe,{step:0,checkForJudgement:1,class:2,primaryButtonClass:6})}}const Te=x.object({}),ye=x.object({}),Be=x.object({}),Fe=x.object({}),Cl=x.object({}),El=x.object({}),Dl=x.object({}),Il=x.object({}),Nl=Te.extend({observation:x.string().min(10,{message:K(Z)("default.page.fights.form.observation.tooShortError")})}),Vl=ye.extend({feelings:x.array(x.string()).min(1,{message:K(Z)("default.page.fights.form.feelings.tooFewError")})}),Sl=Be.extend({needs:x.array(x.string()).min(1,{message:K(Z)("default.page.fights.form.needs.tooFewError")})}),ie=Fe.extend({request:x.string().min(10,{message:K(Z)("default.page.fights.form.request.tooFewError")})});function Tl(o){let e;return{c(){e=D("div"),this.h()},l(l){e=I(l,"DIV",{id:!0,class:!0}),N(e).forEach(p),this.h()},h(){b(e,"id","speechBubble"),b(e,"class","w-full")},m(l,t){k(l,e,t),o[11](e)},p:M,d(l){l&&p(e),o[11](null)}}}function yl(o){let e,l="...";return{c(){e=D("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),je(e)!=="svelte-534rav"&&(e.textContent=l),this.h()},h(){b(e,"id","speechBubble"),b(e,"class","w-full")},m(t,r){k(t,e,r)},p:M,d(t){t&&p(e)}}}function Pe(o){let e,l,t,r,n,s,f,a,i,u;return r=new rl({props:{class:"size-2.5"}}),f=new nl({props:{class:"size-2.5"}}),{c(){e=D("div"),l=D("div"),t=D("button"),V(r.$$.fragment),n=B(),s=D("button"),V(f.$$.fragment),this.h()},l(g){e=I(g,"DIV",{class:!0});var d=N(e);l=I(d,"DIV",{class:!0});var c=N(l);t=I(c,"BUTTON",{class:!0});var m=N(t);S(r.$$.fragment,m),m.forEach(p),n=F(c),s=I(c,"BUTTON",{class:!0});var _=N(s);S(f.$$.fragment,_),_.forEach(p),c.forEach(p),d.forEach(p),this.h()},h(){b(t,"class","chevron svelte-12yl6i5"),b(s,"class","chevron svelte-12yl6i5"),b(l,"class","-mr-1 flex flex-col items-center gap-0.5"),b(e,"class","flex justify-end text-2xs")},m(g,d){k(g,e,d),w(e,l),w(l,t),T(r,t,null),w(l,n),w(l,s),T(f,s,null),a=!0,i||(u=[de(t,"click",o[12]),de(s,"click",o[13])],i=!0)},p:M,i(g){a||(h(r.$$.fragment,g),h(f.$$.fragment,g),a=!0)},o(g){v(r.$$.fragment,g),v(f.$$.fragment,g),a=!1},d(g){g&&p(e),y(r),y(f),i=!1,gt(u)}}}function Bl(o){let e,l,t=`<div style="background-image: url(&#39;${Ut}&#39;); background-size: 300% 100%" class="animate-bg relative z-10 flex h-full w-[60px] items-center justify-center rounded-b rounded-t-[50px] shadow-lg transition duration-700"><div data-name="face" class="lookaround face-3 flex flex-col gap-1 svelte-12yl6i5"><div data-name="eyes" class="eyes flex items-center justify-center gap-2"><div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div> <div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div></div> <div data-name="mouth" class="mouth flex items-center justify-center svelte-12yl6i5"><div class="h-1.5 w-2.5 rounded-b-full bg-black"></div></div></div></div>`,r,n,s,f,a,i,u;function g(_,$){return _[2]?yl:Tl}let d=g(o),c=d(o),m=o[1].length>1&&Pe(o);return{c(){e=D("div"),l=D("div"),l.innerHTML=t,r=B(),n=D("div"),s=D("div"),f=B(),a=D("div"),c.c(),i=B(),m&&m.c(),this.h()},l(_){e=I(_,"DIV",{class:!0});var $=N(e);l=I($,"DIV",{class:!0,"data-svelte-h":!0}),je(l)!=="svelte-ido9h0"&&(l.innerHTML=t),r=F($),n=I($,"DIV",{class:!0});var E=N(n);s=I(E,"DIV",{class:!0}),N(s).forEach(p),f=F(E),a=I(E,"DIV",{class:!0});var H=N(a);c.l(H),i=F(H),m&&m.l(H),H.forEach(p),E.forEach(p),$.forEach(p),this.h()},h(){b(l,"class","relative left-0 right-0 flex h-12 flex-shrink-0 justify-center gap-1"),b(s,"class","triangle size-3 flex-shrink-0 bg-muted svelte-12yl6i5"),b(a,"class","rounded-tl-0 relative flex flex-grow rounded-b rounded-tr bg-muted px-2 pb-2 pt-1 text-sm leading-tight gap-2"),b(n,"class","flex flex-grow"),b(e,"class","mt-4 flex items-start gap-2")},m(_,$){k(_,e,$),w(e,l),w(e,r),w(e,n),w(n,s),w(n,f),w(n,a),c.m(a,null),w(a,i),m&&m.m(a,null),u=!0},p(_,[$]){d===(d=g(_))&&c?c.p(_,$):(c.d(1),c=d(_),c&&(c.c(),c.m(a,i))),_[1].length>1?m?(m.p(_,$),$&2&&h(m,1)):(m=Pe(_),m.c(),h(m,1),m.m(a,null)):m&&(Q(),v(m,1,1,()=>{m=null}),W())},i(_){u||(h(m),u=!0)},o(_){v(m),u=!1},d(_){_&&p(e),c.d(),m&&m.d()}}}function Fl(o,e,l){let t,r;ue(o,pt,q=>l(15,r=q));let{step:n}=e,{stepName:s}=e,{formSuccess:f}=e,{speechBubbleContentArray:a}=e,i=0,u=!1;const g=(q,P)=>{try{return P===13&&!q?a.find(ee=>ee.step===13).errorContent:a.find(ee=>ee.step===P).content}catch(ee){return console.error("error in getSpeechBubbleContent",ee),[]}};let d,c;const m=(q,P,ee)=>{try{let Y=function(){fe<P.length&&(q.innerHTML+=P.charAt(fe),fe++,c=setTimeout(Y,ee))};console.log("typeText");let fe=0;q.innerHTML="";const le=document.createElement("div");le.style.visibility="hidden",le.style.position="absolute",le.style.width=`${q.clientWidth}px`,le.style.color="red",le.style.whiteSpace="pre-wrap",le.innerText=P,q.appendChild(le);const Ee=le.clientHeight;q.style.height=`${Ee}px`,q.removeChild(le),c&&clearTimeout(c),Y()}catch(Y){console.error("error typing text",Y)}},_=(q="Hi")=>{l(1,t=[t[0],q]),l(10,i=1)},$=async q=>{l(2,u=!0);try{const ee=await(await fetch("/api/ai/checkForJudgement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:q,lang:r})})).json();l(2,u=!1);const Y=ee.result;_(Y)}catch(P){console.error("error in getting judgement",P)}},E=()=>{console.log("decreaseIndex"),i>0&&l(10,i--,i)},H=()=>{console.log("increaseIndex"),t.length>1&&i===0&&l(10,i++,i)};At(()=>{c&&clearTimeout(c)});function ae(q){se[q?"unshift":"push"](()=>{d=q,l(0,d)})}const j=()=>E(),L=()=>H();return o.$$set=q=>{"step"in q&&l(5,n=q.step),"stepName"in q&&l(6,s=q.stepName),"formSuccess"in q&&l(7,f=q.formSuccess),"speechBubbleContentArray"in q&&l(8,a=q.speechBubbleContentArray)},o.$$.update=()=>{o.$$.dirty&160&&l(1,t=g(f,n)),o.$$.dirty&32&&l(10,i=0),o.$$.dirty&1027&&d&&(console.log("inside if speechBubbleElement"),m(d,t[i],30))},[d,t,u,E,H,n,s,f,a,$,i,ae,j,L]}class jl extends he{constructor(e){super(),$e(this,e,Fl,Bl,pe,{step:5,stepName:6,formSuccess:7,speechBubbleContentArray:8,checkJudgement:9})}get checkJudgement(){return this.$$.ctx[9]}}function Ue(o,e,l){const t=o.slice();return t[58]=e[l],t}function Ze(o,e,l){const t=o.slice();return t[51]=e[l],t}function Ke(o,e,l){const t=o.slice();return t[55]=e[l],t}function Qe(o,e,l){const t=o.slice();return t[58]=e[l],t}function We(o,e,l){const t=o.slice();return t[48]=e[l],t}function Ye(o,e,l){const t=o.slice();return t[51]=e[l],t}function Ge(o,e,l){const t=o.slice();return t[48]=e[l],t}function Xe(o){let e,l,t,r,n=o[0]>8&&xe(o);function s(a){o[25](a)}let f={speechBubbleContentArray:o[5],step:o[0],stepName:o[10][o[0]-1].slug,formSuccess:o[7]};return o[4]!==void 0&&(f.checkJudgement=o[4]),l=new jl({props:f}),se.push(()=>ge(l,"checkJudgement",s)),{c(){n&&n.c(),e=B(),V(l.$$.fragment)},l(a){n&&n.l(a),e=F(a),S(l.$$.fragment,a)},m(a,i){n&&n.m(a,i),k(a,e,i),T(l,a,i),r=!0},p(a,i){a[0]>8?n?(n.p(a,i),i[0]&1&&h(n,1)):(n=xe(a),n.c(),h(n,1),n.m(e.parentNode,e)):n&&(Q(),v(n,1,1,()=>{n=null}),W());const u={};i[0]&32&&(u.speechBubbleContentArray=a[5]),i[0]&1&&(u.step=a[0]),i[0]&1025&&(u.stepName=a[10][a[0]-1].slug),i[0]&128&&(u.formSuccess=a[7]),!t&&i[0]&16&&(t=!0,u.checkJudgement=a[4],ce(()=>t=!1)),l.$set(u)},i(a){r||(h(n),h(l.$$.fragment,a),r=!0)},o(a){v(n),v(l.$$.fragment,a),r=!1},d(a){a&&p(e),n&&n.d(a),y(l,a)}}}function xe(o){let e,l;return e=new sl({props:{step:o[0],steps:o[10],stepBackground:o[10][o[0]-1].slug}}),e.$on("changeStep",o[20]),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r[0]&1&&(n.step=t[0]),r[0]&1024&&(n.steps=t[10]),r[0]&1025&&(n.stepBackground=t[10][t[0]-1].slug),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function et(o){let e=o[0],l,t,r=ut(o);return{c(){r.c(),l=te()},l(n){r.l(n),l=te()},m(n,s){r.m(n,s),k(n,l,s),t=!0},p(n,s){s[0]&1&&pe(e,e=n[0])?(Q(),v(r,1,1,M),W(),r=ut(n),r.c(),h(r,1),r.m(l.parentNode,l)):r.p(n,s)},i(n){t||(h(r),t=!0)},o(n){v(r),t=!1},d(n){n&&p(l),r.d(n)}}}function ql(o){let e=o[11]("default.page.respond.steps.error")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.respond.steps.error")+"")&&O(l,e)},i:M,o:M,d(t){t&&p(l)}}}function Jl(o){let e=o[11]("default.page.respond.steps.success")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.respond.steps.success")+"")&&O(l,e)},i:M,o:M,d(t){t&&p(l)}}}function zl(o){let e,l,t;return l=new be({props:{form:o[16],name:"request",$$slots:{default:[Gl]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var n=N(e);S(l.$$.fragment,n),n.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,n){k(r,e,n),T(l,e,null),t=!0},p(r,n){const s={};n[0]&6144|n[2]&32&&(s.$$scope={dirty:n,ctx:r}),l.$set(s)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Ol(o){let e,l,t;return l=new be({props:{form:o[16],name:"needs",$$slots:{default:[lr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var n=N(e);S(l.$$.fragment,n),n.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,n){k(r,e,n),T(l,e,null),t=!0},p(r,n){const s={};n[0]&14340|n[2]&32&&(s.$$scope={dirty:n,ctx:r}),l.$set(s)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Ml(o){let e,l,t;return l=new be({props:{form:o[16],name:"feelings",$$slots:{default:[ar]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var n=N(e);S(l.$$.fragment,n),n.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,n){k(r,e,n),T(l,e,null),t=!0},p(r,n){const s={};n[0]&15363|n[2]&32&&(s.$$scope={dirty:n,ctx:r}),l.$set(s)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Al(o){let e,l,t;return l=new be({props:{form:o[16],name:"observation",$$slots:{default:[ur]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var n=N(e);S(l.$$.fragment,n),n.forEach(p),this.h()},h(){b(e,"class","form-content")},m(r,n){k(r,e,n),T(l,e,null),t=!0},p(r,n){const s={};n[0]&6400|n[2]&32&&(s.$$scope={dirty:n,ctx:r}),l.$set(s)},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){v(l.$$.fragment,r),t=!1},d(r){r&&p(e),y(l)}}}function Ll(o){let e,l,t=o[11]("default.page.respond.steps.pause.heading")+"",r;return{c(){e=D("div"),l=D("div"),r=J(t),this.h()},l(n){e=I(n,"DIV",{class:!0});var s=N(e);l=I(s,"DIV",{class:!0});var f=N(l);r=z(f,t),f.forEach(p),s.forEach(p),this.h()},h(){b(l,"class","flex max-w-[18em] flex-col gap-4 text-center pb-6"),b(e,"class","form-content flex items-center justify-center")},m(n,s){k(n,e,s),w(e,l),w(l,r)},p(n,s){s[0]&2048&&t!==(t=n[11]("default.page.respond.steps.pause.heading")+"")&&O(r,t)},i:M,o:M,d(n){n&&p(e)}}}function Rl(o){let e,l,t=o[3].expand.owner.firstName+"",r,n,s=o[11]("default.page.respond.steps.ownerRequest.heading")+"",f,a,i,u=o[3].request+"",g;return{c(){e=D("div"),l=D("div"),r=J(t),n=B(),f=J(s),a=B(),i=D("div"),g=J(u),this.h()},l(d){e=I(d,"DIV",{class:!0});var c=N(e);l=I(c,"DIV",{class:!0});var m=N(l);r=z(m,t),n=F(m),f=z(m,s),m.forEach(p),a=F(c),i=I(c,"DIV",{class:!0});var _=N(i);g=z(_,u),_.forEach(p),c.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(i,"class","rounded bg-white/10 px-4 py-3 shadow-xl pb-6"),b(e,"class","form-content")},m(d,c){k(d,e,c),w(e,l),w(l,r),w(l,n),w(l,f),w(e,a),w(e,i),w(i,g)},p(d,c){c[0]&8&&t!==(t=d[3].expand.owner.firstName+"")&&O(r,t),c[0]&2048&&s!==(s=d[11]("default.page.respond.steps.ownerRequest.heading")+"")&&O(f,s),c[0]&8&&u!==(u=d[3].request+"")&&O(g,u)},i:M,o:M,d(d){d&&p(e)}}}function Hl(o){let e,l,t=o[3].expand.owner.firstName+"",r,n,s=o[11]("default.page.respond.steps.ownerNeeds.heading")+"",f,a,i,u=X(o[3].expand.needs),g=[];for(let d=0;d<u.length;d+=1)g[d]=ft(Ye(o,u,d));return{c(){e=D("div"),l=D("div"),r=J(t),n=B(),f=J(s),a=B(),i=D("div");for(let d=0;d<g.length;d+=1)g[d].c();this.h()},l(d){e=I(d,"DIV",{class:!0});var c=N(e);l=I(c,"DIV",{class:!0});var m=N(l);r=z(m,t),n=F(m),f=z(m,s),m.forEach(p),a=F(c),i=I(c,"DIV",{class:!0});var _=N(i);for(let $=0;$<g.length;$+=1)g[$].l(_);_.forEach(p),c.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(i,"class","flex flex-wrap items-center gap-2 pb-6"),b(e,"class","form-content")},m(d,c){k(d,e,c),w(e,l),w(l,r),w(l,n),w(l,f),w(e,a),w(e,i);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(i,null)},p(d,c){if(c[0]&8&&t!==(t=d[3].expand.owner.firstName+"")&&O(r,t),c[0]&2048&&s!==(s=d[11]("default.page.respond.steps.ownerNeeds.heading")+"")&&O(f,s),c[0]&8200){u=X(d[3].expand.needs);let m;for(m=0;m<u.length;m+=1){const _=Ye(d,u,m);g[m]?g[m].p(_,c):(g[m]=ft(_),g[m].c(),g[m].m(i,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=u.length}},i:M,o:M,d(d){d&&p(e),oe(g,d)}}}function Pl(o){let e,l,t=o[3].expand.owner.firstName+"",r,n,s=o[11]("default.page.respond.steps.ownerFeelings.heading")+"",f,a,i,u=X(o[3].expand.feelings),g=[];for(let d=0;d<u.length;d+=1)g[d]=it(Ge(o,u,d));return{c(){e=D("div"),l=D("div"),r=J(t),n=B(),f=J(s),a=B(),i=D("div");for(let d=0;d<g.length;d+=1)g[d].c();this.h()},l(d){e=I(d,"DIV",{class:!0});var c=N(e);l=I(c,"DIV",{class:!0});var m=N(l);r=z(m,t),n=F(m),f=z(m,s),m.forEach(p),a=F(c),i=I(c,"DIV",{class:!0});var _=N(i);for(let $=0;$<g.length;$+=1)g[$].l(_);_.forEach(p),c.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(i,"class","flex flex-wrap items-center gap-2 pb-6"),b(e,"class","form-content")},m(d,c){k(d,e,c),w(e,l),w(l,r),w(l,n),w(l,f),w(e,a),w(e,i);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(i,null)},p(d,c){if(c[0]&8&&t!==(t=d[3].expand.owner.firstName+"")&&O(r,t),c[0]&2048&&s!==(s=d[11]("default.page.respond.steps.ownerFeelings.heading")+"")&&O(f,s),c[0]&8200){u=X(d[3].expand.feelings);let m;for(m=0;m<u.length;m+=1){const _=Ge(d,u,m);g[m]?g[m].p(_,c):(g[m]=it(_),g[m].c(),g[m].m(i,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=u.length}},i:M,o:M,d(d){d&&p(e),oe(g,d)}}}function Ul(o){let e,l,t=o[3].expand.owner.firstName+"",r,n,s=o[11]("default.page.respond.steps.ownerObservation.heading")+"",f,a,i,u=o[3].observation+"",g;return{c(){e=D("div"),l=D("div"),r=J(t),n=B(),f=J(s),a=B(),i=D("div"),g=J(u),this.h()},l(d){e=I(d,"DIV",{class:!0});var c=N(e);l=I(c,"DIV",{class:!0});var m=N(l);r=z(m,t),n=F(m),f=z(m,s),m.forEach(p),a=F(c),i=I(c,"DIV",{class:!0});var _=N(i);g=z(_,u),_.forEach(p),c.forEach(p),this.h()},h(){b(l,"class","form-label pt-10"),b(i,"class","rounded bg-white/10 px-4 py-3 shadow-xl"),b(e,"class","form-content")},m(d,c){k(d,e,c),w(e,l),w(l,r),w(l,n),w(l,f),w(e,a),w(e,i),w(i,g)},p(d,c){c[0]&8&&t!==(t=d[3].expand.owner.firstName+"")&&O(r,t),c[0]&2048&&s!==(s=d[11]("default.page.respond.steps.ownerObservation.heading")+"")&&O(f,s),c[0]&8&&u!==(u=d[3].observation+"")&&O(g,u)},i:M,o:M,d(d){d&&p(e)}}}function Zl(o){let e,l,t,r=o[11]("default.page.respond.steps.breathe.heading")+"",n,s,f,a,i;return{c(){e=D("div"),l=D("div"),t=D("span"),n=J(r),s=B(),f=D("div"),a=B(),i=D("div"),this.h()},l(u){e=I(u,"DIV",{class:!0});var g=N(e);l=I(g,"DIV",{class:!0});var d=N(l);t=I(d,"SPAN",{class:!0});var c=N(t);n=z(c,r),c.forEach(p),s=F(d),f=I(d,"DIV",{class:!0}),N(f).forEach(p),a=F(d),i=I(d,"DIV",{class:!0}),N(i).forEach(p),d.forEach(p),g.forEach(p),this.h()},h(){b(t,"class","relative z-10 -mb-2"),b(f,"class","breathe svelte-18kg1ym"),b(i,"class","breathe2 svelte-18kg1ym"),b(l,"class","relative flex flex-col text-center"),b(e,"class","form-content flex items-center justify-center")},m(u,g){k(u,e,g),w(e,l),w(l,t),w(t,n),w(l,s),w(l,f),w(l,a),w(l,i)},p(u,g){g[0]&2048&&r!==(r=u[11]("default.page.respond.steps.breathe.heading")+"")&&O(n,r)},i:M,o:M,d(u){u&&p(e)}}}function Kl(o){let e,l="";return{c(){e=D("div"),e.innerHTML=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),je(e)!=="svelte-16so695"&&(e.innerHTML=l),this.h()},h(){b(e,"class","form-content flex flex-col items-center justify-center text-center")},m(t,r){k(t,e,r)},p:M,i:M,o:M,d(t){t&&p(e)}}}function Ql(o){let e,l,t,r,n;return r=new fl({props:{variant:"ghost",class:"mb-6 flex w-full items-center justify-start gap-2 text-black",$$slots:{default:[cr]},$$scope:{ctx:o}}}),r.$on("click",o[26]),{c(){e=D("div"),l=D("div"),t=B(),V(r.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var f=N(e);l=I(f,"DIV",{}),N(l).forEach(p),t=F(f),S(r.$$.fragment,f),f.forEach(p),this.h()},h(){b(e,"class","form-content flex flex-col items-center justify-between pb-1 pt-10 text-center")},m(s,f){k(s,e,f),w(e,l),w(e,t),T(r,e,null),n=!0},p(s,f){const a={};f[0]&2048|f[2]&32&&(a.$$scope={dirty:f,ctx:s}),r.$set(a)},i(s){n||(h(r.$$.fragment,s),n=!0)},o(s){v(r.$$.fragment,s),n=!1},d(s){s&&p(e),y(r)}}}function Wl(o){let e=o[11]("default.page.fights.form.request.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.request.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function Yl(o){let e,l,t,r,n;e=new Ce({props:{class:"form-label",$$slots:{default:[Wl]},$$scope:{ctx:o}}});const s=[o[54],{class:"min-h-60"}];function f(i){o[31](i)}let a={};for(let i=0;i<s.length;i+=1)a=ne(a,s[i]);return o[12].request!==void 0&&(a.value=o[12].request),t=new _t({props:a}),se.push(()=>ge(t,"value",f)),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(i){S(e.$$.fragment,i),l=F(i),S(t.$$.fragment,i)},m(i,u){T(e,i,u),k(i,l,u),T(t,i,u),n=!0},p(i,u){const g={};u[0]&2048|u[2]&32&&(g.$$scope={dirty:u,ctx:i}),e.$set(g);const d=u[1]&8388608?me(s,[ve(i[54]),s[1]]):{};!r&&u[0]&4096&&(r=!0,d.value=i[12].request,ce(()=>r=!1)),t.$set(d)},i(i){n||(h(e.$$.fragment,i),h(t.$$.fragment,i),n=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),n=!1},d(i){i&&p(l),y(e,i),y(t,i)}}}function Gl(o){let e,l,t,r;return e=new we({props:{$$slots:{default:[Yl,({attrs:n})=>({54:n}),({attrs:n})=>[0,n?8388608:0]]},$$scope:{ctx:o}}}),t=new ke({}),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(n){S(e.$$.fragment,n),l=F(n),S(t.$$.fragment,n)},m(n,s){T(e,n,s),k(n,l,s),T(t,n,s),r=!0},p(n,s){const f={};s[0]&6144|s[1]&8388608|s[2]&32&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(h(e.$$.fragment,n),h(t.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),v(t.$$.fragment,n),r=!1},d(n){n&&p(l),y(e,n),y(t,n)}}}function Xl(o){let e=o[11]("default.page.fights.form.needs.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.needs.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function tt(o){let e,l,t=X(o[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=rt(Ue(o,t,s));const n=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){e=D("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=I(s,"DIV",{class:!0});var f=N(e);for(let a=0;a<r.length;a+=1)r[a].l(f);f.forEach(p),this.h()},h(){b(e,"class","-m-1 flex w-full flex-wrap justify-start transition-all")},m(s,f){k(s,e,f);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);l=!0},p(s,f){if(f[0]&10498052){t=X(s[2]);let a;for(a=0;a<t.length;a+=1){const i=Ue(s,t,a);r[a]?(r[a].p(i,f),h(r[a],1)):(r[a]=rt(i),r[a].c(),h(r[a],1),r[a].m(e,null))}for(Q(),a=t.length;a<r.length;a+=1)n(a);W()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);l=!1},d(s){s&&p(e),oe(r,s)}}}function xl(o){let e=(o[13]==="de"?o[51].nameDE:o[51].nameEN)+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&8196&&e!==(e=(t[13]==="de"?t[51].nameDE:t[51].nameEN)+"")&&O(l,e)},d(t){t&&p(l)}}}function lt(o){let e,l,t,r,n,s,f;return l=new $t({props:{value:o[51].id,class:(o[51].nameEN===o[58].category?"bg-white/40 dark:bg-muted font-bold":"border border-white/40 dark:border-white/20")+" py-0 text-black  shadow hover:text-black data-[state=on]:text-white dark:text-white data-[state=on]:bg-needs-foreground dark:data-[state=on]:bg-needs-foreground max-w-[300px]",$$slots:{default:[xl]},$$scope:{ctx:o}}}),{c(){e=D("button"),V(l.$$.fragment),t=B(),this.h()},l(a){e=I(a,"BUTTON",{type:!0,class:!0});var i=N(e);S(l.$$.fragment,i),t=F(i),i.forEach(p),this.h()},h(){var a;b(e,"type","button"),b(e,"class",r=(o[23](o[51],o[58])||(a=o[12].needs)!=null&&a.includes(o[51].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all")},m(a,i){k(a,e,i),T(l,e,null),w(e,t),n=!0,s||(f=de(e,"click",function(){dt(o[21](o[51],o[58].category))&&o[21](o[51],o[58].category).apply(this,arguments)}),s=!0)},p(a,i){var g;o=a;const u={};i[0]&4&&(u.value=o[51].id),i[0]&4&&(u.class=(o[51].nameEN===o[58].category?"bg-white/40 dark:bg-muted font-bold":"border border-white/40 dark:border-white/20")+" py-0 text-black  shadow hover:text-black data-[state=on]:text-white dark:text-white data-[state=on]:bg-needs-foreground dark:data-[state=on]:bg-needs-foreground max-w-[300px]"),i[0]&8196|i[2]&32&&(u.$$scope={dirty:i,ctx:o}),l.$set(u),(!n||i[0]&4100&&r!==(r=(o[23](o[51],o[58])||(g=o[12].needs)!=null&&g.includes(o[51].id)?"pointer-events-auto max-h-60 max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-h-0 max-w-0 p-0 opacity-0")+" transition-all"))&&b(e,"class",r)},i(a){n||(h(l.$$.fragment,a),n=!0)},o(a){v(l.$$.fragment,a),n=!1},d(a){a&&p(e),y(l),s=!1,f()}}}function rt(o){let e,l,t=X(o[58].content),r=[];for(let s=0;s<t.length;s+=1)r[s]=lt(Ze(o,t,s));const n=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=te()},l(s){for(let f=0;f<r.length;f+=1)r[f].l(s);e=te()},m(s,f){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,f);k(s,e,f),l=!0},p(s,f){if(f[0]&10498052){t=X(s[58].content);let a;for(a=0;a<t.length;a+=1){const i=Ze(s,t,a);r[a]?(r[a].p(i,f),h(r[a],1)):(r[a]=lt(i),r[a].c(),h(r[a],1),r[a].m(e.parentNode,e))}for(Q(),a=t.length;a<r.length;a+=1)n(a);W()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);l=!1},d(s){s&&p(e),oe(r,s)}}}function er(o){let e,l,t=o[2].length>0&&tt(o);return{c(){t&&t.c(),e=te()},l(r){t&&t.l(r),e=te()},m(r,n){t&&t.m(r,n),k(r,e,n),l=!0},p(r,n){r[2].length>0?t?(t.p(r,n),n[0]&4&&h(t,1)):(t=tt(r),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(Q(),v(t,1,1,()=>{t=null}),W())},i(r){l||(h(t),l=!0)},o(r){v(t),l=!1},d(r){r&&p(e),t&&t.d(r)}}}function tr(o){let e,l,t,r,n;e=new Ce({props:{class:"form-label",$$slots:{default:[Xl]},$$scope:{ctx:o}}});const s=[{type:"multiple"},o[54],{class:""}];function f(i){o[30](i)}let a={$$slots:{default:[er]},$$scope:{ctx:o}};for(let i=0;i<s.length;i+=1)a=ne(a,s[i]);return o[12].needs!==void 0&&(a.value=o[12].needs),t=new ht({props:a}),se.push(()=>ge(t,"value",f)),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(i){S(e.$$.fragment,i),l=F(i),S(t.$$.fragment,i)},m(i,u){T(e,i,u),k(i,l,u),T(t,i,u),n=!0},p(i,u){const g={};u[0]&2048|u[2]&32&&(g.$$scope={dirty:u,ctx:i}),e.$set(g);const d=u[1]&8388608?me(s,[s[0],ve(i[54]),s[2]]):{};u[0]&12292|u[2]&32&&(d.$$scope={dirty:u,ctx:i}),!r&&u[0]&4096&&(r=!0,d.value=i[12].needs,ce(()=>r=!1)),t.$set(d)},i(i){n||(h(e.$$.fragment,i),h(t.$$.fragment,i),n=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),n=!1},d(i){i&&p(l),y(e,i),y(t,i)}}}function lr(o){let e,l,t,r;return e=new we({props:{$$slots:{default:[tr,({attrs:n})=>({54:n}),({attrs:n})=>[0,n?8388608:0]]},$$scope:{ctx:o}}}),t=new ke({}),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(n){S(e.$$.fragment,n),l=F(n),S(t.$$.fragment,n)},m(n,s){T(e,n,s),k(n,l,s),T(t,n,s),r=!0},p(n,s){const f={};s[0]&14340|s[1]&8388608|s[2]&32&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(h(e.$$.fragment,n),h(t.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),v(t.$$.fragment,n),r=!1},d(n){n&&p(l),y(e,n),y(t,n)}}}function rr(o){let e=o[11]("default.page.fights.form.feelings.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.feelings.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function nt(o){let e,l,t=X(o[1]),r=[];for(let s=0;s<t.length;s+=1)r[s]=at(Ke(o,t,s));const n=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){e=D("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=I(s,"DIV",{class:!0});var f=N(e);for(let a=0;a<r.length;a+=1)r[a].l(f);f.forEach(p),this.h()},h(){b(e,"class","")},m(s,f){k(s,e,f);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);l=!0},p(s,f){if(f[0]&12598275){t=X(s[1]);let a;for(a=0;a<t.length;a+=1){const i=Ke(s,t,a);r[a]?(r[a].p(i,f),h(r[a],1)):(r[a]=at(i),r[a].c(),h(r[a],1),r[a].m(e,null))}for(Q(),a=t.length;a<r.length;a+=1)n(a);W()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);l=!1},d(s){s&&p(e),oe(r,s)}}}function nr(o){let e=(o[13]==="de"?o[48].nameDE:o[48].nameEN)+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&8194&&e!==(e=(t[13]==="de"?t[48].nameDE:t[48].nameEN)+"")&&O(l,e)},d(t){t&&p(l)}}}function st(o){let e,l,t,r,n,s;return l=new $t({props:{value:o[48].id,class:(o[48].nameEN===o[58].category?"bg-white/40 dark:bg-muted font-bold":"border border-white/40 dark:border-white/20")+" py-0 text-black  shadow hover:text-black data-[state=on]:text-white dark:text-white data-[state=on]:bg-feelings-foreground dark:data-[state=on]:bg-feelings-foreground max-w-[300px]",$$slots:{default:[nr]},$$scope:{ctx:o}}}),{c(){e=D("button"),V(l.$$.fragment),this.h()},l(f){e=I(f,"BUTTON",{type:!0,class:!0});var a=N(e);S(l.$$.fragment,a),a.forEach(p),this.h()},h(){var f;b(e,"type","button"),b(e,"class",t=(o[23](o[48],o[58])||(f=o[12].feelings)!=null&&f.includes(o[48].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all")},m(f,a){k(f,e,a),T(l,e,null),r=!0,n||(s=de(e,"click",function(){dt(o[22](o[48],o[58].category))&&o[22](o[48],o[58].category).apply(this,arguments)}),n=!0)},p(f,a){var u;o=f;const i={};a[0]&2&&(i.value=o[48].id),a[0]&2&&(i.class=(o[48].nameEN===o[58].category?"bg-white/40 dark:bg-muted font-bold":"border border-white/40 dark:border-white/20")+" py-0 text-black  shadow hover:text-black data-[state=on]:text-white dark:text-white data-[state=on]:bg-feelings-foreground dark:data-[state=on]:bg-feelings-foreground max-w-[300px]"),a[0]&8194|a[2]&32&&(i.$$scope={dirty:a,ctx:o}),l.$set(i),(!r||a[0]&4098&&t!==(t=(o[23](o[48],o[58])||(u=o[12].feelings)!=null&&u.includes(o[48].id)?"pointer-events-auto max-w-[1000px] p-1 opacity-100":"pointer-events-none m-0 max-w-0 p-0 opacity-0")+" transition-all"))&&b(e,"class",t)},i(f){r||(h(l.$$.fragment,f),r=!0)},o(f){v(l.$$.fragment,f),r=!1},d(f){f&&p(e),y(l),n=!1,s()}}}function ot(o){let e,l,t=X(o[58].content),r=[];for(let s=0;s<t.length;s+=1)r[s]=st(We(o,t,s));const n=s=>v(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=te()},l(s){for(let f=0;f<r.length;f+=1)r[f].l(s);e=te()},m(s,f){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,f);k(s,e,f),l=!0},p(s,f){if(f[0]&12595202){t=X(s[58].content);let a;for(a=0;a<t.length;a+=1){const i=We(s,t,a);r[a]?(r[a].p(i,f),h(r[a],1)):(r[a]=st(i),r[a].c(),h(r[a],1),r[a].m(e.parentNode,e))}for(Q(),a=t.length;a<r.length;a+=1)n(a);W()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)h(r[f]);l=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);l=!1},d(s){s&&p(e),oe(r,s)}}}function at(o){let e,l=(o[55].category==="true"?o[11]("default.page.fights.form.general.goodFeelings"):o[11]("default.page.fights.form.general.badFeelings"))+"",t,r,n,s,f,a,i,u,g,d=X(o[55].content),c=[];for(let _=0;_<d.length;_+=1)c[_]=ot(Qe(o,d,_));const m=_=>v(c[_],1,1,()=>{c[_]=null});return{c(){e=D("div"),t=J(l),r=B(),n=D("div"),a=B(),i=D("div");for(let _=0;_<c.length;_+=1)c[_].c();u=B(),this.h()},l(_){e=I(_,"DIV",{class:!0});var $=N(e);t=z($,l),r=F($),n=I($,"DIV",{class:!0}),N(n).forEach(p),$.forEach(p),a=F(_),i=I(_,"DIV",{class:!0});var E=N(i);for(let H=0;H<c.length;H+=1)c[H].l(E);u=F(E),E.forEach(p),this.h()},h(){b(n,"class",s="border-b border-"+o[10][o[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-18kg1ym"),b(e,"class",f="text-"+o[10][o[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-18kg1ym"),b(i,"class","-mx-1 flex w-full flex-wrap justify-start transition-all")},m(_,$){k(_,e,$),w(e,t),w(e,r),w(e,n),k(_,a,$),k(_,i,$);for(let E=0;E<c.length;E+=1)c[E]&&c[E].m(i,null);w(i,u),g=!0},p(_,$){if((!g||$[0]&2050)&&l!==(l=(_[55].category==="true"?_[11]("default.page.fights.form.general.goodFeelings"):_[11]("default.page.fights.form.general.badFeelings"))+"")&&O(t,l),(!g||$[0]&1025&&s!==(s="border-b border-"+_[10][_[0]-1].slug+"-foreground mr-2 flex-grow border-opacity-20 svelte-18kg1ym"))&&b(n,"class",s),(!g||$[0]&1025&&f!==(f="text-"+_[10][_[0]-1].slug+"-foreground mb-1 mt-3 flex items-center gap-3 text-xs svelte-18kg1ym"))&&b(e,"class",f),$[0]&12595202){d=X(_[55].content);let E;for(E=0;E<d.length;E+=1){const H=Qe(_,d,E);c[E]?(c[E].p(H,$),h(c[E],1)):(c[E]=ot(H),c[E].c(),h(c[E],1),c[E].m(i,u))}for(Q(),E=d.length;E<c.length;E+=1)m(E);W()}},i(_){if(!g){for(let $=0;$<d.length;$+=1)h(c[$]);g=!0}},o(_){c=c.filter(Boolean);for(let $=0;$<c.length;$+=1)v(c[$]);g=!1},d(_){_&&(p(e),p(a),p(i)),oe(c,_)}}}function sr(o){let e,l,t=o[1].length>0&&nt(o);return{c(){t&&t.c(),e=te()},l(r){t&&t.l(r),e=te()},m(r,n){t&&t.m(r,n),k(r,e,n),l=!0},p(r,n){r[1].length>0?t?(t.p(r,n),n[0]&2&&h(t,1)):(t=nt(r),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(Q(),v(t,1,1,()=>{t=null}),W())},i(r){l||(h(t),l=!0)},o(r){v(t),l=!1},d(r){r&&p(e),t&&t.d(r)}}}function or(o){let e,l,t,r,n;e=new Ce({props:{class:"form-label",$$slots:{default:[rr]},$$scope:{ctx:o}}});const s=[{type:"multiple"},o[54],{class:"flex flex-col gap-4"}];function f(i){o[29](i)}let a={$$slots:{default:[sr]},$$scope:{ctx:o}};for(let i=0;i<s.length;i+=1)a=ne(a,s[i]);return o[12].feelings!==void 0&&(a.value=o[12].feelings),t=new ht({props:a}),se.push(()=>ge(t,"value",f)),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(i){S(e.$$.fragment,i),l=F(i),S(t.$$.fragment,i)},m(i,u){T(e,i,u),k(i,l,u),T(t,i,u),n=!0},p(i,u){const g={};u[0]&2048|u[2]&32&&(g.$$scope={dirty:u,ctx:i}),e.$set(g);const d=u[1]&8388608?me(s,[s[0],ve(i[54]),s[2]]):{};u[0]&15363|u[2]&32&&(d.$$scope={dirty:u,ctx:i}),!r&&u[0]&4096&&(r=!0,d.value=i[12].feelings,ce(()=>r=!1)),t.$set(d)},i(i){n||(h(e.$$.fragment,i),h(t.$$.fragment,i),n=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),n=!1},d(i){i&&p(l),y(e,i),y(t,i)}}}function ar(o){let e,l,t,r;return e=new we({props:{$$slots:{default:[or,({attrs:n})=>({54:n}),({attrs:n})=>[0,n?8388608:0]]},$$scope:{ctx:o}}}),t=new ke({}),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(n){S(e.$$.fragment,n),l=F(n),S(t.$$.fragment,n)},m(n,s){T(e,n,s),k(n,l,s),T(t,n,s),r=!0},p(n,s){const f={};s[0]&15363|s[1]&8388608|s[2]&32&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(h(e.$$.fragment,n),h(t.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),v(t.$$.fragment,n),r=!1},d(n){n&&p(l),y(e,n),y(t,n)}}}function fr(o){let e=o[11]("default.page.fights.form.observation.label")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.fights.form.observation.label")+"")&&O(l,e)},d(t){t&&p(l)}}}function ir(o){let e,l,t,r,n;e=new Ce({props:{class:"form-label",$$slots:{default:[fr]},$$scope:{ctx:o}}});const s=[o[54],{class:"min-h-60"}];function f(i){o[27](i)}let a={};for(let i=0;i<s.length;i+=1)a=ne(a,s[i]);return o[12].observation!==void 0&&(a.value=o[12].observation),t=new _t({props:a}),se.push(()=>ge(t,"value",f)),t.$on("input",o[28]),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(i){S(e.$$.fragment,i),l=F(i),S(t.$$.fragment,i)},m(i,u){T(e,i,u),k(i,l,u),T(t,i,u),n=!0},p(i,u){const g={};u[0]&2048|u[2]&32&&(g.$$scope={dirty:u,ctx:i}),e.$set(g);const d=u[1]&8388608?me(s,[ve(i[54]),s[1]]):{};!r&&u[0]&4096&&(r=!0,d.value=i[12].observation,ce(()=>r=!1)),t.$set(d)},i(i){n||(h(e.$$.fragment,i),h(t.$$.fragment,i),n=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),n=!1},d(i){i&&p(l),y(e,i),y(t,i)}}}function ur(o){let e,l,t,r;return e=new we({props:{$$slots:{default:[ir,({attrs:n})=>({54:n}),({attrs:n})=>[0,n?8388608:0]]},$$scope:{ctx:o}}}),t=new ke({}),{c(){V(e.$$.fragment),l=B(),V(t.$$.fragment)},l(n){S(e.$$.fragment,n),l=F(n),S(t.$$.fragment,n)},m(n,s){T(e,n,s),k(n,l,s),T(t,n,s),r=!0},p(n,s){const f={};s[0]&6400|s[1]&8388608|s[2]&32&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(h(e.$$.fragment,n),h(t.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),v(t.$$.fragment,n),r=!1},d(n){n&&p(l),y(e,n),y(t,n)}}}function ft(o){let e,l=(o[13]==="de"?o[51].nameDE:o[51].nameEN)+"",t,r;return{c(){e=D("div"),t=J(l),r=B(),this.h()},l(n){e=I(n,"DIV",{class:!0});var s=N(e);t=z(s,l),r=F(s),s.forEach(p),this.h()},h(){b(e,"class","rounded-md bg-white/10 px-4 py-2 shadow-lg")},m(n,s){k(n,e,s),w(e,t),w(e,r)},p(n,s){s[0]&8200&&l!==(l=(n[13]==="de"?n[51].nameDE:n[51].nameEN)+"")&&O(t,l)},d(n){n&&p(e)}}}function it(o){let e,l=(o[13]==="de"?o[48].nameDE:o[48].nameEN)+"",t,r;return{c(){e=D("div"),t=J(l),r=B(),this.h()},l(n){e=I(n,"DIV",{class:!0});var s=N(e);t=z(s,l),r=F(s),s.forEach(p),this.h()},h(){b(e,"class","rounded-md bg-white/20 px-4 py-2 shadow-lg")},m(n,s){k(n,e,s),w(e,t),w(e,r)},p(n,s){s[0]&8200&&l!==(l=(n[13]==="de"?n[48].nameDE:n[48].nameEN)+"")&&O(t,l)},d(n){n&&p(e)}}}function cr(o){let e,l,t=o[11]("default.page.respond.steps.greeting.explanationCta")+"",r,n;return e=new cl({}),{c(){V(e.$$.fragment),l=B(),r=J(t)},l(s){S(e.$$.fragment,s),l=F(s),r=z(s,t)},m(s,f){T(e,s,f),k(s,l,f),k(s,r,f),n=!0},p(s,f){(!n||f[0]&2048)&&t!==(t=s[11]("default.page.respond.steps.greeting.explanationCta")+"")&&O(r,t)},i(s){n||(h(e.$$.fragment,s),n=!0)},o(s){v(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(r)),y(e,s)}}}function ut(o){let e,l,t,r;const n=[Ql,Kl,Zl,Ul,Pl,Hl,Rl,Ll,Al,Ml,Ol,zl,Jl,ql],s=[];function f(a,i){return a[0]===1?0:a[0]===2?1:a[0]===3?2:a[0]===4?3:a[0]===5?4:a[0]===6?5:a[0]===7?6:a[0]===8?7:a[0]===9?8:a[0]===10?9:a[0]===11?10:a[6]?a[7]?12:13:11}return e=f(o),l=s[e]=n[e](o),{c(){l.c(),t=te()},l(a){l.l(a),t=te()},m(a,i){s[e].m(a,i),k(a,t,i),r=!0},p(a,i){let u=e;e=f(a),e===u?s[e].p(a,i):(Q(),v(s[u],1,1,()=>{s[u]=null}),W(),l=s[e],l?l.p(a,i):(l=s[e]=n[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){r||(h(l),r=!0)},o(a){v(l),r=!1},d(a){a&&p(t),s[e].d(a)}}}function ct(o){let e,l;return e=new Kt({props:{$$slots:{default:[gr]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r[0]&1281|r[2]&32&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function gr(o){let e,l;return e=new kl({props:{step:o[0],checkForJudgement:o[8],primaryButtonClass:`bg-${o[10][o[0]-1].slug}-background`,class:"flex-shrink-0"}}),e.$on("validateObservation",o[14]),e.$on("disableJudgementCheck",o[15]),e.$on("toPrev",o[19]),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r[0]&1&&(n.step=t[0]),r[0]&256&&(n.checkForJudgement=t[8]),r[0]&1025&&(n.primaryButtonClass=`bg-${t[10][t[0]-1].slug}-background`),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function dr(o){let e=o[11]("default.page.respond.explanationTitle")+"",l;return{c(){l=J(e)},l(t){l=z(t,e)},m(t,r){k(t,l,r)},p(t,r){r[0]&2048&&e!==(e=t[11]("default.page.respond.explanationTitle")+"")&&O(l,e)},d(t){t&&p(l)}}}function pr(o){let e,l;return e=new tl({props:{class:"text-red-600"}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function mr(o){let e,l,t,r,n;return l=new xt({props:{$$slots:{default:[dr]},$$scope:{ctx:o}}}),r=new el({props:{$$slots:{default:[pr]},$$scope:{ctx:o}}}),{c(){e=D("div"),V(l.$$.fragment),t=B(),V(r.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var f=N(e);S(l.$$.fragment,f),t=F(f),S(r.$$.fragment,f),f.forEach(p),this.h()},h(){b(e,"class","flex items-center justify-between")},m(s,f){k(s,e,f),T(l,e,null),w(e,t),T(r,e,null),n=!0},p(s,f){const a={};f[0]&2048|f[2]&32&&(a.$$scope={dirty:f,ctx:s}),l.$set(a);const i={};f[2]&32&&(i.$$scope={dirty:f,ctx:s}),r.$set(i)},i(s){n||(h(l.$$.fragment,s),h(r.$$.fragment,s),n=!0)},o(s){v(l.$$.fragment,s),v(r.$$.fragment,s),n=!1},d(s){s&&p(e),y(l),y(r)}}}function _r(o){let e,l,t,r=o[11]("default.page.respond.explanation")+"",n,s;return e=new Xt({props:{$$slots:{default:[mr]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment),l=B(),t=D("p"),n=J(r),this.h()},l(f){S(e.$$.fragment,f),l=F(f),t=I(f,"P",{class:!0});var a=N(t);n=z(a,r),a.forEach(p),this.h()},h(){b(t,"class","mb-20 p-4")},m(f,a){T(e,f,a),k(f,l,a),k(f,t,a),w(t,n),s=!0},p(f,a){const i={};a[0]&2048|a[2]&32&&(i.$$scope={dirty:a,ctx:f}),e.$set(i),(!s||a[0]&2048)&&r!==(r=f[11]("default.page.respond.explanation")+"")&&O(n,r)},i(f){s||(h(e.$$.fragment,f),s=!0)},o(f){v(e.$$.fragment,f),s=!1},d(f){f&&(p(l),p(t)),y(e,f)}}}function hr(o){let e,l;return e=new Gt({props:{class:"p-4",$$slots:{default:[_r]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r[0]&2048|r[2]&32&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function $r(o){let e,l,t,r,n,s,f,a,i,u,g,d,c,m;l=new Zt({});let _=!o[6]&&!o[7]&&Xe(o),$=o[3]&&et(o),E=!o[6]&&!o[7]&&ct(o);function H(j){o[32](j)}let ae={$$slots:{default:[hr]},$$scope:{ctx:o}};return o[9]!==void 0&&(ae.open=o[9]),u=new Wt({props:ae}),se.push(()=>ge(u,"open",H)),{c(){e=D("div"),V(l.$$.fragment),t=B(),r=D("div"),n=D("form"),_&&_.c(),s=B(),$&&$.c(),f=B(),E&&E.c(),i=B(),V(u.$$.fragment),this.h()},l(j){e=I(j,"DIV",{class:!0});var L=N(e);S(l.$$.fragment,L),t=F(L),r=I(L,"DIV",{class:!0});var q=N(r);n=I(q,"FORM",{class:!0});var P=N(n);_&&_.l(P),s=F(P),$&&$.l(P),f=F(P),E&&E.l(P),P.forEach(p),q.forEach(p),L.forEach(p),i=F(j),S(u.$$.fragment,j),this.h()},h(){b(n,"class","-mt-1 flex h-full flex-grow flex-col pb-[74px]"),b(r,"class","max-container relative flex flex-grow flex-col pb-40"),b(e,"class",a=`flex flex-grow flex-col justify-between transition duration-500 bg-${o[10][o[0]-1].slug}-background dark:bg-background overflow-hidden svelte-18kg1ym`)},m(j,L){k(j,e,L),T(l,e,null),w(e,t),w(e,r),w(r,n),_&&_.m(n,null),w(n,s),$&&$.m(n,null),w(n,f),E&&E.m(n,null),k(j,i,L),T(u,j,L),d=!0,c||(m=[de(n,"submit",Lt(o[24])),Rt(o[18].call(null,n))],c=!0)},p(j,L){!j[6]&&!j[7]?_?(_.p(j,L),L[0]&192&&h(_,1)):(_=Xe(j),_.c(),h(_,1),_.m(n,s)):_&&(Q(),v(_,1,1,()=>{_=null}),W()),j[3]?$?($.p(j,L),L[0]&8&&h($,1)):($=et(j),$.c(),h($,1),$.m(n,f)):$&&(Q(),v($,1,1,()=>{$=null}),W()),!j[6]&&!j[7]?E?(E.p(j,L),L[0]&192&&h(E,1)):(E=ct(j),E.c(),h(E,1),E.m(n,null)):E&&(Q(),v(E,1,1,()=>{E=null}),W()),(!d||L[0]&1025&&a!==(a=`flex flex-grow flex-col justify-between transition duration-500 bg-${j[10][j[0]-1].slug}-background dark:bg-background overflow-hidden svelte-18kg1ym`))&&b(e,"class",a);const q={};L[0]&2048|L[2]&32&&(q.$$scope={dirty:L,ctx:j}),!g&&L[0]&512&&(g=!0,q.open=j[9],ce(()=>g=!1)),u.$set(q)},i(j){d||(h(l.$$.fragment,j),h(_),h($),h(E),h(u.$$.fragment,j),d=!0)},o(j){v(l.$$.fragment,j),v(_),v($),v(E),v(u.$$.fragment,j),d=!1},d(j){j&&(p(e),p(i)),y(l),_&&_.d(),$&&$.d(),E&&E.d(),y(u,j),c=!1,gt(m)}}}function vr(o,e,l){let t,r,n,s;ue(o,Z,C=>l(11,t=C)),ue(o,Qt,C=>l(34,r=C)),ue(o,pt,C=>l(13,s=C));const f=Yt(G(ie));let a=[],i=[],u,g,d=[{step:1,content:[""]}];const c=[G(Te),G(ye),G(Be),G(Fe),G(Cl),G(El),G(Dl),G(Il),G(Nl),G(Vl),G(Sl),G(ie)];let m=1,_=!1,$=!1,E=!1,H=!1;const ae=async()=>{try{let C=n;C.fight=u.id,console.log("submit form",C);const R=await _e.collection("responses").create(C);l(7,$=!0),l(6,_=!0)}catch(C){console.log("error handling submit",C),l(7,$=!1),l(6,_=!0)}},j=async C=>{const A=Object.keys(G([Te,ye,Be,Fe,ie][C-1]).constraints);let U=!0;for(const re of A)await vt(re,{update:!1})&&(U=!1);return!!U},L=async()=>{const C=await Je(n,ie);return C.valid?!0:(fe.set(C.errors),!1)},q=async()=>{const C=await Je(ie);return C.errors.observation?(fe.set(C.errors),!1):(P(),!0)},P=()=>{g(n.observation),l(8,E=!1)},ee=ol(f,{resetForm:!1,validators:ll(ie),async onSubmit({validators:C,cancel:R}){console.log("onSubmit"),R(),await L()&&(m==c.length?ae():l(0,m++,m))},async onUpdated({form:C}){console.log("onUpdated"),C.valid&&l(0,m=1)}}),{form:Y,errors:fe,message:le,enhance:Ee,validate:vt,validateForm:Je,options:bt,updateForm:br}=ee;ue(o,Y,C=>l(12,n=C)),Y.subscribe(C=>{console.log("form was updated",C)});let De=[{slug:"greeting",name:K(Z)("default.page.fights.form.general.steps.info"),icon:Ve,invertedTextColor:!1,hidden:!0},{slug:"disclaimer",name:K(Z)("default.page.fights.form.general.steps.info"),icon:Ve,invertedTextColor:!1,hidden:!0},{slug:"breathe",name:K(Z)("default.page.fights.form.general.steps.info"),icon:Ve,invertedTextColor:!1,hidden:!0},{slug:"observation",name:K(Z)("default.page.fights.form.general.steps.observation"),icon:Se,invertedTextColor:!0,hidden:!0},{slug:"feelings",name:K(Z)("default.page.fights.form.general.steps.feelings"),icon:Le,invertedTextColor:!1,hidden:!0},{slug:"needs",name:K(Z)("default.page.fights.form.general.steps.needs"),icon:Re,invertedTextColor:!1,hidden:!0},{slug:"request",name:K(Z)("default.page.fights.form.general.steps.request"),icon:He,invertedTextColor:!1,hidden:!0},{slug:"pause",name:K(Z)("default.page.fights.form.general.steps.observation"),icon:Se,invertedTextColor:!0,hidden:!0},{slug:"observation",name:K(Z)("default.page.fights.form.general.steps.observation"),icon:Se,invertedTextColor:!0},{slug:"feelings",name:K(Z)("default.page.fights.form.general.steps.feelings"),icon:Le,invertedTextColor:!1},{slug:"needs",name:K(Z)("default.page.fights.form.general.steps.needs"),icon:Re,invertedTextColor:!1},{slug:"request",name:K(Z)("default.page.fights.form.general.steps.request"),icon:He,invertedTextColor:!1}];Z.subscribe(C=>{const R=De.map(A=>{const U=C(`default.page.fights.form.general.steps.${A.slug}`);return A.name=U,A});l(10,De=[...R])});const wt=()=>{console.log("decreaseStep"),m>1&&(console.log("step",m),l(0,m=m-1),console.log("step",m))},kt=async()=>{const C=await _e.collection("feelings").getFullList({sort:"category"}),R=Ie(C);let A=Ne(R,"positive");A.map(U=>(U.content=Ne(U.content,"category"),U.content.map(re=>re.visible=!1),U)),console.log("res",A),l(1,a=A)},Ct=async()=>{const C=await _e.collection("needs").getFullList({sort:"category"}),R=Ie(C);let A=Ne(R,"category");A.map(U=>U.visible=!1),console.log("res",A),l(2,i=A)},Et=async()=>{const C=await _e.collection("fights").getOne(r.params.id,{expand:"owner, feelings, needs"});l(3,u=Ie(C)),console.log("fight",u)},Dt=async C=>{console.log("changeStep");const R=C.detail.step,A=await j(R);console.log("targetStepIsValid",A),A&&l(0,m=R)},It=(C,R)=>{if(C.nameEN!==R)return;const A=i.find(U=>U.category===R);A&&(A.visible=!A.visible),l(2,i=[...i])},Nt=(C,R)=>{if(C.nameEN!==R)return;const A=a[0].content.find(re=>re.category===R),U=a[1].content.find(re=>re.category===R);A&&(A.visible=!A.visible),U&&(U.visible=!U.visible),l(1,a=[...a])},Vt=(C,R)=>{const A=C.nameEN,U=R.category;return!!(A===U||R.visible)};Ht(async()=>{await kt(),await Ct(),await Et(),l(5,d=[{step:1,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.greeting.heading")}. ${t("default.page.respond.steps.greeting.question")}`]},{step:2,content:[`${t("default.page.respond.steps.disclaimer.heading")}: ${t("default.page.respond.steps.disclaimer.description")}`]},{step:3,content:[`${t("default.page.respond.steps.breathe.heading")}`]},{step:4,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerObservation.heading")}`]},{step:5,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerFeelings.heading")}`]},{step:6,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerNeeds.heading")}`]},{step:7,content:[`${u.expand.owner.firstName} ${t("default.page.respond.steps.ownerRequest.heading")}`]},{step:8,content:[t("default.page.respond.steps.pause.heading")]},{step:9,content:[t("default.page.fight.create.observation")]},{step:10,content:[t("default.page.fight.create.feelings")]},{step:11,content:[t("default.page.fight.create.needs")]},{step:12,content:[t("default.page.fight.create.request")]},{step:13,content:[t("default.page.respond.steps.success")],errorContent:[t("default.page.respond.steps.error")]}])}),m=1;function St(C){Pt.call(this,o,C)}function Tt(C){g=C,l(4,g)}const yt=()=>l(9,H=!0);function Bt(C){o.$$.not_equal(n.observation,C)&&(n.observation=C,Y.set(n))}const Ft=()=>l(8,E=!0);function jt(C){o.$$.not_equal(n.feelings,C)&&(n.feelings=C,Y.set(n))}function qt(C){o.$$.not_equal(n.needs,C)&&(n.needs=C,Y.set(n))}function Jt(C){o.$$.not_equal(n.request,C)&&(n.request=C,Y.set(n))}function zt(C){H=C,l(9,H)}return o.$$.update=()=>{o.$$.dirty[0]&1,o.$$.dirty[0]&1&&(bt.validators=c[m-1])},[m,a,i,u,g,d,_,$,E,H,De,t,n,s,q,P,ee,Y,Ee,wt,Dt,It,Nt,Vt,St,Tt,yt,Bt,Ft,jt,qt,Jt,zt]}class Ar extends he{constructor(e){super(),$e(this,e,vr,$r,pe,{},null,[-1,-1,-1])}}export{Ar as component};
