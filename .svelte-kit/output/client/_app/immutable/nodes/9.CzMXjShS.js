import{s as Me,l as He,m as Ze,o as Oe,b as k,f as d,p as g,q as Re,i as A,h as c,n as $e,r as Ge,u as at,e as $,t as T,a as C,c as w,d as L,g as H,j as X,M as Se,k as me,W as ot,X as it,O as We,G as ct,Y as ft,H as tt}from"../chunks/scheduler.BGpOBVyA.js";import{S as Ae,i as qe,t as z,g as we,b as M,e as ke,c as P,a as Z,m as O,d as R}from"../chunks/index.wJhSdTM5.js";import{e as ie,d as ut}from"../chunks/helpers.Dibp7sA5.js";import{A as dt}from"../chunks/AppTopMenu.Dq6v7hsH.js";import{A as ht}from"../chunks/AppBottomMenu.IwLlHcLO.js";import{g as mt,u as gt,l as lt,t as pt,f as vt}from"../chunks/page.bZUY7JJF.js";import{p as oe}from"../chunks/pocketbase.Ce4YzWbP.js";import{S as _t}from"../chunks/Share.BJJMPcu6.js";import{I as bt,a as $t,b as wt,c as kt}from"../chunks/icon-steps.dGSELuxl.js";import"../chunks/memoize.DxdV8b0X.js";import{C as ze}from"../chunks/Check.B_Ok3goj.js";import{p as Dt}from"../chunks/stores.3y2l6SWm.js";import{S as yt}from"../chunks/skeleton.B82JgwlZ.js";import{g as Et}from"../chunks/entry.Ctrs9mTK.js";import{a as rt}from"../chunks/button.JkBH6UTa.js";function It(a){let e,t,l=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],r={};for(let n=0;n<l.length;n+=1)r=He(r,l[n]);return{c(){e=Ze("svg"),t=Ze("path"),this.h()},l(n){e=Oe(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=k(e);t=Oe(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){g(t,"fill-rule","evenodd"),g(t,"clip-rule","evenodd"),g(t,"d","M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z"),g(t,"fill",a[0]),Re(e,r)},m(n,s){A(n,e,s),c(e,t)},p(n,[s]){s&1&&g(t,"fill",n[0]),Re(e,r=mt(l,[s&2&&{width:n[1]},s&2&&{height:n[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&n[2]]))},i:$e,o:$e,d(n){n&&d(e)}}}function xt(a,e,t){const l=["color","size"];let r=Ge(e,l),{color:n="currentColor"}=e,{size:s=15}=e;return a.$$set=u=>{e=He(He({},e),at(u)),t(2,r=Ge(e,l)),"color"in u&&t(0,n=u.color),"size"in u&&t(1,s=u.size)},[n,s,r]}class Vt extends Ae{constructor(e){super(),qe(this,e,xt,It,Me,{color:0,size:1})}}function Xe(a,e,t){const l=a.slice();return l[6]=e[t],l}function Ye(a,e,t){const l=a.slice();return l[9]=e[t],l}function Je(a){let e,t,l,r,n;return t=new ze({}),r=new ze({props:{class:"-ml-2"}}),{c(){e=$("div"),P(t.$$.fragment),l=C(),P(r.$$.fragment),this.h()},l(s){e=w(s,"DIV",{class:!0});var u=k(e);Z(t.$$.fragment,u),l=H(u),Z(r.$$.fragment,u),u.forEach(d),this.h()},h(){g(e,"class","flex items-center rounded-full bg-green-600 px-1 py-[2px] text-2xs text-green-300")},m(s,u){A(s,e,u),O(t,e,null),c(e,l),O(r,e,null),n=!0},i(s){n||(z(t.$$.fragment,s),z(r.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),M(r.$$.fragment,s),n=!1},d(s){s&&d(e),R(t),R(r)}}}function jt(a){let e,t,l=a[6].overlap+"",r,n,s=a[2]==="en"?"overlap":"Überschneidung",u;return{c(){e=$("div"),t=$("div"),r=T(l),n=T(`%\r
						`),u=T(s),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=k(e);t=w(i,"DIV",{class:!0});var m=k(t);r=L(m,l),n=L(m,`%\r
						`),u=L(m,s),m.forEach(d),i.forEach(d),this.h()},h(){g(t,"class","border border-"+a[6].color+"-background rounded-full px-2 py-0.5 mb-2 text-xs svelte-qjj3hn"),g(e,"class","flex items-center")},m(o,i){A(o,e,i),c(e,t),c(t,r),c(t,n),c(t,u)},p(o,i){i&4&&s!==(s=o[2]==="en"?"overlap":"Überschneidung")&&X(u,s)},d(o){o&&d(e)}}}function Ct(a){let e,t=ie(a[6].content),l=[];for(let r=0;r<t.length;r+=1)l[r]=Ke(Ye(a,t,r));return{c(){e=$("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=w(r,"DIV",{class:!0});var n=k(e);for(let s=0;s<l.length;s+=1)l[s].l(n);n.forEach(d),this.h()},h(){g(e,"class","flex flex-wrap gap-2")},m(r,n){A(r,e,n);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(r,n){if(n&12){t=ie(r[6].content);let s;for(s=0;s<t.length;s+=1){const u=Ye(r,t,s);l[s]?l[s].p(u,n):(l[s]=Ke(u),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){r&&d(e),Se(l,r)}}}function Ht(a){let e=a[6].content+"",t;return{c(){t=T(e)},l(l){t=L(l,e)},m(l,r){A(l,t,r)},p:$e,d(l){l&&d(t)}}}function Ke(a){let e,t=(a[2]==="en"?a[9].nameEN:a[9].nameDE)+"",l,r;return{c(){e=$("div"),l=T(t),r=C(),this.h()},l(n){e=w(n,"DIV",{class:!0});var s=k(e);l=L(s,t),r=H(s),s.forEach(d),this.h()},h(){g(e,"class","bg-"+a[6].color+"-background rounded-full px-2 py-0.5 svelte-qjj3hn")},m(n,s){A(n,e,s),c(e,l),c(e,r)},p(n,s){s&4&&t!==(t=(n[2]==="en"?n[9].nameEN:n[9].nameDE)+"")&&X(l,t)},d(n){n&&d(e)}}}function Qe(a){let e,t,l,r,n,s,u,o=a[6].icon+"",i,m,_,I,E=a[6].overlap&&jt(a);function D(f,p){return f[6].type==="text"?Ht:Ct}let b=D(a)(a);return{c(){e=$("div"),t=$("div"),l=$("div"),r=$("div"),n=C(),s=$("div"),u=new ot(!1),i=C(),m=$("div"),E&&E.c(),_=C(),b.c(),I=C(),this.h()},l(f){e=w(f,"DIV",{class:!0});var p=k(e);t=w(p,"DIV",{class:!0});var v=k(t);l=w(v,"DIV",{class:!0});var q=k(l);r=w(q,"DIV",{class:!0}),k(r).forEach(d),n=H(q),s=w(q,"DIV",{class:!0});var G=k(s);u=it(G,!1),G.forEach(d),q.forEach(d),v.forEach(d),i=H(p),m=w(p,"DIV",{class:!0});var J=k(m);E&&E.l(J),_=H(J),b.l(J),J.forEach(d),I=H(p),p.forEach(d),this.h()},h(){g(r,"class","label-shadow svelte-qjj3hn"),u.a=null,g(s,"class","icon fill-"+a[6].color+"-foreground svelte-qjj3hn"),g(l,"class","label bg-"+a[6].color+"-background dark:bg-muted/40 svelte-qjj3hn"),g(t,"class","flex flex-shrink-0 items-center justify-center border-r border-black/5 px-3 pb-3 pt-3 group-first:pt-6 group-last:pb-6"),g(m,"class","flex-grow break-all px-3 pb-3 pt-3 group-first:pt-6 group-last:pb-6"),g(e,"class","group flex items-stretch border-b border-black/5 bg-almostwhite text-xs shadow-md last:border-b-0 dark:bg-muted")},m(f,p){A(f,e,p),c(e,t),c(t,l),c(l,r),c(l,n),c(l,s),u.m(o,s),c(e,i),c(e,m),E&&E.m(m,null),c(m,_),b.m(m,null),c(e,I)},p(f,p){f[6].overlap&&E.p(f,p),b.p(f,p)},d(f){f&&d(e),E&&E.d(),b.d()}}}function zt(a){let e,t,l=(a[1].id===a[0].owner?a[1].firstName:a[0].expand.fight.name)+"",r,n,s=new Date(a[0].created).toLocaleDateString("de-DE")+"",u,o,i,m,_,I,E,D=a[1].id===a[0].owner&&a[0].opened&&Je(),x=ie(a[3]),b=[];for(let f=0;f<x.length;f+=1)b[f]=Qe(Xe(a,x,f));return{c(){e=$("div"),t=$("div"),r=T(l),n=T(" — "),u=T(s),o=C(),D&&D.c(),m=C(),_=$("div");for(let f=0;f<b.length;f+=1)b[f].c();this.h()},l(f){e=w(f,"DIV",{class:!0});var p=k(e);t=w(p,"DIV",{class:!0});var v=k(t);r=L(v,l),n=L(v," — "),u=L(v,s),v.forEach(d),o=H(p),D&&D.l(p),p.forEach(d),m=H(f),_=w(f,"DIV",{class:!0});var q=k(_);for(let G=0;G<b.length;G+=1)b[G].l(q);q.forEach(d),this.h()},h(){g(t,"class","rounded-full bg-neutral-400 bg-opacity-50 px-3 py-1 text-xs text-black"),g(e,"class",i=(a[1].id===a[0].owner?"justify-start":"justify-end")+" mb-3 flex items-center gap-2"),g(_,"class",I=(a[1].id===a[0].owner?"mr-10":"ml-10")+" relative mb-10 flex flex-col overflow-hidden rounded-xl shadow-xl")},m(f,p){A(f,e,p),c(e,t),c(t,r),c(t,n),c(t,u),c(e,o),D&&D.m(e,null),A(f,m,p),A(f,_,p);for(let v=0;v<b.length;v+=1)b[v]&&b[v].m(_,null);E=!0},p(f,[p]){if((!E||p&3)&&l!==(l=(f[1].id===f[0].owner?f[1].firstName:f[0].expand.fight.name)+"")&&X(r,l),(!E||p&1)&&s!==(s=new Date(f[0].created).toLocaleDateString("de-DE")+"")&&X(u,s),f[1].id===f[0].owner&&f[0].opened?D?p&3&&z(D,1):(D=Je(),D.c(),z(D,1),D.m(e,null)):D&&(we(),M(D,1,1,()=>{D=null}),ke()),(!E||p&3&&i!==(i=(f[1].id===f[0].owner?"justify-start":"justify-end")+" mb-3 flex items-center gap-2"))&&g(e,"class",i),p&12){x=ie(f[3]);let v;for(v=0;v<x.length;v+=1){const q=Xe(f,x,v);b[v]?b[v].p(q,p):(b[v]=Qe(q),b[v].c(),b[v].m(_,null))}for(;v<b.length;v+=1)b[v].d(1);b.length=x.length}(!E||p&3&&I!==(I=(f[1].id===f[0].owner?"mr-10":"ml-10")+" relative mb-10 flex flex-col overflow-hidden rounded-xl shadow-xl"))&&g(_,"class",I)},i(f){E||(z(D),E=!0)},o(f){M(D),E=!1},d(f){f&&(d(e),d(m),d(_)),D&&D.d(),Se(b,f)}}}function Mt(a,e,t){let l,r;me(a,gt,i=>t(1,l=i)),me(a,lt,i=>t(2,r=i));let{record:n}=e,{fight:s=void 0}=e;console.log("record",n);const u=(i="feelings")=>{if(!s)return;const m=s[i],_=n[i];let I=0;const E=m.length;return _.forEach(D=>{m.includes(D)&&I++}),Math.round(I*100/E)},o=[{icon:bt,color:"observation",type:"text",content:n.observation},{icon:$t,color:"feelings",type:"array",overlap:u("feelings"),content:n.expand.feelings},{icon:wt,color:"needs",type:"array",overlap:u("needs"),content:n.expand.needs},{icon:kt,color:"request",type:"text",content:n.request}];return a.$$set=i=>{"record"in i&&t(0,n=i.record),"fight"in i&&t(4,s=i.fight)},[n,l,r,o,s]}class nt extends Ae{constructor(e){super(),qe(this,e,Mt,zt,Me,{record:0,fight:4})}}function Ue(a,e,t){const l=a.slice();return l[13]=e[t],l}function St(a){let e,t,l,r,n,s=a[6]("default.page.fight.resolved")+"",u,o,i,m,_,I,E=a[6]("default.page.fight.heading")+"",D,x,b=a[7]==="en"?"with":"mit",f,p,v,q=a[1].name+"",G,J,K,ne,ce=a[5](a[1].created)+"",ge,De,Q,fe=a[7]==="en"?"on the":"am",pe,ye,ue=new Intl.DateTimeFormat("de-DE").format(new Date(a[1].created))+"",ve,Ee,B,N,Ie,W,le,Te='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-0 top-20 z-0 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform opacity-10"></div>',xe,se,U,Ve,je,ee,F;l=new dt({});const Le=[Tt,qt],te=[];function Be(h,y){return h[3]?1:0}B=Be(a),N=te[B]=Le[B](a),U=new nt({props:{record:a[1]}});let re=ie(a[2]),V=[];for(let h=0;h<re.length;h+=1)V[h]=et(Ue(a,re,h));const st=h=>M(V[h],1,1,()=>{V[h]=null});return ee=new ht({props:{$$slots:{default:[Nt]},$$scope:{ctx:a}}}),{c(){e=$("div"),t=$("div"),P(l.$$.fragment),r=C(),n=$("div"),u=T(s),i=C(),m=$("div"),_=$("div"),I=$("h1"),D=T(E),x=C(),f=T(b),p=C(),v=$("span"),G=T(q),J=C(),K=$("div"),ne=$("div"),ge=T(ce),De=C(),Q=$("div"),pe=T(fe),ye=C(),ve=T(ue),Ee=C(),N.c(),Ie=C(),W=$("div"),le=$("div"),le.innerHTML=Te,xe=C(),se=$("div"),P(U.$$.fragment),Ve=C();for(let h=0;h<V.length;h+=1)V[h].c();je=C(),P(ee.$$.fragment),this.h()},l(h){e=w(h,"DIV",{class:!0});var y=k(e);t=w(y,"DIV",{class:!0});var S=k(t);Z(l.$$.fragment,S),r=H(S),n=w(S,"DIV",{class:!0});var de=k(n);u=L(de,s),de.forEach(d),i=H(S),m=w(S,"DIV",{class:!0});var he=k(m);_=w(he,"DIV",{class:!0});var j=k(_);I=w(j,"H1",{class:!0});var Y=k(I);D=L(Y,E),x=H(Y),f=L(Y,b),p=H(Y),v=w(Y,"SPAN",{class:!0});var Ne=k(v);G=L(Ne,q),Ne.forEach(d),Y.forEach(d),J=H(j),K=w(j,"DIV",{class:!0});var _e=k(K);ne=w(_e,"DIV",{class:!0});var Fe=k(ne);ge=L(Fe,ce),Fe.forEach(d),De=H(_e),Q=w(_e,"DIV",{class:!0});var be=k(Q);pe=L(be,fe),ye=H(be),ve=L(be,ue),be.forEach(d),_e.forEach(d),Ee=H(j),N.l(j),j.forEach(d),he.forEach(d),Ie=H(S),W=w(S,"DIV",{class:!0});var ae=k(W);le=w(ae,"DIV",{class:!0,"data-svelte-h":!0}),tt(le)!=="svelte-gzvl13"&&(le.innerHTML=Te),xe=H(ae),se=w(ae,"DIV",{class:!0});var Pe=k(se);Z(U.$$.fragment,Pe),Pe.forEach(d),Ve=H(ae);for(let Ce=0;Ce<V.length;Ce+=1)V[Ce].l(ae);ae.forEach(d),je=H(S),Z(ee.$$.fragment,S),S.forEach(d),y.forEach(d),this.h()},h(){g(n,"class",o=(a[1].resolved?"max-h-40 px-2 py-2 opacity-100":"max-h-0 opacity-0")+" -mt-0.5 bg-green-600 flex items-center justify-center text-white transition-all text-sm"),g(v,"class","capitalize"),g(I,"class","font-heading flex-grow text-lg font-semibold"),g(ne,"class","mb-0.5 rounded-full bg-neutral-600 py-0.5 text-center text-2xs text-neutral-300"),g(Q,"class","text-xs"),g(K,"class","flex flex-shrink-0 flex-col"),g(_,"class","relative z-10 -mx-5 flex flex-row items-center justify-between gap-3 px-5 py-4 md:items-center md:bg-transparent md:pb-6"),g(m,"class","max-container"),g(le,"class","relative z-0"),g(se,"class","relative z-10"),g(W,"class","max-container relative pb-60 pt-10 md:bg-transparent"),g(t,"class",""),g(e,"class","overflow-hidden")},m(h,y){A(h,e,y),c(e,t),O(l,t,null),c(t,r),c(t,n),c(n,u),c(t,i),c(t,m),c(m,_),c(_,I),c(I,D),c(I,x),c(I,f),c(I,p),c(I,v),c(v,G),c(_,J),c(_,K),c(K,ne),c(ne,ge),c(K,De),c(K,Q),c(Q,pe),c(Q,ye),c(Q,ve),c(_,Ee),te[B].m(_,null),c(t,Ie),c(t,W),c(W,le),c(W,xe),c(W,se),O(U,se,null),c(W,Ve);for(let S=0;S<V.length;S+=1)V[S]&&V[S].m(W,null);c(t,je),O(ee,t,null),F=!0},p(h,y){(!F||y&64)&&s!==(s=h[6]("default.page.fight.resolved")+"")&&X(u,s),(!F||y&2&&o!==(o=(h[1].resolved?"max-h-40 px-2 py-2 opacity-100":"max-h-0 opacity-0")+" -mt-0.5 bg-green-600 flex items-center justify-center text-white transition-all text-sm"))&&g(n,"class",o),(!F||y&64)&&E!==(E=h[6]("default.page.fight.heading")+"")&&X(D,E),(!F||y&128)&&b!==(b=h[7]==="en"?"with":"mit")&&X(f,b),(!F||y&2)&&q!==(q=h[1].name+"")&&X(G,q),(!F||y&34)&&ce!==(ce=h[5](h[1].created)+"")&&X(ge,ce),(!F||y&128)&&fe!==(fe=h[7]==="en"?"on the":"am")&&X(pe,fe),(!F||y&2)&&ue!==(ue=new Intl.DateTimeFormat("de-DE").format(new Date(h[1].created))+"")&&X(ve,ue);let S=B;B=Be(h),B===S?te[B].p(h,y):(we(),M(te[S],1,1,()=>{te[S]=null}),ke(),N=te[B],N?N.p(h,y):(N=te[B]=Le[B](h),N.c()),z(N,1),N.m(_,null));const de={};if(y&2&&(de.record=h[1]),U.$set(de),y&6){re=ie(h[2]);let j;for(j=0;j<re.length;j+=1){const Y=Ue(h,re,j);V[j]?(V[j].p(Y,y),z(V[j],1)):(V[j]=et(Y),V[j].c(),z(V[j],1),V[j].m(W,null))}for(we(),j=re.length;j<V.length;j+=1)st(j);ke()}const he={};y&65554&&(he.$$scope={dirty:y,ctx:h}),ee.$set(he)},i(h){if(!F){z(l.$$.fragment,h),z(N),z(U.$$.fragment,h);for(let y=0;y<re.length;y+=1)z(V[y]);z(ee.$$.fragment,h),F=!0}},o(h){M(l.$$.fragment,h),M(N),M(U.$$.fragment,h),V=V.filter(Boolean);for(let y=0;y<V.length;y+=1)M(V[y]);M(ee.$$.fragment,h),F=!1},d(h){h&&d(e),R(l),te[B].d(),R(U),Se(V,h),R(ee)}}}function At(a){let e,t,l;return t=new yt({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){e=$("div"),P(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var n=k(e);Z(t.$$.fragment,n),n.forEach(d),this.h()},h(){g(e,"class","flex h-full items-center justify-center")},m(r,n){A(r,e,n),O(t,e,null),l=!0},p:$e,i(r){l||(z(t.$$.fragment,r),l=!0)},o(r){M(t.$$.fragment,r),l=!1},d(r){r&&d(e),R(t)}}}function qt(a){let e,t;return e=new rt({props:{decoration:"floating-op1",class:"-mr-2 -mt-2 flex items-center justify-center border-red-400 bg-red-600 px-1.5 text-sm text-white transition hover:bg-offwhite",$$slots:{default:[Lt]},$$scope:{ctx:a}}}),e.$on("click",a[8]),{c(){P(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const n={};r&65536&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Tt(a){let e,t;return e=new rt({props:{decoration:"floating-op1",class:"-mr-2 -mt-2 flex items-center justify-center border-red-400 bg-red-600 px-1.5 text-sm text-white transition hover:bg-offwhite",$$slots:{default:[Bt]},$$scope:{ctx:a}}}),e.$on("click",a[10]),{c(){P(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const n={};r&65536&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Lt(a){let e,t;return e=new ze({}),{c(){P(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Bt(a){let e,t;return e=new Vt({}),{c(){P(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function et(a){let e,t='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-96 top-20 z-0 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform opacity-10"></div>',l,r,n,s,u;return n=new nt({props:{fight:a[1],record:a[13],adversary:a[1].name}}),{c(){e=$("div"),e.innerHTML=t,l=C(),r=$("div"),P(n.$$.fragment),s=C(),this.h()},l(o){e=w(o,"DIV",{class:!0,"data-svelte-h":!0}),tt(e)!=="svelte-1lvm6nt"&&(e.innerHTML=t),l=H(o),r=w(o,"DIV",{class:!0});var i=k(r);Z(n.$$.fragment,i),s=H(i),i.forEach(d),this.h()},h(){g(e,"class","relative z-0"),g(r,"class","relative z-10 mt-8")},m(o,i){A(o,e,i),A(o,l,i),A(o,r,i),O(n,r,null),c(r,s),u=!0},p(o,i){const m={};i&2&&(m.fight=o[1]),i&4&&(m.record=o[13]),i&2&&(m.adversary=o[1].name),n.$set(m)},i(o){u||(z(n.$$.fragment,o),u=!0)},o(o){M(n.$$.fragment,o),u=!1},d(o){o&&(d(e),d(l),d(r)),R(n)}}}function Nt(a){let e,t,l;return t=new _t({props:{id:a[4],record:a[1]}}),{c(){e=$("div"),P(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var n=k(e);Z(t.$$.fragment,n),n.forEach(d),this.h()},h(){g(e,"class","flex items-center justify-between gap-3")},m(r,n){A(r,e,n),O(t,e,null),l=!0},p(r,n){const s={};n&16&&(s.id=r[4]),n&2&&(s.record=r[1]),t.$set(s)},i(r){l||(z(t.$$.fragment,r),l=!0)},o(r){M(t.$$.fragment,r),l=!1},d(r){r&&d(e),R(t)}}}function Ft(a){let e,t,l,r;const n=[At,St],s=[];function u(o,i){return o[0]?1:0}return e=u(a),t=s[e]=n[e](a),{c(){t.c(),l=We()},l(o){t.l(o),l=We()},m(o,i){s[e].m(o,i),A(o,l,i),r=!0},p(o,[i]){let m=e;e=u(o),e===m?s[e].p(o,i):(we(),M(s[m],1,1,()=>{s[m]=null}),ke(),t=s[e],t?t.p(o,i):(t=s[e]=n[e](o),t.c()),z(t,1),t.m(l.parentNode,l))},i(o){r||(z(t),r=!0)},o(o){M(t),r=!1},d(o){o&&d(l),s[e].d(o)}}}function Pt(a,e,t){let l,r,n,s,u;me(a,Dt,x=>t(9,n=x)),me(a,pt,x=>t(6,s=x)),me(a,lt,x=>t(7,u=x));let o=!1,i,m=[],_=!1;const I=async()=>{oe.collection("fights").subscribe(l,function(x){t(1,i=x.record)},{expand:"feelings, needs, owner"}),t(1,i=await oe.collection("fights").getOne(l,{expand:"feelings, needs, owner"})),oe.collection("responses").subscribe("*",function(x){if(x.action==="create"&&x.record.fight===i.id){const b=x.record;t(2,m=[...m,b])}},{expand:"fight, feelings, needs"}),t(2,m=await oe.collection("responses").getFullList({filter:`fight = '${i.id}'`,expand:"fight, feelings, needs"}))},E=async()=>{try{await oe.collection("fights").delete(l),t(3,_=!1),Et("/app/auth/login")}catch{console.error("error deleting fight")}};ct(async()=>{await I(),t(0,o=!0),vt.set("bg-background"),console.log("record",i),console.log("responses",m)}),ft(()=>{oe.collection("responses").unsubscribe("*")});const D=()=>t(3,_=!0);return a.$$.update=()=>{a.$$.dirty&512&&t(4,l=n.params.id),a.$$.dirty&3&&t(5,r=()=>o?ut(i.created):"...")},[o,i,m,_,l,r,s,u,E,n,D]}class nl extends Ae{constructor(e){super(),qe(this,e,Pt,Ft,Me,{})}}export{nl as component};
