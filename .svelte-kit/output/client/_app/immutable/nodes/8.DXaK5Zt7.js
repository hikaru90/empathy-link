import{s as he,l as R,w as me,x as pe,b as h,f as c,y as _,z as _e,i as v,h as p,n as q,m as le,o as ye,I as gt,e as w,t as N,a as L,c as E,d as A,g as M,j as Z,M as Re,k as de,aa as ht,ab as $t,q as vt,A as Ke,u as bt,r as wt,v as Et,K as Me,O as Qe,G as Ct,ac as kt,p as Dt,H as nt,L as Ae,J as at,C as Pe,T as Vt,D as ot,S as It}from"../chunks/scheduler.gWKEXFbz.js";import{S as $e,i as ve,t as C,b as D,e as it,g as ft,f as Ze,c as y,a as x,m as H,d as j}from"../chunks/index.CG0cexN_.js";import{e as ge,c as We}from"../chunks/index.DX7FOcvC.js";import{g as De,t as ut,u as zt,l as ct,a as Lt}from"../chunks/page.DM_0WmRN.js";import{o as Mt,B as Oe}from"../chunks/Avatar.h3nvYJtf.js";import{A as yt}from"../chunks/AppTopMenu.CXwUZzd5.js";import{A as xt}from"../chunks/AppBottomMenu.paMEIor_.js";import{c as Ht,z as jt,F as Tt,C as St,a as Bt,b as Ft}from"../chunks/zod.D0XA1AUd.js";import{I as Nt}from"../chunks/input.B2dq-T7m.js";import{p as At}from"../chunks/stores.CyrLmYVR.js";import{z as Xe,s as Pt}from"../chunks/memoize.BCGTZPkc.js";import{d as Zt}from"../chunks/defaults.CEskAMGU.js";import{p as Le}from"../chunks/pocketbase.Ce4YzWbP.js";import"../chunks/Avatar.svelte_svelte_type_style_lang.DPRrV1hT.js";import{I as Ot,a as Rt,b as qt,c as Jt}from"../chunks/icon-steps.dGSELuxl.js";import{S as Ut}from"../chunks/skeleton.z9SydiIL.js";import{D as Gt,a as Kt,b as Qt,c as Wt,C as Xt,d as Yt}from"../chunks/index.BI8SSx0X.js";import{R as el,D as tl,a as ll,b as rl,c as sl}from"../chunks/index.efkswO_6.js";import{t as Fe}from"../chunks/Toaster.svelte_svelte_type_style_lang.DX1bSK0D.js";import{C as nl}from"../chunks/CaretLeft.CkYmCOpI.js";import{P as al}from"../chunks/PaperPlane.-BU0EeZ8.js";function ol(a){let e,l,r=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],n={};for(let t=0;t<r.length;t+=1)n=R(n,r[t]);return{c(){e=me("svg"),l=me("path"),this.h()},l(t){e=pe(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=h(e);l=pe(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),h(l).forEach(c),s.forEach(c),this.h()},h(){_(l,"fill-rule","evenodd"),_(l,"clip-rule","evenodd"),_(l,"d","M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z"),_(l,"fill",a[0]),_e(e,n)},m(t,s){v(t,e,s),p(e,l)},p(t,[s]){s&1&&_(l,"fill",t[0]),_e(e,n=De(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:q,o:q,d(t){t&&c(e)}}}function il(a,e,l){const r=["color","size"];let n=le(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return a.$$set=o=>{e=R(R({},e),ye(o)),l(2,n=le(e,r)),"color"in o&&l(0,t=o.color),"size"in o&&l(1,s=o.size)},[t,s,n]}class fl extends $e{constructor(e){super(),ve(this,e,il,ol,he,{color:0,size:1})}}function ul(a){let e,l,r=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],n={};for(let t=0;t<r.length;t+=1)n=R(n,r[t]);return{c(){e=me("svg"),l=me("path"),this.h()},l(t){e=pe(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=h(e);l=pe(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),h(l).forEach(c),s.forEach(c),this.h()},h(){_(l,"fill-rule","evenodd"),_(l,"clip-rule","evenodd"),_(l,"d","M1 2C0.447715 2 0 2.44772 0 3V12C0 12.5523 0.447715 13 1 13H14C14.5523 13 15 12.5523 15 12V3C15 2.44772 14.5523 2 14 2H1ZM1 3L14 3V3.92494C13.9174 3.92486 13.8338 3.94751 13.7589 3.99505L7.5 7.96703L1.24112 3.99505C1.16621 3.94751 1.0826 3.92486 1 3.92494V3ZM1 4.90797V12H14V4.90797L7.74112 8.87995C7.59394 8.97335 7.40606 8.97335 7.25888 8.87995L1 4.90797Z"),_(l,"fill",a[0]),_e(e,n)},m(t,s){v(t,e,s),p(e,l)},p(t,[s]){s&1&&_(l,"fill",t[0]),_e(e,n=De(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:q,o:q,d(t){t&&c(e)}}}function cl(a,e,l){const r=["color","size"];let n=le(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return a.$$set=o=>{e=R(R({},e),ye(o)),l(2,n=le(e,r)),"color"in o&&l(0,t=o.color),"size"in o&&l(1,s=o.size)},[t,s,n]}class dl extends $e{constructor(e){super(),ve(this,e,cl,ul,he,{color:0,size:1})}}function ml(a){let e,l,r=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],n={};for(let t=0;t<r.length;t+=1)n=R(n,r[t]);return{c(){e=me("svg"),l=me("path"),this.h()},l(t){e=pe(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=h(e);l=pe(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),h(l).forEach(c),s.forEach(c),this.h()},h(){_(l,"fill-rule","evenodd"),_(l,"clip-rule","evenodd"),_(l,"d","M5 7.50003C5 8.32845 4.32843 9.00003 3.5 9.00003C2.67157 9.00003 2 8.32845 2 7.50003C2 6.6716 2.67157 6.00003 3.5 6.00003C4.32843 6.00003 5 6.6716 5 7.50003ZM5.71313 8.66388C5.29445 9.45838 4.46048 10 3.5 10C2.11929 10 1 8.88074 1 7.50003C1 6.11931 2.11929 5.00003 3.5 5.00003C4.46048 5.00003 5.29445 5.54167 5.71313 6.33616L9.10424 4.21671C9.03643 3.98968 9 3.74911 9 3.50003C9 2.11932 10.1193 1.00003 11.5 1.00003C12.8807 1.00003 14 2.11932 14 3.50003C14 4.88074 12.8807 6.00003 11.5 6.00003C10.6915 6.00003 9.97264 5.61624 9.51566 5.0209L5.9853 7.22738C5.99502 7.31692 6 7.40789 6 7.50003C6 7.59216 5.99502 7.68312 5.9853 7.77267L9.51567 9.97915C9.97265 9.38382 10.6915 9.00003 11.5 9.00003C12.8807 9.00003 14 10.1193 14 11.5C14 12.8807 12.8807 14 11.5 14C10.1193 14 9 12.8807 9 11.5C9 11.2509 9.03643 11.0104 9.10425 10.7833L5.71313 8.66388ZM11.5 5.00003C12.3284 5.00003 13 4.32846 13 3.50003C13 2.6716 12.3284 2.00003 11.5 2.00003C10.6716 2.00003 10 2.6716 10 3.50003C10 4.32846 10.6716 5.00003 11.5 5.00003ZM13 11.5C13 12.3285 12.3284 13 11.5 13C10.6716 13 10 12.3285 10 11.5C10 10.6716 10.6716 10 11.5 10C12.3284 10 13 10.6716 13 11.5Z"),_(l,"fill",a[0]),_e(e,n)},m(t,s){v(t,e,s),p(e,l)},p(t,[s]){s&1&&_(l,"fill",t[0]),_e(e,n=De(r,[s&2&&{width:t[1]},s&2&&{height:t[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&t[2]]))},i:q,o:q,d(t){t&&c(e)}}}function pl(a,e,l){const r=["color","size"];let n=le(e,r),{color:t="currentColor"}=e,{size:s=15}=e;return a.$$set=o=>{e=R(R({},e),ye(o)),l(2,n=le(e,r)),"color"in o&&l(0,t=o.color),"size"in o&&l(1,s=o.size)},[t,s,n]}class _l extends $e{constructor(e){super(),ve(this,e,pl,ml,he,{color:0,size:1})}}const Ne=Xe.object({email:Xe.string().email({message:gt(ut)("default.page.login.form.email.validEmailError")})});function Ye(a,e,l){const r=a.slice();return r[4]=e[l],r}function et(a,e,l){const r=a.slice();return r[7]=e[l],r}function gl(a){let e,l=ge(a[4].content),r=[];for(let n=0;n<l.length;n+=1)r[n]=tt(et(a,l,n));return{c(){e=w("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var t=h(e);for(let s=0;s<r.length;s+=1)r[s].l(t);t.forEach(c),this.h()},h(){_(e,"class","flex flex-wrap gap-2")},m(n,t){v(n,e,t);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(n,t){if(t&12){l=ge(n[4].content);let s;for(s=0;s<l.length;s+=1){const o=et(n,l,s);r[s]?r[s].p(o,t):(r[s]=tt(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=l.length}},d(n){n&&c(e),Re(r,n)}}}function hl(a){let e=a[4].content+"",l;return{c(){l=N(e)},l(r){l=A(r,e)},m(r,n){v(r,l,n)},p:q,d(r){r&&c(l)}}}function tt(a){let e,l=(a[2]==="en"?a[7].nameEN:a[7].nameDE)+"",r,n;return{c(){e=w("div"),r=N(l),n=L(),this.h()},l(t){e=E(t,"DIV",{class:!0});var s=h(e);r=A(s,l),n=M(s),s.forEach(c),this.h()},h(){_(e,"class","bg-"+a[4].color+"-background rounded-full px-2 py-0.5 svelte-70ipcu")},m(t,s){v(t,e,s),p(e,r),p(e,n)},p(t,s){s&4&&l!==(l=(t[2]==="en"?t[7].nameEN:t[7].nameDE)+"")&&Z(r,l)},d(t){t&&c(e)}}}function lt(a){let e,l,r,n,t,s,o,i=a[4].icon+"",f,u,I;function z(V,d){return V[4].type==="text"?hl:gl}let g=z(a)(a);return{c(){e=w("div"),l=w("div"),r=w("div"),n=w("div"),t=L(),s=w("div"),o=new ht(!1),f=L(),u=w("div"),g.c(),I=L(),this.h()},l(V){e=E(V,"DIV",{class:!0});var d=h(e);l=E(d,"DIV",{class:!0});var T=h(l);r=E(T,"DIV",{class:!0});var S=h(r);n=E(S,"DIV",{class:!0}),h(n).forEach(c),t=M(S),s=E(S,"DIV",{class:!0});var J=h(s);o=$t(J,!1),J.forEach(c),S.forEach(c),T.forEach(c),f=M(d),u=E(d,"DIV",{class:!0});var U=h(u);g.l(U),U.forEach(c),I=M(d),d.forEach(c),this.h()},h(){_(n,"class","label-shadow svelte-70ipcu"),o.a=null,_(s,"class","icon fill-"+a[4].color+"-foreground svelte-70ipcu"),_(r,"class","label bg-"+a[4].color+"-background svelte-70ipcu"),_(l,"class","flex flex-shrink-0 items-center justify-center border-r border-black/5 px-3 pb-3 pt-3 group-first:pt-6 group-last:pb-6"),_(u,"class","flex-grow break-all px-3 pb-3 pt-3 group-first:pt-6 group-last:pb-6"),_(e,"class","group flex items-stretch border-b border-black/5 bg-almostwhite text-xs shadow-md last:border-b-0")},m(V,d){v(V,e,d),p(e,l),p(l,r),p(r,n),p(r,t),p(r,s),o.m(i,s),p(e,f),p(e,u),g.m(u,null),p(e,I)},p(V,d){g.p(V,d)},d(V){V&&c(e),g.d()}}}function $l(a){let e,l,r=(a[1].id===a[0].owner?a[1].firstName:a[0].expand.fight.name)+"",n,t,s=new Date(a[0].created).toLocaleDateString("de-DE")+"",o,i,f,u,I,z=ge(a[3]),b=[];for(let g=0;g<z.length;g+=1)b[g]=lt(Ye(a,z,g));return{c(){e=w("div"),l=w("div"),n=N(r),t=N(" — "),o=N(s),f=L(),u=w("div");for(let g=0;g<b.length;g+=1)b[g].c();this.h()},l(g){e=E(g,"DIV",{class:!0});var V=h(e);l=E(V,"DIV",{class:!0});var d=h(l);n=A(d,r),t=A(d," — "),o=A(d,s),d.forEach(c),V.forEach(c),f=M(g),u=E(g,"DIV",{class:!0});var T=h(u);for(let S=0;S<b.length;S+=1)b[S].l(T);T.forEach(c),this.h()},h(){_(l,"class","rounded-full bg-neutral-400 bg-opacity-50 px-3 py-1 text-xs text-black"),_(e,"class",i=(a[1].id===a[0].owner?"justify-start":"justify-end")+" mb-3 flex"),_(u,"class",I=(a[1].id===a[0].owner?"mr-10":"ml-10")+" relative mb-10 flex flex-col overflow-hidden rounded-xl shadow-xl")},m(g,V){v(g,e,V),p(e,l),p(l,n),p(l,t),p(l,o),v(g,f,V),v(g,u,V);for(let d=0;d<b.length;d+=1)b[d]&&b[d].m(u,null)},p(g,[V]){if(V&3&&r!==(r=(g[1].id===g[0].owner?g[1].firstName:g[0].expand.fight.name)+"")&&Z(n,r),V&1&&s!==(s=new Date(g[0].created).toLocaleDateString("de-DE")+"")&&Z(o,s),V&3&&i!==(i=(g[1].id===g[0].owner?"justify-start":"justify-end")+" mb-3 flex")&&_(e,"class",i),V&12){z=ge(g[3]);let d;for(d=0;d<z.length;d+=1){const T=Ye(g,z,d);b[d]?b[d].p(T,V):(b[d]=lt(T),b[d].c(),b[d].m(u,null))}for(;d<b.length;d+=1)b[d].d(1);b.length=z.length}V&3&&I!==(I=(g[1].id===g[0].owner?"mr-10":"ml-10")+" relative mb-10 flex flex-col overflow-hidden rounded-xl shadow-xl")&&_(u,"class",I)},i:q,o:q,d(g){g&&(c(e),c(f),c(u)),Re(b,g)}}}function vl(a,e,l){let r,n;de(a,zt,o=>l(1,r=o)),de(a,ct,o=>l(2,n=o));let{record:t}=e;console.log("record",t);const s=[{icon:Ot,color:"observation",type:"text",content:t.observation},{icon:Rt,color:"feelings",type:"array",content:t.expand.feelings},{icon:qt,color:"needs",type:"array",content:t.expand.needs},{icon:Jt,color:"request",type:"text",content:t.request}];return a.$$set=o=>{"record"in o&&l(0,t=o.record)},[t,r,n,s]}class dt extends $e{constructor(e){super(),ve(this,e,vl,$l,he,{record:0})}}function bl(a){let e,l,r;const n=a[4].default,t=vt(n,a,a[3],null);let s=[{class:l=We("mt-auto flex flex-col gap-2 p-4",a[1])},a[2]],o={};for(let i=0;i<s.length;i+=1)o=R(o,s[i]);return{c(){e=w("div"),t&&t.c(),this.h()},l(i){e=E(i,"DIV",{class:!0});var f=h(e);t&&t.l(f),f.forEach(c),this.h()},h(){Ke(e,o)},m(i,f){v(i,e,f),t&&t.m(e,null),a[5](e),r=!0},p(i,[f]){t&&t.p&&(!r||f&8)&&bt(t,n,i,i[3],r?Et(n,i[3],f,null):wt(i[3]),null),Ke(e,o=De(s,[(!r||f&2&&l!==(l=We("mt-auto flex flex-col gap-2 p-4",i[1])))&&{class:l},f&4&&i[2]]))},i(i){r||(C(t,i),r=!0)},o(i){D(t,i),r=!1},d(i){i&&c(e),t&&t.d(i),a[5](null)}}}function wl(a,e,l){const r=["el","class"];let n=le(e,r),{$$slots:t={},$$scope:s}=e,{el:o=void 0}=e,{class:i=void 0}=e;function f(u){Me[u?"unshift":"push"](()=>{o=u,l(0,o)})}return a.$$set=u=>{e=R(R({},e),ye(u)),l(2,n=le(e,r)),"el"in u&&l(0,o=u.el),"class"in u&&l(1,i=u.class),"$$scope"in u&&l(3,s=u.$$scope)},[o,i,n,s,t,f]}class El extends $e{constructor(e){super(),ve(this,e,wl,bl,he,{el:0,class:1})}}async function Cl(a){if("clipboard"in navigator)await navigator.clipboard.writeText(a);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=a,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}const kl=(a,e)=>{async function l(){if(n)try{await Cl(n),a.dispatchEvent(new CustomEvent("svelte-copy",{detail:n}))}catch(t){a.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:t}))}}let r=typeof e=="string"?["click"]:[e.events].flat(1),n=typeof e=="string"?e:e.text;return r.forEach(t=>{a.addEventListener(t,l,!0)}),{update:t=>{const s=typeof t=="string"?["click"]:[t.events].flat(1),o=typeof t=="string"?t:t.text,i=s.filter(u=>!r.includes(u)),f=r.filter(u=>!s.includes(u));i.forEach(u=>{a.addEventListener(u,l,!0)}),f.forEach(u=>{a.removeEventListener(u,l,!0)}),r=s,n=o},destroy:()=>{r.forEach(t=>{a.removeEventListener(t,l,!0)})}}};function rt(a,e,l){const r=a.slice();return r[31]=e[l],r}function Dl(a){let e,l,r,n,t,s,o,i=a[7]("default.page.fight.heading")+"",f,u,I=a[9]==="en"?"with":"mit",z,b,g,V=a[1].name+"",d,T,S,J,U=a[6](a[1].created)+"",be,we,G,re=a[9]==="en"?"on the":"am",oe,Ee,se=new Intl.DateTimeFormat("de-DE").format(new Date(a[1].created))+"",ie,Ce,O,k,fe='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-0 top-20 z-0 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform"></div>',xe,ue,Y,He,je,ee,Ve,W,Te,Ie,X,Se,K;r=new yt({}),Y=new dt({props:{record:a[1]}});let ne=ge(a[2]),B=[];for(let m=0;m<ne.length;m+=1)B[m]=st(rt(a,ne,m));const mt=m=>D(B[m],1,1,()=>{B[m]=null});ee=new xt({props:{$$slots:{default:[Ll]},$$scope:{ctx:a}}});function pt(m){a[18](m)}let qe={$$slots:{default:[Tl]},$$scope:{ctx:a}};a[4]!==void 0&&(qe.open=a[4]),W=new Gt({props:qe}),Me.push(()=>Ze(W,"open",pt));function _t(m){a[20](m)}let Je={preventScroll:!1,$$slots:{default:[Rl]},$$scope:{ctx:a}};return a[3]!==void 0&&(Je.open=a[3]),X=new el({props:Je}),Me.push(()=>Ze(X,"open",_t)),{c(){e=w("div"),l=w("div"),y(r.$$.fragment),n=L(),t=w("div"),s=w("div"),o=w("h1"),f=N(i),u=L(),z=N(I),b=L(),g=w("span"),d=N(V),T=L(),S=w("div"),J=w("div"),be=N(U),we=L(),G=w("div"),oe=N(re),Ee=L(),ie=N(se),Ce=L(),O=w("div"),k=w("div"),k.innerHTML=fe,xe=L(),ue=w("div"),y(Y.$$.fragment),He=L();for(let m=0;m<B.length;m+=1)B[m].c();je=L(),y(ee.$$.fragment),Ve=L(),y(W.$$.fragment),Ie=L(),y(X.$$.fragment),this.h()},l(m){e=E(m,"DIV",{class:!0});var $=h(e);l=E($,"DIV",{class:!0});var P=h(l);x(r.$$.fragment,P),n=M(P),t=E(P,"DIV",{class:!0});var ke=h(t);s=E(ke,"DIV",{class:!0});var te=h(s);o=E(te,"H1",{class:!0});var Q=h(o);f=A(Q,i),u=M(Q),z=A(Q,I),b=M(Q),g=E(Q,"SPAN",{class:!0});var F=h(g);d=A(F,V),F.forEach(c),Q.forEach(c),T=M(te),S=E(te,"DIV",{class:!0});var ae=h(S);J=E(ae,"DIV",{class:!0});var Ue=h(J);be=A(Ue,U),Ue.forEach(c),we=M(ae),G=E(ae,"DIV",{class:!0});var ze=h(G);oe=A(ze,re),Ee=M(ze),ie=A(ze,se),ze.forEach(c),ae.forEach(c),te.forEach(c),ke.forEach(c),Ce=M(P),O=E(P,"DIV",{class:!0});var ce=h(O);k=E(ce,"DIV",{class:!0,"data-svelte-h":!0}),nt(k)!=="svelte-18ykgii"&&(k.innerHTML=fe),xe=M(ce),ue=E(ce,"DIV",{class:!0});var Ge=h(ue);x(Y.$$.fragment,Ge),Ge.forEach(c),He=M(ce);for(let Be=0;Be<B.length;Be+=1)B[Be].l(ce);ce.forEach(c),je=M(P),x(ee.$$.fragment,P),P.forEach(c),$.forEach(c),Ve=M(m),x(W.$$.fragment,m),Ie=M(m),x(X.$$.fragment,m),this.h()},h(){_(g,"class","capitalize"),_(o,"class","font-heading text-lg font-semibold"),_(J,"class","mb-0.5 rounded-full bg-neutral-600 py-0.5 text-center text-2xs text-neutral-300"),_(G,"class","text-xs"),_(S,"class","flex flex-col"),_(s,"class","relative z-10 -mx-5 flex flex-row items-start justify-between px-5 py-4 md:items-center md:bg-transparent md:pb-6"),_(t,"class","max-container"),_(k,"class","relative z-0"),_(ue,"class","relative z-10"),_(O,"class","max-container relative pb-60 pt-10 md:bg-transparent"),_(l,"class","flex-grow"),_(e,"class","flex h-full flex-grow flex-col justify-between bg-background")},m(m,$){v(m,e,$),p(e,l),H(r,l,null),p(l,n),p(l,t),p(t,s),p(s,o),p(o,f),p(o,u),p(o,z),p(o,b),p(o,g),p(g,d),p(s,T),p(s,S),p(S,J),p(J,be),p(S,we),p(S,G),p(G,oe),p(G,Ee),p(G,ie),p(l,Ce),p(l,O),p(O,k),p(O,xe),p(O,ue),H(Y,ue,null),p(O,He);for(let P=0;P<B.length;P+=1)B[P]&&B[P].m(O,null);p(l,je),H(ee,l,null),v(m,Ve,$),H(W,m,$),v(m,Ie,$),H(X,m,$),K=!0},p(m,$){(!K||$[0]&128)&&i!==(i=m[7]("default.page.fight.heading")+"")&&Z(f,i),(!K||$[0]&512)&&I!==(I=m[9]==="en"?"with":"mit")&&Z(z,I),(!K||$[0]&2)&&V!==(V=m[1].name+"")&&Z(d,V),(!K||$[0]&66)&&U!==(U=m[6](m[1].created)+"")&&Z(be,U),(!K||$[0]&512)&&re!==(re=m[9]==="en"?"on the":"am")&&Z(oe,re),(!K||$[0]&2)&&se!==(se=new Intl.DateTimeFormat("de-DE").format(new Date(m[1].created))+"")&&Z(ie,se);const P={};if($[0]&2&&(P.record=m[1]),Y.$set(P),$[0]&6){ne=ge(m[2]);let F;for(F=0;F<ne.length;F+=1){const ae=rt(m,ne,F);B[F]?(B[F].p(ae,$),C(B[F],1)):(B[F]=st(ae),B[F].c(),C(B[F],1),B[F].m(O,null))}for(ft(),F=ne.length;F<B.length;F+=1)mt(F);it()}const ke={};$[0]&144|$[1]&8&&(ke.$$scope={dirty:$,ctx:m}),ee.$set(ke);const te={};$[0]&184|$[1]&8&&(te.$$scope={dirty:$,ctx:m}),!Te&&$[0]&16&&(Te=!0,te.open=m[4],Ae(()=>Te=!1)),W.$set(te);const Q={};$[0]&896|$[1]&8&&(Q.$$scope={dirty:$,ctx:m}),!Se&&$[0]&8&&(Se=!0,Q.open=m[3],Ae(()=>Se=!1)),X.$set(Q)},i(m){if(!K){C(r.$$.fragment,m),C(Y.$$.fragment,m);for(let $=0;$<ne.length;$+=1)C(B[$]);C(ee.$$.fragment,m),C(W.$$.fragment,m),C(X.$$.fragment,m),K=!0}},o(m){D(r.$$.fragment,m),D(Y.$$.fragment,m),B=B.filter(Boolean);for(let $=0;$<B.length;$+=1)D(B[$]);D(ee.$$.fragment,m),D(W.$$.fragment,m),D(X.$$.fragment,m),K=!1},d(m){m&&(c(e),c(Ve),c(Ie)),j(r),j(Y),Re(B,m),j(ee),j(W,m),j(X,m)}}}function Vl(a){let e,l,r;return l=new Ut({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){e=w("div"),y(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var t=h(e);x(l.$$.fragment,t),t.forEach(c),this.h()},h(){_(e,"class","flex h-full flex-grow items-center justify-center")},m(n,t){v(n,e,t),H(l,e,null),r=!0},p:q,i(n){r||(C(l.$$.fragment,n),r=!0)},o(n){D(l.$$.fragment,n),r=!1},d(n){n&&c(e),j(l)}}}function st(a){let e,l='<div style="background: radial-gradient(circle at center, rgba(255,255,255,0.7), transparent 67%);" class="absolute left-96 top-20 z-0 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform"></div>',r,n,t,s,o;return t=new dt({props:{record:a[31],adversary:a[1].name}}),{c(){e=w("div"),e.innerHTML=l,r=L(),n=w("div"),y(t.$$.fragment),s=L(),this.h()},l(i){e=E(i,"DIV",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-k8dcr4"&&(e.innerHTML=l),r=M(i),n=E(i,"DIV",{class:!0});var f=h(n);x(t.$$.fragment,f),s=M(f),f.forEach(c),this.h()},h(){_(e,"class","relative z-0"),_(n,"class","relative z-10 mt-8")},m(i,f){v(i,e,f),v(i,r,f),v(i,n,f),H(t,n,null),p(n,s),o=!0},p(i,f){const u={};f[0]&4&&(u.record=i[31]),f[0]&2&&(u.adversary=i[1].name),t.$set(u)},i(i){o||(C(t.$$.fragment,i),o=!0)},o(i){D(t.$$.fragment,i),o=!1},d(i){i&&(c(e),c(r),c(n)),j(t)}}}function Il(a){let e,l;return e=new nl({props:{class:"h-4 w-4 rounded-full"}}),{c(){y(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){H(e,r,n),l=!0},p:q,i(r){l||(C(e.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),l=!1},d(r){j(e,r)}}}function zl(a){let e=a[7]("default.menu.share.cta")+"",l,r,n,t;return n=new _l({}),{c(){l=N(e),r=L(),y(n.$$.fragment)},l(s){l=A(s,e),r=M(s),x(n.$$.fragment,s)},m(s,o){v(s,l,o),v(s,r,o),H(n,s,o),t=!0},p(s,o){(!t||o[0]&128)&&e!==(e=s[7]("default.menu.share.cta")+"")&&Z(l,e)},i(s){t||(C(n.$$.fragment,s),t=!0)},o(s){D(n.$$.fragment,s),t=!1},d(s){s&&(c(l),c(r)),j(n,s)}}}function Ll(a){let e,l,r,n,t,s;return r=new Oe({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[Il]},$$scope:{ctx:a}}}),t=new Oe({props:{decoration:"dark-op1",class:"flex items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[zl]},$$scope:{ctx:a}}}),t.$on("click",a[15]),{c(){e=w("div"),l=w("a"),y(r.$$.fragment),n=L(),y(t.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var i=h(e);l=E(i,"A",{href:!0,class:!0});var f=h(l);x(r.$$.fragment,f),f.forEach(c),n=M(i),x(t.$$.fragment,i),i.forEach(c),this.h()},h(){_(l,"href","/dashboard"),_(l,"class","block"),_(e,"class","relative flex h-auto items-center justify-between")},m(o,i){v(o,e,i),p(e,l),H(r,l,null),p(e,n),H(t,e,null),s=!0},p(o,i){const f={};i[1]&8&&(f.$$scope={dirty:i,ctx:o}),r.$set(f);const u={};i[0]&128|i[1]&8&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){s||(C(r.$$.fragment,o),C(t.$$.fragment,o),s=!0)},o(o){D(r.$$.fragment,o),D(t.$$.fragment,o),s=!1},d(o){o&&c(e),j(r),j(t)}}}function Ml(a){let e=a[7]("default.menu.share.cta")+"",l;return{c(){l=N(e)},l(r){l=A(r,e)},m(r,n){v(r,l,n)},p(r,n){n[0]&128&&e!==(e=r[7]("default.menu.share.cta")+"")&&Z(l,e)},d(r){r&&c(l)}}}function yl(a){let e,l,r,n;return r=new Yt({props:{class:"text-red-600"}}),{c(){e=w("div"),l=w("div"),y(r.$$.fragment),this.h()},l(t){e=E(t,"DIV",{class:!0});var s=h(e);l=E(s,"DIV",{class:!0});var o=h(l);x(r.$$.fragment,o),o.forEach(c),s.forEach(c),this.h()},h(){_(l,"class","icon fill-feelings-foreground svelte-ljnb6t"),_(e,"class","label bg-feelings-background svelte-ljnb6t")},m(t,s){v(t,e,s),p(e,l),H(r,l,null),n=!0},p:q,i(t){n||(C(r.$$.fragment,t),n=!0)},o(t){D(r.$$.fragment,t),n=!1},d(t){t&&c(e),j(r)}}}function xl(a){let e,l,r,n,t;return l=new Wt({props:{$$slots:{default:[Ml]},$$scope:{ctx:a}}}),n=new Xt({props:{$$slots:{default:[yl]},$$scope:{ctx:a}}}),{c(){e=w("div"),y(l.$$.fragment),r=L(),y(n.$$.fragment),this.h()},l(s){e=E(s,"DIV",{class:!0});var o=h(e);x(l.$$.fragment,o),r=M(o),x(n.$$.fragment,o),o.forEach(c),this.h()},h(){_(e,"class","flex items-center justify-between")},m(s,o){v(s,e,o),H(l,e,null),p(e,r),H(n,e,null),t=!0},p(s,o){const i={};o[0]&128|o[1]&8&&(i.$$scope={dirty:o,ctx:s}),l.$set(i);const f={};o[1]&8&&(f.$$scope={dirty:o,ctx:s}),n.$set(f)},i(s){t||(C(l.$$.fragment,s),C(n.$$.fragment,s),t=!0)},o(s){D(l.$$.fragment,s),D(n.$$.fragment,s),t=!1},d(s){s&&c(e),j(l),j(n)}}}function Hl(a){let e,l=a[7]("default.menu.share.copyLink")+"",r,n,t,s,o,i,f=a[7]("default.menu.share.mailLink")+"",u,I,z,b,g,V;return t=new fl({}),z=new dl({}),{c(){e=w("button"),r=N(l),n=L(),y(t.$$.fragment),o=L(),i=w("button"),u=N(f),I=L(),y(z.$$.fragment),this.h()},l(d){e=E(d,"BUTTON",{class:!0});var T=h(e);r=A(T,l),n=M(T),x(t.$$.fragment,T),T.forEach(c),o=M(d),i=E(d,"BUTTON",{class:!0});var S=h(i);u=A(S,f),I=M(S),x(z.$$.fragment,S),S.forEach(c),this.h()},h(){_(e,"class","skeumorphic-button flex w-full items-center justify-between rounded-full px-4 py-1.5 text-sm svelte-ljnb6t"),_(i,"class","skeumorphic-button flex w-full items-center justify-between rounded-full px-4 py-1.5 text-sm svelte-ljnb6t")},m(d,T){v(d,e,T),p(e,r),p(e,n),H(t,e,null),v(d,o,T),v(d,i,T),p(i,u),p(i,I),H(z,i,null),b=!0,g||(V=[at(s=kl.call(null,e,a[5])),Pe(e,"svelte-copy",a[16]),Pe(i,"click",a[17])],g=!0)},p(d,T){(!b||T[0]&128)&&l!==(l=d[7]("default.menu.share.copyLink")+"")&&Z(r,l),s&&Vt(s.update)&&T[0]&32&&s.update.call(null,d[5]),(!b||T[0]&128)&&f!==(f=d[7]("default.menu.share.mailLink")+"")&&Z(u,f)},i(d){b||(C(t.$$.fragment,d),C(z.$$.fragment,d),b=!0)},o(d){D(t.$$.fragment,d),D(z.$$.fragment,d),b=!1},d(d){d&&(c(e),c(o),c(i)),j(t),j(z),g=!1,ot(V)}}}function jl(a){let e,l,r,n;return e=new Qt({props:{class:"w-full border-b border-black/10",$$slots:{default:[xl]},$$scope:{ctx:a}}}),r=new El({props:{class:"flex flex-col gap-4 pb-10",$$slots:{default:[Hl]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment),l=L(),y(r.$$.fragment)},l(t){x(e.$$.fragment,t),l=M(t),x(r.$$.fragment,t)},m(t,s){H(e,t,s),v(t,l,s),H(r,t,s),n=!0},p(t,s){const o={};s[0]&128|s[1]&8&&(o.$$scope={dirty:s,ctx:t}),e.$set(o);const i={};s[0]&184|s[1]&8&&(i.$$scope={dirty:s,ctx:t}),r.$set(i)},i(t){n||(C(e.$$.fragment,t),C(r.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),D(r.$$.fragment,t),n=!1},d(t){t&&c(l),j(e,t),j(r,t)}}}function Tl(a){let e,l;return e=new Kt({props:{class:"",$$slots:{default:[jl]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){H(e,r,n),l=!0},p(r,n){const t={};n[0]&184|n[1]&8&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(C(e.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),l=!1},d(r){j(e,r)}}}function Sl(a){let e=a[7]("default.menu.share.mailDialogText")+"",l;return{c(){l=N(e)},l(r){l=A(r,e)},m(r,n){v(r,l,n)},p(r,n){n[0]&128&&e!==(e=r[7]("default.menu.share.mailDialogText")+"")&&Z(l,e)},d(r){r&&c(l)}}}function Bl(a){let e;return{c(){e=N("E-Mail")},l(l){e=A(l,"E-Mail")},m(l,r){v(l,e,r)},d(l){l&&c(e)}}}function Fl(a){let e,l,r,n,t;e=new Ft({props:{class:"form-label",$$slots:{default:[Bl]},$$scope:{ctx:a}}});const s=[a[30],{type:"text"},{placeholder:a[9]==="en"?"E-Mail":"E-Mail Adresse"},{class:"mb-4"}];function o(f){a[19](f)}let i={};for(let f=0;f<s.length;f+=1)i=R(i,s[f]);return a[8].email!==void 0&&(i.value=a[8].email),r=new Nt({props:i}),Me.push(()=>Ze(r,"value",o)),{c(){y(e.$$.fragment),l=L(),y(r.$$.fragment)},l(f){x(e.$$.fragment,f),l=M(f),x(r.$$.fragment,f)},m(f,u){H(e,f,u),v(f,l,u),H(r,f,u),t=!0},p(f,u){const I={};u[1]&8&&(I.$$scope={dirty:u,ctx:f}),e.$set(I);const z=u[0]&1073742336?De(s,[u[0]&1073741824&&Lt(f[30]),s[1],u[0]&512&&{placeholder:f[9]==="en"?"E-Mail":"E-Mail Adresse"},s[3]]):{};!n&&u[0]&256&&(n=!0,z.value=f[8].email,Ae(()=>n=!1)),r.$set(z)},i(f){t||(C(e.$$.fragment,f),C(r.$$.fragment,f),t=!0)},o(f){D(e.$$.fragment,f),D(r.$$.fragment,f),t=!1},d(f){f&&c(l),j(e,f),j(r,f)}}}function Nl(a){let e,l,r,n;return e=new St({props:{$$slots:{default:[Fl,({attrs:t})=>({30:t}),({attrs:t})=>[t?1073741824:0]]},$$scope:{ctx:a}}}),r=new Bt({}),{c(){y(e.$$.fragment),l=L(),y(r.$$.fragment)},l(t){x(e.$$.fragment,t),l=M(t),x(r.$$.fragment,t)},m(t,s){H(e,t,s),v(t,l,s),H(r,t,s),n=!0},p(t,s){const o={};s[0]&1073742592|s[1]&8&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(C(e.$$.fragment,t),C(r.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),D(r.$$.fragment,t),n=!1},d(t){t&&c(l),j(e,t),j(r,t)}}}function Al(a){let e=a[7]("default.menu.share.cta")+"",l,r,n,t;return n=new al({}),{c(){l=N(e),r=L(),y(n.$$.fragment)},l(s){l=A(s,e),r=M(s),x(n.$$.fragment,s)},m(s,o){v(s,l,o),v(s,r,o),H(n,s,o),t=!0},p(s,o){(!t||o[0]&128)&&e!==(e=s[7]("default.menu.share.cta")+"")&&Z(l,e)},i(s){t||(C(n.$$.fragment,s),t=!0)},o(s){D(n.$$.fragment,s),t=!1},d(s){s&&(c(l),c(r)),j(n,s)}}}function Pl(a){let e,l,r,n,t,s,o,i;return l=new Tt({props:{form:a[10],name:"email",class:"w-full",$$slots:{default:[Nl]},$$scope:{ctx:a}}}),t=new Oe({props:{type:"submit",class:"flex items-center gap-3",$$slots:{default:[Al]},$$scope:{ctx:a}}}),{c(){e=w("form"),y(l.$$.fragment),r=L(),n=w("div"),y(t.$$.fragment),this.h()},l(f){e=E(f,"FORM",{class:!0});var u=h(e);x(l.$$.fragment,u),r=M(u),n=E(u,"DIV",{class:!0});var I=h(n);x(t.$$.fragment,I),I.forEach(c),u.forEach(c),this.h()},h(){_(n,"class","flex w-full justify-end"),_(e,"class","-mt-1 flex h-full flex-grow flex-col items-start")},m(f,u){v(f,e,u),H(l,e,null),p(e,r),p(e,n),H(t,n,null),s=!0,o||(i=[Pe(e,"submit",It(a[14])),at(a[12].call(null,e))],o=!0)},p(f,u){const I={};u[0]&768|u[1]&8&&(I.$$scope={dirty:u,ctx:f}),l.$set(I);const z={};u[0]&128|u[1]&8&&(z.$$scope={dirty:u,ctx:f}),t.$set(z)},i(f){s||(C(l.$$.fragment,f),C(t.$$.fragment,f),s=!0)},o(f){D(l.$$.fragment,f),D(t.$$.fragment,f),s=!1},d(f){f&&c(e),j(l),j(t),o=!1,ot(i)}}}function Zl(a){let e,l,r,n;return e=new rl({props:{class:"mb-10 max-w-[9em] leading-tight",$$slots:{default:[Sl]},$$scope:{ctx:a}}}),r=new sl({props:{$$slots:{default:[Pl]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment),l=L(),y(r.$$.fragment)},l(t){x(e.$$.fragment,t),l=M(t),x(r.$$.fragment,t)},m(t,s){H(e,t,s),v(t,l,s),H(r,t,s),n=!0},p(t,s){const o={};s[0]&128|s[1]&8&&(o.$$scope={dirty:s,ctx:t}),e.$set(o);const i={};s[0]&896|s[1]&8&&(i.$$scope={dirty:s,ctx:t}),r.$set(i)},i(t){n||(C(e.$$.fragment,t),C(r.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),D(r.$$.fragment,t),n=!1},d(t){t&&c(l),j(e,t),j(r,t)}}}function Ol(a){let e,l;return e=new ll({props:{$$slots:{default:[Zl]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){H(e,r,n),l=!0},p(r,n){const t={};n[0]&896|n[1]&8&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(C(e.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),l=!1},d(r){j(e,r)}}}function Rl(a){let e,l;return e=new tl({props:{$$slots:{default:[Ol]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){H(e,r,n),l=!0},p(r,n){const t={};n[0]&896|n[1]&8&&(t.$$scope={dirty:n,ctx:r}),e.$set(t)},i(r){l||(C(e.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),l=!1},d(r){j(e,r)}}}function ql(a){let e,l,r,n;const t=[Vl,Dl],s=[];function o(i,f){return i[0]?1:0}return e=o(a),l=s[e]=t[e](a),{c(){l.c(),r=Qe()},l(i){l.l(i),r=Qe()},m(i,f){s[e].m(i,f),v(i,r,f),n=!0},p(i,f){let u=e;e=o(i),e===u?s[e].p(i,f):(ft(),D(s[u],1,1,()=>{s[u]=null}),it(),l=s[e],l?l.p(i,f):(l=s[e]=t[e](i),l.c()),C(l,1),l.m(r.parentNode,r))},i(i){n||(C(l),n=!0)},o(i){D(l),n=!1},d(i){i&&c(r),s[e].d(i)}}}function Jl(a,e,l){let r,n,t,s,o,i;de(a,ut,k=>l(7,t=k)),de(a,ct,k=>l(9,o=k)),de(a,At,k=>l(13,i=k));let f=!1,u,I=[],z=!1,b=!1;const g=async()=>{l(1,u=await Le.collection("fights").getOne(i.params.id,{expand:"feelings, needs, owner"})),Le.collection("responses").subscribe("*",function(k){if(k.action==="create"&&k.record.fight===u.id){const fe=k.record;l(2,I=[...I,fe])}},{expand:"fight, feelings, needs"}),l(2,I=await Le.collection("responses").getFullList({filter:`fight = '${u.id}'`,expand:"fight, feelings, needs"}))},V=Zt(Ht(Ne)),d=async()=>{const k=await we(s,Ne);return k.valid?!0:(J.set(k.errors),!1)},T=Pt(V,{resetForm:!1,validators:jt(Ne),async onSubmit({validators:k,cancel:fe}){console.log("onSubmit"),fe(),await d()&&G()}}),{form:S,errors:J,enhance:U,validate:be,validateForm:we}=T;de(a,S,k=>l(8,s=k));const G=()=>{try{const k=fetch("/api/mails/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:"sendLink",locale:o,to:s.email,owner:u.expand.owner.firstName,recipientName:u.name,link:r})});console.log("sendMailRes",k),l(3,z=!1),Fe.success(t("default.menu.share.mailLinkConfirmation"))}catch{console.log("error sending link per mail"),Fe.error(t("default.menu.share.mailLinkError"))}};Ct(async()=>{await g(),l(0,f=!0),console.log("record",u),console.log("responses",I)}),kt(()=>{Le.collection("responses").unsubscribe("*")});function re(k){Dt.call(this,a,k)}const oe=()=>l(4,b=!0),Ee=()=>{l(4,b=!1),Fe.success(t("default.menu.share.copyLinkConfirmation"))},se=()=>(l(4,b=!1),l(3,z=!0));function ie(k){b=k,l(4,b)}function Ce(k){a.$$.not_equal(s.email,k)&&(s.email=k,S.set(s))}function O(k){z=k,l(3,z)}return a.$$.update=()=>{a.$$.dirty[0]&8192&&l(5,r=`${i.url.origin}/fights/${i.params.id}/respond`),a.$$.dirty[0]&3&&l(6,n=()=>f?Mt(u.created):"...")},[f,u,I,z,b,r,n,t,s,o,T,S,U,i,re,oe,Ee,se,ie,Ce,O]}class pr extends $e{constructor(e){super(),ve(this,e,Jl,ql,he,{},null,[-1,-1])}}export{pr as component};
