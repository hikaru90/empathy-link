import{s as ce,l as fe,w as pe,x as ve,b as w,f as u,y as m,z as be,i as H,h as f,n as oe,m as $e,o as Be,L as te,k as ne,N as Ie,e as V,t as A,a as z,c as I,d as L,g as M,j as O,J as je,C as ze,Q as Me}from"../chunks/scheduler.CKu2orG_.js";import{S as ue,i as de,g as le,b as y,f as re,t as b,c as q,a as J,m as Q,d as U}from"../chunks/index.DXc6nQ0s.js";import{g as Se,u as ye,t as Ce,e as we,S as Fe}from"../chunks/page.CjYSaJLb.js";import{e as He,S as Ne}from"../chunks/skeleton.C-vm2T2Q.js";import{B as Pe,M as Te}from"../chunks/Menu.DmxiePjz.js";import{p as Re}from"../chunks/pocketbase.Ce4YzWbP.js";import{g as xe}from"../chunks/entry.DV9I5Wjp.js";import{C as Ae,a as Le,b as Oe}from"../chunks/Cross2.C0A-LDkI.js";import"../chunks/memoize.CGCrhbMP.js";import"../chunks/schema.DW48twGu.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.QUt0y59N.js";import{B as qe}from"../chunks/index.CMzhSSGK.js";function Je(o){let e,t,l=[{width:o[1]},{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o[2]],r={};for(let a=0;a<l.length;a+=1)r=fe(r,l[a]);return{c(){e=pe("svg"),t=pe("path"),this.h()},l(a){e=ve(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=w(e);t=ve(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),w(t).forEach(u),s.forEach(u),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"clip-rule","evenodd"),m(t,"d","M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z"),m(t,"fill",o[0]),be(e,r)},m(a,s){H(a,e,s),f(e,t)},p(a,[s]){s&1&&m(t,"fill",a[0]),be(e,r=Se(l,[s&2&&{width:a[1]},s&2&&{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&a[2]]))},i:oe,o:oe,d(a){a&&u(e)}}}function Qe(o,e,t){const l=["color","size"];let r=$e(e,l),{color:a="currentColor"}=e,{size:s=15}=e;return o.$$set=i=>{e=fe(fe({},e),Be(i)),t(2,r=$e(e,l)),"color"in i&&t(0,a=i.color),"size"in i&&t(1,s=i.size)},[a,s,r]}class Ue extends ue{constructor(e){super(),de(this,e,Qe,Je,ce,{color:0,size:1})}}function ke(o,e,t){const l=o.slice();return l[10]=e[t],l}function Ze(o){let e,t,l,r=o[4]("default.page.dashboard.fights.tableCaption")+"",a,s,i,n,h=o[4]("default.page.dashboard.fights.table.round")+"",c,C,$,E=o[4]("default.page.dashboard.fights.table.partner")+"",Z,N,x,B=o[4]("default.page.dashboard.fights.table.date")+"",G,T,j,S=o[4]("default.page.dashboard.fights.table.opened")+"",K,ee,W,P,F,X,k,v=we(o[2]),_=[];for(let d=0;d<v.length;d+=1)_[d]=De(ke(o,v,d));const Y=d=>y(_[d],1,1,()=>{_[d]=null});let D=!o[3]&&Ee(o);return{c(){e=V("div"),t=V("div"),l=V("h2"),a=A(r),s=z(),i=V("div"),n=V("div"),c=A(h),C=z(),$=V("div"),Z=A(E),N=z(),x=V("div"),G=A(B),T=z(),j=V("div"),K=A(S),ee=z(),W=V("div"),P=z(),F=V("div");for(let d=0;d<_.length;d+=1)_[d].c();X=z(),D&&D.c(),this.h()},l(d){e=I(d,"DIV",{class:!0});var p=w(e);t=I(p,"DIV",{class:!0});var g=w(t);l=I(g,"H2",{class:!0});var se=w(l);a=L(se,r),se.forEach(u),s=M(g),i=I(g,"DIV",{class:!0});var R=w(i);n=I(R,"DIV",{class:!0});var he=w(n);c=L(he,h),he.forEach(u),C=M(R),$=I(R,"DIV",{class:!0});var _e=w($);Z=L(_e,E),_e.forEach(u),N=M(R),x=I(R,"DIV",{class:!0});var ge=w(x);G=L(ge,B),ge.forEach(u),T=M(R),j=I(R,"DIV",{class:!0});var me=w(j);K=L(me,S),me.forEach(u),ee=M(R),W=I(R,"DIV",{class:!0}),w(W).forEach(u),R.forEach(u),g.forEach(u),P=M(p),F=I(p,"DIV",{class:!0});var ae=w(F);for(let ie=0;ie<_.length;ie+=1)_[ie].l(ae);X=M(ae),D&&D.l(ae),ae.forEach(u),p.forEach(u),this.h()},h(){m(l,"class","text-md mb-2 font-bold"),m(n,"class","w-1/6"),m($,"class","w-1/3"),m(x,"class","w-1/4"),m(j,"class","w-1/6"),m(W,"class","w-1/6"),m(i,"class","flex items-center text-2xs"),m(t,"class","rounded-lg border-b border-black/5 bg-white px-4 pb-2 pt-3 shadow-2xl shadow-black/10"),m(F,"class","rounded-lg bg-white px-4 pb-3 pt-2 shadow-2xl shadow-black/10"),m(e,"class","")},m(d,p){H(d,e,p),f(e,t),f(t,l),f(l,a),f(t,s),f(t,i),f(i,n),f(n,c),f(i,C),f(i,$),f($,Z),f(i,N),f(i,x),f(x,G),f(i,T),f(i,j),f(j,K),f(i,ee),f(i,W),f(e,P),f(e,F);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(F,null);f(F,X),D&&D.m(F,null),k=!0},p(d,p){if((!k||p&16)&&r!==(r=d[4]("default.page.dashboard.fights.tableCaption")+"")&&O(a,r),(!k||p&16)&&h!==(h=d[4]("default.page.dashboard.fights.table.round")+"")&&O(c,h),(!k||p&16)&&E!==(E=d[4]("default.page.dashboard.fights.table.partner")+"")&&O(Z,E),(!k||p&16)&&B!==(B=d[4]("default.page.dashboard.fights.table.date")+"")&&O(G,B),(!k||p&16)&&S!==(S=d[4]("default.page.dashboard.fights.table.opened")+"")&&O(K,S),p&68){v=we(d[2]);let g;for(g=0;g<v.length;g+=1){const se=ke(d,v,g);_[g]?(_[g].p(se,p),b(_[g],1)):(_[g]=De(se),_[g].c(),b(_[g],1),_[g].m(F,X))}for(le(),g=v.length;g<_.length;g+=1)Y(g);re()}d[3]?D&&(le(),y(D,1,1,()=>{D=null}),re()):D?(D.p(d,p),p&8&&b(D,1)):(D=Ee(d),D.c(),b(D,1),D.m(F,null))},i(d){if(!k){for(let p=0;p<v.length;p+=1)b(_[p]);b(D),k=!0}},o(d){_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)y(_[p]);y(D),k=!1},d(d){d&&u(e),je(_,d),D&&D.d()}}}function Ge(o){let e,t;return e=new Ne({props:{class:"h-[20px] w-[100px] rounded-full"}}),{c(){q(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,r){Q(e,l,r),t=!0},p:oe,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ke(o){let e,t;return e=new Le({props:{class:"h-3 w-3 text-black"}}),{c(){q(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,r){Q(e,l,r),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function We(o){let e,t;return e=new Oe({props:{class:"h-3 w-3 text-black"}}),{c(){q(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,r){Q(e,l,r),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function De(o){var X;let e,t,l,r=((X=o[10].responses)==null?void 0:X.length)+1+"",a,s,i,n=o[10].name+"",h,c,C,$=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(o[10].created))+"",E,Z,N,x,B,G,T,j,S,K,ee;const W=[We,Ke],P=[];function F(k,v){return k[10].opened?0:1}return x=F(o),B=P[x]=W[x](o),j=new Ae({props:{class:"h-4 w-4 rounded-full group-hover:bg-neon group-hover:text-black"}}),{c(){e=V("button"),t=V("div"),l=V("div"),a=A(r),s=z(),i=V("div"),h=A(n),c=z(),C=V("div"),E=A($),Z=z(),N=V("div"),B.c(),G=z(),T=V("div"),q(j.$$.fragment),this.h()},l(k){e=I(k,"BUTTON",{class:!0});var v=w(e);t=I(v,"DIV",{class:!0});var _=w(t);l=I(_,"DIV",{class:!0});var Y=w(l);a=L(Y,r),Y.forEach(u),_.forEach(u),s=M(v),i=I(v,"DIV",{class:!0});var D=w(i);h=L(D,n),D.forEach(u),c=M(v),C=I(v,"DIV",{class:!0});var d=w(C);E=L(d,$),d.forEach(u),Z=M(v),N=I(v,"DIV",{class:!0});var p=w(N);B.l(p),p.forEach(u),G=M(v),T=I(v,"DIV",{class:!0});var g=w(T);J(j.$$.fragment,g),g.forEach(u),v.forEach(u),this.h()},h(){m(l,"class","scale-75 transform rounded-full bg-black/5 px-2.5 text-2xs font-bold"),m(t,"class","flex w-1/6"),m(i,"class","w-1/3"),m(C,"class","w-1/4"),m(N,"class","w-1/6"),m(T,"class","flex w-1/6 justify-end"),m(e,"class","group flex w-full items-center border-b border-black/5 py-2 text-left text-xs last:border-b-0 sm:py-3")},m(k,v){H(k,e,v),f(e,t),f(t,l),f(l,a),f(e,s),f(e,i),f(i,h),f(e,c),f(e,C),f(C,E),f(e,Z),f(e,N),P[x].m(N,null),f(e,G),f(e,T),Q(j,T,null),S=!0,K||(ee=ze(e,"click",function(){Me(o[6](o[10].id))&&o[6](o[10].id).apply(this,arguments)}),K=!0)},p(k,v){var Y;o=k,(!S||v&4)&&r!==(r=((Y=o[10].responses)==null?void 0:Y.length)+1+"")&&O(a,r),(!S||v&4)&&n!==(n=o[10].name+"")&&O(h,n),(!S||v&4)&&$!==($=new Intl.DateTimeFormat("de-DE",{month:"short",day:"numeric"}).format(new Date(o[10].created))+"")&&O(E,$);let _=x;x=F(o),x!==_&&(le(),y(P[_],1,1,()=>{P[_]=null}),re(),B=P[x],B||(B=P[x]=W[x](o),B.c()),b(B,1),B.m(N,null))},i(k){S||(b(B),b(j.$$.fragment,k),S=!0)},o(k){y(B),y(j.$$.fragment,k),S=!1},d(k){k&&u(e),P[x].d(),U(j),K=!1,ee()}}}function Ee(o){let e,t,l,r;const a=[Ye,Xe],s=[];function i(n,h){return n[1]?1:0}return e=i(o),t=s[e]=a[e](o),{c(){t.c(),l=te()},l(n){t.l(n),l=te()},m(n,h){s[e].m(n,h),H(n,l,h),r=!0},p(n,h){let c=e;e=i(n),e===c?s[e].p(n,h):(le(),y(s[c],1,1,()=>{s[c]=null}),re(),t=s[e],t?t.p(n,h):(t=s[e]=a[e](n),t.c()),b(t,1),t.m(l.parentNode,l))},i(n){r||(b(t),r=!0)},o(n){y(t),r=!1},d(n){n&&u(l),s[e].d(n)}}}function Xe(o){let e,t,l;return t=new Fe({props:{fast:!0,class:"h-6 w-16 shadow-xl dark:shadow-gray-200/30"}}),{c(){e=V("div"),q(t.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var a=w(e);J(t.$$.fragment,a),a.forEach(u),this.h()},h(){m(e,"class","mt-4 flex justify-center")},m(r,a){H(r,e,a),Q(t,e,null),l=!0},p:oe,i(r){l||(b(t.$$.fragment,r),l=!0)},o(r){y(t.$$.fragment,r),l=!1},d(r){r&&u(e),U(t)}}}function Ye(o){let e,t,l;return t=new Pe({props:{$$slots:{default:[et]},$$scope:{ctx:o}}}),t.$on("click",o[5]),{c(){e=V("div"),q(t.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var a=w(e);J(t.$$.fragment,a),a.forEach(u),this.h()},h(){m(e,"class","mt-4 flex justify-center")},m(r,a){H(r,e,a),Q(t,e,null),l=!0},p(r,a){const s={};a&8208&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){l||(b(t.$$.fragment,r),l=!0)},o(r){y(t.$$.fragment,r),l=!1},d(r){r&&u(e),U(t)}}}function et(o){let e=o[4]("default.page.fights.loadMore")+"",t;return{c(){t=A(e)},l(l){t=L(l,e)},m(l,r){H(l,t,r)},p(l,r){r&16&&e!==(e=l[4]("default.page.fights.loadMore")+"")&&O(t,e)},d(l){l&&u(t)}}}function tt(o){let e,t,l,r;const a=[Ge,Ze],s=[];function i(n,h){return n[0]?1:0}return e=i(o),t=s[e]=a[e](o),{c(){t.c(),l=te()},l(n){t.l(n),l=te()},m(n,h){s[e].m(n,h),H(n,l,h),r=!0},p(n,[h]){let c=e;e=i(n),e===c?s[e].p(n,h):(le(),y(s[c],1,1,()=>{s[c]=null}),re(),t=s[e],t?t.p(n,h):(t=s[e]=a[e](n),t.c()),b(t,1),t.m(l.parentNode,l))},i(n){r||(b(t),r=!0)},o(n){y(t),r=!1},d(n){n&&u(l),s[e].d(n)}}}const lt=5;function rt(o,e,t){let l,r;ne(o,ye,E=>t(8,l=E)),ne(o,Ce,E=>t(4,r=E));let a=!1,s=!0,i=[],n=1,h=!1;const c=async()=>{t(1,s=!0);const E=await Re.collection("fights").getList(n,lt,{filter:`owner = '${l.id}'`,sort:"-updated",expand:"responses"});E.items.length===0&&t(3,h=!0),t(2,i=[...i,...E.items]),t(1,s=!1)};He.subscribe(async()=>{console.log("endDate changed -> fetching data"),t(1,s=!0),await c(),setTimeout(()=>{t(1,s=!1)},200)});const C=()=>{n++,c()},$=E=>{console.log("gotoFight"),xe(`/fights/${E}`)};return Ie(async()=>{await c(),console.log("records",i),t(0,a=!0),t(1,s=!1),console.log("$user",l)}),[a,s,i,h,r,C,$]}class st extends ue{constructor(e){super(),de(this,e,rt,tt,ce,{})}}function Ve(o){let e,t,l,r,a,s,i,n,h;return l=new Te({}),s=new qe({props:{class:"flex items-center justify-between gap-10 px-3 py-5 font-bold text-black shadow-lg dark:shadow-gray-300/30 lg:px-6 lg:py-7 lg:text-lg",$$slots:{default:[at]},$$scope:{ctx:o}}}),n=new st({}),{c(){e=V("div"),t=V("div"),q(l.$$.fragment),r=z(),a=V("a"),q(s.$$.fragment),i=z(),q(n.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var C=w(e);t=I(C,"DIV",{class:!0});var $=w(t);J(l.$$.fragment,$),r=M($),a=I($,"A",{href:!0,class:!0});var E=w(a);J(s.$$.fragment,E),E.forEach(u),i=M($),J(n.$$.fragment,$),$.forEach(u),C.forEach(u),this.h()},h(){m(a,"href","/fights/create"),m(a,"class","flex w-full items-center justify-center rounded-lg border border-border py-4 lg:py-12 mb-10"),m(t,"class","max-container flex-grow py-10"),m(e,"class","flex h-full flex-grow flex-col justify-between")},m(c,C){H(c,e,C),f(e,t),Q(l,t,null),f(t,r),f(t,a),Q(s,a,null),f(t,i),Q(n,t,null),h=!0},p(c,C){const $={};C&6&&($.$$scope={dirty:C,ctx:c}),s.$set($)},i(c){h||(b(l.$$.fragment,c),b(s.$$.fragment,c),b(n.$$.fragment,c),h=!0)},o(c){y(l.$$.fragment,c),y(s.$$.fragment,c),y(n.$$.fragment,c),h=!1},d(c){c&&u(e),U(l),U(s),U(n)}}}function at(o){let e=o[1]("default.page.fights.create")+"",t,l,r,a;return r=new Ue({props:{class:"h-5 w-5"}}),{c(){t=A(e),l=z(),q(r.$$.fragment)},l(s){t=L(s,e),l=M(s),J(r.$$.fragment,s)},m(s,i){H(s,t,i),H(s,l,i),Q(r,s,i),a=!0},p(s,i){(!a||i&2)&&e!==(e=s[1]("default.page.fights.create")+"")&&O(t,e)},i(s){a||(b(r.$$.fragment,s),a=!0)},o(s){y(r.$$.fragment,s),a=!1},d(s){s&&(u(t),u(l)),U(r,s)}}}function ot(o){let e,t,l=o[0]&&Ve(o);return{c(){l&&l.c(),e=te()},l(r){l&&l.l(r),e=te()},m(r,a){l&&l.m(r,a),H(r,e,a),t=!0},p(r,[a]){r[0]?l?(l.p(r,a),a&1&&b(l,1)):(l=Ve(r),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),y(l,1,1,()=>{l=null}),re())},i(r){t||(b(l),t=!0)},o(r){y(l),t=!1},d(r){r&&u(e),l&&l.d(r)}}}function nt(o,e,t){let l,r;return ne(o,ye,a=>t(0,l=a)),ne(o,Ce,a=>t(1,r=a)),Ie(()=>{l||xe("/auth/login")}),[l,r]}class $t extends ue{constructor(e){super(),de(this,e,nt,ot,ce,{})}}export{$t as component};
