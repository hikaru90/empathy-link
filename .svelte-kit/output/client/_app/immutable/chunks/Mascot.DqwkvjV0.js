import{s as R,e as w,a as N,c as k,b as $,f as g,g as A,p as _,i as E,h as y,k as U,_ as le,n as H,t as q,d as W,j as G,y as K,x as ae,D as O,E as ce,L as oe}from"./scheduler.BmBrB_dT.js";import{S as Q,i as X,b as D,d as j,m as S,g as Y,t as C,c as Z,a as x,e as J}from"./index.BQZQ5DB3.js";import{t as ie,l as ue,f as fe}from"./helpers.g8wrkI0H.js";import{B as M}from"./button.D_ITeu-i.js";import{C as de}from"./CaretLeft.Cs-VcT_4.js";import{A as ee,C as me,c as he}from"./textarea.BCQgmsBQ.js";function ge(o){let e,r;return e=new de({props:{class:"h-4 w-4 rounded-full"}}),{c(){D(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p:H,i(t){r||(x(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function pe(o){let e,r;return e=new M({props:{type:"submit",decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){D(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const c={};n&264&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){r||(x(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function be(o){let e,r;return e=new M({props:{decoration:"dark-op1",wrapperClass:"w-full",class:"flex w-full items-center gap-2 border-neutral-900 bg-neutral-800 text-sm text-zinc-200",$$slots:{default:[ve]},$$scope:{ctx:o}}}),e.$on("click",o[5]),{c(){D(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const c={};n&264&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){r||(x(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function _e(o){let e=o[3]("default.page.fights.form.general.next")+"",r,t,n,c;return n=new ee({props:{class:"h-3 w-3"}}),{c(){r=q(e),t=N(),D(n.$$.fragment)},l(s){r=W(s,e),t=A(s),j(n.$$.fragment,s)},m(s,l){E(s,r,l),E(s,t,l),S(n,s,l),c=!0},p(s,l){(!c||l&8)&&e!==(e=s[3]("default.page.fights.form.general.next")+"")&&G(r,e)},i(s){c||(x(n.$$.fragment,s),c=!0)},o(s){C(n.$$.fragment,s),c=!1},d(s){s&&(g(r),g(t)),J(n,s)}}}function ve(o){let e=o[3]("default.page.fights.form.general.checkJudgement")+"",r,t,n,c;return n=new ee({props:{class:"h-3 w-3"}}),{c(){r=q(e),t=N(),D(n.$$.fragment)},l(s){r=W(s,e),t=A(s),j(n.$$.fragment,s)},m(s,l){E(s,r,l),E(s,t,l),S(n,s,l),c=!0},p(s,l){(!c||l&8)&&e!==(e=s[3]("default.page.fights.form.general.checkJudgement")+"")&&G(r,e)},i(s){c||(x(n.$$.fragment,s),c=!0)},o(s){C(n.$$.fragment,s),c=!1},d(s){s&&(g(r),g(t)),J(n,s)}}}function ye(o){let e,r,t,n,c,s,l,f,d;t=new M({props:{decoration:"dark-op1",class:"flex items-center border-neutral-900 bg-neutral-800 px-1.5 text-sm text-zinc-200",$$slots:{default:[ge]},$$scope:{ctx:o}}}),t.$on("click",o[4]);const v=[be,pe],u=[];function p(a,i){return a[1]?0:1}return s=p(o),l=u[s]=v[s](o),{c(){e=w("div"),r=w("div"),D(t.$$.fragment),c=N(),l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var i=$(e);r=k(i,"DIV",{class:!0});var m=$(r);j(t.$$.fragment,m),m.forEach(g),c=A(i),l.l(i),i.forEach(g),this.h()},h(){_(r,"class",n=(o[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"),_(e,"class",f="flex justify-between "+o[2])},m(a,i){E(a,e,i),y(e,r),S(t,r,null),y(e,c),u[s].m(e,null),d=!0},p(a,[i]){const m={};i&256&&(m.$$scope={dirty:i,ctx:a}),t.$set(m),(!d||i&1&&n!==(n=(a[0]>1?"max-w-60 opacity-100":"max-w-0 opacity-0")+" group relative transform overflow-visible"))&&_(r,"class",n);let b=s;s=p(a),s===b?u[s].p(a,i):(Y(),C(u[b],1,1,()=>{u[b]=null}),Z(),l=u[s],l?l.p(a,i):(l=u[s]=v[s](a),l.c()),x(l,1),l.m(e,null)),(!d||i&4&&f!==(f="flex justify-between "+a[2]))&&_(e,"class",f)},i(a){d||(x(t.$$.fragment,a),x(l),d=!0)},o(a){C(t.$$.fragment,a),C(l),d=!1},d(a){a&&g(e),J(t),u[s].d()}}}function we(o,e,r){let t;U(o,ie,u=>r(3,t=u));const n=le();let{step:c}=e,{checkForJudgement:s}=e,{class:l=void 0}=e,{primaryButtonClass:f=void 0}=e;const d=()=>{console.log("toPrev"),n("toPrev")},v=()=>{n("validateObservation")};return o.$$set=u=>{"step"in u&&r(0,c=u.step),"checkForJudgement"in u&&r(1,s=u.checkForJudgement),"class"in u&&r(2,l=u.class),"primaryButtonClass"in u&&r(6,f=u.primaryButtonClass)},[c,s,l,t,d,v,f]}class Se extends Q{constructor(e){super(),X(this,e,we,ye,R,{step:0,checkForJudgement:1,class:2,primaryButtonClass:6})}}function ke(o){let e;return{c(){e=w("div"),this.h()},l(r){e=k(r,"DIV",{id:!0,class:!0}),$(e).forEach(g),this.h()},h(){_(e,"id","speechBubble"),_(e,"class","w-full")},m(r,t){E(r,e,t),o[11](e)},p:H,d(r){r&&g(e),o[11](null)}}}function xe(o){let e,r="...";return{c(){e=w("div"),e.textContent=r,this.h()},l(t){e=k(t,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),K(e)!=="svelte-534rav"&&(e.textContent=r),this.h()},h(){_(e,"id","speechBubble"),_(e,"class","w-full")},m(t,n){E(t,e,n)},p:H,d(t){t&&g(e)}}}function P(o){let e,r,t,n,c,s,l,f,d,v;return n=new me({props:{class:"size-2.5"}}),l=new he({props:{class:"size-2.5"}}),{c(){e=w("div"),r=w("div"),t=w("button"),D(n.$$.fragment),c=N(),s=w("button"),D(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var p=$(e);r=k(p,"DIV",{class:!0});var a=$(r);t=k(a,"BUTTON",{class:!0});var i=$(t);j(n.$$.fragment,i),i.forEach(g),c=A(a),s=k(a,"BUTTON",{class:!0});var m=$(s);j(l.$$.fragment,m),m.forEach(g),a.forEach(g),p.forEach(g),this.h()},h(){_(t,"class","chevron svelte-12yl6i5"),_(s,"class","chevron svelte-12yl6i5"),_(r,"class","-mr-1 flex flex-col items-center gap-0.5"),_(e,"class","flex justify-end text-2xs")},m(u,p){E(u,e,p),y(e,r),y(r,t),S(n,t,null),y(r,c),y(r,s),S(l,s,null),f=!0,d||(v=[O(t,"click",o[12]),O(s,"click",o[13])],d=!0)},p:H,i(u){f||(x(n.$$.fragment,u),x(l.$$.fragment,u),f=!0)},o(u){C(n.$$.fragment,u),C(l.$$.fragment,u),f=!1},d(u){u&&g(e),J(n),J(l),d=!1,ce(v)}}}function Ce(o){let e,r,t=`<div style="background-image: url(&#39;${fe}&#39;); background-size: 300% 100%" class="animate-bg relative z-10 flex h-full w-[60px] items-center justify-center rounded-b rounded-t-[50px] shadow-lg transition duration-700"><div data-name="face" class="lookaround face-3 flex flex-col gap-1 svelte-12yl6i5"><div data-name="eyes" class="eyes flex items-center justify-center gap-2"><div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div> <div class="h-2 w-2 rounded-full border-2 border-white bg-black shadow-md"></div></div> <div data-name="mouth" class="mouth flex items-center justify-center svelte-12yl6i5"><div class="h-1.5 w-2.5 rounded-b-full bg-black"></div></div></div></div>`,n,c,s,l,f,d,v;function u(m,b){return m[2]?xe:ke}let p=u(o),a=p(o),i=o[1].length>1&&P(o);return{c(){e=w("div"),r=w("div"),r.innerHTML=t,n=N(),c=w("div"),s=w("div"),l=N(),f=w("div"),a.c(),d=N(),i&&i.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var b=$(e);r=k(b,"DIV",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-ido9h0"&&(r.innerHTML=t),n=A(b),c=k(b,"DIV",{class:!0});var V=$(c);s=k(V,"DIV",{class:!0}),$(s).forEach(g),l=A(V),f=k(V,"DIV",{class:!0});var z=$(f);a.l(z),d=A(z),i&&i.l(z),z.forEach(g),V.forEach(g),b.forEach(g),this.h()},h(){_(r,"class","relative left-0 right-0 flex h-12 flex-shrink-0 justify-center gap-1"),_(s,"class","triangle size-3 flex-shrink-0 bg-muted svelte-12yl6i5"),_(f,"class","rounded-tl-0 relative flex flex-grow rounded-b rounded-tr bg-muted px-2 pb-2 pt-1 text-sm leading-tight gap-2"),_(c,"class","flex flex-grow"),_(e,"class","mt-4 flex items-start gap-2")},m(m,b){E(m,e,b),y(e,r),y(e,n),y(e,c),y(c,s),y(c,l),y(c,f),a.m(f,null),y(f,d),i&&i.m(f,null),v=!0},p(m,[b]){p===(p=u(m))&&a?a.p(m,b):(a.d(1),a=p(m),a&&(a.c(),a.m(f,d))),m[1].length>1?i?(i.p(m,b),b&2&&x(i,1)):(i=P(m),i.c(),x(i,1),i.m(f,null)):i&&(Y(),C(i,1,1,()=>{i=null}),Z())},i(m){v||(x(i),v=!0)},o(m){C(i),v=!1},d(m){m&&g(e),a.d(),i&&i.d()}}}function $e(o,e,r){let t,n;U(o,ue,h=>r(15,n=h));let{step:c}=e,{stepName:s}=e,{formSuccess:l}=e,{speechBubbleContentArray:f}=e,d=0,v=!1;const u=(h,B)=>{try{return B===13&&!h?f.find(I=>I.step===13).errorContent:f.find(I=>I.step===B).content}catch(I){return console.error("error in getSpeechBubbleContent",I),[]}};let p,a;const i=(h,B,I)=>{try{let F=function(){L<B.length&&(h.innerHTML+=B.charAt(L),L++,a=setTimeout(F,I))};console.log("typeText");let L=0;h.innerHTML="";const T=document.createElement("div");T.style.visibility="hidden",T.style.position="absolute",T.style.width=`${h.clientWidth}px`,T.style.color="red",T.style.whiteSpace="pre-wrap",T.innerText=B,h.appendChild(T);const ne=T.clientHeight;h.style.height=`${ne}px`,h.removeChild(T),a&&clearTimeout(a),F()}catch(F){console.error("error typing text",F)}},m=(h="Hi")=>{r(1,t=[t[0],h]),r(10,d=1)},b=async h=>{r(2,v=!0);try{const I=await(await fetch("/api/ai/checkForJudgement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:h,lang:n})})).json();r(2,v=!1);const F=I.result;m(F)}catch(B){console.error("error in getting judgement",B)}},V=()=>{console.log("decreaseIndex"),d>0&&r(10,d--,d)},z=()=>{console.log("increaseIndex"),t.length>1&&d===0&&r(10,d++,d)};ae(()=>{a&&clearTimeout(a)});function te(h){oe[h?"unshift":"push"](()=>{p=h,r(0,p)})}const re=()=>V(),se=()=>z();return o.$$set=h=>{"step"in h&&r(5,c=h.step),"stepName"in h&&r(6,s=h.stepName),"formSuccess"in h&&r(7,l=h.formSuccess),"speechBubbleContentArray"in h&&r(8,f=h.speechBubbleContentArray)},o.$$.update=()=>{o.$$.dirty&160&&r(1,t=u(l,c)),o.$$.dirty&32&&r(10,d=0),o.$$.dirty&1027&&p&&(console.log("inside if speechBubbleElement"),i(p,t[d],30))},[p,t,v,V,z,c,s,l,f,b,d,te,re,se]}class Je extends Q{constructor(e){super(),X(this,e,$e,Ce,R,{step:5,stepName:6,formSuccess:7,speechBubbleContentArray:8,checkJudgement:9})}get checkJudgement(){return this.$$.ctx[9]}}export{Se as F,Je as M};
